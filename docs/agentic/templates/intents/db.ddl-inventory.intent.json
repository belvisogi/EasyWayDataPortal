{
  "id": "db.ddl-inventory",
  "what": {
    "purpose": "Rigenerare l'inventario DB (tabelle + stored procedure) a partire dai DDL sotto DataBase/ e aggiornare la pagina Wiki canonica (ddl-inventory).",
    "inputs": {
      "dbDir": { "type": "string", "default": "DataBase", "description": "Cartella che contiene i DDL (source-of-truth)." },
      "writeWiki": { "type": "boolean", "default": true, "description": "Se true aggiorna la pagina Wiki ddl-inventory.md." },
      "summaryOut": { "type": "string", "default": "db-ddl-inventory.json", "description": "Percorso output JSON (machine-readable)." }
    },
    "outputs": {
      "ok": { "type": "boolean" },
      "counts": { "type": "object", "description": "Conteggi inventario (tables, storedProcedures, ecc.)." },
      "wikiPage": { "type": "string", "description": "Percorso pagina aggiornata (se writeWiki=true)." },
      "artifacts": { "type": "array", "items": { "type": "string" }, "description": "File generati o aggiornati." }
    },
    "events": ["db.ddl-inventory.started", "db.ddl-inventory.completed"],
    "success_criteria": ["DDL parsati senza errori", "Inventario generato", "Wiki aggiornata (se richiesto)"],
    "failure_criteria": ["DDL mancanti/non leggibili", "Parsing fallito", "Scrittura Wiki fallita"]
  }
}

