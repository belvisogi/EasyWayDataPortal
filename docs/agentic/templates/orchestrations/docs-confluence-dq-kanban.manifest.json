{
  "id": "docs-confluence-dq-kanban",
  "version": "0.1.0",
  "principle": "Doc-as-Data Quality su Confluence Cloud: export read-only + Kanban page dedicata con update HITL e reversibile",
  "intent": {
    "name": "docs.confluence.dq.kanban",
    "description": "Esporta pagine da Confluence Cloud e crea/aggiorna una pagina Kanban dedicata per la DQ della documentazione.",
    "trigger": "docs.confluence.dq.kanban.requested"
  },
  "roles": {
    "requester": "Operatore/team che vuole audit DQ su Confluence.",
    "agent_docs_review": "Esegue export e prepara la board; apply solo con WhatIf:$false.",
    "steward_governance": "Approva write-back su Confluence (HITL)."
  },
  "runner": {
    "engine": "ps",
    "plan_command": "pwsh scripts/confluence-dq-board.ps1 -IntentPath \"scripts/intents/docs-dq-confluence-cloud-001.json\" -PlanOnly",
    "apply_command": "pwsh scripts/confluence-dq-board.ps1 -IntentPath \"scripts/intents/docs-dq-confluence-cloud-001.json\" -Export -UpdateBoard -WhatIf"
  },
  "stages": [
    { "name": "received", "purpose": "Ricevere richiesta e inizializzare correlationId", "entry_criteria": ["docs.confluence.dq.kanban.requested"], "inputs": ["intent_payload"], "outputs": ["correlationId"], "success_criteria": ["Payload ricevuto"], "failure_criteria": ["Payload mancante"], "human_checkpoints": [], "ux_prompts": "generic_received" },
    { "name": "validated", "purpose": "Validare parametri e credenziali via env", "entry_criteria": ["received.success"], "inputs": ["intent_payload"], "outputs": ["validation_ok"], "success_criteria": ["Parametri coerenti"], "failure_criteria": ["Parametri mancanti"], "human_checkpoints": [], "ux_prompts": "generic_validated" },
    { "name": "exported", "purpose": "Export Confluence (read-only)", "entry_criteria": ["validated.success"], "inputs": ["intent_payload"], "outputs": ["pagesOut"], "success_criteria": ["pages.jsonl prodotto"], "failure_criteria": ["Export fallito"], "human_checkpoints": [], "ux_prompts": "generic_executed" },
    { "name": "board_updated", "purpose": "Opzionale: crea/aggiorna pagina Kanban (HITL)", "entry_criteria": ["exported.success", "human_approved.writeback"], "inputs": ["intent_payload"], "outputs": ["boardPageId"], "success_criteria": ["Pagina creata/aggiornata"], "failure_criteria": ["Update fallito"], "human_checkpoints": ["Approvazione write-back"], "ux_prompts": "generic_executed" },
    { "name": "completed", "purpose": "Chiudere run con artifact e next step", "entry_criteria": ["exported.success"], "inputs": ["pagesOut", "boardPageId"], "outputs": ["run_summary"], "success_criteria": ["Output finale disponibile"], "failure_criteria": [], "human_checkpoints": [], "ux_prompts": "generic_done" }
  ],
  "observability": {
    "diary_log_fields": ["timestamp", "stage", "outcome", "reason", "next", "decision_trace_id", "artifacts[]"],
    "decision_trace_policy": "Propagare correlationId/decision_trace_id su tutti gli eventi e artifact"
  }
}

