{
  "version": "1.0",
  "source_scopes_path": "docs/agentic/templates/docs/tag-taxonomy.scopes.json",
  "notes": [
    "Questo file è pensato per retrieval mirato (es. n8n): un workflow carica solo gli scope necessari, riducendo token e rumore.",
    "Gli scope referenziati devono esistere in tag-taxonomy.scopes.json.",
    "Evitare di includere pagine shim/obsolete: usare status: deprecated + llm.include=false per i redirect."
  ],
  "default_exclude_globs": [
    ".attachments/**",
    "logs/reports/**",
    "old/**",
    "**/*.bak*"
  ],
  "bundles": {
    "codex.dev.core": {
      "intent": "codex.dev.core",
      "description": "Bundle minimale per GPT-5.2 Codex quando deve sviluppare codice sotto portal-api/ (contesto governance + portal + security, senza rileggere tutta la Wiki).",
      "scopes": [
        "governance-all",
        "portal-all",
        "security-all"
      ],
      "code_roots": [
        "portal-api/"
      ],
      "code_entrypoints": [
        "portal-api/README.md",
        "portal-api/easyway-portal-api/README.md",
        "portal-api/easyway-portal-api/src/app.ts",
        "portal-api/easyway-portal-frontend/static/plan-viewer.html"
      ]
    },
    "n8n.orchestrator-dispatch": {
      "intent": "orchestrator.n8n.dispatch",
      "description": "Webhook → validate → gate precheck → dispatch ewctl → log (governance + ops + quality gates).",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
        "n8n.controlplane.scripts": {
      "intent": "controlplane.scripts",
      "description": "Contesto control-plane + accesso on-demand agli script PowerShell (da recuperare solo quando necessario, per evitare rumore).",
      "scopes": [
        "governance-all",
        "security-all"
      ],
      "code_roots": [
        "scripts/",
        "agents/"
      ],
      "code_entrypoints": [
        "scripts/ewctl.ps1",
        "scripts/agent-docs-review.ps1",
        "scripts/agents-readme-sync.ps1",
        "scripts/agents-manifest-audit.ps1",
        "agents/kb/recipes.jsonl"
      ]
    },"n8n.wf.excel-csv-upload": {
      "intent": "wf.excel-csv-upload",
      "description": "Workflow Excel/CSV upload end-to-end (UX + API + data layer).",
      "scopes": [
        "portal-all",
        "data-all",
        "security-all",
        "governance-all"
      ]
    },
    "n8n.iam-security": {
      "intent": "iam.security",
      "description": "Contesto IAM/Security/Compliance per evitare ambiguità su permessi/policy.",
      "scopes": [
        "security-all",
        "governance-all"
      ]
    },
    "n8n.db.core": {
      "intent": "db.ddl-inventory",
      "description": "Contesto DB minimale per n8n: architettura DB + inventario DDL (tabelle/SP) + governance essenziale.",
      "scopes": [
        "data-all",
        "governance-all"
      ],
      "code_roots": [
        "db/flyway/",
        "db/provisioning/"
      ]
    },
    "n8n.db.table.create": {
      "intent": "db.table.create",
      "description": "Creazione tabella (WHAT-first): carica solo contesto DB+security+governance e i root tecnici per generare artefatti.",
      "scopes": [
        "data-all",
        "security-all",
        "governance-all"
      ],
      "code_roots": [
        "db/flyway/",
        "db/provisioning/"
      ]
    },
    "ingest.upload-file": {
      "intent": "ingest.upload-file",
      "description": "Ingest/upload file: validazione base, storage target e vincoli multi-tenant.",
      "scopes": [
        "portal-all",
        "data-all",
        "security-all",
        "governance-all"
      ]
    },
    "schema.map-suggest": {
      "intent": "schema.map-suggest",
      "description": "Suggerimento mapping schema (colonne→target) con contesto dati e convenzioni.",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "schema.map-apply": {
      "intent": "schema.map-apply",
      "description": "Applicazione mapping schema (staging/target) e regole di naming/validazione.",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "dq.validate": {
      "intent": "dq.validate",
      "description": "Data quality validation (regole, report, gates) in contesto ETL/Datalake.",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "etl.load-staging": {
      "intent": "etl.load-staging",
      "description": "Caricamento dati in staging (pattern ETL/ELT, logging, error handling).",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "etl.merge-target": {
      "intent": "etl.merge-target",
      "description": "Merge staging→target (upsert, idempotenza, audit/log).",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "analytics.materialize-defaults": {
      "intent": "analytics.materialize-defaults",
      "description": "Materializzazione viste/defaults analytics (tabelle, modelli, compatibilità).",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "docs.core": {
      "intent": "docs.core",
      "description": "Contesto base di governance docs (indice + convenzioni + cataloghi).",
      "scopes": [
        "core"
      ]
    },

    "ado-bestpractice-prefetch": {
      "intent": "ado-bestpractice-prefetch",
      "description": "ADO: prefetch best practices (Wiki + esterne) per creare item in modo governato.",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
    "ado-bootstrap": {
      "intent": "ado-bootstrap",
      "description": "ADO: bootstrap progetto (area/iteration/backlog seed) con policy e governance.",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
    "ado-userstory-create": {
      "intent": "ado-userstory-create",
      "description": "ADO: creazione User Story/Task in modo governato (con prefetch e checklist).",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
    "agent.scaffold": {
      "intent": "agent.scaffold",
      "description": "Scaffold di un nuovo agente (WHAT-first, policy, manifest, KB/Wiki).",
      "scopes": [
        "governance-all",
        "security-all",
        "portal-all"
      ]
    },

    "api.error.triage": {
      "intent": "api.error.triage",
      "description": "API: triage errori (log, cause probabili, fix e verify).",
      "scopes": [
        "portal-all",
        "security-all",
        "governance-all"
      ]
    },
    "api.openapi.validate": {
      "intent": "api.openapi.validate",
      "description": "API: validazione OpenAPI e contratti (policy, error model, lint).",
      "scopes": [
        "portal-all",
        "security-all",
        "governance-all"
      ]
    },
    "api.rbac.configure": {
      "intent": "api.rbac.configure",
      "description": "API: configurazione RBAC/claims/permessi (multi-tenant, security).",
      "scopes": [
        "portal-all",
        "security-all",
        "governance-all"
      ]
    },

    "apply-appsettings-starter": {
      "intent": "apply-appsettings-starter",
      "description": "Applicazione appsettings starter (guardrail, sicurezza, configurazione).",
      "scopes": [
        "portal-all",
        "security-all",
        "governance-all"
      ]
    },
    "generate-appsettings-from-env": {
      "intent": "generate-appsettings-from-env",
      "description": "Genera appsettings da env (guardrail e validazione).",
      "scopes": [
        "portal-all",
        "security-all",
        "governance-all"
      ]
    },
    "sync-appsettings-guardrail": {
      "intent": "sync-appsettings-guardrail",
      "description": "Sync appsettings con guardrail (policy, drift, sicurezza).",
      "scopes": [
        "portal-all",
        "security-all",
        "governance-all"
      ]
    },

    "db-drift-check": {
      "intent": "db-drift-check",
      "description": "DB: drift check (schema, migrazioni, policy) con evidenze.",
      "scopes": [
        "data-all",
        "security-all",
        "governance-all"
      ]
    },
    "db-generate-docs": {
      "intent": "db-generate-docs",
      "description": "DB: generazione documentazione (inventario, diagrammi, reference).",
      "scopes": [
        "data-all",
        "governance-all"
      ]
    },
    "db-migrate": {
      "intent": "db-migrate",
      "description": "DB: migrazione (idempotenza, rollback, audit/log).",
      "scopes": [
        "data-all",
        "security-all",
        "governance-all"
      ]
    },
    "db-user-create": {
      "intent": "db-user-create",
      "description": "DB: creazione utente/accesso (security + governance).",
      "scopes": [
        "data-all",
        "security-all",
        "governance-all"
      ]
    },
    "db-user-revoke": {
      "intent": "db-user-revoke",
      "description": "DB: revoke accesso utente (security + governance).",
      "scopes": [
        "data-all",
        "security-all",
        "governance-all"
      ]
    },
    "db-user-rotate": {
      "intent": "db-user-rotate",
      "description": "DB: rotazione credenziali utente (security + governance).",
      "scopes": [
        "data-all",
        "security-all",
        "governance-all"
      ]
    },

    "docs-confluence-dq-kanban": {
      "intent": "docs-confluence-dq-kanban",
      "description": "Docs: board DQ (Confluence/Jira/ADO) e allineamento governance.",
      "scopes": [
        "governance-all"
      ]
    },
    "docs-dq-audit": {
      "intent": "docs-dq-audit",
      "description": "Docs: audit DQ (processo, evidenze, checklist).",
      "scopes": [
        "governance-all"
      ]
    },
    "docs-related-links-apply": {
      "intent": "docs-related-links-apply",
      "description": "Docs: applica link correlati e normalizza cross-ref per retrieval.",
      "scopes": [
        "governance-all"
      ]
    },

    "iam.provision.access": {
      "intent": "iam.provision.access",
      "description": "IAM: provisioning accessi (ruoli, gruppi, segreti).",
      "scopes": [
        "security-all",
        "governance-all"
      ]
    },
    "kv.secret.set": {
      "intent": "kv.secret.set",
      "description": "Key Vault: set secret con policy e tracciamento.",
      "scopes": [
        "security-all",
        "governance-all"
      ]
    },

    "infra.terraform.plan": {
      "intent": "infra.terraform.plan",
      "description": "Infra: terraform plan/apply (change control, sicurezza, rollback).",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
    "obs.healthcheck": {
      "intent": "obs.healthcheck",
      "description": "Observability: healthcheck e diagnostica runtime (safe-by-default).",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
    "predeploy-checklist": {
      "intent": "predeploy-checklist",
      "description": "Checklist pre-deploy (gates, sicurezza, rollback).",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },
    "release.preflight.security": {
      "intent": "release.preflight.security",
      "description": "Release: preflight security (scans, policy, approvazioni).",
      "scopes": [
        "security-all",
        "governance-all"
      ]
    },
    "runtime.bundle": {
      "intent": "runtime.bundle",
      "description": "Runtime: bundle operativo (runbooks, policy, strumenti essenziali).",
      "scopes": [
        "governance-all",
        "security-all"
      ]
    },

    "kb.assessment": {
      "intent": "kb.assessment",
      "description": "KB: assessment (copertura ricette, coerenza, priorita' fix).",
      "scopes": [
        "governance-all",
        "core"
      ]
    },
    "rag.export-wiki-chunks": {
      "intent": "rag.export-wiki-chunks",
      "description": "RAG: export chunk wiki per ingestion (scope e hygiene).",
      "scopes": [
        "governance-all"
      ]
    },
    "whatfirst-lint": {
      "intent": "whatfirst-lint",
      "description": "WHAT-first lint (orchestrations/intents) per garantire contratti minimi.",
      "scopes": [
        "governance-all",
        "core"
      ]
    }
  }
}

