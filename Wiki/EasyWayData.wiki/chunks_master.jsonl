{"doc_id":"ew-agent-first-method","path":"agent-first-method.md","title":"Metodo di Lavoro (Agent‑First)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Best practice per le Ricette KB","anchor_slug":"best-practice-per-le-ricette-kb","chunk_index":1,"content":"## Best practice per le Ricette KB\n- Ogni ricetta includa un campo `example_output` con lo stato atteso (almeno `stateBefore` in WhatIf), così agenti e umani vedono subito l’esito tipico.\n- Indicare chiaramente prerequisiti, passi, verify, e link alla pagina Wiki di approfondimento.","size_chars":283,"tokens_estimate":71}
{"doc_id":"ew-agent-first-method","path":"agent-first-method.md","title":"Metodo di Lavoro (Agent‑First)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Badges & Guardrail","anchor_slug":"badges-guardrail","chunk_index":2,"content":"## Badges & Guardrail\n- WhatIf‑Ready: l’azione implementa pre‑check a secco e mostra `stateBefore` (e `stateAfter` dopo l’applicazione). È la modalità predefinita consigliata.\n- Guardrail: gli agenti devono anticipare gli errori (validazioni, limiti, anteprime), riducendo i rischi prima di eseguire modifiche.","size_chars":310,"tokens_estimate":78}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\nPermettere a qualsiasi agente di localizzare rapidamente i contenuti rilevanti senza aprire interi file, riducendo i token. Si basa su tre artefatti sempre presenti alla radice:\n\n- `index_master.jsonl` (manifest per agenti)\n- `index_master.csv` (filtri rapidi per umani/Excel)\n- `anchors_master.csv` (mappe verso sezioni H2/H3)","size_chars":340,"tokens_estimate":85}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Manifest JSONL (consumo per agenti)","anchor_slug":"manifest-jsonl-consumo-per-agenti","chunk_index":2,"content":"## Manifest JSONL (consumo per agenti)\nOgni riga è un documento con campi:\n- `id`, `title`, `summary` (≤50 parole), `path`, `format` (md|html|confluence|notion|gdoc|pdf)\n- `owner`, `tags[]`, `entities[]`, `llm.include`, `llm.pii`, `chunk_hint`, `updated`\n- `questions_answered[]` (se estratte), `anchors[]` (H2/H3: `level,text,slug`)\n\nStrategia d’uso:\n- Caricare `index_master.jsonl` all’avvio della sessione.\n- Filtrare per `tags`, `entities`, `owner`, `format` per ridurre il set.\n- Aprire i file solo quando serve e con deep‑link a `#slug` partendo da `anchors[]`.\n- Rispettare `llm.include` e `llm.pii` quando si propagano i contenuti.","size_chars":639,"tokens_estimate":160}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Anchors CSV (richiami di sezione)","anchor_slug":"anchors-csv-richiami-di-sezione","chunk_index":3,"content":"## Anchors CSV (richiami di sezione)\n`anchors_master.csv` espone righe: `path,level,slug,text`. Gli agenti possono:\n- Costruire URL locali o web con `path#slug`.\n- Selezionare solo le sezioni richieste dall’utente (es. “IAM”, “Policy”).","size_chars":236,"tokens_estimate":59}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Compatibilità multi‑formato","anchor_slug":"compatibilit-multiformato","chunk_index":4,"content":"## Compatibilità multi‑formato\n- Markdown/Wiki: `path` relativo e `format=md`. `anchors[]` popolato.\n- Confluence/Notion/GDocs/HTML/PDF: usare `url` (se disponibile) e `format`. `anchors[]` facoltativo.","size_chars":202,"tokens_estimate":50}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Come generare gli artefatti","anchor_slug":"come-generare-gli-artefatti","chunk_index":5,"content":"## Come generare gli artefatti\n- CSV + JSONL + Anchors:\n  - `EasyWayData.wiki/scripts/generate-master-index.ps1 -Root EasyWayData.wiki`","size_chars":135,"tokens_estimate":34}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Buone pratiche","anchor_slug":"buone-pratiche","chunk_index":6,"content":"## Buone pratiche\n- Aggiungere sempre `summary`, `tags`, `entities` e la sezione “Domande a cui risponde”.\n- Tenere `chunk_hint` tra 300–600 token per pagine generaliste.\n- Evitare log e output estesi nelle pagine principali: spostarli in allegati.","size_chars":248,"tokens_estimate":62}
{"doc_id":"agent-manifest-indexing-best-practices","path":"agent-manifest-and-indexing-best-practices.md","title":"Agent Manifest & Indexing - Best Practices","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":7,"content":"## Domande a cui risponde\n- Come può un agente sapere “cosa aprire” senza leggere tutto?\n- Come ridurre i token usando ancore e manifest?\n- Come uniformare l’accesso ai contenuti tra progetti/formati diversi?","size_chars":208,"tokens_estimate":52}
{"doc_id":"ew-agent-output-validation-ci","path":"agent-output-validation-ci.md","title":"Validazione Output Agenti in CI","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:46:32+01:00","section_level":2,"anchor_text":"Validazione Output Agenti in CI","anchor_slug":"validazione-output-agenti-in-ci","chunk_index":1,"content":"# Validazione Output Agenti in CI\nBreadcrumb: Home / CI / Output Validation\n\nStrumento\n- Script: `scripts/validate-action-output.ps1` (input JSON tramite parametro `-InputJson`)\n- (Batch) Script: `scripts/ci-validate-agent-output.ps1 -Path <file|directory> [-FailOnError]`\n\nUso\n- Salva l’output JSON dell’agente su file (es. `out/agent-result.json`)\n- Esegui: `pwsh scripts/ci-validate-agent-output.ps1 -Path out -FailOnError`\n- Esito: stampa report JSON per ogni file e restituisce exit code 1 se `-FailOnError` e mancano chiavi contrattuali\n\nIntegrazione (Azure DevOps) – esempio\n```\n- task: PowerShell@2\n  displayName: 'Validate agent outputs (WhatIf)'\n  condition: and(succeeded(), eq(variables['VALIDATE_AGENT_OUTPUT'], 'true'))\n  inputs:\n    targetType: 'inline'\n    script: |\n      pwsh scripts/ci-validate-agent-output.ps1 -Path out -FailOnError\n```\n\nNote\n- Il contratto base è descritto in `Wiki/EasyWayData.wiki/output-contract.md` e nello schema `agents/core/schemas/action-result.schema.json`.\n- Mantieni gli output concisi per ridurre costi/token e favorire parsing da LLM.","size_chars":1086,"tokens_estimate":272}
{"doc_id":"ew-agent-priority-and-checklists","path":"agent-priority-and-checklists.md","title":"agent-priority-and-checklists","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"agent-priority-and-checklists","anchor_slug":"agent-priority-and-checklists","chunk_index":1,"content":"Obiettivo\n- Rendere la proposta di checklist una metodologia comune a TUTTI gli agenti, ridurre “alert fatigue” e proporre checklists solo quando serve, con regole per‑agente parametriche.\n\nCome funziona\n- Ogni agente DEVE definire `agents/<agent>/priority.json` con regole (schema: `agents/core/schemas/agent-priority.schema.json`).\n- Le regole valutano: branch, env, intent, file cambiati (git diff), variabili (es. `USE_EWCTL_GATES`).\n- Se una regola matcha, l’agente propone una checklist (severity: `mandatory` o `advisory`) e l’utente approva.\n\nTemplate\n- Copia da `agents/core/templates/priority.template.json` e adatta a ciascun agente.\n\nEsempi\n- Governance (`agents/agent_governance/priority.json`):\n  - Mandatory su `main/develop` o quando cambiano `db/**` o `azure-pipelines.yml`.\n  - Advisory se in CI `USE_EWCTL_GATES=false`.\n- Docs (`agents/agent_docs_review/priority.json`):\n  - Advisory quando cambiano `Wiki/**` o `agents/kb/recipes.jsonl`.\n\nIntegrazione negli agent\n- Script: `scripts/agent-priority.ps1` valuta le regole e restituisce una decisione JSON.\n- `scripts/agent-governance.ps1` e `scripts/agent-docs-review.ps1` includono checklists condizionali basate sulla decisione.\n\nEstensione\n- Aggiungi altre regole per agenti o condizioni personalizzate (intent-based, path filter specifici, ecc.).\n- Mantieni le checklists concise e orientate all’approvazione umana.\n\nBest Practice\n- Ogni nuovo agente nel repo deve includere: `agents/<agent>/manifest.json`, `agents/<agent>/priority.json` e riferimenti alla pagina presente in `knowledge_sources` del manifest.\n- Gli script agent devono invocare `scripts/agent-priority.ps1` e mostrare la checklist solo quando le regole lo richiedono.\n\nRiferimenti\n- `agents/core/schemas/agent-priority.schema.json`\n- `scripts/agent-priority.ps1`\n- `agents/agent_governance/priority.json`\n- `agents/agent_docs_review/priority.json`","size_chars":1887,"tokens_estimate":472}
{"doc_id":"ew-agentic-portal-vision","path":"agentic-portal-vision.md","title":"Visione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T21:51:09+01:00","section_level":2,"anchor_text":"Workflow agentici","anchor_slug":"workflow-agentici","chunk_index":1,"content":"## Workflow agentici\n\nPer realizzare workflow agentici efficaci in EasyWayDataPortal, segui questi principi e passi operativi:\n\n1. **Definisci gli obiettivi e le azioni agentiche**\n   - Usa un file machine-readable (es. agents/goals.json) dove ogni agente trova obiettivi, regole e parametri operativi.\n   - Ogni workflow deve partire da un “intent” chiaro (es. creazione tabella, aggiornamento KB, deploy).\n\n2. **Usa orchestratori e manifest**\n   - Centralizza la logica di orchestrazione in uno script (es. agents/core/orchestrator.js) che carica manifest, goals e knowledge base.\n   - Ogni agente deve avere un manifest.json che dichiara permessi, allowed_paths, e azioni disponibili.\n\n3. **Workflow tipico agentico**\n   1. **Intent:** L’agente riceve un input strutturato (JSON mini-DSL) che descrive l’azione da compiere.\n   2. **Generazione artefatti:** L’agente genera i file necessari (DDL, SP, documentazione) usando template con segnaposto.\n   3. **Validazione automatica:** L’agente esegue lint, check di idempotenza, verifica naming e policy.\n   4. **Proposta PR:** L’agente crea una pull request con i file generati e aggiorna la KB/Wiki.\n   5. **Gates CI/CD:** La pipeline esegue i gates agentici (Checklist, DB Drift, KB Consistency) e logga gli eventi.\n   6. **Deploy e auditing:** Se i gates sono verdi, l’agente esegue il deploy e aggiorna i log di esecuzione.\n\n4. **Human-in-the-loop e trasparenza**\n   - Ogni azione deve essere tracciata e confermabile da un umano, con log, piani e esiti visibili.\n   - La documentazione (Wiki, KB) deve essere aggiornata automaticamente e sempre allineata.\n\n5. **Sicurezza e reversibilità**\n   - Usa parametri sicuri (Key Vault/App Config), nessuna credenziale hard-coded.\n   - Ogni modifica deve essere reversibile tramite migrazione o rollback.\n\n6. **Strumenti consigliati**\n   - Wrapper di orchestrazione: scripts/ewctl.ps1\n   - Template SQL e SP: docs/agentic/templates/\n   - Logging: agents/logs/events.jsonl\n   - Validazione: lint SQL, check naming, gates CI/CD\n\n**Esempio di workflow agentico:**\n```mermaid\nflowchart TD\n    A[Intent JSON] --> B[Orchestratore]\n    B --> C[Generazione artefatti da template]\n    C --> D[Validazione automatica]\n    D --> E[Pull Request + Aggiornamento KB/Wiki]\n    E --> F[Gates CI/CD agentici]\n    F --> G[Deploy + Logging]\n    G --> H[Human-in-the-loop: verifica e conferma]\n```\n\n---","size_chars":2379,"tokens_estimate":595}
{"doc_id":"ew-agentic-portal-vision","path":"agentic-portal-vision.md","title":"Visione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T21:51:09+01:00","section_level":2,"anchor_text":"Esperienza utente per non esperti: proposte e spunti","anchor_slug":"esperienza-utente-per-non-esperti-proposte-e-spunti","chunk_index":2,"content":"## Esperienza utente per non esperti: proposte e spunti\n\nPer rendere il portale davvero accessibile anche a chi non ha background tecnico, senza sacrificare la potenza agentica, si propongono i seguenti spunti:\n\n- **Wizard e interfacce guidate:**  \n  Step-by-step per le operazioni complesse, con spiegazioni in linguaggio naturale, domande a risposta multipla, tooltips e validazioni in tempo reale.\n\n- **Assistente AI conversazionale:**  \n  Un assistente che traduca richieste in intent agentici, spieghi i piani generati e aiuti l’utente a capire le implicazioni delle scelte, con possibilità di chiedere spiegazioni su ogni step.\n\n- **Preview e simulazione (WhatIf):**  \n  Mostrare sempre una preview delle azioni, simulando le conseguenze e permettendo di annullare o modificare prima dell’esecuzione reale. Evidenziare chiaramente le azioni rischiose.\n\n- **Dashboard visuali e feedback immediato:**  \n  Stato degli agenti, piani in corso, gates superati/falliti e log eventi mostrati in modo visuale (timeline, semafori, badge). Notifiche chiare in caso di errori o azioni richieste.\n\n- **Template e suggerimenti contestuali:**  \n  Template precompilati per le operazioni più comuni, con parametri già impostati e spiegazioni inline. Checklist e best practice suggerite in base al contesto.\n\n- **Documentazione integrata e ricerca semantica:**  \n  Ogni schermata con link diretto alla documentazione, FAQ e video tutorial. Ricerca semantica nella knowledge base accessibile dalla UI.\n\n- **Ruoli e permessi semplificati:**  \n  Ruoli utente mappati su set di azioni agentiche predefinite, con modalità “base” e “avanzata” per adattare la UI al livello di esperienza.\n\nQuesti spunti possono guidare la progettazione di nuove funzionalità e interfacce, mantenendo l’equilibrio tra accessibilità e potenza agentica.","size_chars":1816,"tokens_estimate":454}
{"doc_id":"ew-agentic-portal-vision","path":"agentic-portal-vision.md","title":"Visione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T21:51:09+01:00","section_level":2,"anchor_text":"Esperienza utente per non esperti: proposte e spunti","anchor_slug":"esperienza-utente-per-non-esperti-proposte-e-spunti","chunk_index":3,"content":"Nota organizzativa sulla collocazione della documentazione UX\n- Capisco la tua preoccupazione: idealmente la documentazione UX e le linee guida operative dovrebbero essere facilmente reperibili all'interno della Wiki principale del progetto (Wiki/EasyWayData.wiki) perché è lì che la maggior parte degli agenti e dei lettori cerca il contesto e le istruzioni operative.\n- Attualmente abbiamo creato le pagine in Wiki/UX/ per mantenere separate le bozze e i materiali di lavoro; questo non è un errore, ma solo una scelta temporanea per iterare più rapidamente. Tuttavia, per chiarezza operativa e per l'allenamento futuro degli LLM, è consigliabile avere:\n  1. Un link diretto nella pagina di visione (questa stessa pagina) verso le guide UX.\n  2. Una copia stabilizzata o una versione canonica delle linee guida UX collocata dentro Wiki/EasyWayData.wiki/UX/ (oppure spostare i file da Wiki/UX/ nella EasyWayData.wiki) affinché gli agenti trovino tutto in un unico posto.\n- Se vuoi, posso:\n  - aggiungere qui i link diretti alle pagine UX già create (Wiki/UX/agentic-ux.md e Wiki/UX/agentic-ux-guidelines.md), e\n  - creare una copia/trasferimento dei file nella directory Wiki/EasyWayData.wiki/UX/ per rendere il contenuto parte integrante della Wiki del progetto.\n- Raccomandazione pratica: per l'allenamento degli LLM mantieni una versione \"canonica\" nella Wiki principale e usa le copie di lavoro per bozze; versiona e marca la pagina canonica come \"LLM‑readable\" (es. aggiungendo meta JSON all'inizio del file) in modo che gli agenti sappiano quale file usare come fonte primaria.","size_chars":1584,"tokens_estimate":396}
{"doc_id":"ew-agents-governance","path":"agents-governance.md","title":"agents-governance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:23+01:00","section_level":2,"anchor_text":"agents-governance","anchor_slug":"agents-governance","chunk_index":1,"content":"Visione\n- Agenti specializzati (DBA, Frontend, AMS, Governance) coordinati da un control plane (Azure DevOps) con policy, gates e audit.\n\nRuoli\n- Agent_DBA: migrazioni Flyway, drift, ERD/SP docs, RLS rollout\n- Agent_Frontend: mini‑portal, branding, MSAL wiring\n- Agent_AMS: esecuzione ricette KB, setup env, checklist, variable group\n- Agent_Governance: policy, qualità, gates (Checklist/Drift/KB), approvazioni\n\nPolicy & Manifests\n- `agents/<role>/manifest.json`: scope path, tools ammessi, gates richiesti, approvazioni\n- KB operativa: `agents/kb/recipes.jsonl` (JSONL) consumabile via `/api/docs/kb.json`\n\nGates in pipeline (ADO)\n- Pre‑Deploy Checklist: verifica env/connessioni e OpenAPI\n- DB Drift Check: oggetti richiesti presenti\n- KB Consistency: se cambiano `db/**` o `src/**`, obbligo aggiornamento KB + Wiki\n- (Opz.) Flyway Migrate Dev/Test: esegue validate/migrate con variabili Flyway\n\nChatOps (opzionali)\n- Teams/Logic Apps per comandi semplici; l’agente usa la KB e pubblica artifact (checklist.json/drift.json)\n\nAudit & Osservabilità\n- `PORTAL.LOG_AUDIT` per eventi agent; Application Insights/OTel per tracing e KPI (in roadmap)","size_chars":1145,"tokens_estimate":286}
{"doc_id":"ew-agent-scrummaster","path":"agents-scrummaster.md","title":"agents-scrummaster","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:50+01:00","section_level":2,"anchor_text":"agents-scrummaster","anchor_slug":"agents-scrummaster","chunk_index":1,"content":"Modello Operativo\n- Single‑owner + multi‑agent: un unico owner umano approva; gli agenti eseguono e tracciano.\n- Azioni su Boards/Prod richiedono approvazioni esplicite e sono loggate in activity-log.md.\n\nResponsabilità\n- Backlog su Azure Boards (Epics/Features) con Definition of Done e gates.\n- Sincronizzazione KB/Wiki (ricette, snippet, indici/chunk) e generazione TODO (da linter/report).\n- Coordinamento con Agent_Governance per policy/gates; con Agent_AMS per esecuzione ricette.\n\nApprovals\n- Boards: Human_ProductOwner_Approval\n- Prod: Human_Governance_Approval\n\nStrumenti\n- Script seed: scripts/ado/boards-seed.ps1\n- Review/indici: Wiki/EasyWayData.wiki/scripts/*\n\nNote\n- Questo documento integra agents-governance.md con il focus ScrumMaster.","size_chars":752,"tokens_estimate":188}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"1. Best Practices per la Riduzione Token e l’AI-Readiness\r","anchor_slug":"1-best-practices-per-la-riduzione-token-e-lai-readiness","chunk_index":1,"content":"## 1. Best Practices per la Riduzione Token e l’AI-Readiness\n\n- **Pagine brevi e modulari:** Suddividi i documenti lunghi in molte pagine o sezioni tematiche, ognuna focalizzata su un solo argomento.\r\n- **Heading/sezioni chiare:** Usa heading (H2/H3, titoli, sezioni) per separare i concetti e facilitare lo split automatico in chunk.\r\n- **Sintesi e rimozione ridondanze:** Elimina ripetizioni, frasi inutili, spiegazioni duplicate.\r\n- **Summary e metadati ricchi:** Ogni pagina/sezione deve avere un riassunto breve e preciso, tag e metadati per il filtraggio (dove supportato).\r\n- **Esempi e codice essenziali:** Includi solo esempi utili e rappresentativi, sposta quelli estesi in allegati o pagine dedicate.\r\n- **Export e chunking automatico:** Usa strumenti/script per generare file chunked (es. JSONL, CSV, API, ecc.) con chunk da 400–600 token.\r\n- **Evita allegati testuali pesanti:** Log e output estesi vanno in file separati o allegati, non nelle pagine principali.\r\n- **Controllo periodico:** Esegui script o tool di stima token e report chunk troppo lunghi.\n\n---","size_chars":1074,"tokens_estimate":268}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"2. Applicazione alle Principali Varianti di Formato\r","anchor_slug":"2-applicazione-alle-principali-varianti-di-formato","chunk_index":2,"content":"## 2. Applicazione alle Principali Varianti di Formato","size_chars":54,"tokens_estimate":14}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"Markdown/Wiki (GitHub, GitLab, Docusaurus, Obsidian, ecc.)\r","anchor_slug":"markdownwiki-github-gitlab-docusaurus-obsidian-ecc","chunk_index":3,"content":"### Markdown/Wiki (GitHub, GitLab, Docusaurus, Obsidian, ecc.)\r\n- Struttura i file in cartelle tematiche.\r\n- Usa heading H2/H3 per chunking.\r\n- Inserisci front matter YAML/JSON (se supportato) per summary e tag.\r\n- Automatizza export e linting con script (es. PowerShell, Python).","size_chars":280,"tokens_estimate":70}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"Confluence/Notion/Wiki SaaS\r","anchor_slug":"confluencenotionwiki-saas","chunk_index":4,"content":"### Confluence/Notion/Wiki SaaS\r\n- Crea pagine brevi e collegate tramite link.\r\n- Usa template di pagina con campi summary/tag.\r\n- Sfrutta le API per esportare e analizzare i contenuti.\r\n- Organizza la knowledge base in spazi e sezioni tematiche.","size_chars":246,"tokens_estimate":62}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"Google Docs/Office/Word\r","anchor_slug":"google-docsofficeword","chunk_index":5,"content":"### Google Docs/Office/Word\r\n- Usa titoli e sottotitoli per separare i chunk.\r\n- Inserisci un abstract/summary all’inizio di ogni documento.\r\n- Separa gli allegati/log in file a parte.\r\n- Esporta in formato testuale (txt, csv, json) per analisi token.","size_chars":251,"tokens_estimate":63}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"HTML/Portali Web\r","anchor_slug":"htmlportali-web","chunk_index":6,"content":"### HTML/Portali Web\r\n- Struttura i contenuti in pagine e sezioni ben delimitate.\r\n- Usa tag <section>, <h2>, <h3> per chunking.\r\n- Inserisci metadati nei tag <meta> o in header strutturati.\r\n- Automatizza l’estrazione con scraper o API.","size_chars":237,"tokens_estimate":59}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"Altri formati (PDF, LaTeX, ecc.)\r","anchor_slug":"altri-formati-pdf-latex-ecc","chunk_index":7,"content":"### Altri formati (PDF, LaTeX, ecc.)\r\n- Segmenta i contenuti in capitoli e sezioni.\r\n- Inserisci sommari e indici.\r\n- Esporta in formato testuale per analisi e chunking.\n\n---","size_chars":174,"tokens_estimate":44}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"3. Roadmap Universale per Token Tuning, AI-Readiness e Governance\r","anchor_slug":"3-roadmap-universale-per-token-tuning-ai-readiness-e-governance","chunk_index":8,"content":"## 3. Roadmap Universale per Token Tuning, AI-Readiness e Governance","size_chars":68,"tokens_estimate":17}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"3.1 Razionalizzazione e Pulizia (Fase 1)\r","anchor_slug":"31-razionalizzazione-e-pulizia-fase-1","chunk_index":9,"content":"### 3.1 Razionalizzazione e Pulizia (Fase 1)\r\n- [ ] Normalizza i nomi di file/pagine/sezioni (naming coerente, niente caratteri strani).\r\n- [ ] Uniforma i metadati/summary/tag su tutte le pagine chiave.\r\n- [ ] Rimuovi o isola i contenuti legacy e allinea i link interni.\r\n- [ ] Genera/aggiorna indici e sommari per tutte le macro-sezioni.\r\n- [ ] Esegui il link checker e correggi link rotti/anchor mancanti.","size_chars":407,"tokens_estimate":102}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"3.2 Modularizzazione e Ottimizzazione AI (Fase 2)\r","anchor_slug":"32-modularizzazione-e-ottimizzazione-ai-fase-2","chunk_index":10,"content":"### 3.2 Modularizzazione e Ottimizzazione AI (Fase 2)\r\n- [ ] Suddividi i documenti lunghi in pagine/sezioni più corte e tematiche.\r\n- [ ] Applica chunking automatico (400–600 token) tramite script/tool.\r\n- [ ] Sintetizza i summary e rimuovi ridondanze.\r\n- [ ] Sposta esempi estesi e log in allegati o pagine dedicate.\r\n- [ ] Aggiorna la checklist AI readiness e integrala nei controlli periodici.","size_chars":396,"tokens_estimate":99}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"3.3 Automazione e Controlli Periodici (Fase 3)\r","anchor_slug":"33-automazione-e-controlli-periodici-fase-3","chunk_index":11,"content":"### 3.3 Automazione e Controlli Periodici (Fase 3)\r\n- [ ] Automatizza il controllo naming e metadati (report periodico).\r\n- [ ] Automatizza la generazione di indici e report di anchor/naming.\r\n- [ ] Integra script/tool di export per dataset AI (con chunk e metadati).\r\n- [ ] Esegui regolarmente il controllo privacy/PII e aggiorna i flag/metadati.","size_chars":347,"tokens_estimate":87}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"3.4 Espansione Tassonomia e Tagging (Fase 4)\r","anchor_slug":"34-espansione-tassonomia-e-tagging-fase-4","chunk_index":12,"content":"### 3.4 Espansione Tassonomia e Tagging (Fase 4)\r\n- [ ] Espandi la tassonomia di entità/argomenti chiave.\r\n- [ ] Mappa le entità nei metadati/tag delle pagine.\r\n- [ ] Arricchisci i tag per dominio, layer, audience, privacy, lingua.","size_chars":231,"tokens_estimate":58}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"3.5 Export, Integrazione e Sperimentazione AI (Fase 5)\r","anchor_slug":"35-export-integrazione-e-sperimentazione-ai-fase-5","chunk_index":13,"content":"### 3.5 Export, Integrazione e Sperimentazione AI (Fase 5)\r\n- [ ] Valida l’export e testa l’integrazione con sistemi di Q&A/RAG.\r\n- [ ] Sperimenta batch embedding e retrieval su subset pilota.\r\n- [ ] Ottimizza la struttura in base ai feedback AI (chunk troppo lunghi, ambiguità, ecc.).","size_chars":285,"tokens_estimate":71}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"3.6 Formazione, Governance e Best Practices (Continuativo)\r","anchor_slug":"36-formazione-governance-e-best-practices-continuativo","chunk_index":14,"content":"### 3.6 Formazione, Governance e Best Practices (Continuativo)\r\n- [ ] Aggiorna e diffondi le guide rapide per ruoli e formati.\r\n- [ ] Promuovi la cultura della documentazione breve, chiara e AI-friendly.\r\n- [ ] Definisci un processo di review e accettazione per ogni nuova pagina/aggiornamento.\r\n- [ ] Monitora l’adozione delle convenzioni e la qualità tramite report periodici.\n\n---","size_chars":383,"tokens_estimate":96}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"4. Milestone, Priorità e Monitoraggio\r","anchor_slug":"4-milestone-priorit-e-monitoraggio","chunk_index":15,"content":"## 4. Milestone, Priorità e Monitoraggio\n\n| Milestone | Target | Owner | Note |\r\n|-----------|--------|-------|------|\r\n| Pulizia nomi e metadati | Mese 1 | team-docs | Naming e summary/tag |\r\n| Modularizzazione e chunking | Mese 2 | team-docs + AI | Split pagine, export chunk |\r\n| Automazione controlli | Mese 3 | team-devops | Linter, report, indici |\r\n| Espansione entità/tag | Mese 4 | team-data | Tassonomia e tagging |\r\n| Export e test AI | Mese 5 | team-ai | Q&A, embedding, feedback |\r\n| Formazione e governance | continuo | tutti | Review, guide, cultura |","size_chars":566,"tokens_estimate":142}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":3,"anchor_text":"Monitoraggio e Aggiornamento\r","anchor_slug":"monitoraggio-e-aggiornamento","chunk_index":16,"content":"### Monitoraggio e Aggiornamento\r\n- La roadmap va rivista periodicamente (es. ogni trimestre).\r\n- Ogni milestone completata va loggata in un registro attività (es. activity-log.md o tool equivalente).\r\n- I report di automazione e i feedback AI vanno usati per aggiornare le priorità.\n\n---","size_chars":288,"tokens_estimate":72}
{"doc_id":"best-practices-token-tuning-roadmap","path":"best-practices-token-tuning-roadmap.md","title":"Best Practices & Roadmap – Token Tuning, AI-Readiness e Governance Universale","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":17,"content":"## Domande a cui risponde\r\n- Quali sono le best practices per ridurre il consumo di token in qualsiasi knowledge base?\r\n- Come si applicano queste regole ai diversi formati di documentazione?\r\n- Quali azioni concrete vanno fatte e in che ordine?\r\n- Come si garantisce la qualità, la governance e l’AI-readiness nel tempo?\r\n- Chi è responsabile di ogni fase?\r\n- Come si monitora l’avanzamento?","size_chars":392,"tokens_estimate":98}
{"doc_id":"ew-checklist-ado-required-job","path":"checklist-ado-required-job.md","title":"checklist-ado-required-job","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:42:01+01:00","section_level":2,"anchor_text":"checklist-ado-required-job","anchor_slug":"checklist-ado-required-job","chunk_index":1,"content":"Obiettivo\n- Rendere il job `EnforcerCheck` obbligatorio nelle Pull Request verso `develop`/`main` in Azure Repos.\n\nPrerequisiti\n- Permessi di maintainer su Azure DevOps (Project Settings).\n- Pipeline già configurata con stage `PreChecks` → job `EnforcerCheck`.\n\nPassi UI in Azure DevOps (Branch Policies)\n- Vai a Repos → Branches → seleziona `develop` (ripeti per `main`).\n- Clicca sui tre puntini → Branch policies.\n- Sezione “Build validation” → Add build policy:\n  - Seleziona la pipeline CI del repository.\n  - Opzioni: Required = ON; Trigger: Automatic; Policy requirement: Required.\n  - Facoltativo: Path filters se vuoi limitare.\n  - Salva.\n- Verifica che il job `EnforcerCheck` compaia tra i checks richiesti nelle PR.\n\nNote\n- Motivo del guardrail: bloccare “azioni fuori scope” in modo automatico e precoce, verificando gli `allowed_paths` degli agenti.\n- Se la pipeline ha più job, il sistema considera l’esito generale; per granularità, usa checks associati al job o separa pipeline.\n\nRiferimenti\n- `Wiki/EasyWayData.wiki/enforcer-guardrail.md`\n- `docs/ci/ewctl-gates.md`\n- `scripts/enforcer.ps1`","size_chars":1107,"tokens_estimate":277}
{"doc_id":"ew-ci-verifica-ewctl-gates-e-flyway","path":"ci-verifica-ewctl-gates-e-flyway.md","title":"ci-verifica-ewctl-gates-e-flyway","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"ci-verifica-ewctl-gates-e-flyway","anchor_slug":"ci-verifica-ewctl-gates-e-flyway","chunk_index":1,"content":"Obiettivo\n- Verificare che i governance gates via `ewctl` e lo stage DB/Flyway funzionino su una branch non-main, con logging e artifact attesi.\n\nPrerequisiti\n- Pipeline aggiornata con `USE_EWCTL_GATES=true` e `FLYWAY_ENABLED=true` (vedi `azure-pipelines.yml`).\n- Variable Group collegato (es. `EasyWay-Secrets`) con `FLYWAY_URL`, `FLYWAY_USER`, `FLYWAY_PASSWORD`.\n- Job `NodeBuild` abilitato per tool Node richiesti dai gates.\n\nProcedura\n1) Crea una branch, ad es. `ci-verify-ewctl`, e fai push.\n2) Avvia manualmente la pipeline su questa branch in Azure DevOps.\n3) Attendi i job:\n   - `GovernanceGatesEWCTL` (Checklist/DB Drift/KB Consistency via `ewctl --logevent`).\n   - `FlywayValidateAny` (validate) su tutte le branch; `FlywayMigrateDevelop` (migrate) solo su `develop`.\n4) Verifica artifact pubblicati:\n   - `activity-log`: contiene `agents/logs/events.jsonl` aggiornato.\n   - `gates-report`: contiene `gates-report.json` con stato dei gates.\n   - (se generati) `db-drift` con `drift.json` e `checklist.json` in `workingDirectory`.\n\nEsito atteso\n- `GovernanceGatesEWCTL` completa con esito OK o fornisce diagnostica chiara.\n- `FlywayValidateAny` esegue `validate` senza errori su tutte le branch.\n- `FlywayMigrateDevelop` esegue `migrate` senza errori su `develop`.\n- Artifact `activity-log` e `gates-report` pubblicati e coerenti.\n\nMain con approvazioni (opzionale)\n- Su branch `main`, la migrazione prod avviene nello stage `DBProd` (deployment job `FlywayMigrateMain`) legato all'environment `prod` con approvazioni.\n- Condizioni: `FLYWAY_ENABLED=true` e `GOV_APPROVED=true`. Configurare le approvazioni nell'Environment `prod` in Azure DevOps.\n\nTroubleshooting\n- Variabili mancanti per Flyway: assicurarsi che `FLYWAY_URL`, `FLYWAY_USER`, `FLYWAY_PASSWORD` siano nel Variable Group collegato alla pipeline.\n- Job `GovernanceGatesEWCTL` non avviato: verificare `USE_EWCTL_GATES=true` e dipendenza da `NodeBuild`.\n- Drift/Checklist falliscono: controllare `.env.local` in locale e la configurazione di connessione DB per l’API.\n\nRiferimenti\n- `azure-pipelines.yml`\n- `docs/ci/ewctl-gates.md`\n- `agents/kb/recipes.jsonl` (ricetta `ci-verify-ewctl-flyway`)","size_chars":2164,"tokens_estimate":541}
{"doc_id":"ew-datalake-apply-acl","path":"datalake-apply-acl.md","title":"Datalake - Apply ACL (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parsing Output (JSON)","anchor_slug":"parsing-output-json","chunk_index":1,"content":"## Parsing Output (JSON)\n- Chiavi `output`:\n  - `path` (string)\n  - `proposedAcl`: array di oggetti `{ \"principal\": string, \"permissions\": string }`\n  - `diff`: array di oggetti differenze, es. `{ \"path\":\"raw/tenant01\", \"current\":\"r-x\", \"proposed\":\"rwx\", \"principal\":\"svc_tenant01_writer\" }`\n- In WhatIf non viene applicata alcuna modifica; `diff` è solo un’anteprima.","size_chars":368,"tokens_estimate":92}
{"doc_id":"ew-datalake-apply-acl","path":"datalake-apply-acl.md","title":"Datalake - Apply ACL (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parse Cheatsheet","anchor_slug":"parse-cheatsheet","chunk_index":2,"content":"## Parse Cheatsheet\n- jq\n  - Riepilogo: `jq -r '.output.summary' out.json`\n  - Principals coinvolti: `jq -r '.output.proposedAcl[].principal' out.json | sort -u`\n  - Diff sintetico: `jq -r '.output.diff[] | \"\\(.path): \\(.current) -> \\(.proposed) (\\(.principal))\"' out.json`\n- PowerShell\n  - `$o = Get-Content out.json | ConvertFrom-Json`\n  - `$o.output.summary`\n  - `$o.output.proposedAcl | % principal | Sort-Object -Unique`\n\nNote\n- Questa pagina definisce il modus operandi; l’implementazione dell’agente seguirà gli stessi guardrail (WhatIf-by-default).","size_chars":556,"tokens_estimate":139}
{"doc_id":"ew-datalake-apply-acl","path":"datalake-apply-acl.md","title":"Datalake - Apply ACL (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-datalake-apply-acl","path":"datalake-apply-acl.md","title":"Datalake - Apply ACL (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":4,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-datalake-apply-acl","path":"datalake-apply-acl.md","title":"Datalake - Apply ACL (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":5,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-datalake-apply-acl","path":"datalake-apply-acl.md","title":"Datalake - Apply ACL (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":6,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-datalake-ensure-structure","path":"datalake-ensure-structure.md","title":"Datalake - Ensure Structure (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parsing Output (JSON)","anchor_slug":"parsing-output-json","chunk_index":1,"content":"## Parsing Output (JSON)\n- Chiavi `output`:\n  - `filesystem` (string), `tenantId` (string)\n  - `expectedPaths`: array di path attesi per il tenant\n  - `changesPreview`: array di oggetti differenze, es. `{ \"type\":\"create-path\", \"path\":\"landing/tenant01/\" }`\n- In WhatIf non viene applicata alcuna modifica; `changesPreview` rappresenta l’anteprima.","size_chars":347,"tokens_estimate":87}
{"doc_id":"ew-datalake-ensure-structure","path":"datalake-ensure-structure.md","title":"Datalake - Ensure Structure (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parse Cheatsheet","anchor_slug":"parse-cheatsheet","chunk_index":2,"content":"## Parse Cheatsheet\n- jq\n  - Riepilogo: `jq -r '.output.summary' out.json`\n  - Conteggio attesi/mancanti: `jq '{expected: (.output.expectedPaths|length), missing: (.output.changesPreview|length)}' out.json`\n  - Elenco cambi: `jq -r '.output.changesPreview[] | \"\\(.type): \\(.path)\"' out.json`\n- PowerShell\n  - `$o = Get-Content out.json | ConvertFrom-Json`\n  - `$o.output.summary`\n  - `@{ expected = $o.output.expectedPaths.Count; missing = $o.output.changesPreview.Count }`\n\nKB ricette correlate\n- Ricetta example_output: `agents/kb/recipes.jsonl` (id: `kb-agent-dlk-ensure-structure-080`)\n\nNote\n- Questa pagina definisce il modus operandi; l’implementazione dell’agente seguirà gli stessi guardrail (WhatIf-by-default).","size_chars":720,"tokens_estimate":180}
{"doc_id":"ew-datalake-ensure-structure","path":"datalake-ensure-structure.md","title":"Datalake - Ensure Structure (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-datalake-ensure-structure","path":"datalake-ensure-structure.md","title":"Datalake - Ensure Structure (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":4,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-datalake-ensure-structure","path":"datalake-ensure-structure.md","title":"Datalake - Ensure Structure (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":5,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-datalake-ensure-structure","path":"datalake-ensure-structure.md","title":"Datalake - Ensure Structure (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":6,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-datalake-set-retention","path":"datalake-set-retention.md","title":"Datalake - Set Retention (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parsing Output (JSON)","anchor_slug":"parsing-output-json","chunk_index":1,"content":"## Parsing Output (JSON)\n- Chiavi `output`:\n  - `policies`: array di oggetti `{ \"path\": string, \"days\": number|null, \"change\": \"create_or_update|noop|remove\" }`\n- In WhatIf nessuna modifica viene effettuata; `change` è una stima dell’azione eventuale.","size_chars":251,"tokens_estimate":63}
{"doc_id":"ew-datalake-set-retention","path":"datalake-set-retention.md","title":"Datalake - Set Retention (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parse Cheatsheet","anchor_slug":"parse-cheatsheet","chunk_index":2,"content":"## Parse Cheatsheet\n- jq\n  - Riepilogo: `jq -r '.output.summary' out.json`\n  - Policy da applicare (non noop): `jq -r '.output.policies[] | select(.change != \"noop\") | \"\\(.path): \\(.days)\"' out.json`\n- PowerShell\n  - `$o = Get-Content out.json | ConvertFrom-Json`\n  - `$o.output.summary`\n  - `$o.output.policies | ? { $_.change -ne 'noop' } | % { \"$($_.path): $($_.days)\" }`","size_chars":374,"tokens_estimate":94}
{"doc_id":"ew-datalake-set-retention","path":"datalake-set-retention.md","title":"Datalake - Set Retention (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-datalake-set-retention","path":"datalake-set-retention.md","title":"Datalake - Set Retention (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":4,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-datalake-set-retention","path":"datalake-set-retention.md","title":"Datalake - Set Retention (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":5,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-datalake-set-retention","path":"datalake-set-retention.md","title":"Datalake - Set Retention (Agent Datalake)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":6,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-db-generate-artifacts-dsl","path":"db-generate-artifacts-dsl.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-db-generate-artifacts-dsl","path":"db-generate-artifacts-dsl.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-db-generate-artifacts-dsl","path":"db-generate-artifacts-dsl.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-db-generate-artifacts-dsl","path":"db-generate-artifacts-dsl.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-db-user-access-management","path":"db-user-access-management.md","title":"Gestione Accessi DB (Agent DBA)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parsing Output (JSON)","anchor_slug":"parsing-output-json","chunk_index":1,"content":"## Parsing Output (JSON)\n- Chiavi top‑level: `action`, `ok`, `whatIf`, `nonInteractive`, `correlationId`, `startedAt`, `finishedAt`, `output`, `error`.\n- `output` (create/rotate/revoke):\n  - `server`, `database`, `username`, `auth` (`sql|aad`)\n  - `roles` (solo create): array es. `[\"portal_reader\",\"portal_writer\"]`\n  - `executed` (bool), `keyVaultSet` (bool, se abilitato)\n  - `passwordMasked` (string), `tsqlPreview` (string)\n  - `stateBefore`/`stateAfter` (oggetto con bool: `readerExists`, `writerExists`, `userExists`, `memberReader`, `memberWriter`)\n  - `preCheck` (WhatIf): output di `scripts/db-verify-connect.ps1` con `ok`, `roles`, `userExists`, `lint[]`\n- Convenzione: in WhatIf `executed=false` e `stateAfter=null`. In esecuzione reale `executed=true` e `stateAfter` valorizzato.","size_chars":792,"tokens_estimate":198}
{"doc_id":"ew-db-user-access-management","path":"db-user-access-management.md","title":"Gestione Accessi DB (Agent DBA)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Parse Cheatsheet","anchor_slug":"parse-cheatsheet","chunk_index":2,"content":"## Parse Cheatsheet\n- jq\n  - Estrarre riepilogo: `jq -r '.output.summary' out.json`\n  - Stato iniziale: `jq '.output.stateBefore' out.json`\n  - Lint preCheck: `jq '.output.preCheck.lint' out.json`\n  - Esecuzione reale? `jq -r '.output.executed' out.json`\n- PowerShell\n  - `$o = Get-Content out.json | ConvertFrom-Json`\n  - `$o.output.summary`\n  - `$o.output.stateBefore | ConvertTo-Json -Depth 6`\n  - `($o.output.executed) -and ($o.ok)`","size_chars":436,"tokens_estimate":109}
{"doc_id":"ew-db-user-access-management","path":"db-user-access-management.md","title":"Gestione Accessi DB (Agent DBA)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-db-user-access-management","path":"db-user-access-management.md","title":"Gestione Accessi DB (Agent DBA)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":4,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-db-user-access-management","path":"db-user-access-management.md","title":"Gestione Accessi DB (Agent DBA)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":5,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-db-user-access-management","path":"db-user-access-management.md","title":"Gestione Accessi DB (Agent DBA)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":6,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-deploy-appservice","path":"deploy-app-service.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:17:50+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\n- Descrivere come eseguire il deploy dell’API EasyWay su Azure App Service usando la pipeline ADO, con variabili/toggle e mapping App Settings.","size_chars":156,"tokens_estimate":39}
{"doc_id":"ew-deploy-appservice","path":"deploy-app-service.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:17:50+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Quali variabili devo impostare per abilitare un deploy in pipeline?\n- Come deployo su uno slot e quando conviene fare lo swap verso production?\n- Quali gate vengono eseguiti prima del deploy e come li controllo via toggle?\n- Da dove arrivano gli App Settings e come gestisco i segreti (Variable Group/Key Vault)?\n- Come verifico rapidamente post-deploy (portal/API docs) e dove guardo log/artifact in caso di errore?","size_chars":444,"tokens_estimate":111}
{"doc_id":"ew-deploy-appservice","path":"deploy-app-service.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:17:50+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":3,"content":"## Prerequisiti\n- Azure DevOps con Service Connection (Azure Resource Manager) → `AZURE_SERVICE_CONNECTION`\n- Risorse Azure: Resource Group, App Service (Web App), opzionale Slot (es. `staging`)\n- Variable Group con segreti/env applicativi (Auth/DB/Storage/Branding/OTel)","size_chars":271,"tokens_estimate":68}
{"doc_id":"ew-deploy-appservice","path":"deploy-app-service.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:17:50+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":4,"content":"## Passi\n\nPipeline – Stages (ordine)\n1. Infra (Terraform plan/apply)\n2. DB (Flyway validate/migrate) – condizionato da `FLYWAY_ENABLED`\n3. BuildAndTest\n   - Versions Report (artifact `versions-report.txt`)\n   - NodeBuild (build/lint/test; publish artifact `api-dist`)\n   - Gates: Pre‑Deploy Checklist, KB Consistency, DB Drift\n   - Activity Log + Gates Report (artifact `gates-report.json`)\n4. Deploy (App Service) – condizionato da `ENABLE_DEPLOY`\n\nVariabili – Toggle & Versioni\n- Toggle gates/job:\n  - `ENABLE_CHECKLIST` (default `true`)\n  - `ENABLE_DB_DRIFT` (default `true`)\n  - `ENABLE_KB_CONSISTENCY` (default `true`)\n  - `FLYWAY_ENABLED` (default `false`)\n  - `ENABLE_DEPLOY` (default `false`)\n  - `ENABLE_SWAP` (default `false`) – esegue lo swap di slot post‑deploy\n- Versioni (template `ci/versions.yml`):\n  - `node_version` (default `22.x`)\n  - `flyway_version` (default `9.22.3`)\n  - `terraform_version` (default `1.9.5`)\n\nVariabili – Deploy\n- Obbligatorie:\n  - `AZURE_SERVICE_CONNECTION` – Service Connection (Azure RM)\n  - `WEBAPP_NAME` – nome Web App\n  - `RESOURCE_GROUP` – Resource Group della Web App\n- Opzionale:\n  - `WEBAPP_SLOT` – nome slot (es. `staging`); se impostato, il deploy avviene sullo slot\n\nApp Settings (mapping)\n- Vengono applicati dalla pipeline (task AzureAppServiceSettings@1):\n  - Auth/JWT: `AUTH_ISSUER`, `AUTH_JWKS_URI`, `AUTH_AUDIENCE`, `AUTH_CLIENT_ID`, `AUTH_TENANT_ID`, `TENANT_CLAIM`, `AUTH_SCOPES`\n  - DB: `DB_CONN_STRING` (oppure AAD variabili alternative)\n  - Storage: `AZURE_STORAGE_CONNECTION_STRING`, `AZURE_STORAGE_ACCOUNT`\n  - Branding: `BRANDING_CONTAINER`, `BRANDING_PREFIX`, `DEFAULT_TENANT_ID`\n  - RLS/Log/Portal: `RLS_CONTEXT_ENABLED`, `LOG_LEVEL`, `LOG_DIR`, `PORTAL_BASE_PATH`\n  - Rate limit/body: `RATE_LIMIT_WINDOW_MS`, `RATE_LIMIT_MAX`, `BODY_LIMIT`\n  - Observability: `APPLICATIONINSIGHTS_CONNECTION_STRING`, `OTEL_ENABLED`, `OTEL_TRACES_SAMPLER`, `OTEL_TRACES_SAMPLER_ARG`\n\nProcedura – Deploy su slot + swap (opzionale)\n1. Imposta variabili: `ENABLE_DEPLOY=true`, `AZURE_SERVICE_CONNECTION`, `WEBAPP_NAME`, `RESOURCE_GROUP`, `WEBAPP_SLOT=staging`\n2. (Opzionale) `ENABLE_SWAP=true` per eseguire lo swap `staging → production` post‑deploy\n3. Avvia la pipeline; verifica l’esito del job Deploy e (se attivo) dello swap","size_chars":2278,"tokens_estimate":570}
{"doc_id":"ew-deploy-appservice","path":"deploy-app-service.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:17:50+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":5,"content":"## Verify\n\nVerifica post‑Deploy\n- `https://<webapp>.azurewebsites.net/portal` → mini‑portale\n- `https://<webapp>.azurewebsites.net/api/docs` → documentazione API (OpenAPI)\n- In caso di slot: testare lo slot prima dello swap (`https://<webapp>-staging.azurewebsites.net/...`)\n\nSicurezza & Governance\n- App Settings provengono da Variable Group/Key Vault; non inserire segreti in YAML\n- Branch protection + approvazioni per abilitare `ENABLE_DEPLOY`/`ENABLE_SWAP` in ambienti critici\n- Gates (Checklist/Drift/KB) come prerequisiti qualitativi\n- Guardrail Sync App Settings: il job di sincronizzazione da `.env.local` è condizionato da `ENABLE_SYNC_APPSETTINGS=true` e richiede `GOV_APPROVED=true` se il branch è `main` o l'ambiente è `prod` (variabili: `ENVIRONMENT`, `GOV_APPROVED`).\n  - Nelle esecuzioni approvate comparirà un badge ✅ nella colonna \"Gov\" del diario di bordo (Wiki/EasyWayData.wiki/activity-log.md).\n\nEsempio (screenshot)\n![Activity Log – Esempio](.attachments/activity-log-example.svg)\n\nTroubleshooting\n- Logs App Service (Kudu), Application Insights (se configurato), artifact `versions-report.txt`\n- Riferimenti: `agents/kb/recipes.jsonl` (ricette deploy, slot/swap, toggle)\n\nEsempio App Settings (starter JSON)\nPuoi incollare questo JSON (adattando i valori) nel task AzureAppServiceSettings@1 o usarlo come riferimento per configurare manualmente gli App Settings nel portale Azure.\n\n```sql\n[\n  {\"name\":\"AUTH_ISSUER\",\"value\":\"https://login.microsoftonline.com/<TENANT_ID>/v2.0\",\"slotSetting\":false},\n  {\"name\":\"AUTH_JWKS_URI\",\"value\":\"https://login.microsoftonline.com/<TENANT_ID>/discovery/v2.0/keys\",\"slotSetting\":false},\n  {\"name\":\"AUTH_AUDIENCE\",\"value\":\"api://your-app-id\",\"slotSetting\":false},\n  {\"name\":\"AUTH_CLIENT_ID\",\"value\":\"<CLIENT_ID>\",\"slotSetting\":false},\n  {\"name\":\"AUTH_TENANT_ID\",\"value\":\"<TENANT_ID>\",\"slotSetting\":false},\n  {\"name\":\"TENANT_CLAIM\",\"value\":\"ew_tenant_id\",\"slotSetting\":false},\n  {\"name\":\"AUTH_SCOPES\",\"value\":\"api://default/.default\",\"slotSetting\":false},\n\n  {\"name\":\"DB_CONN_STRING\",\"value\":\"Server=tcp:<sql-host>,1433;Database=<db>;User Id=<user>;Password=<pwd>;Encrypt=true\",\"slotSetting\":false},\n\n  {\"name\":\"AZURE_STORAGE_CONNECTION_STRING\",\"value\":\"<conn-string-o-NULL-se-MI>\",\"slotSetting\":false},\n  {\"name\":\"AZURE_STORAGE_ACCOUNT\",\"value\":\"<account-name>\",\"slotSetting\":false},","size_chars":2340,"tokens_estimate":585}
{"doc_id":"ew-deploy-appservice","path":"deploy-app-service.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:17:50+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":6,"content":"  {\"name\":\"BRANDING_CONTAINER\",\"value\":\"portal-assets\",\"slotSetting\":false},\n  {\"name\":\"BRANDING_PREFIX\",\"value\":\"config\",\"slotSetting\":false},\n  {\"name\":\"DEFAULT_TENANT_ID\",\"value\":\"tenant01\",\"slotSetting\":false},\n\n  {\"name\":\"RLS_CONTEXT_ENABLED\",\"value\":\"true\",\"slotSetting\":false},\n  {\"name\":\"LOG_LEVEL\",\"value\":\"info\",\"slotSetting\":false},\n  {\"name\":\"LOG_DIR\",\"value\":\"logs\",\"slotSetting\":false},\n  {\"name\":\"PORTAL_BASE_PATH\",\"value\":\"/portal\",\"slotSetting\":false},\n  {\"name\":\"RATE_LIMIT_WINDOW_MS\",\"value\":\"60000\",\"slotSetting\":false},\n  {\"name\":\"RATE_LIMIT_MAX\",\"value\":\"600\",\"slotSetting\":false},\n  {\"name\":\"BODY_LIMIT\",\"value\":\"1mb\",\"slotSetting\":false},\n\n  {\"name\":\"APPLICATIONINSIGHTS_CONNECTION_STRING\",\"value\":\"<AI connection string>\",\"slotSetting\":false},\n  {\"name\":\"OTEL_ENABLED\",\"value\":\"true\",\"slotSetting\":false},\n  {\"name\":\"OTEL_TRACES_SAMPLER\",\"value\":\"parentbased_always_on\",\"slotSetting\":false},\n  {\"name\":\"OTEL_TRACES_SAMPLER_ARG\",\"value\":\"\",\"slotSetting\":false}\n]\n```sql\n\nSnippet alternativi (riuso rapido)\n- Formato CLI (az webapp config appsettings set --settings @appsettings.cli.json)\n```sql\n{\n  \"AUTH_ISSUER\": \"https://login.microsoftonline.com/<TENANT_ID>/v2.0\",\n  \"AUTH_JWKS_URI\": \"https://login.microsoftonline.com/<TENANT_ID>/discovery/v2.0/keys\",\n  \"AUTH_AUDIENCE\": \"api://your-app-id\",\n  \"AUTH_CLIENT_ID\": \"<CLIENT_ID>\",\n  \"AUTH_TENANT_ID\": \"<TENANT_ID>\",\n  \"TENANT_CLAIM\": \"ew_tenant_id\",\n  \"AUTH_SCOPES\": \"api://default/.default\",\n  \"DB_CONN_STRING\": \"Server=tcp:<sql-host>,1433;Database=<db>;User Id=<user>;Password=<pwd>;Encrypt=true\",\n  \"AZURE_STORAGE_CONNECTION_STRING\": \"<conn-string>\",\n  \"AZURE_STORAGE_ACCOUNT\": \"<account>\",\n  \"BRANDING_CONTAINER\": \"portal-assets\",\n  \"BRANDING_PREFIX\": \"config\",\n  \"DEFAULT_TENANT_ID\": \"tenant01\",\n  \"RLS_CONTEXT_ENABLED\": \"true\",\n  \"LOG_LEVEL\": \"info\",\n  \"LOG_DIR\": \"logs\",\n  \"PORTAL_BASE_PATH\": \"/portal\",\n  \"RATE_LIMIT_WINDOW_MS\": \"60000\",\n  \"RATE_LIMIT_MAX\": \"600\",\n  \"BODY_LIMIT\": \"1mb\",\n  \"APPLICATIONINSIGHTS_CONNECTION_STRING\": \"<AI conn>\",\n  \"OTEL_ENABLED\": \"true\",\n  \"OTEL_TRACES_SAMPLER\": \"parentbased_always_on\",\n  \"OTEL_TRACES_SAMPLER_ARG\": \"\"\n}\n```sql\n\n- Formato Task Azure DevOps (AzureAppServiceSettings@1) – appsettings.task.json\n```sql\n[\n  {\"name\":\"AUTH_ISSUER\",\"value\":\"...\",\"slotSetting\":false},\n  {\"name\":\"AUTH_JWKS_URI\",\"value\":\"...\",\"slotSetting\":false}\n  // ... (vedi starter JSON sopra)\n]\n```sql","size_chars":2397,"tokens_estimate":599}
{"doc_id":"ew-deployment-decision-mvp","path":"deployment-decision-mvp.md","title":"Deployment decision (MVP) — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"Deployment decision (MVP) — EasyWay Data Portal","anchor_slug":"deployment-decision-mvp-easyway-data-portal","chunk_index":1,"content":"# Deployment decision (MVP) — EasyWay Data Portal\n\nSintesi breve\n- Decisione operativa per il rilascio MVP: usare una soluzione PaaS basata su Azure App Service (container) o Azure Container Apps.\n- Motivazione: velocità di delivery, costi controllati per ambienti di sviluppo/poC, integrazione semplice con pipeline Azure DevOps e le policy di governance già presenti nel repository.\n\nCosa significa nella pratica\n- Ambiente di sviluppo e ricerca: esecuzione locale o su risorse temporanee per ridurre costi (datalake-sample, .env.local, run locale).\n- Ambiente di produzione (go‑live): App Service o Container Apps con pipeline automatizzata, Managed Identity, Key Vault, Private Endpoint dove necessario.\n\nDocumentazione di riferimento (link interni)\n- Guida operativa deploy su App Service: Wiki/EasyWayData.wiki/deploy-app-service.md\n- Architettura infra: docs/infra/azure-architecture.md\n- Raccomandazione architetturale (App Service vs Container Apps vs AKS): easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md\n- Pipeline & toggles: azure-pipelines.yml (root) e relative note in Wiki/EasyWayData.wiki/blueprints/replicate-easyway-dataportal.md\n- Esempi/appsettings: scripts/generate-appsettings.ps1 e Wiki/EasyWayData.wiki/kb-starter-appsettings-026 (KB)\n\nFlag e controlli CI/CD (pratici)\n- ENABLE_DEPLOY: toggle che abilita la fase di deploy nella pipeline.\n- ENABLE_SWAP: abilita lo swap di slot (staging → production) se previsto.\n- GOV_APPROVED: approvazione di governance richiesta per deploy su branch `main` o ambiente `prod`.\n- USE_EWCTL_GATES / ENABLE_CHECKLIST / ENABLE_DB_DRIFT / ENABLE_KB_CONSISTENCY: gates opzionali previsti nella pipeline.\n\nBest practice consigliate\n- Mantieni il codice e le pipeline nel repository (easyway-portal-api/*); carica su Datalake solo le configurazioni runtime (branding YAML, file prodotti).\n- Gestione segreti: Azure Key Vault + Managed Identity (mai segreti in chiaro).\n- Provisioning infra tramite Terraform (infra/terraform) in pipeline (stage Infra).\n- Test smoke post-deploy: health endpoint, smoke tests e verifica OpenAPI/documentazione.\n- Logging e osservabilità: Application Insights / OTel; esportare i log su Datalake per audit se richiesto.","size_chars":2243,"tokens_estimate":561}
{"doc_id":"ew-deployment-decision-mvp","path":"deployment-decision-mvp.md","title":"Deployment decision (MVP) — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"Deployment decision (MVP) — EasyWay Data Portal","anchor_slug":"deployment-decision-mvp-easyway-data-portal","chunk_index":2,"content":"Quando valutare AKS\n- Requisiti enterprise avanzati: multi-region, service mesh, altissime richieste di concurrency o necessità di federazione.\n- Se si decide AKS: migrazione graduale dei container; riuso pipeline e immagini.\n\nProssimi step raccomandati\n1. Aggiungere questo file come riferimento canonico (fatto).\n2. Se vuoi, posso aggiornare `deploy-app-service.md` con una sezione esplicita \"Local run for research/cost saving\" che rimandi a questa pagina — confermi che lo faccia?\n\nNote finali\n- La scelta App Service è già documentata nel repo; questo file rende esplicita la decisione MVP e centralizza i link utili per dev/ops.","size_chars":634,"tokens_estimate":158}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\n- Permettere sviluppo economico in locale usando `DB_MODE=mock` con file JSON, mantenendo le stesse API.\n- Passaggio zero‑rework a `DB_MODE=sql` con Azure SQL/App Service.","size_chars":184,"tokens_estimate":46}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Quando conviene usare `DB_MODE=mock` rispetto a `DB_MODE=sql`?\n- Quali file/risorse usa la modalità mock e come persiste i dati?\n- Quali env minime servono per avviare l'API in locale senza dipendenze cloud?\n- Come genero token/JWKS di test per provare le rotte protette?\n- Come passo da mock a SQL (cloud) senza refactor e quali parametri devo cambiare su App Service?","size_chars":397,"tokens_estimate":99}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":3,"content":"## Prerequisiti\n- `npm install` eseguito nella root del progetto API.\n- Un file `.env.local` con `DB_MODE`, `DEFAULT_TENANT_ID` e parametri Auth minimi per avviare l'API.","size_chars":170,"tokens_estimate":42}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":4,"content":"## Passi","size_chars":8,"tokens_estimate":2}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":3,"anchor_text":"Uso rapido","anchor_slug":"uso-rapido","chunk_index":5,"content":"### Uso rapido\n- `.env.local` esempio:\n  - `DB_MODE=mock`\n  - `DEFAULT_TENANT_ID=tenant01`\n  - `AUTH_ISSUER=https://test-issuer/`\n  - `AUTH_AUDIENCE=api://test`\n  - `TENANT_CLAIM=ew_tenant_id`\n- Genera JWKS+token: `npm run dev:jwt` e imposta `AUTH_TEST_JWKS` in shell.\n- Avvia API: `npm run dev` e prova `http://localhost:3000/portal/app`.","size_chars":339,"tokens_estimate":85}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":3,"anchor_text":"Dettagli implementativi","anchor_slug":"dettagli-implementativi","chunk_index":6,"content":"### Dettagli implementativi\n- Repository astratto per utenti/onboarding con due backend:\n  - `mock`: `data/dev-users.json` (persistenza file), idempotente.\n  - `sql`: query/Stored Procedure su Azure SQL.\n- Switch via env `DB_MODE=mock|sql`.","size_chars":240,"tokens_estimate":60}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":3,"anchor_text":"Migrazione a cloud","anchor_slug":"migrazione-a-cloud","chunk_index":7,"content":"### Migrazione a cloud\n- Cambia `.env` su App Service: `DB_MODE=sql`, parametri DB/AAD, `AUTH_ISSUER`/`AUTH_JWKS_URI`.\n- Le stesse rotte funzionano senza modifiche client.","size_chars":171,"tokens_estimate":43}
{"doc_id":"ew-dev-dual-mode","path":"dev-dual-mode.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":8,"content":"## Verify\n- Con `DB_MODE=mock` l'API risponde senza dipendenze DB.\n- Con `DB_MODE=sql` l'API risponde e le query/SP non generano errori di connessione.","size_chars":151,"tokens_estimate":38}
{"doc_id":"ew-doc-alignment-gate","path":"doc-alignment-gate.md","title":"Doc Alignment Gate","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:31:46+01:00","section_level":2,"anchor_text":"Doc Alignment Gate","anchor_slug":"doc-alignment-gate","chunk_index":1,"content":"# Doc Alignment Gate\nBreadcrumb: Home / CI / Doc Alignment\nBadge: WhatIf‑Ready ✅\n\nObiettivo\n- Evitare drift tra azioni dichiarate dagli agenti e la documentazione ad essi associata (intent template, ricette KB, pagina Wiki).\n\nCheck eseguiti\n- Intent template: per ogni `actions[].name` nel manifest, verifica esistenza `agents/<agent>/templates/intent.<action>.sample.json`.\n- KB: verifica presenza di una riga in `agents/kb/recipes.jsonl` con `\"intent\":\"<action>\"`.\n- Wiki: verifica presenza di pagina associata (mappatura semplice per domini noti: DBA/Datalake).\n\nEsecuzione\n- Orchestratore: `pwsh scripts/ewctl.ps1 --engine ps --intent doc-alignment`\n- Script diretto: `pwsh scripts/doc-alignment-check.ps1 [-FailOnError]`\n\nOutput\n- JSON con `ok` e gli elenchi `missingIntentTemplates`, `missingKbRecipes`, `missingWikiPages`.\n\nIntegrazione CI\n- Aggiungi uno step che esegue lo script con `-FailOnError` se vuoi bloccare il merge fino al riallineamento.","size_chars":956,"tokens_estimate":239}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"1) Principi anti-allucinazione","anchor_slug":"1-principi-anti-allucinazione","chunk_index":1,"content":"## 1) Principi anti-allucinazione\n- **Fonte canonica**: per ogni argomento esiste UNA pagina \"canonico\". Le altre pagine sono stub con link `canonical`.\n- **Redirect/shim**: pagine duplicate (case/vecchi path) vanno marcate `status: deprecated`, `canonical: <path>`, `llm.include: false` e devono restare minimali.\n- **Path reali**: ogni istruzione operativa cita file/command reali del repo (in backtick).\n- **No \"vedi sopra/sotto\"**: ogni pagina deve essere autonoma.\n- **Esempi eseguibili**: comandi copiabili (PowerShell) e output/verify espliciti.\n- **Acronimi**: la prima occorrenza spiega l'acronimo (es. ADO, SLO, DQ).","size_chars":626,"tokens_estimate":156}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"2) Struttura minima per pagina (RAG-first)","anchor_slug":"2-struttura-minima-per-pagina-rag-first","chunk_index":2,"content":"## 2) Struttura minima per pagina (RAG-first)\nTarget: **300-600 token** per pagina (molte pagine piccole > una enorme).\n\nSezione consigliata (ordine):\n1. Scopo\n2. Prerequisiti\n3. Passi\n4. Verify (cosa controllare)\n5. Errori comuni / Troubleshooting\n6. References (2-6 link a file/pagine correlate)\n7. Domande a cui risponde (3-7)\n\nNota: la sezione **Domande a cui risponde** è obbligatoria solo per le pagine **operative** (`layer/runbook`, `layer/howto`, `layer/orchestration`, `layer/intent`). Per le pagine di reference/spec è consigliata ma non bloccante.","size_chars":559,"tokens_estimate":140}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"3) Front matter YAML (obbligatorio)","anchor_slug":"3-front-matter-yaml-obbligatorio","chunk_index":3,"content":"## 3) Front matter YAML (obbligatorio)\nOgni `.md` deve avere front matter completo:\n- `id, title, summary, status, owner, tags`\n- `llm.include, llm.pii, llm.chunk_hint`\n- `entities` (anche vuoto)\n\nNota: anche gli indici (`index.md`) devono essere **machine-readable** (front matter incluso).\nNota: `id` deve essere **globalmente univoco** nella Wiki (evita ambiguità nei retrieval/index e collisioni di chunk/manifest).","size_chars":419,"tokens_estimate":105}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":3,"anchor_text":"3.1) Draft hygiene (anti-rumore)","anchor_slug":"31-draft-hygiene-anti-rumore","chunk_index":4,"content":"### 3.1) Draft hygiene (anti-rumore)\nLe pagine con `status: draft` devono avere anche:\n- `updated: <data>` (es. `updated: '2026-01-05'`)\n- `next: <prossimo step>` **oppure** `checklist:` (lista di task)\n\nObiettivo: evitare pagine draft “orfane” che diventano rumore per agenti e umani.","size_chars":285,"tokens_estimate":71}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"4) Tagging: tassonomia (vocabolario controllato)","anchor_slug":"4-tagging-tassonomia-vocabolario-controllato","chunk_index":5,"content":"## 4) Tagging: tassonomia (vocabolario controllato)\nObiettivo: migliorare ricerca e clustering riducendo token.","size_chars":111,"tokens_estimate":28}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":3,"anchor_text":"4.1 Tag “base” (sempre presenti)","anchor_slug":"41-tag-base-sempre-presenti","chunk_index":6,"content":"### 4.1 Tag “base” (sempre presenti)\nUsare sempre almeno:\n- `domain/<db|datalake|frontend|docs|control-plane|ux>`\n- `layer/<howto|reference|runbook|spec|orchestration|intent|gate>`\n- `audience/<non-expert|dev|dba|ops>`\n- `privacy/<internal|public|restricted>`\n- `language/<it|en>`","size_chars":280,"tokens_estimate":70}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":3,"anchor_text":"4.2 Tag “specifici” (facoltativi)","anchor_slug":"42-tag-specifici-facoltativi","chunk_index":7,"content":"### 4.2 Tag “specifici” (facoltativi)\nEsempi:\n- `n8n`, `ewctl`, `argoss`, `flyway`, `terraform`, `ado`, `etl`, `data-quality`\n\nRegole:\n- Pochi tag, ma consistenti.\n- Evitare sinonimi duplicati (es. scegliere `data-quality` oppure `dq`, non entrambi).","size_chars":250,"tokens_estimate":62}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":3,"anchor_text":"4.3 Tag taxonomy + lint","anchor_slug":"43-tag-taxonomy-lint","chunk_index":8,"content":"### 4.3 Tag taxonomy + lint\n- Taxonomy (source of truth): `docs/agentic/templates/docs/tag-taxonomy.json`\n- Pagina guida: `docs-tag-taxonomy.md`\n- Lint: `pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports` (aggiungi `-RequireFacets` per enforcement)","size_chars":287,"tokens_estimate":72}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"5) WHAT-first: orchestrazioni e intents","anchor_slug":"5-what-first-orchestrazioni-e-intents","chunk_index":9,"content":"## 5) WHAT-first: orchestrazioni e intents\nOgni nuovo workflow/use case deve avere:\n- Manifest orchestrazione (WHAT): `docs/agentic/templates/orchestrations/*.manifest.json`\n- Intent schema (WHAT): `docs/agentic/templates/intents/*.intent.json`\n- UX prompts (IT/EN): `docs/agentic/templates/orchestrations/ux_prompts.it.json` e `ux_prompts.en.json`\n- Pagina Wiki orchestrazione: `Wiki/EasyWayData.wiki/orchestrations/<wf>.md`\n- Diario di bordo (contratto output): timeline con `timestamp, stage, outcome, reason, next, decision_trace_id, artifacts[]`","size_chars":550,"tokens_estimate":138}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"6) KB: ricette come “entrypoints” operativi","anchor_slug":"6-kb-ricette-come-entrypoints-operativi","chunk_index":10,"content":"## 6) KB: ricette come “entrypoints” operativi\nOgni cambiamento che introduce un comando/procedura deve aggiornare `agents/kb/recipes.jsonl` con:\n- `intent` (stringa stabile)\n- `steps` (comandi copiabili)\n- `verify` (cosa osservare)\n- `references` (file/pagine)","size_chars":261,"tokens_estimate":65}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"7) Gates: controlli automatici (local + CI)","anchor_slug":"7-gates-controlli-automatici-local-ci","chunk_index":11,"content":"## 7) Gates: controlli automatici (local + CI)","size_chars":46,"tokens_estimate":12}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":3,"anchor_text":"Remediation (auto-fix front matter)","anchor_slug":"remediation-auto-fix-front-matter","chunk_index":12,"content":"### Remediation (auto-fix front matter)\nQuando il lint fallisce, usa lo script di patch (non tocca il contenuto, solo il front matter):\n- `pwsh scripts/wiki-frontmatter-patch.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -Apply`\n\nNota: `Wiki/EasyWayData.wiki/logs/reports/` contiene **report generati** e va trattato come non-canonico (escluso dai controlli “hard”).\nComandi utili:\n- Doc alignment gate: `pwsh scripts/doc-alignment-check.ps1 -FailOnError`\n- WHAT-first lint: `pwsh scripts/whatfirst-lint.ps1 -FailOnError`\n- Wiki front matter lint: `pwsh scripts/wiki-frontmatter-lint.ps1 -FailOnError`\n- Wiki gap report (sezioni minime + draft hygiene + placeholder): `pwsh scripts/wiki-gap-report.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName <SCOPE> -FailOnError -SummaryOut wiki-gap.<SCOPE>.json`\n- Governance gates (tutto): `pwsh scripts/ewctl.ps1 --engine ps --checklist --dbdrift --kbconsistency --noninteractive --logevent`\n\nNota CI: il gate `WikiGapReport` in `azure-pipelines.yml` esegue `wiki-gap-report` in modalità **phased** (scope per scope) o **all** (toggle `WIKI_GAP_MODE=all`) per evitare regressioni.","size_chars":1244,"tokens_estimate":311}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":3,"anchor_text":"Agent-ready audit (a monte)","anchor_slug":"agent-ready-audit-a-monte","chunk_index":13,"content":"### Agent-ready audit (a monte)\nPer evitare che “gli agenti arrivino sempre a valle”, la repo espone uno **standard verificabile** + uno script di audit aggregato:\n- Rubrica machine-readable: `docs/agentic/templates/docs/agent-ready-rubric.json`\n- Audit aggregato: `pwsh scripts/agent-ready-audit.ps1 -Mode all -FailOnError -SummaryOut agent-ready-audit.json`\n\nL’audit è pensato per essere riusato anche in altri progetti: produce un report JSON con `ok`, `errors/warnings` e dettaglio per scope.","size_chars":496,"tokens_estimate":124}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"8) Definition of Done (Doc agentica)","anchor_slug":"8-definition-of-done-doc-agentica","chunk_index":14,"content":"## 8) Definition of Done (Doc agentica)\nUna modifica è “done” quando:\n- La pagina è autonoma, corta, con esempi e verify.\n- Front matter completo + tag base coerenti.\n- Link funzionanti.\n- KB aggiornata (se aggiunge una procedura).\n- Se cambia workflow: manifest/intents/ux_prompts + pagina Wiki.\n- Gates verdi (doc alignment / whatfirst / front matter / governance se rilevante).","size_chars":380,"tokens_estimate":95}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"9) Audit periodico (cosa misurare)","anchor_slug":"9-audit-periodico-cosa-misurare","chunk_index":15,"content":"## 9) Audit periodico (cosa misurare)\n- % pagine con front matter completo\n- % pagine con tag base (domain/layer/audience/privacy/language)\n- Pagine troppo lunghe (oltre budget token)\n- Duplicati (stesso argomento in più pagine senza canonical)\n- Link rotti e placeholder\n- Gap report (owner/summary/draft hygiene + sezioni minime per howto/runbook)","size_chars":349,"tokens_estimate":87}
{"doc_id":"ew-docs-agentic-audit","path":"docs-agentic-audit.md","title":"Documentazione Agentica - Audit & Policy (Canonico)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T20:07:59+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":16,"content":"## Collegamenti\n- Regole semplici: `docs-conventions.md`\n- LLM readiness checklist: `llm-readiness-checklist.md`\n- Start here: `start-here.md`\n- Control plane: `control-plane/index.md`","size_chars":184,"tokens_estimate":46}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":2,"anchor_text":"1) Nomi di file e cartelle","anchor_slug":"1-nomi-di-file-e-cartelle","chunk_index":1,"content":"## 1) Nomi di file e cartelle\n- Per nuovi file/cartelle: solo minuscole ASCII, numeri e trattini `-` (kebab-case).\n- Niente spazi, niente caratteri speciali, niente accenti.\n- Non mescolare separatori nello stesso path (es. evitare `foo_bar-baz.md`).\n- Eccezioni: `_` è ammesso solo in alberi legacy già esistenti o in artefatti tecnici (DB/payload/config), non nei nuovi path Wiki.\n- Esempio: `easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md`.","size_chars":457,"tokens_estimate":114}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":2,"anchor_text":"2) kebab-case vs snake_case","anchor_slug":"2-kebab-case-vs-snakecase","chunk_index":2,"content":"## 2) kebab-case vs snake_case\nRegola: il canonico lato doc/UI è `kebab-case`; i derivati sono meccanici per il dominio tecnico.\n\n- Canonico (slug/tag): `kebab-case` es. `user-profile-settings`\n- DB/payload: `snake_case` es. `user_profile_settings`\n- Classi/DTO: `PascalCase` es. `UserProfileSettings`\n- Variabili JS: `camelCase` es. `userProfileSettings`","size_chars":355,"tokens_estimate":89}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":3,"anchor_text":"2.1) Quando usare kebab-case","anchor_slug":"21-quando-usare-kebab-case","chunk_index":3,"content":"### 2.1) Quando usare kebab-case\n- URL / routing web: `/dashboard/data-quality-report`\n- Cartelle e file frontend: `user-dashboard/summary-view.tsx`\n- Tag semantici / ontologie AI: `ai-data-quality`","size_chars":198,"tokens_estimate":50}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":3,"anchor_text":"2.2) Quando usare snake_case","anchor_slug":"22-quando-usare-snakecase","chunk_index":4,"content":"### 2.2) Quando usare snake_case\n- Database (SQL Server): `user_profile_id`, `created_at`\n- JSON/CSV (payload e file): `{ \"user_id\": 1001 }`\n- Chiavi configurazione/metadati: `portal_schema_name`","size_chars":195,"tokens_estimate":49}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":2,"anchor_text":"3) Quick check (regex)","anchor_slug":"3-quick-check-regex","chunk_index":5,"content":"## 3) Quick check (regex)\n```text\n# Slug (senza estensione)\nkebab-case: ^[a-z0-9]+(?:-[a-z0-9]+)*$\nsnake_case: ^[a-z0-9]+(?:_[a-z0-9]+)*$\n\n# File .md\nkebab-case file .md: ^[a-z0-9]+(?:-[a-z0-9]+)*\\.md$\nsnake_case file .md: ^[a-z0-9]+(?:_[a-z0-9]+)*\\.md$\n\n# File con estensioni permesse\nkebab-case: ^[a-z0-9]+(?:-[a-z0-9]+)*\\.(?:md|yml|yaml|json|sql|ps1)$\nsnake_case: ^[a-z0-9]+(?:_[a-z0-9]+)*\\.(?:md|yml|yaml|json|sql|ps1)$\n```","size_chars":427,"tokens_estimate":107}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":2,"anchor_text":"4) Link e percorsi","anchor_slug":"4-link-e-percorsi","chunk_index":6,"content":"## 4) Link e percorsi\n- Nei documenti usare backtick per i path reali del repo.\n- Per file generati/artifact, dichiarare chiaramente dove vengono prodotti (CI, `out/`, `logs/`).","size_chars":177,"tokens_estimate":44}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":3,"anchor_text":"4.1) Regola per `index.md` (pagine indice)","anchor_slug":"41-regola-per-indexmd-pagine-indice","chunk_index":7,"content":"### 4.1) Regola per `index.md` (pagine indice)\n`index.md` va bene come “indice di cartella”, ma deve essere leggibile e non ambiguo per un agente.\n\n- Tenere il filename `index.md` quando serve un entrypoint standard nella cartella.\n- Nel frontmatter:\n  - `title` deve essere specifico (kebab-case), non `index`/`Indice`.\n  - `summary` deve dire cosa contiene l’indice e per chi è (non “Documento su …”).\n  - `tags` deve includere `layer/index` e il `domain/*` corretto.\n- Nel contenuto:\n  - aggiungere `Breadcrumb:` e una lista link “canonici” (niente auto-link a `./index.md`).\n  - se la pagina è operativa (runbook/howto/orchestration/intent), includere `## Domande a cui risponde`.","size_chars":684,"tokens_estimate":171}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":2,"anchor_text":"5) Compatibilità Obsidian (lettura)","anchor_slug":"5-compatibilit-obsidian-lettura","chunk_index":8,"content":"## 5) Compatibilità Obsidian (lettura)\n- Usare YAML frontmatter sempre con terminatore su riga separata: `---` (inizio) e `---` (fine) + una riga vuota prima del contenuto.\n- Evitare fence Markdown “rotte”: ogni blocco ``` deve essere chiuso (Obsidian altrimenti evidenzia male e aumenta il rumore).\n- Preferire UTF-8; evitare caratteri di controllo/encoding legacy quando si tocca un file.","size_chars":390,"tokens_estimate":98}
{"doc_id":"docs-conventions","path":"docs-conventions.md","title":"EasyWayData Portal - Regole Semplici (La Nostra Bibbia)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:38:24+01:00","section_level":2,"anchor_text":"6) Regola di coerenza (DoD)","anchor_slug":"6-regola-di-coerenza-dod","chunk_index":9,"content":"## 6) Regola di coerenza (DoD)\nOgni modifica significativa deve aggiornare:\n- una ricetta KB in `agents/kb/recipes.jsonl`\n- almeno una pagina Wiki pertinente\n- (se cambia un workflow) manifest + intents in `docs/agentic/templates/`","size_chars":231,"tokens_estimate":58}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":2,"anchor_text":"Formato\r","anchor_slug":"formato","chunk_index":1,"content":"## Formato\r\n- Tag di facet: `<facet>/<value>` (es: `domain/docs`)\r\n- Tag liberi: `kebab-case` (es: `n8n`, `ewctl`, `flyway`, `data-quality`)","size_chars":140,"tokens_estimate":35}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":2,"anchor_text":"Facet obbligatorie\r","anchor_slug":"facet-obbligatorie","chunk_index":2,"content":"## Facet obbligatorie\r\nOgni pagina canonica dovrebbe avere:\r\n- `domain/<...>`\r\n- `layer/<...>`\r\n- `audience/<...>` (una o più)\r\n- `privacy/<...>`\r\n- `language/<it|en>`","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":2,"anchor_text":"Valori ammessi (v1)\r","anchor_slug":"valori-ammessi-v1","chunk_index":3,"content":"## Valori ammessi (v1)","size_chars":22,"tokens_estimate":6}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"domain\r","anchor_slug":"domain","chunk_index":4,"content":"### domain\r\n- `domain/db`, `domain/datalake`, `domain/frontend`, `domain/docs`, `domain/control-plane`, `domain/ux`","size_chars":115,"tokens_estimate":29}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"layer\r","anchor_slug":"layer","chunk_index":5,"content":"### layer\r\n- `layer/howto`, `layer/reference`, `layer/runbook`, `layer/spec`, `layer/orchestration`, `layer/intent`, `layer/gate`, `layer/index`, `layer/blueprint`","size_chars":163,"tokens_estimate":41}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"audience\r","anchor_slug":"audience","chunk_index":6,"content":"### audience\r\n- `audience/non-expert`, `audience/dev`, `audience/dba`, `audience/ops`","size_chars":85,"tokens_estimate":21}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"privacy\r","anchor_slug":"privacy","chunk_index":7,"content":"### privacy\r\n- `privacy/internal`, `privacy/public`, `privacy/restricted`","size_chars":73,"tokens_estimate":18}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"language\r","anchor_slug":"language","chunk_index":8,"content":"### language\r\n- `language/it`, `language/en`","size_chars":44,"tokens_estimate":11}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":2,"anchor_text":"Regole anti-ambiguità\r","anchor_slug":"regole-anti-ambiguit","chunk_index":9,"content":"## Regole anti-ambiguità\r\n- Evitare sinonimi duplicati: scegliere una forma (`data-quality` oppure `dq`).\r\n- Evitare tag troppo generici se non necessari (es. `misc`).\r\n- Preferire i tag facet ai tag liberi quando servono filtri affidabili.","size_chars":240,"tokens_estimate":60}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":2,"anchor_text":"Lint\r","anchor_slug":"lint","chunk_index":10,"content":"## Lint\r\n- Dry-run (non blocca per facet mancanti):\r\n  - `pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports`\r\n- Strict (core first):\r\n  - `pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -FailOnError`\r\n- Strict (all):\r\n  - `pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope all -FailOnError`","size_chars":485,"tokens_estimate":121}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"Scope (enforcement a fasi)","anchor_slug":"scope-enforcement-a-fasi","chunk_index":11,"content":"### Scope (enforcement a fasi)\nGli scope sono definiti in `docs/agentic/templates/docs/tag-taxonomy.scopes.json`.\nEsempio: enforcement su 20 pagine DB+Datalake:\n- `pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName db-datalake-20 -FailOnError`","size_chars":332,"tokens_estimate":83}
{"doc_id":"ew-docs-tag-taxonomy","path":"docs-tag-taxonomy.md","title":"Tag Taxonomy (Controllata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:24+01:00","section_level":3,"anchor_text":"Scope (retrieval stabile per agenti)","anchor_slug":"scope-retrieval-stabile-per-agenti","chunk_index":12,"content":"### Scope (retrieval stabile per agenti)\nPer retrieval (es. n8n) conviene usare scope `*-all` basati su directory/prefix: sono più stabili e riducono manutenzione rispetto a liste enumerate.\n\n\r\nEsempi scope disponibili (casistiche):\n- `db-datalake-20`\n- `db-programmability-rest-20`\n- `onboarding-runbook-20`\n- `iam-security-20`\n- `ops-runbooks-20`\n- `argos-dq-20`\n- `portal-api-frontend-20`\n- `controlplane-governance-20`\n- `frontend-ui-20`\n- `governance-all`\n- `portal-all`\n- `data-all`\n- `security-all`","size_chars":505,"tokens_estimate":126}
{"doc_id":"ew-dr-gaps-vs-ada","path":"dr-gaps-vs-ada.md","title":"Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)","anchor_slug":"cosa-integrare-da-ada-per-easywaydataportal-approccio-operativo-e-cosa-aggiungere","chunk_index":1,"content":"# Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)\n\nScopo\n- Descrivere in modo operativo quali pratiche, pattern e componenti presi dall’esperienza ADA vanno riutilizzati o adattati per EasyWayDataPortal, e quali elementi nuovi è opportuno introdurre per ottenere una soluzione cloud‑native con capacità DR cross‑cloud (Azure primary, GCP DR). Componenti esclusi: Databricks, Informatica, Axon, Synapse.\n\nSintesi veloce\n- ADA fornisce runbook consolidati, criteri di monitoraggio e policy di sicurezza utili come baseline. Per EasyWayDataPortal occorre:\n  1) riutilizzare i processi maturi (checklist, criteri di accettazione, regole monitoring),\n  2) riprogettarli come artefatti \"as‑code\" (Terraform, pipeline, runbook automatizzati),\n  3) mappare le contromisure su servizi PaaS e su GCP per la parte DR.\n\nCosa prendere da ADA (da riutilizzare/adattare)\n- Runbook e checklist DR: sequenze operative, test plan, criteri di accettazione da usare come base per runbook‑as‑code.\n- Politiche di monitoraggio e soglie: regole di alerting e dashboard (App Insights / Log Analytics) da importare e adattare.\n- Pattern di network isolation: principi di uso di Private Endpoints e segmentazione rete.\n- Gestione centralizzata dei segreti: Key Vault + policy di rotazione e auditing.\n- Strategia backup DB (geo‑replica, Failover Group) e procedure di test DR (template dei test).\n- WAF/Application Gateway ruleset e procedure di hardening.\n\nCosa adattare per EasyWayDataPortal (trasformazione cloud‑native)\n- Convertire runbook VM‑centrici in runbook PaaS/container‑centrici (Terraform + pipeline CI).\n- Automatizzare switch/failover DNS tramite orchestrazione (minimizzare intervento manuale).\n- Sostituire procedure manuali di segreti con pipeline sicure di sincronizzazione verso Secret Manager (GCP) per test DR.\n- Containerizzare o spostare su App Service/Container Apps i componenti che lo consentono per ridurre il tempo di recovery.\n- Implementare teardown automatico per ambienti DR temporanei (evitare costi e drift).\n- Aggiungere test automatici che misurino RTO/RPO e producano report eseguibili on‑demand o schedulati.","size_chars":2158,"tokens_estimate":540}
{"doc_id":"ew-dr-gaps-vs-ada","path":"dr-gaps-vs-ada.md","title":"Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)","anchor_slug":"cosa-integrare-da-ada-per-easywaydataportal-approccio-operativo-e-cosa-aggiungere","chunk_index":2,"content":"Cosa aggiungere specifico per EasyWayDataPortal (deliverable essenziali)\n1) Runbook‑as‑Code (MVP DR test)\n   - Orchestrazione: replica DB → provisioning risorse PaaS minime su GCP → replica assets essenziali → aggiornamento segreti temporanei → smoke tests → teardown.\n   - Tecnologie consigliate: Terraform, Azure Pipelines / GitHub Actions, PowerShell/Az CLI e Cloud Build (GCP).\n2) Script sincronizzazione login SQL (SID) e permessi\n   - Script parametrizzato (SQL + PowerShell) per ricreare login con SID su replica/DR.\n3) Terraform modules per GCP (POC)\n   - Cloud SQL, GCS, Secret Manager, Cloud Load Balancing, Cloud Armor.\n4) Processo di sincronizzazione storage\n   - azcopy/gsutil o job su Cloud Run/Dataflow per esportare/importare oggetti critici (config, assets, audit) con versioning.\n5) Pipeline sicure per segreti e certificati\n   - Processo controllato con audit trail e possibilità di rotazione temporanea per test DR.\n6) DNS & Ingress playbook\n   - Disegno Front Door ↔ Cloud LB con health probes; playbook DNS as‑code per cutover e rollback.\n7) Monitoring & report automatico RTO/RPO\n   - Dashboard centralizzata + runbook di test schedulato e report export.\n\nPriorità raccomandata (MVP: DB + Storage + Ingress)\n- Phase 0 — Inventory & RTO/RPO mapping: 5 giorni (matrice dettagliata).\n- Phase 1 — Script SQL SID + runbook teardown + Terraform POC GCP (minimale): 7–12 giorni.\n- Phase 2 — Runbook end‑to‑end, segreti sync, monitoring automazione: 10–20 giorni.\n- Phase 3 — Test E2E, hardening e operationalization: 7–14 giorni.\n\nStima tempi complessivi\n- MVP (DB + Storage + Ingress) : 6–8 settimane.\n- Set completo multi‑cloud con automazioni e test continui: 11–14 settimane.\n\nRaccomandazioni operative\n- Iniziare dall’inventory tecnica (Fase 0) per ottenere nomi risorsa, owners e mapping delle dipendenze.\n- Produrre prima i runbook minimi ripetibili (scripts + pipeline) e poi estendere il provisioning su GCP.\n- Tenere tutte le procedure \"as‑code\" nella repo per audit, review e rollback ripetibili.\n- Per componenti legacy non containerizzabili, prevedere immagine VM automatizzata come transizione temporanea.","size_chars":2135,"tokens_estimate":534}
{"doc_id":"ew-dr-gaps-vs-ada","path":"dr-gaps-vs-ada.md","title":"Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"Cosa integrare da ADA per EasyWayDataPortal (approccio operativo e cosa aggiungere)","anchor_slug":"cosa-integrare-da-ada-per-easywaydataportal-approccio-operativo-e-cosa-aggiungere","chunk_index":3,"content":"Materiale ADA utile da riusare (reference)\n- DR_Plan_ADA.docx — checklists, runbook manuali e sequenze test.\n- ADA Reference Architecture.pptx — diagrammi rete, zonizzazione, failover patterns.\n- Esempi di runbook e playbook operativi (estrarre e trasformare in script).\n\nOutput che posso produrre subito (se approvi)\n- Matrice inventory→RTO/RPO dettagliata in 5 giorni (CSV + MD).\n- Template runbook DR‑MVP (script + pipeline) per DB+Storage+Ingress in 7–10 giorni.\n- Repo Terraform POC su GCP (DB+GCS+Secret Manager+LB) in 7–14 giorni.\n\nProssimi passi consigliati (azione immediata)\n1. Conferma: procedo con l'inventory tecnica (Fase 0) e genero la matrice dettagliata entro 5 giorni.\n2. Durante l'inventory, raccolgo i contatti/owners e i nomi risorsa; successivamente stabiliamo la priorità per Phase 1 (SQL SID + teardown).\n3. Manteniamo la documentazione aggiornata in wiki e versioniamo tutti gli artefatti as‑code nel repository.","size_chars":937,"tokens_estimate":234}
{"doc_id":"ew-dr-inventory-matrix","path":"dr-inventory-matrix.md","title":"DR — Inventory & matrice componente → RTO / RPO","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"DR — Inventory & matrice componente → RTO / RPO","anchor_slug":"dr-inventory-matrice-componente-rto-rpo","chunk_index":1,"content":"# DR — Inventory & matrice componente → RTO / RPO\n\nScopo\n- Fornire una matrice operativa che elenchi i componenti critici di EasyWayDataPortal con i relativi dati essenziali (resource type, resource name, RG, owner) e gli obiettivi RTO/RPO. Questo documento serve come output della Fase 0 e come input per le attività di POC DR (Terraform, runbook, sincronizzazione storage, segreti).\n\nNota\n- Se possibile popolare automaticamente con lo script `scripts/collect_azure_inventory.ps1`. In alternativa, compilare manualmente il CSV sottostante.\n\nFormato CSV (intestazione)\n- Copia l'intestazione qui sotto in un file CSV (es. Wiki/EasyWayData.wiki/DR_Inventory_Matrix.csv) oppure usa il blocco CSV qui presente per lavorare direttamente.\n\nCSV Header\nComponent,ComponentType,ResourceName,ResourceGroup,Subscription,Environment (prod/stg/dev),Owner (name/email),Criticality (P0/P1/P2),BusinessImpact (descrizione breve),RTO_target,RPO_target,RecoveryAction (runbook/terraform/module),Notes,Status\n\nEsempio CSV (riga di esempio)\n\"Portal API\",\"App Service\",\"ew-portal-api\",\"rg-ew-prod\",\"subs-contoso-prod\",\"prod\",\"dbadmin@contoso.com\",\"P0\",\"Blocco operativo se down\",\"04:00\",\"00:15\",\"Runbook-DB-Failover / TF-POC-GCP\",\"Requires SID sync script\",\"ToDo\"\n\nBlocco CSV (puoi copiare/incollare)\nComponent,ComponentType,ResourceName,ResourceGroup,Subscription,Environment (prod/stg/dev),Owner (name/email),Criticality (P0/P1/P2),BusinessImpact (descrizione breve),RTO_target,RPO_target,RecoveryAction (runbook/terraform/module),Notes,Status\n\"\",\"\", \"\", \"\", \"\", \"\", \"\", \"P1\", \"\", \"04:00\", \"00:30\", \"\", \"\", \"TBD\"\n\nLinee guida per la compilazione\n- Component: nome applicativo o componente (es. Portal API, Portal DB, Portal Storage, Auth service, CDN, DNS).\n- ComponentType: tipo di risorsa (Azure SQL, Storage Account / ADLS Gen2, App Service, Container App, Key Vault, Front Door, Private Endpoint, etc.)\n- RTO_target / RPO_target: formati consigliati hh:mm (es. 04:00, 00:15). Se non ancora definiti lascia \"TBD\".\n- Criticality: P0 = critico (blocco produzione), P1 = degrado funzionale importante, P2 = non critico.\n- RecoveryAction: link a runbook-as-code previsto o a modulo Terraform da eseguire in DR.\n- Notes: indicare dipendenze (es. dipende da Key Vault X), presenza di Private Endpoint, necessità di SID sync, ecc.\n- Status: ToDo / InProgress / Done / NotApplicable.","size_chars":2361,"tokens_estimate":590}
{"doc_id":"ew-dr-inventory-matrix","path":"dr-inventory-matrix.md","title":"DR — Inventory & matrice componente → RTO / RPO","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"DR — Inventory & matrice componente → RTO / RPO","anchor_slug":"dr-inventory-matrice-componente-rto-rpo","chunk_index":2,"content":"Priorità suggerita di popolamento\n1. Raccogliere e compilare subito tutti i database e gli storage critici (Azure SQL, Storage Accounts, Key Vaults).\n2. Compilare hostnames/endpoint per ingress (Front Door / App Gateway / Frontends) e DNS zones.\n3. Identificare owner e contatti operativi (email) per ogni componente.\n4. Per DB: indicare se esiste geo‑replica o failover group; se no, marcarlo come gap da colmare.\n\nOutput che genererò dopo popolamento\n- Versione MD della matrice con riepilogo per criticality (tabella aggregata).\n- CSV pronto per import in foglio di calcolo.\n- Elenco gap operativi e deliverable immediati (es. script SID, Terraform POC per Cloud SQL/GCS, runbook teardown).\n- PR in repo con runbook template + task list prioritarie.\n\nProssimi passi consigliati (azione)\n- Esegui lo script `pwsh -NoProfile -ExecutionPolicy Bypass -File .\\scripts\\collect_azure_inventory.ps1 -OutputFile .\\azure_inventory.json` e incolla qui la sezione SqlServers / SqlDatabases / KeyVaults / StorageAccounts / PrivateEndpoints / WebApps / FrontDoors / DnsZones.\n- Oppure: scarica il CSV con intestazione e compila manualmente le righe principali (DB, Storage, Ingress, KeyVault).\n\nSe vuoi, genero subito il file CSV fisico nella wiki (Wiki/EasyWayData.wiki/DR_Inventory_Matrix.csv) con l'intestazione: dimmi se preferisci che lo crei ora.","size_chars":1341,"tokens_estimate":335}
{"doc_id":"easyway-webapp","path":"easyway-webapp.md","title":"🎯 EasyWay Data Portal – Start With Why","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"🛠 How – Come lo facciamo\r","anchor_slug":"how-come-lo-facciamo","chunk_index":1,"content":"## 🛠 How – Come lo facciamo\n\n- Costruiamo una piattaforma **modulare e intuitiva**, accessibile da web  \r\n- Ogni dato viene **smontato, arricchito e riconnesso** con logiche precise  \r\n- Le informazioni sono **analizzabili, tracciabili, e personalizzabili**  \r\n- Ogni utente ha **solo ciò che gli serve**, con accessi profilati e sicuri  \n\n---","size_chars":344,"tokens_estimate":86}
{"doc_id":"easyway-webapp","path":"easyway-webapp.md","title":"🎯 EasyWay Data Portal – Start With Why","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"📦 What – Cosa offriamo\r","anchor_slug":"what-cosa-offriamo","chunk_index":2,"content":"## 📦 What – Cosa offriamo\n\nUn portale dati dove puoi:\r\n- 📥 **Caricare** dati da Excel, FattureInCloud, Danea  \r\n- 🔄 **Arricchire** i dati con logiche personalizzate  \r\n- 📊 **Analizzare** tramite dashboard dinamiche  \r\n- 📆 **Schedulare** eventi ricorrenti o automatismi  \r\n- 👤 **Gestire utenti, ruoli e profili di accesso**  \r\n- 🤖 **Integrare AI Agents intelligenti** per:\r\n  - automatizzare attività di **Application Management Services (AMS)**  \r\n  - abilitare un’interazione **naturale, efficace e contestualizzata** con i servizi della piattaforma\n\nTutto questo in un ecosistema **scalabile**, **containerizzato** (Docker), e **pronto al cloud**.","size_chars":656,"tokens_estimate":164}
{"doc_id":"easyway-webapp","path":"easyway-webapp.md","title":"🎯 EasyWay Data Portal – Start With Why","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:41+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\r\n- Quale visione guida EasyWay Data Portal (Why/How/What)?\r\n- Quali sono i benefici chiave per i tenant e gli utenti?\r\n- Come è organizzata l’architettura a livello alto?\r\n- In che modo l’AI/AMS si integra nei flussi del portale?","size_chars":255,"tokens_estimate":64}
{"doc_id":"ew-enforcer-guardrail","path":"enforcer-guardrail.md","title":"enforcer-guardrail","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:42+01:00","section_level":2,"anchor_text":"enforcer-guardrail","anchor_slug":"enforcer-guardrail","chunk_index":1,"content":"Perché\n- Serve a bloccare azioni “fuori scope” in modo automatico e precoce. In pratica, verifica che i file toccati da una PR rientrino negli `allowed_paths` dell’agente responsabile (da `agents/<agent>/manifest.json`).\n\nCosa fa\n- Esegue `scripts/enforcer.ps1` su `git diff` per gli agenti chiave: `agent_governance`, `agent_docs_review`, `agent_pr_manager`.\n- In caso di violazioni, il job fallisce subito (fail early) prima di build/test/gates.\n\nDove sta in pipeline\n- Stage iniziale `PreChecks`, job `EnforcerCheck` (in `azure-pipelines.yml`).\n\nCome renderlo obbligatorio in PR\n- In Azure Repos → Branch Policies della branch di destinazione (`develop`, `main`):\n  - Aggiungi la pipeline come build validation.\n  - Seleziona il job `EnforcerCheck` come `required`.\n\nBenefici\n- Riduce il rischio operativo e impedisce scope creep.\n- Rende vincolanti gli `allowed_paths` dei manifest agent.\n- Fornisce feedback chiaro e tracciabile su violazioni.\n\nRiferimenti\n- `azure-pipelines.yml` (stage `PreChecks` → job `EnforcerCheck`)\n- `scripts/enforcer.ps1`\n- `agents/agent_*/manifest.json`","size_chars":1085,"tokens_estimate":271}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Endpoints","anchor_slug":"endpoints","chunk_index":1,"content":"## Endpoints\n\n| id | name | kind | link |\n|---|---|---|---|\n| api-config | GET /api-config | endpoint | [./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001-get-api-config.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001-get-api-config.md) |\n| api-branding | GET /api-branding | endpoint | [./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md) |\n| api-users | CRUD /api/users | endpoint | [./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md) |","size_chars":809,"tokens_estimate":202}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"DB Stored Procedures","anchor_slug":"db-stored-procedures","chunk_index":2,"content":"## DB Stored Procedures\n\n| id | name | kind | link |\n|---|---|---|---|\n| sp-portal-configuration | PORTAL.stored-procedure.configuration | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md) |\n| sp-portal-profile-domains | PORTAL.stored-procedure.profile-domains | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md) |\n| sp-portal-section-access | PORTAL.stored-procedure.section-access | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md) |\n| sp-portal-stats-execution-log | PORTAL.stored-procedure.stats-execution-log | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md) |\n| sp-portal-subscription | PORTAL.stored-procedure.subscription | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md) |\n| sp-portal-tenant | PORTAL.stored-procedure.tenant | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md) |\n| sp-portal-user-notification-settings | PORTAL.stored-procedure.user-notification-settings | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"DB Stored Procedures","anchor_slug":"db-stored-procedures","chunk_index":3,"content":"/stored-procedure/user-notification-settings.md) |\n| sp-portal-users | PORTAL.stored-procedure.users | stored-procedure | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md) |","size_chars":350,"tokens_estimate":88}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"DB Sequences","anchor_slug":"db-sequences","chunk_index":4,"content":"## DB Sequences\n\n| id | name | kind | link |\n|---|---|---|---|\n| seq-portal | SEQUENCE (PORTAL) | sequence | [./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md) |","size_chars":309,"tokens_estimate":77}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Policies","anchor_slug":"policies","chunk_index":5,"content":"## Policies\n\n| id | name | kind | link |\n|---|---|---|---|\n| policy-api-store-procedure | Policy API ↔ Store Procedure | policy | [./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md) |\n| policy-logging-sensitive | Gestione Log & Dati Sensibili | policy | [./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md) |\n| policy-microservices-gateway | Policy di Configurazione & Sicurezza — Microservizi e API Gateway | policy | [./easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md](./easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md) |","size_chars":966,"tokens_estimate":242}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Flows","anchor_slug":"flows","chunk_index":6,"content":"## Flows\n\n| id | name | kind | link |\n|---|---|---|---|\n| flow-login-onboarding | Login & Onboarding | flow | [./easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md](./easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md) |\n| flow-notifiche | Notifiche – Gestione | flow | [./easyway-webapp/02_logiche_easyway/notifiche-gestione.md](./easyway-webapp/02_logiche_easyway/notifiche-gestione.md) |\n| flow-external-apis | API Esterne – Integrazione | flow | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md) |","size_chars":602,"tokens_estimate":150}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Data","anchor_slug":"data","chunk_index":7,"content":"## Data\n\n| id | name | kind | link |\n|---|---|---|---|\n| datalake-naming-standard | Standard Accesso Storage e Datalake (IAM & Naming) | standard | [./easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md](./easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md) |","size_chars":364,"tokens_estimate":91}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Standards","anchor_slug":"standards","chunk_index":8,"content":"## Standards\n\n| id | name | kind | link |\n|---|---|---|---|\n| std-rest-naming | Convenzioni REST e naming | standard | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/convenzioni-rest-e-naming.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/convenzioni-rest-e-naming.md) |\n| std-best-practice-naming | Best Practice Naming & Scalabilità | standard | [./easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md](./easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md) |","size_chars":537,"tokens_estimate":134}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Guides","anchor_slug":"guides","chunk_index":9,"content":"## Guides\n\n| id | name | kind | link |\n|---|---|---|---|\n| guide-logging-audit | Logging & Audit | guide | [./easyway-webapp/02_logiche_easyway/logging-and-audit.md](./easyway-webapp/02_logiche_easyway/logging-and-audit.md) |\n| guide-api-onboarding | API – Onboarding | guide | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-onboarding.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-onboarding.md) |\n| guide-api-notifiche | API – Notifiche | guide | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md) |\n| guide-api-invio-notifica | API – Invio Notifica | guide | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md) |\n| guide-api-checklist-test | Checklist di test API | guide | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md) |\n| guide-integrazione-shopify | Esempio – Integrazione Shopify | guide | [./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md) |","size_chars":1383,"tokens_estimate":346}
{"doc_id":"ew-entities-index","path":"entities-index.md","title":"Entities Index","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":10,"content":"## Domande a cui risponde\n- Dove trovo l'elenco delle entità e i link rapidi?\n- Quali categorie di entità sono coperte?\n- Come navigo verso documenti specifici partendo dall'indice?","size_chars":181,"tokens_estimate":45}
{"doc_id":"ew-etl-dq-framework","path":"etl-dq-framework.md","title":"ETL – Data Quality Framework","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"ETL – Data Quality Framework","anchor_slug":"etl-data-quality-framework","chunk_index":1,"content":"# ETL – Data Quality Framework\nBreadcrumb: Home / Datalake / ETL DQ Framework\n\nScopo\n- Definire classi di regole (completezza, formato, dominio, range, unicità, referenziale), severità e modalità di applicazione in pipeline.\n\nArgos in EasyWay\n- Per il framework completo ARGOS (Gates, DSL, Playbook, Profiling, Coach) vedi `argos/argos-overview.md` e le relative pagine.\n\nClassi & Severità (bozza)\n- Completezza (required) – mandatory\n- Formato (pattern) – mandatory/advisory\n- Dominio (lista valori) – mandatory/advisory\n- Range (min/max) – advisory\n- Unicità (chiave) – mandatory\n- Referenziale (lookup) – advisory/mandatory in official\n\nApplicazione per fase\n- landing: validazioni minime (schema, campi obbligatori)\n- staging: regole principali (pattern, dominio, range)\n- official: controlli referenziali/finali, dedup\n\nEsito e gestione scarti\n- Esito `OK/BLOCKED` su record/file; scarti in `invalidrows/` con motivazione.\n- Report DQ (conteggi/regole violate) nelle metriche di run.\n\nAudit\n- Loggare per run: regole applicate, conteggi pass/fail, top errori.\n- Retention coerente (vedi Datalake – Set Retention).\n\nIntegrazione agentica\n- Intent futuri: `etl-dq:validate-spec`, `etl-dq:apply` (WhatIf di default).\n- Output Contract: `summary`, conteggi e `changesPreview` (lista regole aggiunte/rimosse).\n\nRiferimenti\n- ETL/ELT Inspirations (ADA Framework)\n- ETL/ELT Playbook\n - ARGOS – Overview: `argos/argos-overview.md`","size_chars":1427,"tokens_estimate":357}
{"doc_id":"ew-etl-elt-playbook","path":"etl-elt-playbook.md","title":"ETL/ELT Playbook","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-etl-elt-playbook","path":"etl-elt-playbook.md","title":"ETL/ELT Playbook","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-etl-elt-playbook","path":"etl-elt-playbook.md","title":"ETL/ELT Playbook","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-etl-elt-playbook","path":"etl-elt-playbook.md","title":"ETL/ELT Playbook","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:46+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-etl-elt-technology-choices","path":"etl-elt-technology-choices.md","title":"ETL/ELT – Scelte Tecnologiche","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"Decisioni Minime (provvisorie)","anchor_slug":"decisioni-minime-provvisorie","chunk_index":1,"content":"## Decisioni Minime (provvisorie)\n- Ambiente sviluppo (dev):\n  - Orchestrazione: Managed Airflow (Small), accensione in fascia oraria (es. 7–19) per contenere i costi.\n  - Esecuzione trasformazioni: Databricks job cluster piccolo con auto-terminate (15').\n  - Ingestion semplice (copy CSV/Blob→ADLS/SQL): ADF opzionale per connettori nativi, oppure Airflow+adattatore.\n- Ambienti test/prod:\n  - Taglie adeguate, HA per orchestratore, alerting e backup abilitati.\n  - Policy di costo: autoscaling, no all-purpose cluster, spegnimento notturno dove possibile.","size_chars":557,"tokens_estimate":139}
{"doc_id":"ew-etl-elt-technology-choices","path":"etl-elt-technology-choices.md","title":"ETL/ELT – Scelte Tecnologiche","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"Quando usare cosa (regola pratica)","anchor_slug":"quando-usare-cosa-regola-pratica","chunk_index":2,"content":"## Quando usare cosa (regola pratica)\n- Solo copy/ingestion standard, poca logica: ADF (attività Copy / Mapping Data Flow).\n- Orchestrazione multi-step, dipendenze e integrazioni eterogenee: Airflow.\n- Trasformazioni dati compute-intensive o notebook-driven (ELT su lakehouse): Databricks.","size_chars":289,"tokens_estimate":72}
{"doc_id":"ew-etl-elt-technology-choices","path":"etl-elt-technology-choices.md","title":"ETL/ELT – Scelte Tecnologiche","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"Mappatura agentica (prossimi step)","anchor_slug":"mappatura-agentica-prossimi-step","chunk_index":3,"content":"## Mappatura agentica (prossimi step)\n- Intent pipeline (spec): `etl-spec:create`, `etl-spec:validate`, `etl:dry-run`, `etl:deploy` (stub).\n- Logging comune: `portal-audit/etl-execution-logs/` con chiavi minime (workflow_key, status, started_at, ended_at, rows_*).\n- Ogni azione agente produce Output Contract (JSON) con `summary` + `changesPreview` (WhatIf) o `stateAfter` (apply).","size_chars":382,"tokens_estimate":96}
{"doc_id":"ew-etl-elt-template","path":"etl-elt-template.md","title":"ETL/ELT – [nome-pipeline]","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"ETL/ELT – [nome-pipeline]","anchor_slug":"etlelt-nome-pipeline","chunk_index":1,"content":"# ETL/ELT – [nome-pipeline]\nBreadcrumb: Home / Datalake / Pipelines / [nome-pipeline]\n\nScopo\n- Cosa fa la pipeline? Per quale dominio? Chi ne è owner?\n\nPrerequisiti\n- Datalake structure/ACL/retention allineati (vedi playbook).\n- Credenziali sorgente sicure (Key Vault / Variable Group).\n\nSorgente\n- Tipo: API/CSV/DB/Altro\n- Endpoint/Connessione: …\n- Autenticazione: …\n- Frequenza: oraria/giornaliera/settimanale\n\nNaming & Partizionamento\n- file: `dataset-<tenant>-<yyyyMMddHHmm>.csv`\n- path: `landing/<tenant>/yyyy=YYYY/mm=MM/dd=DD/`\n\nSchema & Mapping\n- Tabella (colonna, tipo, null, default, note)\n- Trasformazioni/derivazioni\n\nData Quality (DQ)\n- Regole minime: chiavi, formati, range, domini\n- Esito: `OK/BLOCKED`; scarti → `invalidrows/` (con motivazione)\n\nFlusso (sintesi)\n- landing → staging (arricchimento, DQ) → invalidrows/official → SQL (BRONZE/SILVER/GOLD)\n\nSchedule & Orchestrazione\n- Finestra: cron/ADF/Databricks/Airflow\n- Dipendenze: …\n\nMonitoraggio & Fallback\n- Metriche: throughput, latenze, scarti\n- Allarmi: soglie + canali\n- Fallback: retry/backoff, reprocess window\n\nAudit & Logging\n- `portal-audit/etl-execution-logs/...`\n- Correlazione: job id, tenant, dataset, finestra\n\nOutput & Contratti a Valle\n- Tabella/dataset target, SLAs, schema\n\nAllineamento Agentico\n- Intents: `dlk-ensure-structure`, `dlk-apply-acl`, `dlk-set-retention`\n- Output Contract: JSON con summary\n\nQuick Checklist\n- [ ] Sorgente/autenticazione definite\n- [ ] Naming/partizioni conformi\n- [ ] Mapping e DQ documentati\n- [ ] Retention/ACL allineati\n- [ ] Schedule/allarmi configurati\n- [ ] Audit/log attivi","size_chars":1599,"tokens_estimate":400}
{"doc_id":"ew-etl-governance-sla","path":"etl-governance-sla.md","title":"ETL – Governance & SLA","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"ETL – Governance & SLA","anchor_slug":"etl-governance-sla","chunk_index":1,"content":"# ETL – Governance & SLA\nBreadcrumb: Home / Datalake / ETL Governance & SLA\n\nScopo\n- Definire standard di servizio e governo per le pipeline: SLA/SLO/SLI, error budget, alerting, fallback ed escalation, aderenti a EasyWayDataPortal.\n\nPrincipi (EasyWay / agent‑first)\n- As‑Code: target e policy nel repo, versionati e tracciati (spec → gate → audit).\n- WhatIf‑Ready: dry‑run e validazioni prima dei cambi (no sorprese in prod).\n- Output Contract: eventi operativi uniformi (status, tempi, KPI) per dashboard e audit.\n- Guardrail di costo: scelte tecniche che evitano sprechi (autoscaling, spegnimento notturno in dev).\n\nDefinizioni\n- SLI: indicatori misurati (es. latenze, puntualità, throughput, % scarti, success rate).\n- SLO: obiettivi sugli SLI (es. T+60m consegna 99%, success >= 99.5%).\n- SLA: impegno contrattuale (interna/esterna) e penali/processi.\n- RTO/RPO: tempi di ripristino e perdita dati accettabile.\n\nTiering (target suggeriti)\n- Tier 1 (critico): puntualità T+15/30m 99.9%, success 99.9%, RTO 1h, RPO < 15m.\n- Tier 2 (alto): T+60/120m 99.5%, success 99.5%, RTO 4h, RPO < 1h.\n- Tier 3 (normale): T+24h 99%, success 99%, RTO 24h, RPO < 24h.\n\nSLI minimi per pipeline\n- Puntualità consegna (delta atteso vs effettivo per finestra)\n- Success rate (run success / totale)\n- Throughput (rows_out per finestra)\n- Data Quality (tasso scarti, regole top violated)\n- Latency end‑to‑end (inizio estrazione → disponibilità target)\n\nError Budget & Release\n- Ogni SLO ha un “budget di errore” (es. 0.5%/mese): al superamento, congelare cambi non urgenti e lavorare su resilienza.\n- Collegare gating: Doc Alignment + Output Validation + WhatIf obbligatorio per modifiche.\n\nAlerting & Escalation (matrice)\n- Severity 1 (Tier 1): paging immediato (Ops on‑call), escalation entro 15’ a owner pipeline e team‑data.\n- Severity 2: notifica canale #data‑alerts, presa in carico entro 1h.\n- Severity 3: digest giornaliero.\n- Canali: Teams/Email + integrazione con incident management (ticket, post‑mortem sintetico).\n\nFallback & Runbook\n- Retry/backoff automatici; reprocess window definita per ogni pipeline.\n- Quarantena file “sospetti” in `technical/` con ticket.\n- Runbook per: reset stato, ri‑submit job, rigenerazione partizioni, ripristino credenziali.","size_chars":2251,"tokens_estimate":563}
{"doc_id":"ew-etl-governance-sla","path":"etl-governance-sla.md","title":"ETL – Governance & SLA","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"ETL – Governance & SLA","anchor_slug":"etl-governance-sla","chunk_index":2,"content":"Audit & Logging (minimi)\n- Log in `portal-audit/etl-execution-logs/` con campi: workflow_key, status, started_at, ended_at, duration_s, rows_in/out, error_message, env, correlation_id.\n- Conservazione coerente con “Datalake – Set Retention”.\n\nDashboard & KPI\n- Vista per workflow: ultimo run, stato, latenze, throughput, SLO trend, breaches.\n- Vista incident: fallimenti 24h, cause principali, tempo medio di ripristino (MTTR).\n\nAllineamento Agentico\n- Intents (roadmap): `etl-slo:define`, `etl-slo:validate`, `etl-alerts:simulate`.\n- Ogni azione produce Output Contract con `summary`, counts e anteprime (WhatIf) o stato applicato.\n\nSpec SLO (bozza)\n- JSON consigliato per validazione automatica: `agents/agent_datalake/templates/slo/slo.sample.json` (campi minimi: `pipeline_key`, `tier`, `slos[]`, `runbook_url`).\n- Intent di validazione (stub): `pwsh scripts/ewctl.ps1 --engine ps --intent etl-slo-validate`.\n\nQuick Checklist\n- [ ] SLI/SLO per pipeline definiti e versionati\n- [ ] Tier assegnato; RTO/RPO documentati\n- [ ] Alerting/escalation mappati a tier e severity\n- [ ] Runbook fallback pubblici; test periodici\n- [ ] Dashboard KPI operative; audit consolidato\n\nRiferimenti\n- ETL/ELT Playbook; ETL/ELT Template\n- ETL – Table Log Model; ETL – DQ Framework\n- Doc Alignment Gate; Output Contract","size_chars":1301,"tokens_estimate":325}
{"doc_id":"ew-etl-inspirations","path":"etl-inspirations.md","title":"ETL/ELT – Inspirations","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"ETL/ELT – Inspirations","anchor_slug":"etlelt-inspirations","chunk_index":1,"content":"# ETL/ELT – Inspirations\nBreadcrumb: Home / Datalake / ETL Inspirations\n\nFonti (cartella locale)\n- Framework DQ ADA - Informatica - Overview.pdf\n- Framework DQ ADA - Synapse - Overview.pdf\n- Table Log ADA - Overview.pdf\n\nObiettivo\n- Estrarre il “meglio” e armonizzarlo con il modello EasyWay (Playbook, DQ, Logging, Agentico).\n\nDa estrarre (punti chiave)\n- DQ Framework (classi di regole, severità, applicazione in catena landing→staging→official).\n- Governance DQ (ownership, eccezioni, audit di regole).\n- Logging ETL (schema tabellare/logfile, campi minimi, correlazioni, retention).\n\nMapping verso EasyWay\n- DQ → “Regole di Data Quality (DQ)” nel Playbook + pagina “ETL – DQ Framework”.\n- Logging → “Audit & Logging” nel Playbook + pagina “ETL – Table Log Model”.\n- Operatività → Intent agentici (dry-run/apply) e Output Contract per audit uniforme.\n\nProssimi passi\n- Compilare le pagine “ETL – DQ Framework” e “ETL – Table Log Model” con le decisioni derivate.\n- Allineare ricette KB per bootstrap DQ e logging.","size_chars":1016,"tokens_estimate":254}
{"doc_id":"ew-etl-table-log-model","path":"etl-table-log-model.md","title":"ETL – Table Log Model","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:42:59+01:00","section_level":2,"anchor_text":"ETL – Table Log Model","anchor_slug":"etl-table-log-model","chunk_index":1,"content":"# ETL – Table Log Model\nBreadcrumb: Home / Datalake / ETL Table Log\n\nObiettivo\n- Definire tabelle/file log per run ETL: campi minimi, pattern di query e retention.\n\nTabelle/File (bozza)\n- etl_workflow (id, key, engine, owner, sla)\n- etl_run (workflow_id, run_uid, status, started_at, ended_at, duration_s, rows_in, rows_out, bytes_in, bytes_out, error_code, error_message, env)\n- etl_task_run (run_id, task_key, status, started_at, ended_at, duration_s, rows_in, rows_out, error_message)\n- etl_run_metric (run_id, name, value)\n- etl_run_alert (run_id, severity, message, created_at)\n\nAccess patterns\n- Ultimo stato per workflow; fallimenti ultime 24h; runs stuck; breaches SLA; throughput giornaliero.\n\nIntegrazione con agenti\n- Gli agenti registrano start/end run con Output Contract minimo (summary, stato, tempi, KPI) e link a Log Analytics.\n- Dashboard leggono queste tabelle/file per viste operative.\n\nRiferimenti\n- ETL/ELT Inspirations (Table Log)\n- Datalake – Ensure Structure / portal-audit","size_chars":998,"tokens_estimate":250}
{"doc_id":"ew-glossario-errori-faq","path":"glossario-errori-faq.md","title":"Glossario Essenziale EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:47:28+01:00","section_level":2,"anchor_text":"Glossario Essenziale EasyWay","anchor_slug":"glossario-essenziale-easyway","chunk_index":1,"content":"# Glossario Essenziale EasyWay\n\n| Termine      | Significato rapido                              | Esempio/Nota operativa                                       |\r\n|--------------|------------------------------------------------|--------------------------------------------------------------|\r\n| **Intent**   | Descrizione strutturata di un obiettivo o task | `intent.db-table-create.json`: definisce nuova tabella, colonne, privacy |\r\n| **Gate**     | Check/validatore automatico in CI/CD o doc     | Gate “wiki-gap-report”: blocca merge se doc non aggiornata   |\r\n| **Drift**    | Differenza tra stato atteso e reale (es. su DB, doc, config) | “DB drift”: DDL repository ≠ struttura reale sul database    |\r\n| **Agent**    | Script/servizio autonomo che esegue task specifici secondo manifest | `agent_dba` automatizza inventario DB, controlla drift       |\r\n| **Manifest** | File JSON/YAML che descrive comportamento/goal di un agente | `manifest.json` in agent/                                    |\r\n| **Orchestrazione** | Workflow automatizzato che collega task e agent/script | n8n-db-ddl-inventory aggiorna inventario + pagina Wiki       |\r\n| **WhatIf**   | Modalità (simula senza modificare) per vedere effetti di un task | “pwsh ... -WhatIf” non scrive su DB, mostra solo azioni      |\r\n| **Artifact** | File di output/intermedio generato da pipeline o agente | Esempio: `db-ddl-inventory.json`, report QA, log eventi      |\r\n| **Gate verde** | Stato “ok” per check / validazione automatica | Tutti i gate verdi → puoi fare merge o rilasciare            |\n\n---\n\n# FAQ Errori/Pitfall Comuni\n\n**❓ Il test fallisce o il gate non è verde: cosa faccio?**\r\n- Controlla l’output dettagliato: usualmente trovato in `logs/events.jsonl`, artefatti runner, o output CLI (Postman/k6 per API, PowerShell per script).\r\n- Verifica che PR o commit abbiano aggiornato anche doc/manifest, NON solo il codice/sorgente.\r\n- Se il gate richiede aggiornamento wiki/doc, lancia i fix script indicati (es: `pwsh scripts/wiki-gap-report.ps1` per checklist, `wiki-frontmatter-autofix.ps1` per meta info).\r\n- Consulta la sezione “Verify” nelle guide/ricette: ogni workflow/scheda agent fornisce i punti di controllo e recovery.","size_chars":2207,"tokens_estimate":552}
{"doc_id":"ew-glossario-errori-faq","path":"glossario-errori-faq.md","title":"Glossario Essenziale EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:47:28+01:00","section_level":2,"anchor_text":"Glossario Essenziale EasyWay","anchor_slug":"glossario-essenziale-easyway","chunk_index":2,"content":"**❓ Perché un gate (es. wiki-gap, drift, lint) non diventa “verde”?**\r\n- La doc/wiki non è stata aggiornata con l’ultimo schema/output.\r\n- I file generati da script/agent non sono nel path giusto o non rispettano il naming richiesto.\r\n- Lancia lo script di validazione (“lint” o “gap-report”) dedicato; se restituisce errori, leggere la riga e correggere secondo il template.\r\n- Se persistono errori formali, confronta con l’esempio fornito nel primo riquadro della ricetta.\n\n**❓ Dove trovo i log/artifact?**\r\n- Output standard: directory `agents/logs/`, `db-ddl-inventory.json`, `tests/` oppure summary stampato dallo script.\r\n- Nei workflow n8n/agentici: ogni run produce artefatti/log in percorso temporaneo e link esplicito nella summary script (cerca output tipo “Artifact scritto in: ...”).\r\n- Per test cloud: dashboard Azure DevOps / log pipeline.\n\n**❓ Come fixo errori di formattazione/lint/”frontmatter”?**\r\n- Usa direttamente gli script di lint/fix suggeriti nei messaggi errore (`wiki-frontmatter-autofix.ps1`, `scripts/wiki-frontmatter-lint.ps1`).\r\n- Segui i rimandi/suggerimenti nei messaggi CLI: spesso c’è direttamente il comando “autofix” riportato.\n\n\r\n---\n\n**Suggerisci altri termini o errori ricorrenti: la pagina cresce con le domande della community!**","size_chars":1272,"tokens_estimate":318}
{"doc_id":"ew-governance-dq","path":"governance-dq.md","title":"Governance DQ – RACI, Processi e Checklist","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Governance DQ – RACI, Processi e Checklist","anchor_slug":"governance-dq-raci-processi-e-checklist","chunk_index":1,"content":"# Governance DQ – RACI, Processi e Checklist\n\nScopo\n- Fornire una guida pratica per proporre, validare, rilasciare e mantenere le regole di Data Quality in EasyWayDataPortal, integrando ARGOS (Gates, DSL, Profiling, Coach) e le pipeline CI/CD.\n\nRACI sintetico\n- Domain Owner & Data Steward – A/R requisiti di qualità, IMPACT e SLO business; C su rollout; I su alert/digest.\n- Team Prodotto Dati (Flow/Instance) – A/R implementazione, evidenze, backout; C su proposal; I su policy set.\n- DQ Governance – A/R DSL/Registry, SemVer, linter e review; approva MAJOR; gestisce override/backout registry.\n- Gatekeeper/Ops – A/R gestione gates, quarantine, roll‑out in CI; C su incident; I su nudges.\n- Platform/IT Ops – A/R Profiling & IT Health; C su severity dinamica; I su digest IT.\n- Coach Agent Owner – A/R nudges/proposals e misurazione outcome; C su tuning; I su gates.\n\nOggetti governati (minimi)\n- Dominio (domain_id) e Flusso/Istanza (flow_id/instance_id) con owner e SLO.\n- Policy (regola singola) e Policy Set (pacchetto coerente per istanza).\n- Budget: Error/Noise Budget per dominio/istanza.\n- SLO & KPI: Conformity_Wo, GPR, MTTR, Δ Noise, Freshness, ecc.\n\nProcesso end‑to‑end (proposal → linter → rollout)\n1) Proposal (creazione/modifica)\n- Chi: Data Steward/Team Prodotto/Coach.\n- Artefatto: proposta Policy/Policy Set (JSON/YAML) con campi chiave: RULE_ID, RULE_VERSION (proposta), CATEGORY, SCOPE, ELEMENT_REF, SEVERITY_BASE, MOSTLY, IMPACT_SCORE, WHERE, EXPERIMENT?, BACKOUT_PLAN_REF.\n- Registri: crea/aggiorna voce in Registry (STATE=DRAFT→PROPOSED, CHANGE_TYPE=PATCH|MINOR|MAJOR).\n\n2) Pre‑check (Linter)\n- Regole: naming/stile; severity base coerente con IMPACT; privacy (no PII in esempi/valori); efficacia/rumore (NOISE_BUDGET_HINT); performance/costi.\n- Strumenti: comando agente linter e gate INGRESS; report allegato alla Decision Trace del run di validazione.\n\n3) Review & approvazione\n- Four‑eyes: DQ Governance + Steward/Owner.\n- MAJOR: ADR richiesta; prevedere dual‑read/dual‑write e vista di compatibilità.\n- Output: Policy in STATE=APPROVED, Policy Set in STAGING (non prod).\n\n4) Rollout Gate (controllato)\n- Shadow: monitoraggio senza effetto su esito gate.\n- Canary: `min_runs` + `success_criteria` (Δ Noise, Conformity_Wo ≥ baseline, GPR ≥ baseline).\n- A/B: selezione variante vincente su KPI; Early stop → Backout.","size_chars":2343,"tokens_estimate":586}
{"doc_id":"ew-governance-dq","path":"governance-dq.md","title":"Governance DQ – RACI, Processi e Checklist","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Governance DQ – RACI, Processi e Checklist","anchor_slug":"governance-dq-raci-processi-e-checklist","chunk_index":2,"content":"5) Promotion & aggiornamenti\n- Promuovi Policy Set in produzione; aggiorna Registry (changelog), Wiki e KB.\n- Eventi: emetti `argos.policy.proposal` (proposta) e note in `argos.gate.decision` (experiment_ref/override_ref se presenti).\n- Budget: ricalibra NOISE/ERROR se necessario (con governance).\n\n6) Monitoraggio & miglioramento (Coach)\n- Nudges mirati per recidive/rumore; follow‑up e digest.\n- KPI outcome: Δ Noise (7/30d), Recidiva 30d, GPR, MTTR; cool‑down post‑tuning, freeze prima di picchi.\n\nChecklist operativa (DoD)\n- Proposal pronta (campi obbligatori + backout plan) e registrata nel Registry.\n- Linter eseguito e superato (report allegato).\n- Review four‑eyes completata; CHANGE_TYPE classificato (PATCH/MINOR/MAJOR).\n- Rollout definito (Shadow/Canary/A‑B) con min_runs e success_criteria.\n- Gates aggiornati e `Decision Trace` abilitata (coverage ≥ 99%).\n- Eventi schema‑validi (`argos.*`) e payload di esempio aggiornati.\n- Wiki & KB aggiornate; digest/alerting mappati; privacy ok.\n\nSelezione dei flussi (priorità)\n- IMPACT alto (business‑critical), instabilità storica (GPR basso/Noise alto), SLO stringenti (freshness/accuratezza), dipendenze a valle critiche.\n- Roadmap: Mese 1 (top 2 domini, 3–5 istanze); Mese 2 (Profiling Gate soft); Mese 3 (Coach in ASSIST, nudges/proposals).\n\nTemplate & artefatti suggeriti\n- Policy Set (YAML on‑the‑fly) – vedi generatore `scripts/argos-generate-yaml.mjs` e samples.\n- Event Schema (JSON) – vedi cartella `docs/agentic/templates/events` (schemas + samples).\n- PR Template – vedi `PULL_REQUEST_TEMPLATE.md` (check front‑matter Wiki/LLM e gates verdi).\n\nRiferimenti\n- ARGOS – Overview: `argos/argos-overview.md`\n- Quality Gates: `argos/argos-quality-gates.md`\n- Policy DSL & Registry: `argos/argos-policy-dsl.md`\n- Tech Profiling: `argos/argos-tech-profiling.md`\n- Coach Agent: `argos/argos-coach-agent.md`\n- Event Schema: `argos/argos-event-schema.md`","size_chars":1911,"tokens_estimate":478}
{"doc_id":"ew-howto-what-first-team","path":"howto-what-first-team.md","title":"HOWTO – WHAT‑first + Diario di Bordo (Team)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\n- Adottare un flusso di lavoro semplice e ripetibile: prima descriviamo cosa fare (WHAT), poi realizziamo il come (HOW), con un diario di bordo chiaro per utenti e sviluppatori.","size_chars":190,"tokens_estimate":48}
{"doc_id":"ew-howto-what-first-team","path":"howto-what-first-team.md","title":"HOWTO – WHAT‑first + Diario di Bordo (Team)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Quali artefatti WHAT sono obbligatori (manifest, intents, UX prompts) e dove vivono?\n- Qual è l'ordine consigliato per lavorare (WHAT → lint → stub → HOW) senza perdere allineamento?\n- Quali lint devo eseguire e cosa guardare quando falliscono?\n- Come si struttura il diario di bordo (campi minimi) e dove viene consumato (UI/CI/log)?\n- Cosa significa DoR/DoD in EasyWayDataPortal e quando posso dire “è fatto”?\n- Cosa devo aggiornare quando aggiungo un nuovo intent (Wiki/KB/manifest/cataloghi)?","size_chars":524,"tokens_estimate":131}
{"doc_id":"ew-howto-what-first-team","path":"howto-what-first-team.md","title":"HOWTO – WHAT‑first + Diario di Bordo (Team)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":3,"content":"## Prerequisiti\n- Manifesto orchestrazione + intents (cartella `docs/agentic/templates/`)\n- Copioni UX localizzati (IT/EN)\n- Stub CLI disponibili (opzionali) per provare il flusso end‑to‑end","size_chars":190,"tokens_estimate":48}
{"doc_id":"ew-howto-what-first-team","path":"howto-what-first-team.md","title":"HOWTO – WHAT‑first + Diario di Bordo (Team)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":4,"content":"## Passi\n\nPassi consigliati (Step-by-Step)\n1) Definisci il WHAT dell’orchestrazione\n   - Crea/aggiorna `docs/agentic/templates/orchestrations/<wf>.manifest.json` (scopo, stati, transizioni, contratti I/O, osservabilità, ux_prompts key)\n   - Aggiungi pagina Wiki: `Wiki/EasyWayData.wiki/orchestrations/<wf>.md` (WHAT)\n2) Definisci gli Intents (WHAT)\n   - Per ogni step/agent: `docs/agentic/templates/intents/<name>.intent.json` con input/output e criteri di esito\n   - Aggiorna il Catalogo: `Wiki/EasyWayData.wiki/orchestrations/intents-catalog.md`\n3) Scrivi i copioni UX (locale IT/EN)\n   - `docs/agentic/templates/orchestrations/ux_prompts.it.json` e `docs/agentic/templates/orchestrations/ux_prompts.en.json`\n   - Verifica coerenza con i messaggi del manifest e i mock\n4) Esegui i lint (Docs + WHAT‑first)\n   - Front‑matter Wiki: `pwsh scripts/wiki-frontmatter-lint.ps1 -FailOnError`\n   - WHAT‑first: `pwsh scripts/whatfirst-lint.ps1 -FailOnError`\n   - Eventi ARGOS: job “Events JSON Schema Validation” su CI\n5) Prova gli stub (opzionale ma utile)\n   - Usa la ricetta KB `kb-orch-intents-stubs-301` per generare artifact in `out/`\n   - Condividi il diario preliminare con il team\n6) Implementa il HOW per agent/step\n   - Sostituisci uno stub alla volta rispettando i contratti WHAT\n   - Mantieni l’output JSON atteso (per il diario) e gli eventi `argos.*`\n7) Diario di Bordo\n   - Aggrega le entry JSON ad ogni transizione (`timestamp, stage, outcome, reason, next, decision_trace_id, artifacts[]`)\n   - Usa i copioni UX per i messaggi in UI (One‑Button UX)","size_chars":1558,"tokens_estimate":390}
{"doc_id":"ew-howto-what-first-team","path":"howto-what-first-team.md","title":"HOWTO – WHAT‑first + Diario di Bordo (Team)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:57+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":5,"content":"## Verify\n- DoR: manifest + intents + UX prompts presenti; lint verdi; Wiki aggiornata\n- DoD: agent implementati con output strutturati; diario generato; pagina Wiki/Quest Board aggiornata; gates CI verdi\n\nChecklist veloce\n- [ ] Manifest orchestrazione (WHAT)\n- [ ] Intents (WHAT) completi\n- [ ] UX prompts IT/EN\n- [ ] Lint (front‑matter, WHAT‑first, eventi) OK\n- [ ] Stub provati (se usati)\n- [ ] Agent HOW implementati (almeno 1 step)\n- [ ] Diario generato e linkato in PR\n\nTroubleshooting\n- Lint fallisce → apri i report artifact: `wiki-frontmatter-lint.json`, `whatfirst-lint.json`, `event-schema-validate.log`\n- UX incoerente → riallinea `docs/agentic/templates/orchestrations/ux_prompts.*.json` e i mock\n- Output mismatch → confronta con gli schemi degli intents\n\nRiferimenti\n- AGENTS.md → Metodo WHAT‑first + Diario di Bordo\n- Orchestrazione (Excel/CSV): `orchestrations/wf-excel-csv-upload.md`\n- Intents Catalog: `orchestrations/intents-catalog.md`\n- UX Mock (diario): `UX/diary-mock-wf-excel-csv-upload.md`\n- UX Checklist: `UX/usability-checklist.md`\n- Quest Board: `quest-board-excel-csv.md`","size_chars":1101,"tokens_estimate":275}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"ARGOS Data Quality","anchor_slug":"argos-data-quality","chunk_index":1,"content":"## ARGOS Data Quality\n- [argos/argos-overview.md](./argos/argos-overview.md) - ARGOS – Overview e Integrazione\n- [argos/argos-quality-gates.md](./argos/argos-quality-gates.md) - ARGOS – Quality Gates (v1.1)\n- [argos/argos-policy-dsl.md](./argos/argos-policy-dsl.md) - ARGOS – Policy DSL & Registry (v1.1)\n- [argos/argos-alerting.md](./argos/argos-alerting.md) - ARGOS – Alerting & Notifications (v1.1)\n- [argos/argos-playbook-catalog.md](./argos/argos-playbook-catalog.md) - ARGOS – Playbook Catalog (v1)\n- [argos/argos-tech-profiling.md](./argos/argos-tech-profiling.md) - ARGOS – Tech Profiling & Reliability (v1)\n- [argos/argos-coach-agent.md](./argos/argos-coach-agent.md) - ARGOS – Coach Agent (v1)\n- [argos/argos-modular-interop.md](./argos/argos-modular-interop.md) - ARGOS – Modular Architecture & Interop (v1)\n- [argos/argos-event-schema.md](./argos/argos-event-schema.md) - ARGOS – Event Schema Addendum (v1)\n- [argos/argos-change-versioning.md](./argos/argos-change-versioning.md) - ARGOS – Change & Versioning (v1)\n- [argos/argos-glossario.md](./argos/argos-glossario.md) - ARGOS – Glossario (v1)","size_chars":1108,"tokens_estimate":277}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Use Cases","anchor_slug":"use-cases","chunk_index":2,"content":"## Use Cases\n- [use-cases/entrate-uscite.md](./use-cases/entrate-uscite.md) - Use Case – Entrate/Uscite (One‑Button UX)","size_chars":119,"tokens_estimate":30}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Quest Board","anchor_slug":"quest-board","chunk_index":3,"content":"## Quest Board\n- [quest-board-excel-csv.md](./quest-board-excel-csv.md) - Quest Board – Excel/CSV Upload (L1→L5)","size_chars":112,"tokens_estimate":28}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"HOWTO","anchor_slug":"howto","chunk_index":4,"content":"## HOWTO\n- [howto-what-first-team.md](./howto-what-first-team.md) - HOWTO – WHAT‑first + Diario di Bordo (Team)\n- [control-plane/index.md](./control-plane/index.md) - Control Plane - Panoramica\n- [domains/index.md](./domains/index.md) - Domini - Panoramica\n- [start-here.md](./start-here.md) - Start Here – 5 Link Essenziali\n- [orchestrations/orchestrator-n8n.md](./orchestrations/orchestrator-n8n.md) - Orchestratore n8n (WHAT)\n- [orchestrations/wf-excel-csv-upload.md](./orchestrations/wf-excel-csv-upload.md) - Orchestrazione – wf.excel-csv-upload (WHAT)\n- [orchestrations/intents-catalog.md](./orchestrations/intents-catalog.md) - Orchestrations – Intents Catalog (Use Case Excel/CSV)","size_chars":688,"tokens_estimate":172}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":5,"content":"## UX\n- [UX/diary-mock-wf-excel-csv-upload.md](./UX/diary-mock-wf-excel-csv-upload.md) - UX Mock – Diario di Bordo (wf.excel-csv-upload)\n- [UX/usability-checklist.md](./UX/usability-checklist.md) - UX – Usability Checklist (One‑Button)\n - [governance-dq.md](./governance-dq.md) - Governance DQ – RACI, Processi e Checklist\n- [docs-conventions.md](./docs-conventions.md) - EasyWayData Portal – Regole Semplici (La Nostra Bibbia)\n  - H2: 1) Nomi di file e cartelle (semplici)\n  - H2: 1.1) Convenzione di Nomenclatura – kebab-case vs snake_case\n  - H2: Uso di kebab-case e snake_case per AI, DB e API\n- [easyway-webapp/01_database_architecture/01a-db-setup.md](./easyway-webapp/01_database_architecture/01a-db-setup.md) - EasyWay Data Portal – Database SETUP\n  - H2: ✅ Scopo del file\n  - H2: 1️⃣ **Login SQL Server (da creare su MASTER)**\n  - H2: Domande a cui risponde\n- [easyway-webapp/01_database_architecture/01b_schema_structure/portal.md](./easyway-webapp/01_database_architecture/01b_schema_structure/portal.md) - EasyWay Data Portal – PORTAL.md\n  - H2: ✅ Scopo del file\n  - H2: 📋 **Riepilogo tabelle principali schema PORTAL**\n  - H2: 5️⃣ **Accesso sezioni Portale** (Policy Section Access custom)\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/index.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/index.md) - Indice\n  - H2: Domande a cui risponde\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md) - EasyWay Data Portal – SEQUENCE\n  - H2: ✅ Scopo del file\n  - H2: 1️⃣ Sequence PRODUZIONE (NDG reali)\n  - H2: 2️⃣ Sequence DEBUG/TEST (codici demo)\n- [easyway-webapp/01_database_architecture/01b_schema_stru","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":6,"content":"cture/PORTAL/programmability/stored-procedure.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md) - EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template\n  - H2: ✅ Scopo del documento\n  - H2: **Template** ##\n  - H2: Template standard EasyWay (produzione)\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md) - a) **sp_insert_configuration**\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/index.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/index.md) - Indice\n  - H2: Domande a cui risponde\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md) - a) **sp_insert_profile_domain**\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md) - a) **sp_insert_section_access**\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md) - a) **sp_insert_subscription**\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":7,"content":"stored-procedure/tenant.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md) - sp_insert_tenant\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md) - a) **sp_insert_user_notification_settings**\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md](./easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n  - H2: Scopo\n  - H2: Schema/DDL\n- [easyway-webapp/01_database_architecture/01b-schema-structure.md](./easyway-webapp/01_database_architecture/01b-schema-structure.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/01_database_architecture/best-practices-checklist.md](./easyway-webapp/01_database_architecture/best-practices-checklist.md) - best-practices-checklist\n- [easyway-webapp/01_database_architecture/db-studio.md](./easyway-webapp/01_database_architecture/db-studio.md) - db-studio\n- [easyway-webapp/01_database_architecture/flyway.md](./easyway-webapp/01_database_architecture/flyway.md) - Le credenziali (URL/USER/PASSWORD) si passano come env nel runner\n- [easyway-webapp/01_database_architecture/index.md](./easyway-webapp/01_database_architecture/index.md) - Indice\n  - H2: Domande a cui risponde\n- [easyway-webapp/01_database_architecture/portal.md](./easyway-webapp/01_database_architecture/portal.md) - portal\n- [easyway-webapp/01_database_architecture/sequence.md](./easyway-webapp/01_database_architecture/sequence.md) - sequence\n- [easyway-webapp/01_database_architecture/storeprocess.md](./easyway-webapp/01_database_architecture/storeprocess.md) - storeprocess\n- [easyway-webapp/01-database-architecture.md](./easyway-webapp/01-database-architecture.md) - EasyWay Data Portal – Database Architecture Master\n  - H2: ✅ Scopo del Documento\n  - H2: 👾 Conversational Intelligence & AMS Ready — Principi Base\n  - H2: 📂 Schemi Database Principali\n- [easyway-webapp/02_","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":8,"content":"logiche_easyway/api-esterne-integrazione.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md) - Integrazione API Esterne – EasyWay Data Portal\n  - H2: Lookup – Integrazione API Esterne\n  - H2: Tabella Integrazioni API Esterne\n  - H2: Policy Sicurezza & Gestione Key/API\n- [easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md) - **1. Schema di validazione**\n  - H2: Domande a cui risponde\n- [easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md) - **1. Schema di validazione**\n  - H2: Domande a cui risponde\n- [easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-onboarding.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-onboarding.md) - ENDPOINT: POST `/api/onboarding`\n  - H2: Domande a cui risponde\n- [easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md) - Checklist di test API (EasyWay Data Portal)\n  - H2: Checklist di test API (EasyWay Data Portal)\n  - H2: Domande a cui risponde\n- [easyway-webapp/02_logiche_easyway/api-esterne-integrazione/convenzioni-rest-e-naming.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/convenzioni-rest-e-naming.md) - Convenzioni REST EasyWay\n  - H2: Convenzioni REST EasyWay\n  - H2: Domande a cui risponde\n- [easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md](./easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md) - Integrazione Shopify – Dettaglio & Esempio Pratico\n  - H2: Overview\n  - H2: Tabella Integrazione Shopify\n  - H2: Esempio Pratico – Recupero Ordini (API)\n- [easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md](./easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md) - Lookup – Best Practice Naming & Scalabilità\n  - H2: Tabella Naming Convention (macro overview)\n  - H2: Best Practice Scalabilità\n  - H2: Checklist Naming & Scalabilità\n- [easyway-webapp/02_logiche_easyway/index.md](./easyway-webapp/02_logiche_easyway/index.md) - Indice\n- [easyway-webapp/02_logiche_easyway/logging-and-audit.md](./easyway-webapp/02_logiche","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":9,"content":"_easyway/logging-and-audit.md) - Logging & Audit – EasyWay Data Portal\n  - H2: Lookup Logging & Audit – Microservizi & API Gateway\n  - H2: Tabella Eventi/Audit da Tracciare\n  - H2: Best Practice Monitoring & Audit\n- [easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md](./easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md) - Checklist Operativa – Logging & Audit\n  - H2: Obiettivo\n  - H2: Checklist Logging & Audit\n  - H2: Template di commento/README da includere in ogni script/codice\n- [easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md](./easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md) - Lookup – Flussi Onboarding/Login\n  - H2: Tabella Flussi Utente\n  - H2: Best Practice Onboarding/Login\n  - H2: Esempio Flusso Step-by-Step – Onboarding Locale\n- [easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md](./easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md) - Esempi Flussi Avanzati Onboarding/Login\n  - H2: Esempi Flussi Avanzati Onboarding/Login\n  - H2: Dettaglio Esempio – SSO Aziendale Custom (Entra ID/SAML/OIDC)\n  - H2: Dettaglio Esempio – Gestione Consensi Privacy\n- [easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md](./easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md) - Esempi Flussi Verticali PA – Accesso tramite SPID e CIE\n  - H2: Esempio Dettagliato – Accesso tramite SPID\n  - H2: Esempio Dettagliato – Accesso tramite CIE\n  - H2: Esempio Onboarding Integrato SPID/CIE\n- [easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md](./easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md) - Flussi Onboarding/Login – Dettagli & Variazioni\n  - H2: Tabella Flussi Aggiuntivi e Variazioni\n  - H2: Dettaglio Pratiche Operative\n  - H2: Esempio Flusso “Upgrade prospect → cliente reale”\n- [easyway-webapp/02_logiche_easyway/notifiche-gestione.md](./easyway-webapp/02_logiche_easyway/notifiche-gestione.md) - Lookup – Gestione Notifiche\n  - H2: Tabella Tipologia Notifiche\n  - H2: Gestione Preferenze Notifica Utente\n  - H2: Flusso Invio Notifiche (step-by-step)\n- [easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md](./easyway-webapp/0","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":10,"content":"2_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md) - Esempi Notifiche & Template Email Configurabili (Excel su Storage)\n  - H2: 1. Flusso Gestione Template Email\n  - H2: 2. Struttura file Excel `email_templates.xlsx`\n  - H2: 3. Esempio di codice (pseudo, architettura agnostica)\n- [easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md](./easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md) - Policy di Configurazione & Sicurezza – Microservizi e API Gateway\n  - H2: Dettaglio Implementativo Policy Chiave\n  - H2: **Best Practice Operativa**\n  - H2: Domande a cui risponde\n- [easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md](./easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md) - **Dalle chat emerge chiaramente che:**\n  - H2: Domande a cui risponde\n- [easyway-webapp/02-logiche-easyway.md](./easyway-webapp/02-logiche-easyway.md) - Prefazione – EasyWay Data Portal  \n  - H2: Guida alla Documentazione Funzionale e Architetturale\n  - H2: Macro-sezioni documentate\n  - H2: Domande a cui risponde\n- [easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md](./easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md) - 🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)\n  - H2: 🎯 Scopo del Documento\n  - H2: 🔎 Differenza tra Blob Storage e Datalake HNS\n  - H2: 🏷️ Naming Convention - Utenze di Servizio\n- [easyway-webapp/03_datalake_dev/index.md](./easyway-webapp/03_datalake_dev/index.md) - Indice\n- [easyway-webapp/03-datalake-dev.md](./easyway-webapp/03-datalake-dev.md) - `landing/`\n  - H2: Domande a cui risponde\n- [easyway-webapp/04-accesso-registrazione-notifiche.md](./easyway-webapp/04-accesso-registrazione-notifiche.md) - EasyWay Data Portal - Documentazione Funzionale Completa\n  - H2: 1️⃣ Obiettivo\n  - H2: 2️⃣ Flusso Registrazione e Accesso Utente\n  - H2: 3️⃣ Architettura Generale del Portale (Microservizi / Container)\n- [easyway-webapp/05_codice_easyway_portale/apim-jwt-tenant-claim-policy.md](./easyway-webapp/05_codice_easyway_portale/apim-jwt-tenant-claim-policy.md) - apim-jwt-tenant-claim-policy\n- [easyway-webapp/05_codice_easyway_porta","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":11,"content":"le/docs.md](./easyway-webapp/05_codice_easyway_portale/docs.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md) - Agentic Readiness & Esempi (Users/Onboarding)\n  - H2: Scopo\n  - H2: Linee guida agentiche\n  - H2: Esempio 1 — USERS (CRUD via SP)\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md) - Capitolo – Dinamiche di Manutenzione\n  - H2: Architettura delle Cartelle — Dinamiche di Manutenzione\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/endpoint.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/endpoint.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001-get-api-config.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001-get-api-config.md) - ENDPOINT: GET `/api/config`\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001a-get-api-config-da-db.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001a-get-api-config-da-db.md) - A. Codice - File da creare/aggiornare\n  - H2: A. Codice - File da creare/aggiornare\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md) - **1. `src/routes/branding.ts`**\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md) - ENDPOINT: CRUD `/api/users`\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/index.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/index.md) - Indice\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/template-endpoint.md](./easyway-webapp/05_codice_easyway_","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":12,"content":"portale/easyway_portal_api/ENDPOINT/template-endpoint.md) - ENDPOINT: [HTTP_VERB] `/api/your-endpoint`\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md) - Gestione Log — EasyWay Data Portal\n  - H2: **Principi guida**\n  - H2: **Tipi di log gestiti**\n  - H2: **Policy dati sensibili**\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md) - Automazione export log su Datalake & Compliance\n  - H2: Obiettivo\n  - H2: Soluzione consigliata (EasyWay Data Portal)\n  - H2: Flusso tecnico\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/logging-conversational-ready-agent-aware.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/logging-conversational-ready-agent-aware.md) - Logging conversational-ready (agent-aware)\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/index.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/index.md) - Indice\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md) - Policy API/Store Procedure — EasyWay Data Portal\n  - H2: Principio Guida\n  - H2: Vantaggi del modello\n  - H2: Pattern operativo\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md) - EasyWay Data Portal API — Starter Kit\n  - H2: Comandi principali\n  - H2: Struttura file co","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":13,"content":"nfigurazione\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-2-struttura-src-e-primi-file/conversational-and-agent-aware-ready.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-2-struttura-src-e-primi-file/conversational-and-agent-aware-ready.md) - **. Controller**\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake/query-in-src-queries.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake/query-in-src-queries.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso/validazione-avanzata.md](./easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso/validazione-avanzata.md) - **A. Middleware di validazione per parametri e querystring**\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md](./easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md) - EasyWay Data Portal — Manifesto Tecnologico & Analitico\n  - H2: Codice\n  - H2: Premessa e Visione\n  - H2: Scelte Architetturali e Motivazioni\n- [easyway-webapp/05_codice_easyway_portale/easyway-portal-frontend.md](./easyway-webapp/05_codice_easyway_portale/easyway-portal-frontend.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/iac.md](./easyway-webapp/05_codice_easyway_portale/iac.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/index.md](./easyway-webapp/05_codice_easyway_portale/index.md) - Indice\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md](./easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md) - EasyWay Data Portal — Q&A Setup & Test Locale\n  - H2: Aggiornamenti dal 2025-07-28 al 2025-07-29\n  - H2: **Note generali**\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/readme.md](./easyway-webapp/05_codice_easyway_portale/readme.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/scripts.md](./easyway-webapp/05_codice_easyway_portale/scripts.md) - Do","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":14,"content":"mande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/05_codice_easyway_portale/security-and-observability.md](./easyway-webapp/05_codice_easyway_portale/security-and-observability.md) - security-and-observability\n- [easyway-webapp/05-codice-easyway-portale.md](./easyway-webapp/05-codice-easyway-portale.md) - Domande a cui risponde\n  - H2: Domande a cui risponde\n- [easyway-webapp/06-frontend-architecture.md](./easyway-webapp/06-frontend-architecture.md) - EasyWay Data Portal – Frontend Architecture & Integration\n  - H2: 🎯 Obiettivo\n  - H2: 📁 Struttura Progetto Frontend (Next.js)\n  - H2: 🔄 Mappatura Controller Backend ⇄ Frontend UI\n- [easyway-webapp/07-iam-naming-utenti-gruppi.md](./easyway-webapp/07-iam-naming-utenti-gruppi.md) - 📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  \n  - H2: 🎯 Scopo del Documento  \n  - H2: 🔑 Naming Convention - Utenze Tecniche di Servizio  \n  - H2: 🔑 Naming Convention - Gruppi IAM (RBAC)  \n- [easyway-webapp/10-ai-agents.md](./easyway-webapp/10-ai-agents.md) - EasyWay DataPortal – Conversational Intelligence & AMS\n  - H2: Obiettivo\n  - H2: Sommario\n  - H2: 1. Introduzione\n- [easyway-webapp.md](./easyway-webapp.md) - 🎯 EasyWay Data Portal – Start With Why\n  - H2: 🧭 Why – Perché lo facciamo\n  - H2: 🛠 How – Come lo facciamo\n  - H2: 📦 What – Cosa offriamo\n- [entities-index.md](./entities-index.md) - Entities Index\n  - H2: Endpoints\n  - H2: DB Stored Procedures\n  - H2: DB Sequences\n- [index.md](./index.md) - Indice Globale\n  - H2: Domande a cui risponde\n- [llm-readiness-checklist.md](./llm-readiness-checklist.md) - LLM Readiness – Lista Semplice (Per Persone e AI)\n  - H2: Checklist per OGNI pagina (.md)\n  - H2: Checklist NOMI (file e cartelle)\n  - H2: Checklist CONTENUTI (per tipo)\n- [logs/reports/anchors-20251018064203.md](./logs/reports/anchors-20251018064203.md) - Anchor Check (20251018064203)\n  - H2: Domande a cui risponde\n- [logs/reports/anchors-20251018093206.md](./logs/reports/anchors-20251018093206.md) - Anchor Check (20251018093206)\n  - H2: Domande a cui risponde\n- [logs/reports/anchors-20251018103044.md](./logs/reports/anchors-20251018103044.md) - Anchor Check (20251018103044)\n  - H2: Domande a cui risponde\n- [logs/reports/anchors-20251018103742.md](./logs/reports/anchors-20251018103742.md) - Anchor Check (20251018103742)\n- [logs/reports/anchors-20251018104140.md](./logs/reports/anchors-2025","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":15,"content":"1018104140.md) - Anchor Check (20251018104140)\n- [logs/reports/anchors-20251018104418.md](./logs/reports/anchors-20251018104418.md) - Anchor Check (20251018104418)\n- [logs/reports/anchors-20251018104748.md](./logs/reports/anchors-20251018104748.md) - Anchor Check (20251018104748)\n- [logs/reports/anchors-20251018105948.md](./logs/reports/anchors-20251018105948.md) - Anchor Check (20251018105948)\n- [logs/reports/anchors-20251018110026.md](./logs/reports/anchors-20251018110026.md) - Anchor Check (20251018110026)\n- [logs/reports/anchors-20251018110253.md](./logs/reports/anchors-20251018110253.md) - Anchor Check (20251018110253)\n- [logs/reports/anchors-20251018124502.md](./logs/reports/anchors-20251018124502.md) - Anchor Check (20251018124502)\n- [logs/reports/anchors-20251018125020.md](./logs/reports/anchors-20251018125020.md) - Anchor Check (20251018125020)\n- [logs/reports/anchors-20251018132417.md](./logs/reports/anchors-20251018132417.md) - Anchor Check (20251018132417)\n- [logs/reports/anchors-20251018134027.md](./logs/reports/anchors-20251018134027.md) - Anchor Check (20251018134027)\n- [logs/reports/anchors-20251019203154.md](./logs/reports/anchors-20251019203154.md) - Anchor Check (20251019203154)\n- [logs/reports/anchors-20251019203554.md](./logs/reports/anchors-20251019203554.md) - Anchor Check (20251019203554)\n- [logs/reports/anchors-20251019204016.md](./logs/reports/anchors-20251019204016.md) - Anchor Check (20251019204016)\n- [logs/reports/anchors-20251020065030.md](./logs/reports/anchors-20251020065030.md) - Anchor Check (20251020065030)\n- [logs/reports/anchors-20251020070131.md](./logs/reports/anchors-20251020070131.md) - Anchor Check (20251020070131)\n- [logs/reports/anchors-20251020094544.md](./logs/reports/anchors-20251020094544.md) - Anchor Check (20251020094544)\n- [logs/reports/anchors-20251020104226.md](./logs/reports/anchors-20251020104226.md) - Anchor Check (20251020104226)\n- [logs/reports/anchors-20251020110022.md](./logs/reports/anchors-20251020110022.md) - Anchor Check (20251020110022)\n- [logs/reports/anchors-20251020111226.md](./logs/reports/anchors-20251020111226.md) - Anchor Check (20251020111226)\n- [logs/reports/anchors-20251020112225.md](./logs/reports/anchors-20251020112225.md) - Anchor Check (20251020112225)\n- [logs/reports/anchors-20251020112408.md](./logs/reports/anchors-20251020112408.md) - Anchor Check (20251020112408)\n- [logs/repor","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":16,"content":"ts/atomicity-20251018151337.md](./logs/reports/atomicity-20251018151337.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018151922.md](./logs/reports/atomicity-20251018151922.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018152434.md](./logs/reports/atomicity-20251018152434.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018152951.md](./logs/reports/atomicity-20251018152951.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018153046.md](./logs/reports/atomicity-20251018153046.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018153234.md](./logs/reports/atomicity-20251018153234.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018153342.md](./logs/reports/atomicity-20251018153342.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018154041.md](./logs/reports/atomicity-20251018154041.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018154437.md](./logs/reports/atomicity-20251018154437.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018160012.md](./logs/reports/atomicity-20251018160012.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018160206.md](./logs/reports/atomicity-20251018160206.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018160726.md](./logs/reports/atomicity-20251018160726.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018161142.md](./logs/reports/atomicity-20251018161142.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018163121.md](./logs/reports/atomicity-20251018163121.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018163339.md](./logs/reports/atomicity-20251018163339.md) - Atomicity Lint\n- [logs/reports/atomicity-20251018163431.md](./logs/reports/atomicity-20251018163431.md) - Atomicity Lint\n- [logs/reports/atomicity-20251020114614.md](./logs/reports/atomicity-20251020114614.md) - Atomicity Lint\n- [logs/reports/atomicity-20251020124245.md](./logs/reports/atomicity-20251020124245.md) - Atomicity Lint\n- [logs/reports/atomicity-20251020130041.md](./logs/reports/atomicity-20251020130041.md) - Atomicity Lint\n- [logs/reports/atomicity-20251020131245.md](./logs/reports/atomicity-20251020131245.md) - Atomicity Lint\n- [logs/reports/atomicity-20251020132242.md](./logs/reports/atomicity-20251020132242.md) - Atomicity Lint\n- [logs/reports/atomicity-20251020132426.md](./logs/reports/atomicity-20251020132426.md) - Atomicity Lint\n- [logs/reports/llm-readiness-20251018103206.md](./logs/reports/llm-readiness-202","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":17,"content":"51018103206.md) - LLM Readiness Mini-Report (20251018103206)  | File | Missing | |---|---|\n- [logs/reports/naming-20251018061858-analysis.md](./logs/reports/naming-20251018061858-analysis.md) - Naming Report Analysis (20251018061858)\n  - H2: Domande a cui risponde\n- [logs/reports/normalize-20251018161054.md](./logs/reports/normalize-20251018161054.md) - Normalize Scan Report\n- [logs/reports/normalize-20251018161055.md](./logs/reports/normalize-20251018161055.md) - Normalize Scan Report\n- [logs/reports/normalize-20251018161134.md](./logs/reports/normalize-20251018161134.md) - Normalize Scan Report\n- [logs/reports/normalize-20251018161530-EasyWayData.wiki.md](./logs/reports/normalize-20251018161530-EasyWayData.wiki.md) - Normalize Scan Report\n- [logs/reports/normalize-20251018161531-EasyWayData.wiki.md](./logs/reports/normalize-20251018161531-EasyWayData.wiki.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020114526.md](./logs/reports/normalize-20251020114526.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020124219.md](./logs/reports/normalize-20251020124219.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020130014.md](./logs/reports/normalize-20251020130014.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020131220.md](./logs/reports/normalize-20251020131220.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020132221.md](./logs/reports/normalize-20251020132221.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020132403.md](./logs/reports/normalize-20251020132403.md) - Normalize Scan Report\n- [logs/reports/normalize-20251020132605.md](./logs/reports/normalize-20251020132605.md) - Normalize Scan Report\n- [parametrization-best-practices.md](./parametrization-best-practices.md) - parametrization-best-practices\n- [roadmap.md](./roadmap.md) - Roadmap & Qualità Documentazione\n  - H2: Obiettivi\n  - H2: Comandi locali (riassunto)\n  - H2: Pipeline CI (Azure DevOps)\n- [scripts/scripts.md](./scripts/scripts.md) - Scripts - One-shot e routine frequenti\n  - H2: One-shot: rigenera tutto (root corrente)\n  - H2: Multi-root: aggrega più progetti\n  - H2: Multi-root: normalizzazione (scan/apply) e report\n- [todo-checklist.md](./todo-checklist.md) - TODO – Razionalizzazione Wiki (Semplice)\n  - H2: Convenzioni e struttura\n  - H2: Rinomine e pulizia nomi\n  - H2: Metadati e front matter\n- [wiki-uniformamento-roadmap.md](.","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-index","path":"index.md","title":"Indice Globale Wiki","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"UX","anchor_slug":"ux","chunk_index":18,"content":"/wiki-uniformamento-roadmap.md) - Roadmap Uniformamento Wiki secondo docs-conventions\n  - H2: Obiettivi\n  - H2: Fasi e Sequenza\n  - H2: Per‑Cartella (linee guida)","size_chars":162,"tokens_estimate":40}
{"doc_id":"ew-intent-contract","path":"intent-contract.md","title":"Contratto Intent (Mini‑DSL)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:25+01:00","section_level":2,"anchor_text":"Contratto Intent (Mini‑DSL)","anchor_slug":"contratto-intent-minidsl","chunk_index":1,"content":"# Contratto Intent (Mini‑DSL)\nBreadcrumb: Home / Metodo Agent‑First / Contratto Intent\n\nScopo\n- Definire un formato minimo, leggibile da umani e agenti, per descrivere un’azione.\n\nCampi comuni\n- action (string) — nome azione es. `db-user:create`, `wiki:normalize`\n- params (object) — parametri specifici azione\n- whatIf (bool, opz.) — esecuzione a secco\n- nonInteractive (bool, opz.) — niente prompt\n- correlationId (string, opz.) — tracciabilità\n\nSchema (bozza)\n{\n  \"type\": \"object\",\n  \"required\": [\"action\", \"params\"],\n  \"properties\": {\n    \"action\": { \"type\": \"string\", \"minLength\": 3 },\n    \"params\": { \"type\": \"object\" },\n    \"whatIf\": { \"type\": \"boolean\" },\n    \"nonInteractive\": { \"type\": \"boolean\" },\n    \"correlationId\": { \"type\": \"string\" }\n  }\n}\n\nEsempio — Creazione utente DB\n{\n  \"action\": \"db-user:create\",\n  \"params\": {\n    \"mode\": \"sql-contained\",\n    \"db\": \"EasyWayDataPortal\",\n    \"username\": \"svc_tenant01_writer\",\n    \"roles\": [\"portal_reader\", \"portal_writer\"],\n    \"expires_hours\": 72,\n    \"storeInKeyVault\": true,\n    \"keyvault\": { \"name\": \"kv-easyway-dev\", \"secretName\": \"sql-user-svc_tenant01_writer\" }\n  },\n  \"whatIf\": false,\n  \"nonInteractive\": true,\n  \"correlationId\": \"op-2025-10-21-001\"\n}\n\nNote\n- Ogni azione documenta i propri params nella pagina Wiki dedicata.\n- I manifest degli agent elencano le azioni supportate.","size_chars":1347,"tokens_estimate":337}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Checklist per OGNI pagina (.md)","anchor_slug":"checklist-per-ogni-pagina-md","chunk_index":1,"content":"## Checklist per OGNI pagina (.md)\n- [ ] Ha il front matter YAML completo (id, title, summary, status, owner, tags, llm, entities)?\n- [ ] Titolo chiaro (H1) e sezioni in ordine: Scopo, Prerequisiti, Passi, Esempi, Errori comuni, Domande, Collegamenti.\n- [ ] Frasi brevi, niente “vedi sopra/sotto”, sigle spiegate la prima volta.\n- [ ] Esempi di codice/payload in blocchi ``` ben formattati.\n- [ ] Niente dati sensibili (PII). Se presenti: `llm.pii: contains-pii` e indicare redazione.\n- [ ] Link relativi funzionanti a 2–5 pagine correlate.\n- [ ] Domande a cui risponde (3–7) presenti.\n- [ ] `tags` e `entities` valorizzati (minimo: dominio, layer, audience, privacy, lingua).","size_chars":676,"tokens_estimate":169}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Checklist NOMI (file e cartelle)","anchor_slug":"checklist-nomi-file-e-cartelle","chunk_index":2,"content":"## Checklist NOMI (file e cartelle)\n- [ ] Solo minuscole, `-`, numeri (kebab-case). Nessuno `%2D`, quote/backtick, spazi.\n- [ ] Niente caratteri strani (�). Niente & (usa `and`). Niente accenti.\n- [ ] Nomi corti e chiari. Se serve ordine locale: prefissi `01-`, `02-`.","size_chars":268,"tokens_estimate":67}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Checklist CONTENUTI (per tipo)","anchor_slug":"checklist-contenuti-per-tipo","chunk_index":3,"content":"## Checklist CONTENUTI (per tipo)\nDBA (tabelle, procedure):\n- [ ] DDL idempotente (crea solo se non esiste) + rollback.\n- [ ] PK `<table>_id`, indici e FK nominati, default UTC per `created_at`.\n- [ ] Esempi query base e note di performance.\n\nAPI (endpoint):\n- [ ] Metodo, path, input/validazioni, output, errori (codici e messaggi).\n- [ ] Esempi `curl`/JSON e schema degli oggetti (se serve).\n\nETL (pipeline):\n- [ ] Sorgente → destinazione, mapping colonne, qualità dati, schedule.\n- [ ] Monitoraggio e fallback (cosa fare in caso di errore).\n\nAMS/Operazioni (runbook):\n- [ ] Avvio/stop, health-check, log e dashboard utili.\n- [ ] Allarmi: causa, destinazione, come si risolve.\n\nAnalista/BI (metriche, dashboard):\n- [ ] Definizione metrica (nome, formula, fonte, filtro).\n- [ ] Scopo dashboard, utenti target, viste chiave.","size_chars":824,"tokens_estimate":206}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Repository: controlli periodici","anchor_slug":"repository-controlli-periodici","chunk_index":4,"content":"## Repository: controlli periodici\n- [ ] Indice auto (per cartella) con titoli e link (`index.md`).\n- [ ] Link checker (nessun link rotto, nessuna anchor duplicata). Anchor checker: i link con #ancora puntano a H1/H2/H3 esistenti (slug coerente).\n- [ ] Report nomi (niente `%2D`, backtick, maiuscole dove non servono).\n- [ ] Stima pezzi per AI (chunk 400–600 token): pagine molto lunghe → sezioni più piccole.\n- [ ] Privacy e `llm.include`: file sensibili esclusi o ridatti.","size_chars":474,"tokens_estimate":118}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Suggerimenti pratici","anchor_slug":"suggerimenti-pratici","chunk_index":5,"content":"## Suggerimenti pratici\n- Pagine corte vincono. Molte pagine piccole > una enorme.\n- Ogni pagina risponde a poche domande specifiche.\n- Usa esempi reali (funzionanti). Evita immagini con testo.\n\n\nEsecuzione rapida (con anchor check)\n`\nEasyWayData.wiki/scripts/review-run.ps1 -Root EasyWayData.wiki -Mode kebab -CheckAnchors\n`\nIl report ancore è in EasyWayData.wiki/logs/reports/anchors-*.md.","size_chars":391,"tokens_estimate":98}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":6,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":7,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":8,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-llm_readiness_checklist","path":"llm-readiness-checklist.md","title":"LLM Readiness – Lista Semplice (Per Persone e AI)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:47+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":9,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":1,"content":"## Scopo\nAprire la Wiki come vault Obsidian in modo che:\n- i link restino stabili (markdown links relativi),\n- gli allegati finiscano in una cartella unica,\n- non si degradino i metadati YAML (front matter) usati dai gate.","size_chars":222,"tokens_estimate":56}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Setup consigliato (senza committare config personali)","anchor_slug":"setup-consigliato-senza-committare-config-personali","chunk_index":2,"content":"## Setup consigliato (senza committare config personali)\n1. In Obsidian: `Open folder as vault` e seleziona `Wiki/EasyWayData.wiki`.\n2. Copia la cartella `Wiki/EasyWayData.wiki/.obsidian.example` in `Wiki/EasyWayData.wiki/.obsidian` (locale, non committare se non richiesto).\n3. Verifica in Obsidian:\n   - Files & Links:\n     - `Use [[Wikilinks]]` = OFF (usiamo link markdown standard)\n     - `New link format` = Relative path to file\n     - `Automatically update internal links` = ON\n   - Files & Links / Attachment folder path:\n     - `.attachments`\n   - Files & Links / Excluded files:\n     - `logs/` (include report come `anchors-YYYYMMDDHHMMSS*.csv`)\n     - (esempi di report rumorosi) `anchors-*`, `atomicity-*`\n     - `old/`\n     - facoltativo: `*.bak` e `*.tmp`\n\nNota: se apri come vault la cartella `Wiki/` (non `Wiki/EasyWayData.wiki`), usa gli exclude con prefisso `EasyWayData.wiki/` (es. `EasyWayData.wiki/logs/`, `EasyWayData.wiki/old/`).","size_chars":952,"tokens_estimate":238}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Convenzioni repository (da rispettare)","anchor_slug":"convenzioni-repository-da-rispettare","chunk_index":3,"content":"## Convenzioni repository (da rispettare)\n- Non rimuovere/alterare il front matter YAML (`--- ... ---`) introdotto per agent-readiness.\n- Preferire link markdown relativi (esempio): `Titolo -> ./path/file.md`.\n- Allegati: usare `Wiki/EasyWayData.wiki/.attachments/` (sottocartelle ammesse, es. `.attachments/ux/`).","size_chars":314,"tokens_estimate":78}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":5,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":6,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-obsidian","path":"OBSIDIAN.md","title":"Obsidian Vault Setup (Wiki)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:12:51+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":7,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-onboarding-architettura","path":"onboarding-architettura.md","title":"EasyWay Data Portal — Onboarding & Architettura (Sintesi Unificata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"1. Stato attuale & gap principali\r","anchor_slug":"1-stato-attuale-gap-principali","chunk_index":1,"content":"## 1. Stato attuale & gap principali\n\n- Architettura agentica, cloud-native, multi-tenant, con automazione avanzata e sicurezza by design.\r\n- Gap principali (vedi dettagli in [VALUTAZIONE_EasyWayDataPortal.md](../../VALUTAZIONE_EasyWayDataPortal.md)):\r\n  - README root e onboarding: ora razionalizzati (vedi questa pagina e README.md)\r\n  - Alcune API non usano solo SP e c’è mismatch tra nomi colonne e DDL standard (Users, Config)\r\n  - Documentazione ricca ma dispersa: ora centralizzata qui e nella Wiki\r\n  - Naming e struttura: attività di pulizia in corso (vedi [todo-checklist.md](todo-checklist.md))\r\n  - Pipeline CI/CD e automazione documentale: da rafforzare\r\n  - Sicurezza avanzata (Entra ID, RLS/masking, export log su Datalake): in roadmap\n\n---","size_chars":755,"tokens_estimate":189}
{"doc_id":"ew-onboarding-architettura","path":"onboarding-architettura.md","title":"EasyWay Data Portal — Onboarding & Architettura (Sintesi Unificata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"2. Architettura cloud (sintesi)\r","anchor_slug":"2-architettura-cloud-sintesi","chunk_index":2,"content":"## 2. Architettura cloud (sintesi)\n\n- **Compute**: Azure App Service (Linux), slot di staging, autoscaling\r\n- **Database**: Azure SQL Database (backup/DR, AAD auth opzionale)\r\n- **Storage**: Azure Blob Storage (override query SQL, asset branding, log export)\r\n- **Sicurezza segreti**: Azure Key Vault (conn string DB, chiavi API, segreti)\r\n- **Config**: Azure App Configuration (feature flags) o PORTAL.CONFIGURATION su DB\r\n- **Observability**: Application Insights, Log Analytics\r\n- **Identità**: Microsoft Entra ID / AD B2C (roadmap)\r\n- **DevOps**: Azure Pipelines/GitHub Actions, smoke test post-deploy\n\nPer dettagli: [docs/infra/azure-architecture.md](../../docs/infra/azure-architecture.md)\n\n---","size_chars":700,"tokens_estimate":175}
{"doc_id":"ew-onboarding-architettura","path":"onboarding-architettura.md","title":"EasyWay Data Portal — Onboarding & Architettura (Sintesi Unificata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"3. Principi agentici (sintesi)\r","anchor_slug":"3-principi-agentici-sintesi","chunk_index":3,"content":"## 3. Principi agentici (sintesi)\n\n- **Idempotenza**: ogni DDL/SP deve essere rieseguibile senza effetti collaterali\r\n- **Solo Store Procedure per DML**: mutazioni dati solo via SP con auditing/logging centralizzato\r\n- **Logging obbligatorio**: ogni SP aggiorna PORTAL.STATS_EXECUTION_LOG\r\n- **Template e orchestrazione**: orchestratore, manifest.json, goals.json, template SQL/SP, gates CI/CD, human-in-the-loop\r\n- **Sicurezza**: nessuna credenziale hard-coded, parametri via Key Vault/App Config, validazioni input lato API\n\nPer dettagli: [docs/agentic/AGENTIC_READINESS.md](../../docs/agentic/AGENTIC_READINESS.md)\n\n---","size_chars":622,"tokens_estimate":156}
{"doc_id":"ew-onboarding-architettura","path":"onboarding-architettura.md","title":"EasyWay Data Portal — Onboarding & Architettura (Sintesi Unificata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"4. Roadmap & TODO\r","anchor_slug":"4-roadmap-todo","chunk_index":4,"content":"## 4. Roadmap & TODO\n\n- Roadmap evolutiva: [roadmap.md](roadmap.md)\r\n- Razionalizzazione e uniformamento: [todo-checklist.md](todo-checklist.md)\r\n- Decisione deploy MVP: [deployment-decision-mvp.md](deployment-decision-mvp.md)\n\n---","size_chars":231,"tokens_estimate":58}
{"doc_id":"ew-onboarding-architettura","path":"onboarding-architettura.md","title":"EasyWay Data Portal — Onboarding & Architettura (Sintesi Unificata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"5. Azioni da fare (priorità)\r","anchor_slug":"5-azioni-da-fare-priorit","chunk_index":5,"content":"## 5. Azioni da fare (priorità)\n\n1. Allineare tutte le API a usare solo SP e mapping colonne coerente con DDL\r\n2. Completare la pulizia naming e struttura file/cartelle (kebab-case, no encoding, no maiuscole)\r\n3. Rafforzare pipeline CI/CD (test automatici, validazione drift DB, gates agentici)\r\n4. Implementare sicurezza avanzata (Entra ID, RLS/masking, export log su Datalake)\r\n5. Completare automazione export AI (JSONL, tagging PII, dataset)\r\n6. Aggiornare/creare guide rapide per DBA, AMS/Ops, ETL, Analisti/BI\n\n---","size_chars":520,"tokens_estimate":130}
{"doc_id":"ew-onboarding-architettura","path":"onboarding-architettura.md","title":"EasyWay Data Portal — Onboarding & Architettura (Sintesi Unificata)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"6. File canonici (riferimento ufficiale)\r","anchor_slug":"6-file-canonici-riferimento-ufficiale","chunk_index":6,"content":"## 6. File canonici (riferimento ufficiale)\n\n- [README.md](../../README.md) — Entry point e onboarding rapido\r\n- [VALUTAZIONE_EasyWayDataPortal.md](../../VALUTAZIONE_EasyWayDataPortal.md) — Stato, gap, azioni\r\n- [docs/infra/azure-architecture.md](../../docs/infra/azure-architecture.md) — Architettura cloud\r\n- [docs/agentic/AGENTIC_READINESS.md](../../docs/agentic/AGENTIC_READINESS.md) — Principi agentici\r\n- [deployment-decision-mvp.md](deployment-decision-mvp.md) — Decisione deploy MVP\r\n- [roadmap.md](roadmap.md) — Roadmap evolutiva\r\n- [todo-checklist.md](todo-checklist.md) — Razionalizzazione e uniformamento\n\n**Nota:**  \r\nQuesta pagina centralizza e razionalizza le informazioni chiave.  \r\nLe informazioni ridondanti sono state eliminate o rimandate ai file canonici sopra elencati.  \r\nPer ogni dettaglio operativo, consulta sempre questi riferimenti.","size_chars":860,"tokens_estimate":215}
{"doc_id":"ew-output-contract","path":"output-contract.md","title":"Output Contract (JSON)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:25+01:00","section_level":2,"anchor_text":"Output Contract (JSON)","anchor_slug":"output-contract-json","chunk_index":1,"content":"# Output Contract (JSON)\nBreadcrumb: Home / Metodo Agent‑First / Output Contract\nBadge: WhatIf‑Ready ✅\n\nScopo\n- Definire una struttura minima, consistente e parsabile per gli output degli agenti (per LLM e persone).\n\nStruttura base (comune)\n- action (string) — nome azione es. `db-user:create`, `dlk-ensure-structure`\n- ok (bool) — esito logico dell’azione/valutazione\n- whatIf (bool) — true se pre‑check/anteprima a secco\n- nonInteractive (bool) — true se eseguito senza prompt\n- correlationId (string|null) — ID correlazione\n- startedAt / finishedAt (ISO 8601)\n- output (object) — payload dominio‑specifico (vedi sotto)\n- error (string|null) — messaggio d’errore sintetico, se presente\n- contractId (string) — id dello standard di output (es. `action-result`)\n- contractVersion (string) — versione (es. `1.0`)\n\nDomini: chiavi output principali\n- DBA (db-user:create/rotate/revoke)\n  - server, database, username, auth (`sql|aad`)\n  - roles[] (create), executed, keyVaultSet\n  - passwordMasked, tsqlPreview\n  - stateBefore/stateAfter (bools: readerExists, writerExists, userExists, memberReader, memberWriter)\n  - preCheck (WhatIf): risultato `scripts/db-verify-connect.ps1`\n- Datalake ensure‑structure\n  - filesystem, tenantId, expectedPaths[], changesPreview[] (es. `{ type: \"create-path\", path: \"landing/tenant01/\" }`)\n- Datalake apply‑acl\n  - path, proposedAcl[], diff[] (es. `{ path, current, proposed, principal }`)\n- Datalake set‑retention\n  - policies[] (es. `{ path, days, change }`)\n\nSchema (JSON Schema)\n- Base: `agents/core/schemas/action-result.schema.json`\n- Nota: gli attributi specifici di dominio non sono vincolati rigidamente (permette evoluzione), ma le chiavi comuni sono stabili.\n\nValidazione (rapida)\n- Script PS: `scripts/validate-action-output.ps1 -InputJson (cat out.json)`\n- Restituisce JSON con `ok=true|false`, elenco `missing` e `schema`.\n\nLinee guida\n- Output conciso, senza testo superfluo. Preferire enum semplici e booleani.\n- In WhatIf, non mutare lo stato: usare `changesPreview`/`diff`/`policies` come anteprima.\n- In esecuzione reale, valorizzare `executed=true` e `stateAfter` quando applicabile.\n\nRiferimenti\n- `agent-first-method.md`\n- `intent-contract.md`\n- Pagine dominio (DBA, Datalake) e relative ricette KB (con `example_output`).","size_chars":2277,"tokens_estimate":569}
{"doc_id":"ew-param-best-practices","path":"parametrization-best-practices.md","title":"parametrization-best-practices","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:25+01:00","section_level":2,"anchor_text":"parametrization-best-practices","anchor_slug":"parametrization-best-practices","chunk_index":1,"content":"Principi\n- Niente valori hardcoded: tutto parametrizzabile via env, YAML o Variable Group.\n- Config separata dal codice; default sensati in dev; sicurezza in prod (Key Vault/Variable Group).\n\nAPI (env)\n- Sicurezza: `RATE_LIMIT_WINDOW_MS`, `RATE_LIMIT_MAX`, `BODY_LIMIT`, `ALLOWED_ORIGINS`, `TRUST_PROXY`\n- Auth: `AUTH_ISSUER`, `AUTH_JWKS_URI`, `AUTH_AUDIENCE`, `TENANT_CLAIM`, `AUTH_CLIENT_ID`, `AUTH_TENANT_ID`, `AUTH_SCOPES`\n- Storage: `AZURE_STORAGE_CONNECTION_STRING` o `AZURE_STORAGE_ACCOUNT` (MI)\n- Branding: `BRANDING_CONTAINER`, `BRANDING_PREFIX`, `DEFAULT_TENANT_ID`\n- RLS: `RLS_CONTEXT_ENABLED` (true/false)\n- Log: `LOG_LEVEL`, `LOG_DIR`\n- Portal: `PORTAL_BASE_PATH` (default `/portal`)\n\nPipeline (YAML/vars)\n- Versioni esterne: `ci/versions.yml` → `node_version`, `flyway_version`, `terraform_version`\n- Gates condizionati: `ENABLE_CHECKLIST`, `ENABLE_DB_DRIFT`, `ENABLE_KB_CONSISTENCY`, `FLYWAY_ENABLED`\n  - Disattiva/attiva i job senza modificare la pipeline.\n- Segreti/connessioni: Variable Group/Key Vault.\n\nFlyway & Terraform\n- Parametri/credenziali passati come variabili (mai hardcoded).\n- Config file (flyway.conf) minimale; URL/USER/PASSWORD da env.\n\nEsempi\n- Pipeline: `- template: ci/versions.yml` per versioni; `condition: eq(variables['ENABLE_*'],'true')` per gates.\n- API: `app.use(process.env.PORTAL_BASE_PATH || '/portal', portalRoutes)`; `withTenantContext` usa `RLS_CONTEXT_ENABLED`.","size_chars":1412,"tokens_estimate":353}
{"doc_id":"ew-questboard-excel-csv","path":"quest-board-excel-csv.md","title":"Quest Board – Excel/CSV Upload (L1→L5)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"Quest Board – Excel/CSV Upload (L1→L5)","anchor_slug":"quest-board-excelcsv-upload-l1l5","chunk_index":1,"content":"# Quest Board – Excel/CSV Upload (L1→L5)\n\nPrincipi\n- WHAT‑first: definire cosa fare (manifest, intents, UX) prima del come.\n- One‑Button UX: semplicità per tutti; percorso Base sempre disponibile.\n- Diario di bordo: ogni step lascia messaggi chiari, esiti e prossime azioni.\n\nMappa a livelli (L1→L5)\n- L1 – One‑Button MVP\n  - Quest: caricare un file, superare DQ base, vedere la dashboard standard.\n  - Deliverable: manifest wf, intents JSON, mapping template, UX mock, stub CLI end‑to‑end, diario JSON.\n  - Gate: Wiki LLM front‑matter lint; Events JSON Schema Validation; GovernanceGates (ewctl) se applicabile.\n  - SLO/KPI: file→dashboard ≤ 2 min; first‑try success ≥ 85%.\n  - DoR: manifest wf + intents + UX prompts presenti; KB di prova pronta.\n  - DoD: stub CLI eseguibili in sequenza; diario prodotto; Wiki/KB aggiornate.\n- L2 – Mapping & Dedup\n  - Quest: suggerire/applicare mapping salvabile; dedup controllato su chiave candidata.\n  - Deliverable: mapping persistente (template id), opzioni dedup (safe), copy UX.\n  - Gate: Governance review mapping; privacy (no PII in sample/anteprime).\n  - KPI: riduzione dei retry; minor rumore DQ.\n- L3 – Conversational Analytics\n  - Quest: agent Q&A su viste/materializzazioni; salva widget.\n  - Deliverable: set di viste stabili; copy UX per domande comuni; log query.\n  - Gate: performance base; explainability (mostra come calcoliamo).\n- L4 – Arricchimenti Tecnici\n  - Quest: outlier avanzati, multi‑conto, cambio valuta.\n  - Deliverable: policy/viste aggiuntive; template opzioni avanzate.\n- L5 – Connettori & Scheduling\n  - Quest: template multipli, schedulazione, connettori esterni (banche/API).\n  - Deliverable: manifest con nuovi trigger; checklist sicurezza.\n\nRiferimenti essenziali\n- Orchestrazione (WHAT): orchestrations/wf-excel-csv-upload.md\n- Manifest JSON: docs/agentic/templates/orchestrations/wf.excel-csv-upload.manifest.json\n- Intents Catalog: orchestrations/intents-catalog.md\n- Mapping Template: docs/agentic/templates/mapping.entrate-uscite.template.yaml\n- UX Diario (mock): UX/diary-mock-wf-excel-csv-upload.md\n- UX Prompts (IT/EN): docs/agentic/templates/orchestrations/ux_prompts.it.json, ux_prompts.en.json\n- KB – Prova stubs: agents/kb/recipes.jsonl (id=kb-orch-intents-stubs-301)\n- KB – DQ Blueprint (facoltativo): agents/kb/recipes.jsonl (id=kb-agent-dq-blueprint-201)","size_chars":2346,"tokens_estimate":586}
{"doc_id":"ew-questboard-excel-csv","path":"quest-board-excel-csv.md","title":"Quest Board – Excel/CSV Upload (L1→L5)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"Quest Board – Excel/CSV Upload (L1→L5)","anchor_slug":"quest-board-excelcsv-upload-l1l5","chunk_index":2,"content":"Backlog mirato (L1)\n- Implementare ingest reale (landing + anteprima robusta) mantenendo il contratto dell’intent.\n- DQ base reale (ARGOS) con Decision Trace minimale.\n- Materializzazioni KPI base (viste semplici) con tempi di risposta adeguati.\n- Diario JSON/HTML consolidato con i messaggi da ux_prompts.\n\nMisurazione (L1)\n- time_to_dashboard_ms, first_try_success, warnings_count, gpr (se applicabile).\n- Artifact: out/diary/diary.json (timeline), log eventi argos.* (se emessi).\n\nNote\n- I livelli successivi (L2..L5) si innestano senza rompere il contratto UX/WHAT definito a L1.","size_chars":583,"tokens_estimate":146}
{"doc_id":"ew-roadmap","path":"roadmap.md","title":"Roadmap & Qualità Documentazione","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Obiettivi","anchor_slug":"obiettivi","chunk_index":1,"content":"## Obiettivi\n- Garantire naming/ancore=0, front matter completo, Q&A minime e code fence con linguaggio.\n- Generare manifest JSONL/CSV, anchors e chunk per agenti.\n- Automatizzare scan/apply multi‑root e pubblicare report in CI.","size_chars":228,"tokens_estimate":57}
{"doc_id":"ew-roadmap","path":"roadmap.md","title":"Roadmap & Qualità Documentazione","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Comandi locali (riassunto)","anchor_slug":"comandi-locali-riassunto","chunk_index":2,"content":"## Comandi locali (riassunto)\n```powershell\n# 1) Scansione normalizzazione (multi-root)\n. scripts/normalize-project-multi.ps1 -Roots @('.') -Mode scan\n\n# 2) Applicazione normalizzazione (front matter, fence, tag, Q&A index)\n. scripts/normalize-project-multi.ps1 -Roots @('.') -Mode apply -EnsureFrontMatter\n\n# 3) Rebuild + lint\n./scripts/review-run.ps1 -Root . -Mode kebab -CheckAnchors\n. ./scripts/generate-entities-index.ps1 -Root .\n. ./scripts/generate-master-index.ps1 -Root .\n. ./scripts/export-chunks-jsonl.ps1 -Root .\n. ./scripts/lint-atomicity.ps1 -Root .\n```sql","size_chars":570,"tokens_estimate":142}
{"doc_id":"ew-roadmap","path":"roadmap.md","title":"Roadmap & Qualità Documentazione","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Pipeline CI (Azure DevOps)","anchor_slug":"pipeline-ci-azure-devops","chunk_index":3,"content":"## Pipeline CI (Azure DevOps)\n- La pipeline `azure-pipelines.yml` lancia la scansione normalizzatrice in modalità `scan` ad ogni PR e pubblica i report `logs/reports/*` come artifact.\n- Estendibile per includere rebuild e linter se richiesto.","size_chars":242,"tokens_estimate":60}
{"doc_id":"ew-roadmap","path":"roadmap.md","title":"Roadmap & Qualità Documentazione","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Criteri di accettazione","anchor_slug":"criteri-di-accettazione","chunk_index":4,"content":"## Criteri di accettazione\n- Lint atomicità: nessun file con Q&A < 3 (fuori whitelist) e nessun code fence senza linguaggio.\n- Naming/Anchor check: 0 issue.\n- Manifest/Anchors/Chunks aggiornati.","size_chars":194,"tokens_estimate":48}
{"doc_id":"ew-start-here","path":"start-here.md","title":"Start Here - Link Essenziali","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T09:57:36+01:00","section_level":2,"anchor_text":"Start Here - Link Essenziali","anchor_slug":"start-here-link-essenziali","chunk_index":1,"content":"# Start Here - Link Essenziali\n\n1) Orchestrazioni (WHAT)\n- wf Excel/CSV → Dashboard: `orchestrations/wf-excel-csv-upload.md`\n- Orchestratore n8n: `orchestrations/orchestrator-n8n.md`\n\n2) Intents Catalog (WHAT)\n- Use case Excel/CSV: `orchestrations/intents-catalog.md`\n- Globale (cross-domain): `orchestrations/intents-catalog-global.md`\n\n3) Control Plane + Domini (skeleton)\n- Control Plane: `control-plane/index.md`\n- Domini: `domains/index.md`\n\n4) UX Prompts (IT/EN)\n- Copioni UI: `docs/agentic/templates/orchestrations/ux_prompts.it.json`, `docs/agentic/templates/orchestrations/ux_prompts.en.json`\n\n5) HOWTO - WHAT-first + Diario\n- Guida team: `howto-what-first-team.md`\n- Audit doc agentica: `docs-agentic-audit.md`\n\n\n5b) Tag taxonomy (controllata)\n- Tag taxonomy: `docs-tag-taxonomy.md`\n6) KB Ricette (comandi rapidi)\n- Skeleton: `agents/kb/recipes.jsonl` (id: `kb-docs-skeleton-601`)\n- Lint: `agents/kb/recipes.jsonl` (id: `kb-lint-whatfirst-602`)\n\n7) Materiale legacy / asset\n- Contesto: `blueprints/legacy-reference-material.md`\n- Branding: `UX/branding-assets.md`","size_chars":1073,"tokens_estimate":268}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Gap e aree di miglioramento (cosa manca)\r","anchor_slug":"gap-e-aree-di-miglioramento-cosa-manca","chunk_index":1,"content":"## Gap e aree di miglioramento (cosa manca)\r\n- **Allineamento API/DB:** alcune API non usano ancora solo Store Procedure e c’è mismatch tra nomi colonne e DDL standard (Users, Config). Questo è il punto più critico per la coerenza agentica e la robustezza.\r\n- **Pipeline CI/CD:** da rafforzare con test automatici, validazione drift DB, gates agentici sempre attivi e report periodici.\r\n- **Sicurezza avanzata:** Entra ID/AD B2C, RLS/masking su DB, export log su Datalake sono in roadmap ma non ancora pienamente implementati.\r\n- **Automazione export AI:** export JSONL, tagging PII, e dataset per AI sono previsti ma non ancora completi.\r\n- **Uniformamento naming e struttura:** ancora presenti file/cartelle con encoding, maiuscole, quote/backtick, e naming non uniforme (vedi todo-checklist.md).\r\n- **Onboarding e quickstart:** ora razionalizzati, ma serve mantenere sempre aggiornati README e Wiki per evitare dispersione futura.\r\n- **Documentazione ruoli:** mancano guide rapide per DBA, AMS/Ops, ETL, Analisti/BI (roadmap).\r\n- **Automazione documentale:** la documentazione è ricca ma serve maggiore uniformità (front matter, summary, indici, link checker, export AI).\r\n- **Test e QA:** la struttura test è presente, ma va ampliata con smoke/integration test automatici e collezioni Postman/Jest complete.","size_chars":1311,"tokens_estimate":328}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Convenzioni e struttura","anchor_slug":"convenzioni-e-struttura","chunk_index":2,"content":"## Convenzioni e struttura\n- [ ] Integrare la guida \"kebab-case vs snake_case\" in `docs-conventions.md` (con regex ed esempi buoni/cattivi)\n- [ ] Aggiungere “Quick Check” con regex di verifica naming\r\n- [ ] Creare sezioni “Ricette” per AI: `create-table`, `create-endpoint`, `create-job-etl`","size_chars":291,"tokens_estimate":73}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Best practice: Uniformamento naming e struttura\r","anchor_slug":"best-practice-uniformamento-naming-e-struttura","chunk_index":3,"content":"## Best practice: Uniformamento naming e struttura\r\n- Uniformare naming e struttura: ancora presenti file/cartelle con encoding, maiuscole, quote/backtick, e naming non uniforme (vedi todo-checklist.md).","size_chars":203,"tokens_estimate":51}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Sicurezza avanzata (roadmap, non ancora pienamente implementata)\r","anchor_slug":"sicurezza-avanzata-roadmap-non-ancora-pienamente-implementata","chunk_index":4,"content":"## Sicurezza avanzata (roadmap, non ancora pienamente implementata)\r\n- Entra ID/AD B2C: autenticazione/identità non ancora integrata nelle API e nei flussi di onboarding.\r\n- RLS/masking su DB: mancano policy Row Level Security e masking attivi su tutte le tabelle sensibili.\r\n- Export log su Datalake: export centralizzato dei log applicativi e di audit verso Azure Datalake non ancora operativo.\r\n- Key Vault: migrazione completa dei segreti da .env a Key Vault da finalizzare.\r\n- Hardening middleware tenant: validazione/normalizzazione tenant, antifrode (rate limit per tenant) e tracing avanzato (correlation id) da rafforzare.\r\n- Documentazione e checklist di sicurezza: da completare e rendere parte della pipeline di PR.","size_chars":727,"tokens_estimate":182}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Automazione documentale (da rafforzare)\r","anchor_slug":"automazione-documentale-da-rafforzare","chunk_index":5,"content":"## Automazione documentale (da rafforzare)\r\n- Documentazione ricca ma serve maggiore uniformità: front matter YAML, summary, indici automatici, link checker, export AI (JSONL).\r\n- Uniformare la struttura e i metadati di tutte le pagine chiave.\r\n- Automatizzare la generazione degli indici e la verifica dei link.\r\n- Integrare export dataset AI e checklist di “LLM readiness”.","size_chars":375,"tokens_estimate":94}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Test e QA (da ampliare)\r","anchor_slug":"test-e-qa-da-ampliare","chunk_index":6,"content":"## Test e QA (da ampliare)\r\n- Struttura test presente ma va ampliata: smoke/integration test automatici, collezioni Postman, test Jest completi.\r\n- Centralizzare e documentare i test in `tests/` e nelle pipeline CI/CD.\r\n- Definire una strategia di coverage e validazione per API, DB e automazioni.\r\n- [x] Normalizzare cartella endpoint residua: `.../ENDPOINT/GET-'api%2Dconfig'/` (nomi puliti, kebab-case)\r\n- [x] Pulizia percent-encoding e caratteri speciali in `02_logiche_easyway/`\r\n- [ ] Pulizia percent-encoding e caratteri speciali in `03_datalake_dev/`\r\n- [ ] Rimuovere backtick/quote nei nomi file (`quotes/backticks`)\r\n- [ ] Uniformare maiuscole/minuscole (tutto minuscolo per file/cartelle)","size_chars":699,"tokens_estimate":175}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":3,"anchor_text":"Rinomine puntuali (20251019)\r","anchor_slug":"rinomine-puntuali-20251019","chunk_index":7,"content":"### Rinomine puntuali (20251019)\r\n- [x] EasyWayData.wiki/agents-governance.md → agents-governance.md\r\n- [x] EasyWayData.wiki/deploy-app-service.md → deploy-app-service.md\r\n- [x] EasyWayData.wiki/parametrization-best-practices.md → parametrization-best-practices.md\r\n- [x] EasyWayData.wiki/roadmap.md → roadmap.md\r\n- [x] easyway-webapp/01_database_architecture/best-practices-checklist.md → best-practices-checklist.md\r\n- [x] easyway-webapp/01_database_architecture/db-studio.md → db-studio.md\r\n- [x] easyway-webapp/01_database_architecture/flyway.md → flyway.md\r\n- [x] easyway-webapp/01_database_architecture/portal.md → portal.md\r\n- [x] easyway-webapp/01_database_architecture/sequence.md → sequence.md\r\n- [x] easyway-webapp/01_database_architecture/storeprocess.md → storeprocess.md\r\n- [x] easyway-webapp/01_database_architecture/01b_schema_structure/portal.md → portal.md\r\n- [x] easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md → dinamiche-di-manutenzione.md\r\n- [x] easyway-webapp/05_codice_easyway_portale/easyway_portal_api/endpoint.md → endpoint.md\r\n- [x] easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/index.md → index.md\r\n- [x] easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/template-endpoint.md → template-endpoint.md\r\n- [x] easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md → come-si-testa.md\r\n- [ ] Valutare esclusione dal linter dei report generati: Wiki/EasyWayData.wiki/logs/reports/normalize-*.md","size_chars":1549,"tokens_estimate":387}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Metadati e front matter\r","anchor_slug":"metadati-e-front-matter","chunk_index":8,"content":"## Metadati e front matter\r\n- [ ] Aggiungere front matter YAML minimo alle pagine chiave (owner, summary, tags, llm)\r\n- [x] 02_logiche_easyway: front matter minimale aggiunto a tutti i `.md`\r\n- [ ] Marcatura privacy/PII (`llm.include`, `llm.pii`) per aree sensibili\r\n- [ ] Aggiungere sezione “Questions Answered” (3–7 Q&A) nei documenti lunghi","size_chars":343,"tokens_estimate":86}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Indici e link\r","anchor_slug":"indici-e-link","chunk_index":9,"content":"## Indici e link\r\n- [ ] Generare `Wiki/EasyWayData.wiki/index.md` con H1/H2 e link\r\n- [ ] Aggiungere `index.md` per le principali sottocartelle (DB, API, flussi)\n- [ ] Eseguire link checker markdown e correggere link rotti/anchor mancanti\r\n- [x] 02_logiche_easyway: creati `index.md` per cartella e sottocartelle principali","size_chars":323,"tokens_estimate":81}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Automazioni e controlli\r","anchor_slug":"automazioni-e-controlli","chunk_index":10,"content":"## Automazioni e controlli\r\n- [ ] Linter naming file (ASCII/kebab-case), report settimanale\r\n- [ ] Verifica front matter obbligatoria (campi minimi)\r\n- [ ] Report “LLM readiness” periodico (mancano summary/tags/PII)","size_chars":215,"tokens_estimate":54}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Export per AI (dataset)\r","anchor_slug":"export-per-ai-dataset","chunk_index":11,"content":"## Export per AI (dataset)\r\n- [ ] Definire schema `JSONL` per export (chunk H2/H3, overlap)\r\n- [ ] Script export con calcolo token e batch embedding\r\n- [ ] Escludere file con `llm.include: false`","size_chars":195,"tokens_estimate":49}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Entità e tassonomia\r","anchor_slug":"entit-e-tassonomia","chunk_index":12,"content":"## Entità e tassonomia\r\n- [ ] Espandere `entities.yaml` (endpoint, SP, tabelle, flussi) con 20+ voci\r\n- [ ] Mappare entità dalle pagine a `entities:` nel front matter","size_chars":166,"tokens_estimate":42}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Estensioni per ruoli (guide rapide)\r","anchor_slug":"estensioni-per-ruoli-guide-rapide","chunk_index":13,"content":"## Estensioni per ruoli (guide rapide)\r\n- [ ] **Mancano guide rapide per i ruoli chiave (roadmap):**\r\n    - DBA: convenzioni DDL, template idempotenza, checklist vincoli/indici\r\n    - AMS/Ops: runbook, allarmi, health-check, troubleshooting\r\n    - ETL: mapping, qualità dati, schedule, monitoraggio\r\n    - Analista/BI: metriche, fonti, dashboard, glossario\r\n- [ ] Per ciascun ruolo, prevedere tanti piccoli agenti specializzati che si occupano delle attività di documentazione, automazione e supporto operativo.","size_chars":511,"tokens_estimate":128}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Accettazione\r","anchor_slug":"accettazione","chunk_index":14,"content":"## Accettazione\r\n- [ ] Tutte le pagine hanno front matter base + summary\r\n- [ ] Nessun file con `%2D`, backtick, `�`, spazi o maiuscole\r\n- [ ] Indici presenti (radice + sottocartelle chiave)\r\n- [ ] Link checker senza errori\r\n- [ ] Export JSONL generato per subset pilota (API endpoint)","size_chars":285,"tokens_estimate":71}
{"doc_id":"ew-todo_checklist","path":"todo-checklist.md","title":"TODO - Razionalizzazione Wiki (Semplice)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:06:14+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-value-proposition","path":"value-proposition.md","title":"Visione & Value Proposition","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:51+01:00","section_level":2,"anchor_text":"Start With Why (S. Sinek)","anchor_slug":"start-with-why-s-sinek","chunk_index":1,"content":"## Start With Why (S. Sinek)\n\nTagline\n- Inclusività digitale: dar voce ai tuoi dati.\n\nWhy (Perché)\n- EasyWay Data Portal nasce dalla convinzione che la gestione dei dati debba essere semplice, accessibile e sicura per tutti. Il nostro scopo è abbattere le barriere tecniche e democratizzare l’accesso a strumenti avanzati, affinché chiunque possa ottenere valore dai propri dati senza complessità, costi nascosti o dipendenze da specialisti.\n\nHow (Come)\n- Piattaforma agent‑first, cloud‑native, automatizzata e sicura.\n- Agenti che rendono semplici e automatizzati i processi complessi (WhatIf, gates, doc alignment).\n- Sicurezza, compliance e tracciabilità by design.\n- Framework modulare, estendibile, per chi vuole “usare” e per chi vuole “costruire”.\n\nWhat (Cosa)\n- Portale dati multi‑tenant e API‑first con automazione avanzata e agenti specializzati.\n- Gestione, analisi e valorizzazione dei dati tramite interfaccia intuitiva e API.\n- Automazione di processi ripetitivi, sicurezza e auditing centralizzati, onboarding e documentazione facilitati.","size_chars":1053,"tokens_estimate":263}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Obiettivi\r","anchor_slug":"obiettivi","chunk_index":1,"content":"## Obiettivi\n\n- Uniformare naming, front matter, struttura contenuti, linking e indici.\r\n- Rendere ogni pagina LLM‑friendly e bambino‑friendly.\r\n- Automatizzare check e report per iterazioni rapide.","size_chars":198,"tokens_estimate":50}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Fasi e Sequenza\r","anchor_slug":"fasi-e-sequenza","chunk_index":2,"content":"## Fasi e Sequenza","size_chars":18,"tokens_estimate":4}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 0 — Baseline e strumenti\r","anchor_slug":"fase-0-baseline-e-strumenti","chunk_index":3,"content":"### Fase 0 — Baseline e strumenti\r\n- Confermare regole in `docs-conventions.md` e `llm-readiness-checklist.md`.\r\n- Usare `scripts/review-run.ps1` e `scripts/review-examples.ps1`; tenere aggiornati `entities.yaml` e `entities-index.md`.","size_chars":235,"tokens_estimate":59}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 1 — Naming e indici\r","anchor_slug":"fase-1-naming-e-indici","chunk_index":4,"content":"### Fase 1 — Naming e indici\r\n- Applicare batch di rinomine per kebab-case; generare `index.md` in sottocartelle e `index.md` globale.\r\n- Aggiornare link interni; rigenerare `entities-index.md`.","size_chars":194,"tokens_estimate":48}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 2 — Front Matter\r","anchor_slug":"fase-2-front-matter","chunk_index":5,"content":"### Fase 2 — Front Matter\r\n- Aggiungere front matter minimo a tutti i `.md` (id, title, summary, owner, tags, llm, entities).\r\n- Assegnare owner/tag per area (es. team-docs, team-api, team-data, team-ops).","size_chars":205,"tokens_estimate":51}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 3 — Struttura Pagine\r","anchor_slug":"fase-3-struttura-pagine","chunk_index":6,"content":"### Fase 3 — Struttura Pagine\r\n- Uniformare sezioni: Scopo, Prerequisiti, Passi, Esempi, Errori comuni, Q&A, Collegamenti.\r\n- Obbligatoria “Questions Answered” (3–7) e blocchi di codice con linguaggio.","size_chars":201,"tokens_estimate":50}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 4 — Entità e Tagging\r","anchor_slug":"fase-4-entit-e-tagging","chunk_index":7,"content":"### Fase 4 — Entità e Tagging\r\n- Aggiornare `entities.yaml` con entità da DB, API, policy, flussi, standard.\r\n- Aggiungere `entities: [...]` nel front matter; rigenerare `entities-index.md`.","size_chars":190,"tokens_estimate":48}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 5 — Link e Ancore\r","anchor_slug":"fase-5-link-e-ancore","chunk_index":8,"content":"### Fase 5 — Link e Ancore\r\n- Link checker + anchor checker (`-CheckAnchors`); correggere link rotti/ancore mancanti.","size_chars":117,"tokens_estimate":29}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 6 — Privacy e PII\r","anchor_slug":"fase-6-privacy-e-pii","chunk_index":9,"content":"### Fase 6 — Privacy e PII\r\n- Classificare privacy (`privacy/*`) e PII (`llm.pii`) nelle pagine sensibili; attivare redaction se necessario.","size_chars":140,"tokens_estimate":35}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Fase 7 — QA Finale\r","anchor_slug":"fase-7-qa-finale","chunk_index":10,"content":"### Fase 7 — QA Finale\r\n- Eseguire review-run completo (naming=0, anchors=0, indici creati).\r\n- Allineare `docs-conventions.md` se emergono nuovi pattern.","size_chars":154,"tokens_estimate":38}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Per‑Cartella (linee guida)\r","anchor_slug":"percartella-linee-guida","chunk_index":11,"content":"## Per‑Cartella (linee guida)","size_chars":29,"tokens_estimate":7}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"01_database_architecture\r","anchor_slug":"01databasearchitecture","chunk_index":12,"content":"### 01_database_architecture\r\n- `programmability/` (function.md, sequence.md, stored-procedure/*.md): front matter con `artifact/*`, check esempi DDL idempotenti; `index.md` a livello cartella e sottocartella.\r\n- `easyway-webapp/01_database_architecture/01a-db-setup.md`, `easyway-webapp/01_database_architecture/01b-schema-structure.md`: sezioni standard, Q&A, collegamenti a entità DB.","size_chars":387,"tokens_estimate":97}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"02_logiche_easyway\r","anchor_slug":"02logicheeasyway","chunk_index":13,"content":"### 02_logiche_easyway\r\n- Sotto‑cartelle (`api-esterne-integrazione`, `logging-and-audit`, `login-flussi-onboarding`, `notifiche-gestione`): front matter completo, esempi CURL/JSON, schemi input/output, Q&A.\r\n- Aggiornare `entities.yaml` con standard (`rest-naming`, `best-practice-naming`) e guide.","size_chars":299,"tokens_estimate":75}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"03_datalake_dev\r","anchor_slug":"03datalakedev","chunk_index":14,"content":"### 03_datalake_dev\r\n- Standard IAM/naming: front matter (policy/security), esempi e tabelle schemi.","size_chars":100,"tokens_estimate":25}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"05_codice_easyway_portale\r","anchor_slug":"05codiceeasywayportale","chunk_index":15,"content":"### 05_codice_easyway_portale\r\n- `easyway_portal_api`: endpoint con schema `endp-00n-*.md` + front matter ricco; policy e step con naming pulito; index cartella; anchor check.\r\n- I log/policy e standard devono linkare entità e pagine correlate.","size_chars":244,"tokens_estimate":61}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"06_frontend_architecture, 07_iam_naming_utenti_gruppi, 10_ai_agents\r","anchor_slug":"06frontendarchitecture-07iamnamingutentigruppi-10aiagents","chunk_index":16,"content":"### 06_frontend_architecture, 07_iam_naming_utenti_gruppi, 10_ai_agents\r\n- Front matter + sezioni standard; esempi path e mapping, Q&A, collegamenti.","size_chars":149,"tokens_estimate":37}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Template Autoriali (snippet)\r","anchor_slug":"template-autoriali-snippet","chunk_index":17,"content":"## Template Autoriali (snippet)","size_chars":31,"tokens_estimate":8}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Endpoint (API)\r","anchor_slug":"endpoint-api","chunk_index":18,"content":"### Endpoint (API)\r\n- Purpose, Inputs/Validations, Responses (200/4xx/5xx), Examples (curl/JSON), Error handling, Related.","size_chars":122,"tokens_estimate":30}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Stored Procedure\r","anchor_slug":"stored-procedure","chunk_index":19,"content":"### Stored Procedure\r\n- Purpose, Signature, Inputs/Outputs, Idempotenza, Indici/FK/Check, Esempi invocazione, Rollback, Related.","size_chars":128,"tokens_estimate":32}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Flow/Guide/Standard\r","anchor_slug":"flowguidestandard","chunk_index":20,"content":"### Flow/Guide/Standard\r\n- Scope, Prereqs, Steps, Examples, Pitfalls, Q&A, Related, Entities.","size_chars":93,"tokens_estimate":23}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Automazioni (da usare sempre)\r","anchor_slug":"automazioni-da-usare-sempre","chunk_index":21,"content":"## Automazioni (da usare sempre)","size_chars":32,"tokens_estimate":8}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Naming + indici\r","anchor_slug":"naming-indici","chunk_index":22,"content":"### Naming + indici\r\n- `EasyWayData.wiki/scripts/review-run.ps1 -Root EasyWayData.wiki -Mode kebab`","size_chars":99,"tokens_estimate":25}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Anchor check\r","anchor_slug":"anchor-check","chunk_index":23,"content":"### Anchor check\r\n- `EasyWayData.wiki/scripts/review-run.ps1 -Root EasyWayData.wiki -Mode kebab -CheckAnchors`","size_chars":110,"tokens_estimate":28}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Index globale\r","anchor_slug":"index-globale","chunk_index":24,"content":"### Index globale\r\n- `. EasyWayData.wiki/scripts/review-examples.ps1; New-RootIndex -Root 'EasyWayData.wiki'`","size_chars":109,"tokens_estimate":27}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Log attività\r","anchor_slug":"log-attivit","chunk_index":25,"content":"### Log attività\r\n- `EasyWayData.wiki/scripts/add-log.ps1 -Type DOC -Scope wiki -Status success -Owner team-docs -Message \"Aggiornata roadmap uniformamento\" -Split monthly`","size_chars":172,"tokens_estimate":43}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Manifest per agenti (JSONL/CSV) + ancore\r","anchor_slug":"manifest-per-agenti-jsonlcsv-ancore","chunk_index":26,"content":"### Manifest per agenti (JSONL/CSV) + ancore\r\n- `EasyWayData.wiki/scripts/generate-master-index.ps1 -Root EasyWayData.wiki`\r\n- Output: `index_master.csv`, `index_master.jsonl`, `anchors_master.csv`","size_chars":197,"tokens_estimate":49}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Criteri di Accettazione\r","anchor_slug":"criteri-di-accettazione","chunk_index":27,"content":"## Criteri di Accettazione\n\n- Naming: 0 warning (runner naming=0) o warning solo whitelistati (meta/legacy).\r\n- Front matter: presente in tutti i `.md` (id, title, summary, owner, tags, llm, entities).\r\n- Struttura: sezioni standard + Q&A in ogni pagina.\r\n- Link: 0 link file mancanti, 0 anchor mancanti (report anchors=0).\r\n- Indici: `index.md` in cartelle chiave + `index.md` globale aggiornato.\r\n- Entities: `entities.yaml` aggiornato + `entities-index.md` rigenerato.\r\n- Privacy: `llm.include/pii` coerenti; redaction indicata dove serve.","size_chars":542,"tokens_estimate":136}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Assegnazione Owner e Tag (esempio)\r","anchor_slug":"assegnazione-owner-e-tag-esempio","chunk_index":28,"content":"## Assegnazione Owner e Tag (esempio)\n\n- team-docs: root, convenzioni, checklist, indici.\r\n- team-api: easyway_portal_api, endpoint, policy api.\r\n- team-data: 01_database_architecture, 03_datalake_dev.\r\n- team-ops: logging, runbook, iac.\n\nTag base:\r\n- `layer/architecture`, `layer/reference`, `layer/how-to`, `policy/security/logging`, `artifact/endpoint/function/sequence/stored-procedure`, `audience/dev/ops/data/product`.","size_chars":424,"tokens_estimate":106}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Roadmap Operativa\r","anchor_slug":"roadmap-operativa","chunk_index":29,"content":"## Roadmap Operativa","size_chars":20,"tokens_estimate":5}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Sprint 1 (2–3 giorni)\r","anchor_slug":"sprint-1-23-giorni","chunk_index":30,"content":"### Sprint 1 (2–3 giorni)\r\n- Conferma tassonomia tag/owner; passata completa naming (runner); indici cartelle; front matter top-level; baseline `entities.yaml`.","size_chars":160,"tokens_estimate":40}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Sprint 2 (3–5 giorni)\r","anchor_slug":"sprint-2-35-giorni","chunk_index":31,"content":"### Sprint 2 (3–5 giorni)\r\n- Front matter completo per 01/02/05; struttura sezioni standard + Q&A; `entities-index.md` aggiornato.","size_chars":130,"tokens_estimate":32}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Sprint 3 (3–5 giorni)\r","anchor_slug":"sprint-3-35-giorni","chunk_index":32,"content":"### Sprint 3 (3–5 giorni)\r\n- Link + anchor checker; fix rotture; privacy/PII; index globale.","size_chars":92,"tokens_estimate":23}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":3,"anchor_text":"Sprint 4 (2–3 giorni)\r","anchor_slug":"sprint-4-23-giorni","chunk_index":33,"content":"### Sprint 4 (2–3 giorni)\r\n- Rifiniture, report finale “LLM readiness”; aggiornamento `docs-conventions.md` con lessons learned.","size_chars":128,"tokens_estimate":32}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Rischi e Mitigazioni\r","anchor_slug":"rischi-e-mitigazioni","chunk_index":34,"content":"## Rischi e Mitigazioni\n\n- Link rotti post‑rinomina: correre sempre update link + anchor check prima del merge.\r\n- Legacy path rumorosi: whitelist documentata; migrazione pianificata a valle.\r\n- Double source/duplicati: eliminare file legacy appena la versione kebab-case è valida (loggare CLEAN).","size_chars":297,"tokens_estimate":74}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Output e Report\r","anchor_slug":"output-e-report","chunk_index":35,"content":"## Output e Report\n\n- `logs/reports/naming-*.txt` (naming issues)\r\n- `logs/reports/anchors-*.md` (anchor issues)\r\n- `entities-index.md` rigenerato\r\n- `activity-log.md` aggiornato per ogni step (CSV-friendly)\r\n- `index_master.csv` e `index_master.jsonl` per agenti e filtri rapidi\r\n- `anchors_master.csv` per richiami di sezione H2/H3","size_chars":333,"tokens_estimate":83}
{"doc_id":"wiki-uniformamento-roadmap","path":"wiki-uniformamento-roadmap.md","title":"Roadmap Uniformamento Wiki secondo docs-conventions","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:42+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":36,"content":"## Domande a cui risponde\r\n- Qual è il piano pratico per uniformare la wiki secondo le convenzioni?\r\n- Quali strumenti/script usare e quando?\r\n- Quali sono i criteri di accettazione misurabili?\r\n- Come assegnare owner/tag e tracciare l’avanzamento?","size_chars":248,"tokens_estimate":62}
{"doc_id":"ew-obsidian-example-readme","path":".obsidian.example/README.md","title":".obsidian.example","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:06:49+01:00","section_level":2,"anchor_text":".obsidian.example","anchor_slug":"obsidianexample","chunk_index":1,"content":"# .obsidian.example\n\nQuesta cartella è un template “safe” per aprire `Wiki/EasyWayData.wiki` come vault Obsidian.\n\nUso:\n1) Copia `Wiki/EasyWayData.wiki/.obsidian.example` in `Wiki/EasyWayData.wiki/.obsidian` sul tuo PC.\n2) Apri `Wiki/EasyWayData.wiki` come vault.\n\nNota:\n- In repo teniamo `.obsidian.example` per evitare di committare configurazioni personali.\n- Le esclusioni consigliate (es. `logs/`, `old/`) servono a ridurre rumore nel file explorer Obsidian.","size_chars":463,"tokens_estimate":116}
{"doc_id":"ew-agent-dq-blueprint","path":"agents/agent-dq-blueprint.md","title":"Agent – DQ Blueprint (Spec v0)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Agent – DQ Blueprint (Spec v0)","anchor_slug":"agent-dq-blueprint-spec-v0","chunk_index":1,"content":"# Agent – DQ Blueprint (Spec v0)\n\nMissione\n- Ridurre i tempi di on‑boarding proponendo automaticamente un set iniziale di regole DQ per un flusso/istanza, con descrizioni, severità e soglie ragionevoli, a partire da CSV/XLSX o da uno schema DB.\n\nInput\n- File: CSV/XLSX (intestazioni, N righe di sample) o introspezione tabella.\n- Meta (opz.): `domain_id`, `flow_id`, `instance_id`, chiavi candidate, IMPACT di default, mapping referenziali noti.\n\nOutput\n- `out/blueprint/policy_proposals.json`: elenco di proposte conformi alla DSL (categoria, check, mostly, severity_base, descrizione).\n- `out/blueprint/policy_set.json`: set minimale con `RULE_VERSION` placeholder e mapping allo scope.\n- Facoltativo: YAML generati on‑the‑fly (via generator) come artifact CI.\n\nIntent (mini‑DSL)\n```json\n{\n  \"action\": \"blueprint-from-file\",\n  \"input\": { \"path\": \"path/to/file.csv\", \"format\": \"csv\" },\n  \"scope\": { \"domain_id\": \"customer\", \"flow_id\": \"orders\", \"instance_id\": \"ord_v2_daily\" },\n  \"options\": { \"sample_rows\": 2000, \"impact_default\": 0.5 }\n}\n```\n\nEsito strutturato\n```json\n{\n  \"ok\": true,\n  \"summary\": { \"columns\": 24, \"rules_proposed\": 18 },\n  \"policy_proposals\": [ { \"rule_id\": \"R_FMT_EMAIL\", \"category\": \"FORMAT\", ... } ],\n  \"policy_set\": { \"id\": \"<generated>\", \"rules\": [ { \"rule_id\": \"R_FMT_EMAIL\", \"rule_version\": \"0.1.0\" } ] },\n  \"notes\": [\"Regole marcate BLOCKING su colonne id/key\"],\n  \"artifacts\": [\"out/blueprint/policy_proposals.json\", \"out/blueprint/policy_set.json\"]\n}\n```\n\nHeuristics v0 (estratto)\n- FORMAT: email/iban/phone/cf/piva/zip/pattern alfanumerico da regex note.\n- COMPLETENESS: `is not null` per colonne senza null nel sample.\n- DOMAIN: per cardinalità bassa (<=K) con whitelist proposta; valori sanificati.\n- UNIQUENESS: candidate key se distinct≈rows su 1..N colonne.\n- REFERENTIAL: suggerimento se nome colonna combina `*_id` e master noto.\n- FRESHNESS: colonna data con differenza vs run_date (soglia da meta/sla).\n- PROBABILISTIC: drift/shape su numeriche ad alta variabilità (PSI) e su volume.\n\nComandi (skeleton)\n- TS: `node ts-node agents/agent_dq_blueprint/src/cli.ts --action blueprint-from-file --input path/to.csv --domain customer --flow orders --instance ord_v2_daily`\n- PS: `pwsh agents/agent_dq_blueprint/run.ps1 -Action blueprint-from-file -Input path/to.csv -Domain customer -Flow orders -Instance ord_v2_daily`","size_chars":2354,"tokens_estimate":588}
{"doc_id":"ew-agent-dq-blueprint","path":"agents/agent-dq-blueprint.md","title":"Agent – DQ Blueprint (Spec v0)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Agent – DQ Blueprint (Spec v0)","anchor_slug":"agent-dq-blueprint-spec-v0","chunk_index":2,"content":"Integrazione ARGOS\n- Genera Policy Proposal + Policy Set (JSON) e opzionalmente YAML via `scripts/argos-generate-yaml.mjs`.\n- Invio evento `argos.policy.proposal` (opzionale) e collegamento a Decision Trace.\n\nRACI\n- A/R: DQ Governance & Data Steward per approvare/promuovere; Team Prodotto valida impatti; Coach integra feedback su rumore/recidiva.\n\nSicurezza & Privacy\n- Sanificare campioni/whitelist; mai PII in output; RBAC lato portale.\n\nDefinition of Done (v0)\n- Intent JSON supportato, output strutturato, heuristics v0, CLI TS/PS skeleton, esempi e cartella artifact.\n\nRiferimenti\n- ARGOS – Policy DSL: `argos/argos-policy-dsl.md`\n- Quality Gates: `argos/argos-quality-gates.md`\n- Governance DQ: `governance-dq.md`","size_chars":721,"tokens_estimate":180}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Cos’è una knowledge base vettoriale?\r","anchor_slug":"cos-una-knowledge-base-vettoriale","chunk_index":1,"content":"## Cos’è una knowledge base vettoriale?\n\n- È una base di conoscenza in cui **ogni documento, manifest, recipe, FAQ, guida, etc.** viene rappresentato (vettorizzato/embedded) come un array di numeri.\r\n- Questo permette **ricerche semantiche** (“similitudine di significato”) molto più potenti delle classiche keyword/cercatrova.\r\n- Gli agent (umani o sw), strumenti LLM/copilot, e workflow n8n possono interrogare la base e ricevere risposte pertinenti e contestuali.\n\n---","size_chars":471,"tokens_estimate":118}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Perché serve a EasyWay\r","anchor_slug":"perch-serve-a-easyway","chunk_index":2,"content":"## Perché serve a EasyWay\n\n- Tanti agent, doc e template diversi, con workflow in continua evoluzione\r\n- Serve ricerca, discovery, automazione e supporto smart (LLM, n8n, agent runtime, Copilot, onboarding)\r\n- Riduce la knowledge debt e collega meglio runtime, codice, doc, security e supporto\n\n---","size_chars":298,"tokens_estimate":74}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Architettura e workflow consigliato\r","anchor_slug":"architettura-e-workflow-consigliato","chunk_index":3,"content":"## Architettura e workflow consigliato\n\n```mermaid\r\nflowchart TD\r\n  A[Repo EasyWay: file doc/script/recipes/manifest] --> B[Include/exclude file-list YAML]\r\n  B --> C[Chunking & vettorializzazione]\r\n  C --> D[Vector DB (Chroma/Weaviate/Pinecone)]\r\n  D --> E1[n8n workflow: query semantica]\r\n  D --> E2[Agent runtime: context on-demand]\r\n  D --> E3[Copilot/LLM QA: suggerimenti, fix, PR stub]\r\n  A -.update ogni merge/PR.-> C\r\n  D ==> A\r\n```\r\n- I file “classici” restano in repo, ma il **vector DB** è la base runtime per query intelligenti agent/n8n/LLM.\r\n- Ogni nuovo doc/manifest/recipe va in pipeline e aggiorna la knowledge base semantica subito.\n\n---","size_chars":655,"tokens_estimate":164}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Cosa vettorializzare? (spec)\r","anchor_slug":"cosa-vettorializzare-spec","chunk_index":4,"content":"## Cosa vettorializzare? (spec)\n\n- Tutto ciò che serve supporto semantico rapido e aggiornato:\r\n    - README.md, DEVELOPER_ONBOARDING.md, agent docs, atomic_flows, scripts doc, tutte le FAQ pratiche\r\n    - Manifest degli agent, template orchestrazioni, ricette tecniche\r\n    - Troubleshooting, cronaca edge-case, errori tipici\n\n```yaml\r\n# ai/vettorializza.yaml : esempio di file inclusione/esclusione\r\ninclude:\r\n  - \"README.md\"\r\n  - \"Wiki/EasyWayData.wiki/**/*.md\"\r\n  - \"agents/**/*.md\"\r\n  - \"atomic_flows/**/*.md\"\r\n  - \"docs/**/*.md\"\r\nexclude:\r\n  - \"old/\"\r\n  - \"bin/\"\r\n  - \"*.pdf\"\r\n```\r\n- **Questa regola YAML** guida ogni pipeline di embedding e può essere aggiornata/estesa facilmente!\n\n---","size_chars":693,"tokens_estimate":173}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Come gestire update e automazione\r","anchor_slug":"come-gestire-update-e-automazione","chunk_index":5,"content":"## Come gestire update e automazione\n\n- Ogni merge/commit su file inclusi triggera la (re)vettorializzazione automatica (n8n, Azure Pipeline, GitHub Actions, agent dedicato)\r\n- Solo i file che “matchano” la regola vengono reindicizzati → nessuno scan/bloat inutile\r\n- Agent (in repo, n8n, container) si occupa di processare, chunkare, embeddare, aggiornare vector DB\n\n---","size_chars":371,"tokens_estimate":93}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Scenari di integrazione\r","anchor_slug":"scenari-di-integrazione","chunk_index":6,"content":"## Scenari di integrazione\n\n- **Runtime**: agenti in produzione, workflow n8n e Copilot usano SOLO vectorDB\r\n- **Dev/Maintainer**: lavorano a repo file, ogni update viene integrato anche in index vettoriale\r\n- **Team/CI/CD**: fanno review, fix, onboarding, QA doc e policy direttamente nel repo, ma le automazioni usano chunk embedding-ready\n\n---","size_chars":346,"tokens_estimate":86}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Tool e costi: cosa scegliere?\r","anchor_slug":"tool-e-costi-cosa-scegliere","chunk_index":7,"content":"## Tool e costi: cosa scegliere?\n\n- Inizia con ChromaDB, Weaviate, Milvus (local, open, GRATIS)\r\n- Per scaling o pro/prod: Pinecone/Qdrant/Weaviate cloud (tier free → paghi solo se/quanto superi soglia)\r\n- Nulla vieta mix: local per dev, cloud per runtime!\n\n---","size_chars":261,"tokens_estimate":65}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Sicurezza e zero trust\r","anchor_slug":"sicurezza-e-zero-trust","chunk_index":8,"content":"## Sicurezza e zero trust\n\n- Il file YAML di inclusion/exclusion serve anche a escludere:\r\n  - Binari/confidenziali (old/, bin/, backup)\r\n  - Dati sensibili/non destinati a agent o search (es.: password/segreti/config reale)\r\n- La pipeline può lanciare solo in safe/sandbox (evita data leak, ciclo testato come tutte le altre automazioni EasyWay).\r\n- Linka la policy “Zero Trust/Sandbox”: [Setup sandbox/Zero Trust](../onboarding/setup-playground-zero-trust.md)\n\n---","size_chars":466,"tokens_estimate":116}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Come legare a Obsidian/KB\r","anchor_slug":"come-legare-a-obsidiankb","chunk_index":9,"content":"## Come legare a Obsidian/KB\n\n- Ogni sezione ha cross-link markdown friendly, per navigazione (anche da mobile/Obsidian vault).\r\n- La guida suggerisce dove mettere backlink (README, onboarding, recipes, agent docs).\r\n- Puoi aggiungere backlink a questa pagina in ogni documento chiave (“Per ricerche smart, vedi [Knowledge Base Vettoriale](ai/knowledge-vettoriale-easyway.md)”).\n\n---","size_chars":383,"tokens_estimate":96}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Prossimi step\r","anchor_slug":"prossimi-step","chunk_index":10,"content":"## Prossimi step\n\n1. Decidere se partire local, cloud, ibrido (vedi section costi/tool)\r\n2. Pianificare agent/processo di update embedding (n8n, CI, agent runtime)\r\n3. Pubblicare i file inclusion/exclusion YAML in repo (aggiornabili da tutti!)\r\n4. Integrare primi query workflow n8n/Copilot/manuale, testare search semantica su doc viva\r\n5. Prendere feedback e iterare migliorando experience\n\n---","size_chars":396,"tokens_estimate":99}
{"doc_id":"ew-knowledge-vettoriale-easyway","path":"ai/knowledge-vettoriale-easyway.md","title":"🧠 Knowledge Base Vettoriale in EasyWay DataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:21:36+01:00","section_level":2,"anchor_text":"Contesto (repo)","anchor_slug":"contesto-repo","chunk_index":11,"content":"## Contesto (repo)\n- Obiettivi e principi: `agents/goals.json`\n- Orchestrazione/gates (entrypoint): `scripts/ewctl.ps1`\n- Ricette operative (KB): `agents/kb/recipes.jsonl`\n- Osservabilita: `agents/logs/events.jsonl`\n- Export chunks Wiki: `Wiki/EasyWayData.wiki/scripts/export-chunks-jsonl.ps1` -> `Wiki/EasyWayData.wiki/chunks_master.jsonl`\n- Standard contesto: `Wiki/EasyWayData.wiki/onboarding/documentazione-contesto-standard.md`\n\n---\n\n**See also / Cross-link:**\n- [Setup sandbox/Zero Trust](../onboarding/setup-playground-zero-trust.md)\n- [Scripting cross-platform](../onboarding/best-practice-scripting.md)\n- [Developer & Agent Experience Upgrades](../onboarding/developer-agent-experience-upgrades.md)\n- [Proposte miglioramento cross-link, FAQ, edge-case](../onboarding/proposte-crosslink-faq-edgecase.md)\n\n---\n\n> _Per qualsiasi dubbio, proporre miglioramenti e contributi, commenta in questa guida o tagga nei manifest “ai-friendly”._","size_chars":941,"tokens_estimate":235}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"1) Principi","anchor_slug":"1-principi","chunk_index":1,"content":"## 1) Principi\n1) Un messaggio → un’azione: ogni notifica deve indicare un’azione o un owner.\n2) Rumore controllato: gestito da Noise Budget e suppression window.\n3) Contesto prima del dato: i messaggi espongono gate, impatto e budget, non dettagli tecnici inutili.\n4) Privacy e sicurezza: mai PII; allegati sanificati; RBAC sugli endpoint.\n\n---","size_chars":345,"tokens_estimate":86}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"2) Canali","anchor_slug":"2-canali","chunk_index":2,"content":"## 2) Canali\n- Email (ufficiale, owner/domain)\n- ChatOps (Teams/Slack): thread per run/incident (`/argos run`, `/argos gate`, `/argos pb`)\n- Webhook/Incident Mgmt (Jira/ServiceNow): per ticket automatici\n- Dashboard Digest (giornaliero/settimanale): aggregato visivo su KPI Noise/Error/SLO.\n\n---","size_chars":295,"tokens_estimate":74}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"3) Severità & mapping","anchor_slug":"3-severit-mapping","chunk_index":3,"content":"## 3) Severità & mapping\n| Gate Outcome | Severity messaggio | Destinatari | Azione |\n|---|---|---|---|\n| FAIL | CRITICAL | Ops + Owner + Governance | Ticket automatico (PB associato) |\n| DEFER | WARN | Ops + Owner | Revisione manuale o safe-action |\n| PASS | INFO | Owner (solo digest) | Nessuna azione |\n\nCoach Agent genera INFO/WARN per i nudges; nessun CRITICAL.\n\n---","size_chars":371,"tokens_estimate":93}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"4) Dedup & suppression","anchor_slug":"4-dedup-suppression","chunk_index":4,"content":"## 4) Dedup & suppression\n- Dedup: `(flow_id, instance_id, rule_id, reference_date, outcome)` entro finestra.\n- Suppression window: default 60 min per WARN ripetitivi.\n- Quiet hours: 22:00–06:00 UTC; compressione e invio digest.\n- Escalation: se stesso errore persiste > N run, promozione da WARN → CRITICAL.\n\n---","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"5) Payload standard","anchor_slug":"5-payload-standard","chunk_index":5,"content":"## 5) Payload standard\nCampi chiave: `run_id`, `domain/flow/instance`, `gate_type`, `outcome`, `controls_result`, `impact_score`, `error_budget_residuo`, `noise_budget_residuo`, `decision_trace_id`, `invalid_rows_path`, `scorecard_link`, `playbook_id?`, `ticket_id?`.\n\nFormato sintetico (email/chat)\n```\n[ARGOS][{domain}/{flow}] {gate_type}:{outcome} {controls_result}\nImpact={impact_score:.2f} | ErrorBudget={err_budget:.2f} | NoiseBudget={noise_budget:.2f}\nRun={run_id} | DecisionTrace={decision_trace_id}\n{playbook_link}\n```\n\n---","size_chars":532,"tokens_estimate":133}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"6) Digest intelligenti","anchor_slug":"6-digest-intelligenti","chunk_index":6,"content":"## 6) Digest intelligenti\n- Top-N errori (Error Concentration)\n- Noise Budget usage (%)\n- GPR (Gate Pass Rate)\n- SLO breach (error/freshness)\n- Ticket aperti/chiusi, MTTR medio\n- Trend 7/30 gg\n\n---","size_chars":197,"tokens_estimate":49}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"7) Integrazione con Coach Agent","anchor_slug":"7-integrazione-con-coach-agent","chunk_index":7,"content":"## 7) Integrazione con Coach Agent\n- Evento `argos.coach.nudge.sent` → recap in digest business.\n- WARN ripetitivi > Noise Budget → suggestion di nudge automatico.\n- Feedback: lettura nudge riduce priorità alert per stesso produttore per 7 gg (cool-down).\n\n---","size_chars":260,"tokens_estimate":65}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"8) Alert IT (Profiling)","anchor_slug":"8-alert-it-profiling","chunk_index":8,"content":"## 8) Alert IT (Profiling)\n- Drift HIGH → WARN IT + digest tecnico.\n- Job Failure/Throughput < baseline−10% → CRITICAL IT.\n- Small Files Rate > 5% → WARN IT.\n- Partition Lateness > 1% → WARN IT.\n- Storage Growth > +20%/mese → INFO (digest).\n\n---","size_chars":245,"tokens_estimate":61}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"9) KPI di Alerting","anchor_slug":"9-kpi-di-alerting","chunk_index":9,"content":"## 9) KPI di Alerting\n- Alert Volume, Dedup Ratio, False Alarm Rate, MTTA, MTTR, Digest Coverage, User Engagement.\n\n---","size_chars":119,"tokens_estimate":30}
{"doc_id":"ew-argos-alerting","path":"argos/argos-alerting.md","title":"ARGOS – Alerting & Notifications Guide (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"10) Definition of Done (v1.1)","anchor_slug":"10-definition-of-done-v11","chunk_index":10,"content":"## 10) Definition of Done (v1.1)\n- Severità e mapping completi; dedup/suppression/quiet hours; payload standard; digest; integrazione Coach/Profiling; KPI definiti.","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-argos-change-versioning","path":"argos/argos-change-versioning.md","title":"ARGOS – Change & Versioning Guide (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"ARGOS – Change & Versioning Guide (v1)","anchor_slug":"argos-change-versioning-guide-v1","chunk_index":1,"content":"# ARGOS – Change & Versioning Guide (v1)\n\n> Nota: capitolo da ampliare. Obiettivo: governare cambi con SemVer, rollout controllato (shadow/canary/A‑B), backout e audit, misurandone gli effetti sui KPI/SLO.\n\nBest practice EasyWay\n- SemVer: PATCH (meta), MINOR (tuning/additivo), MAJOR (semantica/severità). MAJOR richiede dual‑read/dual‑write e viste di compatibilità.\n- Rollout Gate: usare canary/A‑B con success criteria (Noise, Conformity_Wo, GPR); early stop/backout codificati.\n- Pipeline: PR template con sezione “Change Type & Backout”; gate di governance (`ewctl`) prima del merge.\n\nDa dettagliare\n- Workflow di promozione, freeze window, pattern compatibilità, checklist e RACI.","size_chars":686,"tokens_estimate":172}
{"doc_id":"ew-argos-coach-agent","path":"argos/argos-coach-agent.md","title":"ARGOS – Coach Agent (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Trigger e segnali","anchor_slug":"trigger-e-segnali","chunk_index":1,"content":"## Trigger e segnali\nNoise Budget, Error Concentration, Profiling drift, esiti gate ricorrenti.","size_chars":95,"tokens_estimate":24}
{"doc_id":"ew-argos-coach-agent","path":"argos/argos-coach-agent.md","title":"ARGOS – Coach Agent (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Azioni","anchor_slug":"azioni","chunk_index":2,"content":"## Azioni\nNUDGE (SUGGEST/ASSIST/AUTOPILOT), POLICY/CONTRACT PROPOSAL (canary/A‑B), PLAYBOOK suggestion.","size_chars":103,"tokens_estimate":26}
{"doc_id":"ew-argos-coach-agent","path":"argos/argos-coach-agent.md","title":"ARGOS – Coach Agent (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Telemetria","anchor_slug":"telemetria","chunk_index":3,"content":"## Telemetria\nOpen/Click, Confirm_read, Δ Noise (7/30d), Recidiva 30d; evento `argos.coach.nudge.sent`.","size_chars":103,"tokens_estimate":26}
{"doc_id":"ew-argos-coach-agent","path":"argos/argos-coach-agent.md","title":"ARGOS – Coach Agent (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Rollout e RACI","anchor_slug":"rollout-e-raci","chunk_index":4,"content":"## Rollout e RACI\nPilot 1–2 domini, KPI outcome, ownership chiara e integrazione con governance portale.","size_chars":104,"tokens_estimate":26}
{"doc_id":"ew-argos-event-schema","path":"argos/argos-event-schema.md","title":"ARGOS – Event Schema Addendum (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"ARGOS – Event Schema Addendum (v1)","anchor_slug":"argos-event-schema-addendum-v1","chunk_index":1,"content":"# ARGOS – Event Schema Addendum (v1)\n\n> Nota: documento placeholder da completare con JSON Schema e esempi payload per tutti gli eventi elencati sotto. Integrare con il Correlation Fabric del portale e con la pipeline di validazione.\n\nEventi canonici (da definire con schema/policy)\n- `argos.run.completed`\n- `argos.gate.decision`\n- `argos.profile.drift`\n- `argos.coach.nudge.sent`\n- `argos.policy.proposal`\n- `argos.contract.proposal`\n- `argos.ticket.opened`\n\nIntegrazione EasyWay\n- Repository: pubblicare gli schema JSON in `docs/agentic/templates/events/` e validare in CI.\n- QoS/Delivery: DLQ e retry policy allineate al bus eventi del portale.\n- Privacy/Retention: campi PII esclusi o sanificati; retention hint per topic.","size_chars":727,"tokens_estimate":182}
{"doc_id":"ew-argos-glossario","path":"argos/argos-glossario.md","title":"ARGOS – Glossario Unificato (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"ARGOS – Glossario Unificato (v1)","anchor_slug":"argos-glossario-unificato-v1","chunk_index":1,"content":"# ARGOS – Glossario Unificato (v1)\n\n> Nota: glossario da completare per ridurre ambiguità e uniformare il linguaggio tra moduli e portale. Includere abbreviazioni, enum e RACI.\n\nVoci iniziali (selezione)\n- DECISION_TRACE_ID: identificatore unico che collega gate→nudges→RCA→ticket.\n- Conformity (Without Warnings): quota di dati conformi escludendo WARN.\n- Noise Budget / Error Budget: soglie di rumore/errore per gating e alerting.\n- MOSTLY: quota minima accettata per regole probabilistiche.\n- Profiling Gate (soft): gate non bloccante basato su segnali M3.\n\nRiferimenti\n- Quality Gates, Policy DSL, Tech Profiling, Playbook, Event Schema, Coach Agent.","size_chars":654,"tokens_estimate":164}
{"doc_id":"ew-argos-modular-interop","path":"argos/argos-modular-interop.md","title":"ARGOS – Modular Architecture & Interop (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Principi di modularità","anchor_slug":"principi-di-modularit","chunk_index":1,"content":"## Principi di modularità\nIndipendenza, interoperabilità by‑design (eventi+chiavi), opt‑in progressivo, explainability, privacy‑first.","size_chars":134,"tokens_estimate":34}
{"doc_id":"ew-argos-modular-interop","path":"argos/argos-modular-interop.md","title":"ARGOS – Modular Architecture & Interop (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"I tre moduli (estratto)","anchor_slug":"i-tre-moduli-estratto","chunk_index":2,"content":"## I tre moduli (estratto)\n- M1 – enforcement PASS/DEFER/FAIL con Decision Trace.\n- M2 – nudges/proposte con KPI outcome.\n- M3 – profiling/drift/health con viste e digest.","size_chars":171,"tokens_estimate":43}
{"doc_id":"ew-argos-modular-interop","path":"argos/argos-modular-interop.md","title":"ARGOS – Modular Architecture & Interop (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Strato di correlazione","anchor_slug":"strato-di-correlazione","chunk_index":3,"content":"## Strato di correlazione\nChiavi, role dates, eventi canonici, tabelle/viste condivise (Run Hub, Registry).","size_chars":107,"tokens_estimate":27}
{"doc_id":"ew-argos-modular-interop","path":"argos/argos-modular-interop.md","title":"ARGOS – Modular Architecture & Interop (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Boundary & contratti","anchor_slug":"boundary-contratti","chunk_index":4,"content":"## Boundary & contratti\nStorage separato per modulo; interfacce in lettura; versioning con compatibilità forward.","size_chars":113,"tokens_estimate":28}
{"doc_id":"ew-argos-modular-interop","path":"argos/argos-modular-interop.md","title":"ARGOS – Modular Architecture & Interop (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Packaging & deployment","anchor_slug":"packaging-deployment","chunk_index":5,"content":"## Packaging & deployment\nSolo M1; M1+M3; M1+M2; Full. Feature flags e NFR (latency, backpressure, RBAC & privacy).","size_chars":115,"tokens_estimate":29}
{"doc_id":"ew-argos-modular-interop","path":"argos/argos-modular-interop.md","title":"ARGOS – Modular Architecture & Interop (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"RACI e roadmap modulare","anchor_slug":"raci-e-roadmap-modulare","chunk_index":6,"content":"## RACI e roadmap modulare\nAttivazione progressiva 1) M1 2) M3 3) M2 4) Full.","size_chars":77,"tokens_estimate":19}
{"doc_id":"ew-argos-overview","path":"argos/argos-overview.md","title":"ARGOS – Overview e Integrazione con EasyWayDataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"ARGOS – Overview e Integrazione con EasyWayDataPortal","anchor_slug":"argos-overview-e-integrazione-con-easywaydataportal","chunk_index":1,"content":"# ARGOS – Overview e Integrazione con EasyWayDataPortal\n\nScopo\n- Integrare il framework di Data Quality “ARGOS” all’interno di EasyWayDataPortal in modo agent‑first, mantenendo documentazione e operatività coerenti con le best practice del portale.\n\nModuli ARGOS\n- M1 – Fast‑Ops (Gating): Ingress/DQ/Rollout Gates con Decision Trace, severity dinamica, hysteresis/cool‑down, quarantine e backout.\n- M2 – Biz‑Learning (Coach): nudges, policy/contract proposals, playbook suggestion, riduzione recidiva e noise.\n- M3 – Tech‑Profiling (IT Health): profiling, drift, file/partition/process health, suggerimenti soglie/contratti e digest IT.\n\nIntegrazione EasyWay (best practice)\n- Pipeline ADO: abilitare `USE_EWCTL_GATES=true` per Checklist/DB Drift/KB Consistency; usare `scripts/ewctl.ps1 --engine ps|ts` per orchestrazione.\n- Doc viva: aggiungere/aggiornare pagine Wiki e ricette `agents/kb/recipes.jsonl` per ogni evoluzione ARGOS (policy, gates, profiling, alerting, playbook).\n- Manifest & allowed paths: ogni agente (es. Coach/Policy) deve dichiarare `agents/<agent>/manifest.json` e rispettare `allowed_paths` (vedi `AGENTS.md`).\n- Privacy & sicurezza: sanitizzare sample/attachments e usare RBAC per viste IT; nessuna PII nelle policy/registry/events.\n- Eventi: definire JSON Schema per `argos.*` ed emettere eventi con `DECISION_TRACE_ID` per correlazione end‑to‑end.\n\nMappa contenuti\n- Quality Gates: `./argos-quality-gates.md`\n- Policy DSL & Registry: `./argos-policy-dsl.md`\n- Alerting & Notifications: `./argos-alerting.md`\n- Playbook Catalog: `./argos-playbook-catalog.md`\n- Modular Architecture & Interop: `./argos-modular-interop.md`\n- Tech Profiling & Reliability: `./argos-tech-profiling.md`\n- Coach Agent: `./argos-coach-agent.md`\n- Event Schema Addendum: `./argos-event-schema.md`\n- Change & Versioning Guide: `./argos-change-versioning.md`\n- Glossario Unificato: `./argos-glossario.md`","size_chars":1904,"tokens_estimate":476}
{"doc_id":"ew-argos-playbook-catalog","path":"argos/argos-playbook-catalog.md","title":"ARGOS – Playbook Catalog (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Principi essenziali","anchor_slug":"principi-essenziali","chunk_index":1,"content":"## Principi essenziali\nSafety‑first (AUTO_SAFE/ASSIST), minimo intervento, backout pronto, misurabilità, privacy.","size_chars":113,"tokens_estimate":28}
{"doc_id":"ew-argos-playbook-catalog","path":"argos/argos-playbook-catalog.md","title":"ARGOS – Playbook Catalog (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Struttura standard Playbook","anchor_slug":"struttura-standard-playbook","chunk_index":2,"content":"## Struttura standard Playbook\nMetadati (PB_ID, TITLE, VERSION, OWNER, MODE, SCOPE, TAGS), trigger, precondizioni & guardrail, procedura (diagnosi, azione, verifica, backout, chiusura), output & telemetria.","size_chars":206,"tokens_estimate":52}
{"doc_id":"ew-argos-playbook-catalog","path":"argos/argos-playbook-catalog.md","title":"ARGOS – Playbook Catalog (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Indice Playbook (selezione v1)","anchor_slug":"indice-playbook-selezione-v1","chunk_index":3,"content":"## Indice Playbook (selezione v1)\n- PB‑ENRICH‑02 — Arricchimento referenziale\n- PB‑UNIQ‑04 — Dedup controllato\n- PB‑FRESH‑01 — Backfill partizioni tardive\n- PB‑REF‑KEY‑03 — Ripristino chiavi referenziali\n- PB‑FORMAT‑ENC‑01 — Re‑parse encoding/delimiter\n- PB‑DOMAIN‑WL‑02 — Whitelist temporanea valori\n- PB‑PARTITION‑LATE‑01 — Quarantena & re‑ingest partizione\n- PB‑SMALL‑FILES‑01 — Compaction small files","size_chars":404,"tokens_estimate":101}
{"doc_id":"ew-argos-playbook-catalog","path":"argos/argos-playbook-catalog.md","title":"ARGOS – Playbook Catalog (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"ChatOps & Template messaggi","anchor_slug":"chatops-template-messaggi","chunk_index":4,"content":"## ChatOps & Template messaggi\nComandi `/argos pb ...`; notifica apertura/chiusura con Δ Noise e MTTR.","size_chars":102,"tokens_estimate":26}
{"doc_id":"ew-argos-playbook-catalog","path":"argos/argos-playbook-catalog.md","title":"ARGOS – Playbook Catalog (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Governance & Versioning","anchor_slug":"governance-versioning","chunk_index":5,"content":"## Governance & Versioning\nOWNER chiaro; manutenzione trimestrale; AUTO_SAFE solo per PB certificati.","size_chars":101,"tokens_estimate":25}
{"doc_id":"ew-argos-playbook-catalog","path":"argos/argos-playbook-catalog.md","title":"ARGOS – Playbook Catalog (v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"DoD (v1)","anchor_slug":"dod-v1","chunk_index":6,"content":"## DoD (v1)\nSchede minime pubblicate, integrazione Alerting/Gates, KPI raccolti, flag AUTO_SAFE/guardrail/backout definiti, privacy rispettata.","size_chars":143,"tokens_estimate":36}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Principi","anchor_slug":"principi","chunk_index":1,"content":"## Principi\nChiarezza vs potenza, deterministic+probabilistic, severity base distinta da severity dinamica, explainability, compatibilità, privacy‑first.","size_chars":153,"tokens_estimate":38}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Oggetto Policy (schema logico)","anchor_slug":"oggetto-policy-schema-logico","chunk_index":2,"content":"## Oggetto Policy (schema logico)\n- Meta e chiavi: RULE_ID, RULE_VERSION, TITLE, DESCRIPTION, CATEGORY, OWNER, TAGS.\n- Scope & grana: SCOPE (DOMAIN|FLOW|INSTANCE|ELEMENT), ELEMENT_REF, WHERE, ROW_KEY.\n- Valutazione: POLICY_TYPE, CHECK, MOSTLY, WINDOW, SEVERITY_BASE, DISCARD_MODE, IMPACT_SCORE, NOISE_BUDGET_HINT, EXPLAIN_TRACE_REQUIRED.\n- Esecuzione & output: SAMPLE_SIZE_MAX, INVALID_ROWS_PATH, METRICS_HINT.\n- Governance: STATE, CHANGE_TYPE, ADR_REF, SECURITY_REVIEW_REF, EXPERIMENT (CANARY|AB …).","size_chars":500,"tokens_estimate":125}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"CHECK – costrutti DSL (estratti)","anchor_slug":"check-costrutti-dsl-estratti","chunk_index":3,"content":"## CHECK – costrutti DSL (estratti)\n- Deterministiche: FORMAT, DOMAIN, COMPLETENESS, FRESHNESS, UNIQUENESS, REFERENTIAL, CONSISTENCY.\n- Probabilistiche: DISTRIBUTION/PATTERN DRIFT (PSI/KS/Z), SHAPE/VOLUME, CO‑OCCURRENCE.","size_chars":220,"tokens_estimate":55}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Esempi (descrittivo)","anchor_slug":"esempi-descrittivo","chunk_index":4,"content":"## Esempi (descrittivo)\n- Dominio valori con ALERT_WITH_DISCARD e IMPACT 0.8.\n- Drift distribuzionale con MOSTLY 0.9 e canary.","size_chars":126,"tokens_estimate":32}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Linter & pre‑check","anchor_slug":"linter-precheck","chunk_index":5,"content":"## Linter & pre‑check\nNaming/stile; Efficacy/Noise/Flapping; Performance; Privacy (no PII nei valori). Integrato con Gate INGRESS.","size_chars":130,"tokens_estimate":32}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Registry – stati, workflow, versioning","anchor_slug":"registry-stati-workflow-versioning","chunk_index":6,"content":"## Registry – stati, workflow, versioning\nStati DRAFT→PROPOSED→APPROVED→DEPRECATED→RETIRED; SemVer per policy e Policy Set.","size_chars":123,"tokens_estimate":31}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Integrazioni","anchor_slug":"integrazioni","chunk_index":7,"content":"## Integrazioni\nGates (severity dinamica/trace), Tech Profiling (soglie), Biz‑Learning (proposals), eventi & audit.","size_chars":115,"tokens_estimate":29}
{"doc_id":"ew-argos-policy-dsl","path":"argos/argos-policy-dsl.md","title":"ARGOS – Policy DSL & Registry Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"DoD (v1.1)","anchor_slug":"dod-v11","chunk_index":8,"content":"## DoD (v1.1)\nSchema Policy completo + linter; workflow & semver; integrazioni; esempi; privacy ok.","size_chars":99,"tokens_estimate":25}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"0) Principi","anchor_slug":"0-principi","chunk_index":1,"content":"## 0) Principi\n1) Outcome standard: PASS | DEFER | FAIL (quarantine è zona, non outcome).\n2) Explainability: ogni decisione produce una Decision Trace.\n3) Severity dinamica: pesata da IMPACT_SCORE e consumo di Error/Noise Budget.\n4) Anti-flapping: hysteresis/cool-down per evitare oscillazioni.\n5) Safe-ops: DEFER preferito a FAIL quando impatto basso o esistono safe-actions.\n6) Compatibilità: moduli M1 ma consumano segnali M2/M3 quando disponibili.\n\n---","size_chars":456,"tokens_estimate":114}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"1) Tipi di Gate","anchor_slug":"1-tipi-di-gate","chunk_index":2,"content":"## 1) Tipi di Gate\n- INGRESS GATE — Deterministico (contract)\n- DQ GATE — Contenuto (policy + budget)\n- ROLLOUT GATE — Change (shadow/canary/A-B)\n- PROFILING GATE (soft) — segnali di M3\n\n---","size_chars":190,"tokens_estimate":48}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"2) Input minimi","anchor_slug":"2-input-minimi","chunk_index":3,"content":"## 2) Input minimi\n- Correlation: RUN_ID, INSTANCE_ID, FLOW_ID, DOMAIN_ID, REFERENCE_DATE, RUN_DATE.\n- Policy: RULE_VERSION attive e severità base.\n- Esiti: RUN_RULE_RESULT con conteggi OK/WARN/KO deduplicati.\n- Budget: SLO_TARGET, Error/Noise Budget residuo.\n- Impatto: IMPACT_SCORE.\n- Profiling (M3): eventi drift/health.\n- Esperimenti (M2): stato canary/A-B.\n- Override: deroghe attive.\n\n---","size_chars":394,"tokens_estimate":98}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"3) Esiti & semantica","anchor_slug":"3-esiti-semantica","chunk_index":4,"content":"## 3) Esiti & semantica\n- PASS: promozione verso reference.\n- DEFER: promozione differita in Quarantine; possibili safe-actions.\n- FAIL: promozione bloccata; ticket e playbook obbligatori.\n\n---","size_chars":193,"tokens_estimate":48}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"4) Matrici decisionali (estratto)","anchor_slug":"4-matrici-decisionali-estratto","chunk_index":5,"content":"## 4) Matrici decisionali (estratto)\nIngress: Contract KO grave → FAIL; KO minori + safe-action → DEFER; Maintenance → DEFER.\n\nDQ: Blocking+IMPACT alto → FAIL; Noise esaurito → DEFER; Conformity_Wo sotto critico → FAIL; drift HIGH su campo chiave → DEFER.\n\nRollout: Shadow → monitor; Canary con success criteria → PROMOTE; Early stop → BACKOUT.\n\n---","size_chars":349,"tokens_estimate":87}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"5) Severity dinamica (esempi)","anchor_slug":"5-severity-dinamica-esempi","chunk_index":6,"content":"## 5) Severity dinamica (esempi)\n`IMPACT_SCORE ≥ 0.7` e `error_budget_residuo ≤ 20%` ⇒ escalate.\n`IMPACT_SCORE ≤ 0.3` e `noise_budget_residuo ≤ 0%` ⇒ de‑escalate.\n\n---","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"6) Hysteresis & Cool-down","anchor_slug":"6-hysteresis-cool-down","chunk_index":7,"content":"## 6) Hysteresis & Cool-down\n- WARN→OK richiede K run consecutivi (default K=2).\n- DEFER→PASS: 2 PASS di fila o canary riuscito.\n- FAIL→PASS: 1 PASS + ticket chiuso.\n- Cool-down tuning: bloccare nuovi tuning per X giorni (default 7).\n\n---","size_chars":238,"tokens_estimate":60}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"7) Override & Backout","anchor_slug":"7-override-backout","chunk_index":8,"content":"## 7) Override & Backout\nOverride a tempo con risk acceptance; backout plan obbligatorio per MAJOR; audit in Decision Trace.\n\n---","size_chars":129,"tokens_estimate":32}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"8) Decision Trace (contenuto minimo)","anchor_slug":"8-decision-trace-contenuto-minimo","chunk_index":9,"content":"## 8) Decision Trace (contenuto minimo)\nDECISION_TRACE_ID, gate_type, outcome, reason_code, signals_json, policy_version_set, budget_before/after, severity_after_weighting, override_ref?, experiment_ref?, created_at, actor.\n\n---","size_chars":228,"tokens_estimate":57}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"9) Quarantine & re-processing","anchor_slug":"9-quarantine-re-processing","chunk_index":10,"content":"## 9) Quarantine & re-processing\nQuarantine con TTL e retention; re‑processing programmato; safe-actions solo con playbook AUTO_SAFE.\n\n---","size_chars":138,"tokens_estimate":34}
{"doc_id":"ew-argos-gates","path":"argos/argos-quality-gates.md","title":"ARGOS – Quality Gates Specification (v1.1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"10) KPI dei Gates","anchor_slug":"10-kpi-dei-gates","chunk_index":11,"content":"## 10) KPI dei Gates\nGPR, Blocking Rate, False PASS sample rate, Quarantine Dwell Time, Decision Trace coverage, override/backout rate, Time‑to‑decision p95.","size_chars":157,"tokens_estimate":39}
{"doc_id":"ew-argos-tech-profiling","path":"argos/argos-tech-profiling.md","title":"ARGOS – Tech Profiling & Reliability (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Estensioni LDM (estratto)","anchor_slug":"estensioni-ldm-estratto","chunk_index":1,"content":"## Estensioni LDM (estratto)\n- RUN_PROFILE_RESULT: distribuzioni, null rate, cardinalità, quantili, pattern.\n- PROFILE_BASELINE: bound/target e DRIFT_TEST.\n- PROFILE_DRIFT_EVENT: tipo/severità/statistica/threshold/decisione/azione.\n- FILE_HEALTH: size, record, compression, encoding, delimiter, small_file_flag.\n- PARTITION_HEALTH: lateness, skew, dup, completeness.\n- PROCESS_METRICS: durata, throughput, retry, bytes.","size_chars":419,"tokens_estimate":105}
{"doc_id":"ew-argos-tech-profiling","path":"argos/argos-tech-profiling.md","title":"ARGOS – Tech Profiling & Reliability (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Viste consigliate","anchor_slug":"viste-consigliate","chunk_index":2,"content":"## Viste consigliate\nVW_PROFILE_SUMMARY, VW_PROFILE_DRIFT, VW_FILE_HEALTH, VW_PARTITION_HEALTH, VW_PROCESS_EFFICIENCY.","size_chars":118,"tokens_estimate":30}
{"doc_id":"ew-argos-tech-profiling","path":"argos/argos-tech-profiling.md","title":"ARGOS – Tech Profiling & Reliability (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"Gate «Profiling» (soft)","anchor_slug":"gate-profiling-soft","chunk_index":3,"content":"## Gate «Profiling» (soft)\nWarn/Defer su drift severo o small‑files rate elevato; routing verso RCA/Coach/Policy.","size_chars":113,"tokens_estimate":28}
{"doc_id":"ew-argos-tech-profiling","path":"argos/argos-tech-profiling.md","title":"ARGOS – Tech Profiling & Reliability (Spec v1)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T10:32:04+01:00","section_level":2,"anchor_text":"KPI & SLO IT (indicativi)","anchor_slug":"kpi-slo-it-indicativi","chunk_index":4,"content":"## KPI & SLO IT (indicativi)\nSchema Stability ≥ 99,5%; Small Files Rate ≤ 5%; Late Partition Rate ≤ 1%; Job Success ≥ 99,9%; Throughput p95 ≥ baseline−10%.","size_chars":155,"tokens_estimate":39}
{"doc_id":"ew-legacy-reference-material","path":"blueprints/legacy-reference-material.md","title":"Materiale di riferimento (Legacy)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T21:03:54+01:00","section_level":2,"anchor_text":"Materiale di riferimento (Legacy)","anchor_slug":"materiale-di-riferimento-legacy","chunk_index":1,"content":"# Materiale di riferimento (Legacy)\n\nScopo\n- Tenere accessibili documenti utili ma non parte della documentazione “operativa” canonica.\n- Evitare che file importanti restino orfani e finiscano in `old/` per errore.\n\nDocumenti (root repo)\n- `DEVELOPER_ONBOARDING.md` – onboarding per dev/agent.\n- `Sintesi_EasyWayDataPortal.md` – sintesi di progetto.\n- `VALUTAZIONE_EasyWayDataPortal.md` – valutazione/gap e piano.\n- `ADA Reference Architecture.pdf` – reference architettura (binario).\n- `ADA Reference Architecture.pptx` – slide architettura (binario).\n- `ADA_Reference_Architecture_text.txt` – estrazione testo (supporto ricerca).\n- `DR_Plan_ADA.docx` – piano DR (binario).\n\nNota\n- Se un documento diventa “canonico” (operativo), va spostato/riscritto dentro `Wiki/EasyWayData.wiki/` o `docs/` e collegato da `start-here.md`.","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-blueprint-replicate","path":"blueprints/replicate-easyway-dataportal.md","title":"Variabili Pipeline (ADO) – Esempio","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:26+01:00","section_level":3,"anchor_text":"Variabili Pipeline (ADO) – Esempio","anchor_slug":"variabili-pipeline-ado-esempio","chunk_index":1,"content":"### Variabili Pipeline (ADO) – Esempio\n- Variable Group (es. `EasyWay-Secrets`) o variabili di pipeline:\n  - `RESOURCE_GROUP_NAME = rg-easyway-dev`\n  - `STORAGE_ACCOUNT_NAME = ewdlkdev123` (nome storage univoco globale)\n  - `TENANTS = [\"tenant01\",\"tenant02\"]` (lista JSON; anche singolo tenant va tra [])\n- Queste variabili alimentano i parametri Terraform nello stage `Infra`.","size_chars":377,"tokens_estimate":94}
{"doc_id":"ew-blueprint-replicate","path":"blueprints/replicate-easyway-dataportal.md","title":"Variabili Pipeline (ADO) – Esempio","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:26+01:00","section_level":3,"anchor_text":"Creare/aggiornare Variable Group via script (PowerShell)","anchor_slug":"creareaggiornare-variable-group-via-script-powershell","chunk_index":2,"content":"### Creare/aggiornare Variable Group via script (PowerShell)\n- File esempio: `scripts/variables/easyway-secrets.sample.json` (modifica i valori e salva una copia per il tuo progetto)\n- Script: `scripts/ado-set-variable-group.ps1`\n- Esempio esecuzione:\n```sql\npwsh ./scripts/ado-set-variable-group.ps1 \\\n  -OrgUrl https://dev.azure.com/contoso \\\n  -Project easyway \\\n  -Pat <ADO_PAT> \\\n  -GroupName EasyWay-Secrets \\\n  -VariablesJsonPath scripts/variables/easyway-secrets.sample.json \\\n  -SecretsKeys \"AZURE_STORAGE_CONNECTION_STRING,DB_CONN_STRING\"\n```sql\n- Lo script crea/aggiorna il Variable Group con tutte le chiavi; quelle elencate in `SecretsKeys` sono marcate come segrete.\n- Variable Group: imposta `AZURE_STORAGE_CONNECTION_STRING` (o MI), `BRANDING_CONTAINER`, `BRANDING_PREFIX`, `AUTH_*`, DB.\n\n7) Test\n- REST Client: usa i file in `tests/api/rest-client/*` impostando `@token` con un JWT valido.\n- Jest: esegui `npm test` (test protetti → 401 senza token per health).\n\n8) Checklist Bot (Agent‑Ready)\n- Verifica automatica pre‑deploy: `pwsh ./scripts/checklist.ps1` (root) oppure `npm run check:predeploy` (API).\n- Controlli: env (Auth/Branding), connessione SQL, accesso Storage (branding/queries), OpenAPI valido.\n- Output machine‑readable (JSON) per gli agent e integrazione CI.\n\nChecklist finale\n- [ ] Terraform apply completato e output mappati alle env\n- [ ] App registration con claim tenant funzionante\n- [ ] File branding caricati in `portal-assets/config/`\n- [ ] `.env.local` aggiornato e API avviata correttamente\n- [ ] OpenAPI allineata, sicurezza Bearer documentata\n- [ ] Pipeline con Variable Group impostato\n- [ ] Smoke test REST/Jest passano (401 atteso senza token)","size_chars":1692,"tokens_estimate":423}
{"doc_id":"ew-control-plane-index","path":"control-plane/index.md","title":"Control Plane - Panoramica","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T22:15:17+01:00","section_level":2,"anchor_text":"Control Plane - Panoramica","anchor_slug":"control-plane-panoramica","chunk_index":1,"content":"# Control Plane - Panoramica\n\nScopo\n- Rendere l'esecuzione dei workflow agentici governabile da non esperti.\n- Fornire un'unica \"porta d'ingresso\" per: validazione intent, gate precheck, dispatch esecuzione, log e audit.\n\nEntry points\n- CLI/CI: `scripts/ewctl.ps1`\n- Orchestratore n8n (dispatch): `orchestrations/orchestrator-n8n.md`\n\nContratti\n- Input: `intent-contract.md`\n- Output: `output-contract.md`\n- Manifest WHAT-first: `docs/agentic/templates/orchestrations/*.manifest.json`\n- Intents WHAT-first: `docs/agentic/templates/intents/*.intent.json`\n\nGates (minimi)\n- Doc Alignment / WHAT-first Lint / Wiki frontmatter lint\n- Checklist / DB Drift / KB Consistency (via `ewctl` oppure pipeline)\n\nOsservabilità\n- Log eventi: `agents/logs/events.jsonl`\n- Diario di bordo: `UX/diary-mock-wf-excel-csv-upload.md` (mock) + campi canonici in manifest.\n\nRiferimenti\n- Start here: `start-here.md`\n- Metodo: `agent-first-method.md`\n- Orchestrazioni: `orchestrations/wf-excel-csv-upload.md`","size_chars":983,"tokens_estimate":246}
{"doc_id":"ew-domain-datalake","path":"domains/datalake.md","title":"Dominio Datalake","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T21:02:58+01:00","section_level":2,"anchor_text":"Dominio Datalake","anchor_slug":"dominio-datalake","chunk_index":1,"content":"# Dominio Datalake\n\nCosa fa\n- Preparazione struttura tenant, applicazione ACL, policy retention.\n\nAgenti\n- `agents/agent_datalake/manifest.json`\n\nPagine\n- `datalake-ensure-structure.md`\n- `datalake-apply-acl.md`\n- `datalake-set-retention.md`\n\nGates\n- Checklist + policy (quando applicabile)\n\nKB\n- Ricette Datalake in `agents/kb/recipes.jsonl` (da completare).","size_chars":359,"tokens_estimate":90}
{"doc_id":"ew-domain-db","path":"domains/db.md","title":"Dominio DB","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:26+01:00","section_level":2,"anchor_text":"Dominio DB","anchor_slug":"dominio-db","chunk_index":1,"content":"# Dominio DB\n\nCosa fa\n- Evoluzione schema via migrazioni (`db/flyway/`).\n- DDL/SP idempotenti, logging su `PORTAL.STATS_EXECUTION_LOG`.\n\nAgenti\n- `agents/agent_dba/manifest.json`\n\nContratti/Template\n- Readiness: `docs/agentic/AGENTIC_READINESS.md`\n- Template SQL: `docs/agentic/templates/ddl/`, `docs/agentic/templates/sp/`\n\nEsempi\n- DSL generator: `db-generate-artifacts-dsl.md` + input sample `dsl/user.json`\n\nGates\n- DB Drift (CI/ewctl)\n\nKB\n- `agents/kb/recipes.jsonl` (es. `db-migrate`, `predeploy-checklist`)","size_chars":513,"tokens_estimate":128}
{"doc_id":"ew-domain-docs-governance","path":"domains/docs-governance.md","title":"Dominio Docs & Governance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:26+01:00","section_level":2,"anchor_text":"Dominio Docs & Governance","anchor_slug":"dominio-docs-governance","chunk_index":1,"content":"# Dominio Docs & Governance\n\nCosa fa\n- Mantiene coerenza tra codice, KB e Wiki.\n- Applica gates (Checklist/DB Drift/KB Consistency + lint WHAT-first).\n\nAgenti\n- `agents/agent_docs_review/manifest.json`\n- `agents/agent_governance/manifest.json`\n- `agents/agent_scrummaster/manifest.json`\n\nPagine chiave\n- Metodo: `agent-first-method.md`\n- Contratti: `intent-contract.md`, `output-contract.md`\n- Conventions: `docs-conventions.md`\n- Gate: `doc-alignment-gate.md`\n\nStrumenti\n- `scripts/ewctl.ps1`\n- Lint: `scripts/whatfirst-lint.ps1`, `scripts/wiki-frontmatter-lint.ps1`\n\nAudit\n- `agents/logs/events.jsonl`\n- `activity-log.md`","size_chars":623,"tokens_estimate":156}
{"doc_id":"ew-domain-frontend","path":"domains/frontend.md","title":"Dominio Frontend","owner":"team-frontend","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:06:26+01:00","section_level":2,"anchor_text":"Dominio Frontend","anchor_slug":"dominio-frontend","chunk_index":1,"content":"# Dominio Frontend\n\nCosa fa\n- UI guidata (wizard) per intent comuni.\n- Visualizzazione piani, esiti, diario di bordo e richieste di approvazione.\n\nAgenti\n- `agents/agent_frontend/manifest.json`\n\nRiferimenti\n- Visione UX: `UX/agentic-ux.md`\n- Use case: `use-cases/entrate-uscite.md`\n\nGates\n- KB/Wiki aggiornate quando cambia UI/API.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-domains-index","path":"domains/index.md","title":"Domini - Panoramica","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T22:15:17+01:00","section_level":2,"anchor_text":"Domini - Panoramica","anchor_slug":"domini-panoramica","chunk_index":1,"content":"# Domini - Panoramica\n\nObiettivo\n- Dare una mappa unica per capire \"chi fa cosa\" (agenti), con contratti e artefatti attesi.\n\nDomini\n- DB: `domains/db.md`\n- Datalake: `domains/datalake.md`\n- Frontend: `domains/frontend.md`\n- Docs & Governance: `domains/docs-governance.md`\n\nRegola\n- Ogni nuova capability deve avere: intent (WHAT) + implementazione (script) + ricetta KB + pagina Wiki.","size_chars":385,"tokens_estimate":96}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"✅ Scopo del Documento\r","anchor_slug":"scopo-del-documento","chunk_index":1,"content":"## ✅ Scopo del Documento\n\nQuesta “bibbia architetturale” raccoglie **tutti i principi, regole, policy e best practice** del database EasyWay Data Portal, orientati anche all’automazione e al dialogo con bot/agent (Conversational Intelligence).\r\n**Ogni oggetto tecnico (DDL, funzioni, sequence, store, ecc.) è sempre documentato in file `.md` dedicati e linkati da questo documento.**\n\n---","size_chars":388,"tokens_estimate":97}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"👾 Conversational Intelligence & AMS Ready — Principi Base\r","anchor_slug":"conversational-intelligence-ams-ready-principi-base","chunk_index":2,"content":"## 👾 Conversational Intelligence & AMS Ready — Principi Base\n\n- **Tutto è progettato per essere gestito anche da chatbot, agent, AMS, LLM e API automatiche** (non solo da DBA/operatori umani).\r\n- **Ogni store process e funzione**:\r\n    - Parametri chiari e documentati\r\n    - Logging centralizzato su STATS_EXECUTION_LOG e LOG_AUDIT\r\n    - Output strutturato e standard (OK/KO, ID, messaggio, ...), facilmente parsabile da bot o strumenti di monitoring\r\n    - Esempi di prompt e output nei .md tecnici\r\n- **Ogni oggetto di database** ha naming self-explained, descrizione extended property e audit.\r\n- **Tutto è sempre testabile, monitorabile e riusabile via automation**.\n\n---","size_chars":678,"tokens_estimate":170}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"📂 Schemi Database Principali\r","anchor_slug":"schemi-database-principali","chunk_index":3,"content":"## 📂 Schemi Database Principali\n\n| Schema      | Scopo                              |\r\n|-------------|------------------------------------|\r\n| `PORTAL`    | Anagrafiche, ACL, tenant, ruoli, NDG, surrogate key, mascheramento, sequence, store |\r\n| `BRONZE`    | Dati raw (staging tecnico)         |\r\n| `SILVER`    | Dati validati e puliti             |\r\n| `GOLD`      | Dati business-ready, RLS, auditing |\r\n| `REPORTING` | Viste consolidate per BI           |\r\n| `WORK`      | Area tecnica temporanea            |\n\n---","size_chars":518,"tokens_estimate":130}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"🚩 Policy & Principi Architetturali\r","anchor_slug":"policy-principi-architetturali","chunk_index":4,"content":"## 🚩 Policy & Principi Architetturali\n\n- Surrogate key INT (`id`) + NDG alfanumerica univoca su tutte le anagrafiche principali\r\n- **PORTAL**: PK, FK, relazioni hard sempre obbligatorie\r\n- **Altri schema**: FK fisiche solo se serve, logica documentata\r\n- Campi tecnici sempre: `created_by`, `created_at`, `updated_at`, `ext_attributes`\r\n- Sequence, function e store procedure sempre in doppia versione: PROD e DEBUG\r\n- Mascheramento e RLS sempre previsti dove serve\r\n- Login federata e password hashata obbligatorie per sicurezza\r\n- **Tutto deve essere gestibile, loggabile, richiamabile da bot/chatbot/agent/AMS**\r\n- Output strutturato in tutte le store process di business/AMS\r\n- Documentazione e prompt di esempio per ogni oggetto\r\n- **Ogni evoluzione architetturale va prima discussa e documentata qui**\n\n---","size_chars":813,"tokens_estimate":203}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"🗂️ Struttura della documentazione tecnica\r","anchor_slug":"struttura-della-documentazione-tecnica","chunk_index":5,"content":"## 🗂️ Struttura della documentazione tecnica\n\nPer ogni area/oggetto di database, trovi qui il link al relativo `.md` tecnico dettagliato.","size_chars":138,"tokens_estimate":34}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**PORTAL**\r","anchor_slug":"portal","chunk_index":6,"content":"### **PORTAL**\r\nTabelle, PK/FK, NDG, sequence, policy, convenzioni","size_chars":66,"tokens_estimate":16}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**GOLD**\r","anchor_slug":"gold","chunk_index":7,"content":"### **GOLD**\r\nBusiness, reporting, auditing, RLS","size_chars":48,"tokens_estimate":12}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**STORE PROCEDURE**\r","anchor_slug":"store-procedure","chunk_index":8,"content":"### **STORE PROCEDURE**\r\nOnboarding, test, ACL, automation","size_chars":58,"tokens_estimate":14}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**SEQUENCE**\r","anchor_slug":"sequence","chunk_index":9,"content":"### **SEQUENCE**\r\nNumeratori e gestione codici NDG (prod + debug)","size_chars":65,"tokens_estimate":16}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**FUNZIONI**\r","anchor_slug":"funzioni","chunk_index":10,"content":"### **FUNZIONI**\r\nFunzioni di supporto (generazione NDG, masking, RLS)","size_chars":70,"tokens_estimate":18}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**EXCEL**\r","anchor_slug":"excel","chunk_index":11,"content":"### **EXCEL**\r\nExport documentale per audit o tool di data modeling","size_chars":67,"tokens_estimate":17}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**dbdiagram.io**\r","anchor_slug":"dbdiagramio","chunk_index":12,"content":"### **dbdiagram.io**\r\nModello visuale sempre aggiornato per import/export ERD\r\n- https://dbdiagram.io/d/687cf3b9f413ba3508bd95c0","size_chars":128,"tokens_estimate":32}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"**SETUP**\r","anchor_slug":"setup","chunk_index":13,"content":"### **SETUP**\r\n- [DB-SETUP](./01_database_architecture/01a-db-setup.md)\n\n---","size_chars":76,"tokens_estimate":19}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"📑 Convenzioni e comandi di progetto\r","anchor_slug":"convenzioni-e-comandi-di-progetto","chunk_index":14,"content":"## 📑 Convenzioni e comandi di progetto\n\n| Cosa vuoi                     | Cosa devi scrivere               | Dammi il `.md`                    |\r\n|-------------------------------|----------------------------------|------------------------------------|\r\n| Script setup                  | `Dammi lo script SETUP`          | `Dammi il .md SETUP`               |\r\n| Script PORTAL                 | `Dammi lo script PORTAL`         | `Dammi il .md PORTAL`              |\r\n| Script GOLD (ecc.)            | `Dammi lo script GOLD`           | `Dammi il .md GOLD`                |\r\n| Export dbdiagram.io           | `Export for dbdiagram.io`        | `Dammi il .md dbdiagram.io`        |\r\n| Excel documentale             | `Genera documentale Excel`       | `Dammi il .md Excel`               |\r\n| Script store procedure        | `Dammi lo script STOREPROCESS`   | `Dammi il .md STOREPROCESS`        |\r\n| Script sequence               | `Dammi lo script SEQUENCE`       | `Dammi il .md SEQUENCE`            |\r\n| Script funzione               | `Dammi lo script FUNZIONE`       | `Dammi il .md FUNZIONE`            |\n\n---","size_chars":1113,"tokens_estimate":278}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"📝 Linee guida operative\r","anchor_slug":"linee-guida-operative","chunk_index":15,"content":"## 📝 Linee guida operative\n\n- Ogni nuovo oggetto tecnico, policy, convenzione, decisione va **sempre prima documentata qui**.\r\n- I `.md` tecnici sono linkati e devono essere aggiornati a ogni evoluzione.\r\n- Le modifiche devono essere validate e condivise prima della messa in produzione.\r\n- **Questa Architecture Master è il riferimento vincolante per sviluppatori, DBA, revisori, auditor, project owner e… chatbot/agent di AMS!**\n\n---","size_chars":436,"tokens_estimate":109}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":3,"anchor_text":"👾 Conversational Intelligence Checklist\r","anchor_slug":"conversational-intelligence-checklist","chunk_index":16,"content":"### 👾 Conversational Intelligence Checklist\r\nPer ogni oggetto:  \r\n- [ ] Documentazione con prompt di esempio\r\n- [ ] Output standardizzato (resultset: stato, id, messaggio, etc.)\r\n- [ ] Logging su tutte le operazioni\r\n- [ ] Parametri chiari, self-explained\r\n- [ ] Versione DEBUG/test sempre presente\r\n- [ ] Extended property su ogni campo chiave\n\n---","size_chars":350,"tokens_estimate":88}
{"doc_id":"ew-01-database-architecture","path":"easyway-webapp/01-database-architecture.md","title":"EasyWay Data Portal - Database Architecture Master","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:00+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":17,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-02-logiche-easyway","path":"easyway-webapp/02-logiche-easyway.md","title":"Prefazione – EasyWay Data Portal  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Guida alla Documentazione Funzionale e Architetturale","anchor_slug":"guida-alla-documentazione-funzionale-e-architetturale","chunk_index":1,"content":"## Guida alla Documentazione Funzionale e Architetturale\n\nQuesta documentazione raccoglie e formalizza l’analisi funzionale e le scelte architetturali alla base dello sviluppo di **EasyWay Data Portal**.\n\nIl documento è pensato come **riferimento unificato e versionabile** per tutto il team di sviluppo, architetti, DevOps e stakeholder, garantendo:\n- **Chiarezza delle regole e dei flussi** a cui attenersi in ogni fase,\n- **Coerenza tra analisi, implementazione e gestione operativa**,\n- **Facilità di onboarding per nuovi sviluppatori o fornitori**.\n\nLa struttura e le macro-sezioni sono state definite in modo da coprire tutti gli aspetti chiave del progetto, dalla sicurezza all’esperienza utente, dalla scalabilità alla governance.\n\n**Tutte le sezioni riportate sono state validate come “PRONTA PER CODICE”**: ciò significa che ogni parte è pronta per essere tradotta in codice, script, template o pipeline, mantenendo la tracciabilità delle scelte e la conformità alle best practice definite dal team.","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-02-logiche-easyway","path":"easyway-webapp/02-logiche-easyway.md","title":"Prefazione – EasyWay Data Portal  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Macro-sezioni documentate","anchor_slug":"macro-sezioni-documentate","chunk_index":2,"content":"## Macro-sezioni documentate\n\n- **Architettura Microservizi**  \n  Definizione dei domini funzionali, struttura a container, API Gateway, isolamenti e principi di scalabilità.\n\n- **Policy Configurazione & Security Microservizi/Gateway**  \n  Gestione delle identity tecniche, isolamento tenant, secret management, networking sicuro, ACL centralizzati.\n\n- **Logging & Audit**  \n  Policy di logging centralizzato, audit trail, alert automatici, retention, compliance (GDPR/SOC2/DORA).\n\n- **Best Practice Naming & Scalabilità**  \n  Convenzioni di naming, regole di scaling orizzontale/verticale, organizzazione ambienti, resource group.\n\n- **Flussi Onboarding/Login**  \n  Tutti i processi di registrazione, login locale/federato, gestione reset, onboarding prospect/demo e verticali PA (SPID/CIE).\n\n- **Integrazione API Esterne**  \n  Linee guida per l’integrazione di API esterne (Microsoft Graph, Shopify, Fatture in Cloud, Amazon), policy sicurezza, mapping dati e gestione tenant.\n\n- **Gestione Notifiche**  \n  Tipologie, flussi, canali notifiche (email, Teams, dashboard), preferenze utente, logging e template personalizzati.\n\n- **Gestione Template Email via Excel su Storage**  \n  Modello per template email/configurabili, versionabili, caricati su Storage, con logica di merge variabili, supporto multilingua e audit.\n\n**Tutte le scelte qui documentate sono alla base dello sviluppo della piattaforma e saranno mantenute allineate a ogni evoluzione del progetto.**  \r\n**Ogni sezione è pronta per essere esportata, integrata o sviluppata secondo lo standard “ready for code”.**\n\n> Per qualsiasi modifica, integrazione o dettaglio operativo,  \r\n> fare sempre riferimento a queste linee guida prima di procedere con lo sviluppo.","size_chars":1727,"tokens_estimate":432}
{"doc_id":"ew-02-logiche-easyway","path":"easyway-webapp/02-logiche-easyway.md","title":"Prefazione – EasyWay Data Portal  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"`landing/`","anchor_slug":"landing","chunk_index":1,"content":"### `landing/`\n\n*   File originali grezzi (CSV, JSON, XML)\n*   Ricevuti da sistemi esterni (Amazon, Shopify, ecc.)\n*   Nessuna trasformazione\n*   Solo per tracciabilità e audit","size_chars":176,"tokens_estimate":44}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"`staging/`","anchor_slug":"staging","chunk_index":2,"content":"### `staging/`\n\n*   Copia da `landing/`\n*   Arricchimento tecnico: colonne di competenza, source system, tenant, ecc.\n*   Regole di **Data Quality**\n*   Flag `esito_dq = OK / BLOCKED`\n*   Non si prosegue verso `official/` in presenza di `BLOCKED`","size_chars":246,"tokens_estimate":62}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"`invalidrows/`","anchor_slug":"invalidrows","chunk_index":3,"content":"### `invalidrows/`\n\n*   Contiene file scartati da `staging/`\n*   Evidenzia righe che non superano le regole di qualità (es. CF mancante)\n*   File esempi:\n```sql\ninvalidrows/2024-07-19/\n├── rejected_rows.csv\n├── dq_report.txt\n├── log.json\n```sql\n\nFacilita audit, troubleshooting e trasparenza verso clienti o vendor\n\nofficial/\n*   Solo dati **certificati, validati, completi**\n*   Pronti per ingestion in SQL Server (BRONZE)\n*   Non contiene errori, non contiene scarti\n    \n* * *","size_chars":479,"tokens_estimate":120}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"`technical/`","anchor_slug":"technical","chunk_index":4,"content":"### `technical/`\n\n*   Logs ETL, diagnostica tecnica, file temporanei operativi\n    \n*   Scarti temporanei, export tecnici di processo","size_chars":133,"tokens_estimate":33}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"`portal-assets/`","anchor_slug":"portal-assets","chunk_index":5,"content":"### `portal-assets/`\n\n*   Risorse statiche del Portale:\n    *   Loghi\n    *   Template\n    *   Palette colori\n    *   Icone\n        \n*   Nessuna policy di retention automatica","size_chars":175,"tokens_estimate":44}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"`portal-audit/`","anchor_slug":"portal-audit","chunk_index":6,"content":"### `portal-audit/`\n\n*   Audit Database (PORTAL / BRONZE / SILVER / GOLD)\n*   Audit Storage (Access logs, ACL changes)\n*   Log ETL (ADF, Databricks, Synapse)\n*   Security Events (SIEM, Sentinel, Defender)\n*   Retention minima **36 mesi**\n\n\n📊 Retention Policy (Blob Lifecycle Management)\n----------------------------------------\n| Directory | Retention | Motivazione |\n| --- | --- | --- |\n| `landing/` | **180 giorni** | Dati grezzi, utili solo a breve |\n| `staging/` | **360 giorni** | Lavorazione tecnica temporanea |\n| `official/` | Nessuna | Master dataset |\n| `invalidrows/` | **360 giorni** | Audit e diagnosi |\n| `technical/` | **360 giorni** | Logs ETL, scarti temporanei |\n| `portal-assets/` | Nessuna | Gestione manuale asset del portale |\n| `portal-audit/` | **36 mesi min.** | Audit e compliance (ISO, DORA) |\n\n💰 Monitoraggio Costi e Consumi\n----------------------------------------\n| Strumento | Scopo |\n| --- | --- |\n| **Azure Cost Management** | Monitoraggio spesa mensile |\n| **Storage Metrics** | Visualizzazione uso per container |\n| **Blob Inventory** | Analisi quantità e tipo file |\n| **Azure Monitor Alerts** | Alert soglie costi e volumi |\n\nEsempi di Alert\n| Condizione | Soglia | Azione |\n| --- | --- | --- |\n| Storage > 80% budget | 80% | Alert IT Governance |\n| Container `landing/` > 2 TB | 2 TB | Verifica cleanup |\n\n🔎 Audit & Compliance (Database & Storage)\n----------------------------------------","size_chars":1429,"tokens_estimate":357}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"Audit Database attivo su:","anchor_slug":"audit-database-attivo-su","chunk_index":7,"content":"### Audit Database attivo su:\n\n*   PORTAL / BRONZE / SILVER / GOLD\n    \n*   Azioni tracciate: SELECT, INSERT, UPDATE, DELETE\n    \n*   Eventi critici: DATABASE_OBJECT_PERMISSION_CHANGE, ROLE_MEMBER_CHANGE\n\n\nAudit Storage:\n```sql\nportal-audit/\n├── db-audit-logs/\n├── storage-audit-logs/\n├── etl-execution-logs/\n├── security-events/\n```sql\n\n✅ Best Practice Operative - Checklist IT\n----------------------------------------\n\n*   Retention policy attiva su ogni area tecnica\n*   Monitoraggio costi trimestrale tramite Azure Cost Management\n*   Alert configurati su soglie volumi e spesa\n*   Audit logs archiviati minimo 36 mesi\n*   Revisione annuale ACL / RBAC su tenant e storage\n*   Tracciamento accessi DB e storage (compliance)\n\n🚀 Stato attuale: COMPLETO E SOSTENIBILE\n----------------------------------------\n| Aspetto | Stato |\n| --- | --- |\n| Sicurezza | ✅ |\n| Segregazione Tenant | ✅ |\n| Data Lifecycle | ✅ |\n| Cost Management | ✅ |\n| Retention Policy | ✅ |\n| Audit / Compliance | ✅ |\n\n\n\n\n?? Provisioning con Terraform\n----------------------------------------\nIl layout dello Storage (ADLS Gen2) può essere creato via Terraform (vedi `infra/terraform`):\n\n- Storage Account con HNS attivo\n- Filesystem `datalake` e `portal-assets`\n- Directory per tenant: `tenant-xxxx/{landing,staging,official,invalidrows,technical}`\n- Directory `portal-assets/config/` per i file YAML di branding\n\nOutput Terraform → variabili API:\n- `storage_connection_string` → `AZURE_STORAGE_CONNECTION_STRING`\n- `branding_container_name` → `BRANDING_CONTAINER` (tipicamente `portal-assets`)\n- `branding_prefix` → `BRANDING_PREFIX` (default `config`)\n\nEsempio comandi:\n```sql\ncd infra/terraform\nterraform init\nterraform plan -var \"project_name=easyway\" -var \"resource_group_name=rg-easyway-dev\" -var \"storage_account_name=ewdlkdev123\" -var \"tenants=[\\\"tenant01\\\"]\"\nterraform apply\n```sql\n\nIntegra poi gli output in Azure DevOps (Variable Group) o Key Vault.","size_chars":1932,"tokens_estimate":483}
{"doc_id":"ew-03-datalake-dev","path":"easyway-webapp/03-datalake-dev.md","title":"`landing/`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":8,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"1️⃣ Obiettivo","anchor_slug":"1-obiettivo","chunk_index":1,"content":"## 1️⃣ Obiettivo\n\nEasyWay Data Portal garantisce un accesso sicuro e scalabile tramite **Microsoft Entra ID** (opzionale), assegnando fin dalla registrazione un **codice cliente (cod_cli)** anche ai prospect.\n\nIl sistema è progettato per gestire utenti e tenant in modo isolato e sicuro, tramite il campo **tenant_id**.\n\nL'infrastruttura è pensata per SaaS: un solo DB, più clienti, ACL e ruoli.\n\n  \n\nIl portale gestisce anche:\n\n- Notifiche utente\n\n- Integrazioni API esterne (Shopify, Amazon, Fatture in Cloud)\n\n- Estensione futura verso flussi di Data Quality.","size_chars":562,"tokens_estimate":140}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"2️⃣ Flusso Registrazione e Accesso Utente","anchor_slug":"2-flusso-registrazione-e-accesso-utente","chunk_index":2,"content":"## 2️⃣ Flusso Registrazione e Accesso Utente","size_chars":44,"tokens_estimate":11}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":3,"anchor_text":"Sequenza generale:","anchor_slug":"sequenza-generale","chunk_index":3,"content":"### Sequenza generale:\n\n1. L’utente si registra con email (UPN Entra ID o normale email)\n\n2. Il portale verifica via Microsoft Graph API se l’utente esiste in Entra ID (se previsto)\n\n3. Se assente → crea utente su Entra ID (opzionale)\n\n4. Genera `cod_cli` e `tenant_id` su SQL Server\n\n5. Inserisce il nuovo utente nel database `users` associandolo a `tenant_id`\n\n6. L’utente accede tramite OAuth2 (Entra ID) o login locale","size_chars":422,"tokens_estimate":106}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":3,"anchor_text":"Schema semplificato - Registrazione e Accesso","anchor_slug":"schema-semplificato-registrazione-e-accesso","chunk_index":4,"content":"### Schema semplificato - Registrazione e Accesso\n\n```sql\n\n[User Browser]\n\n     │\n\n     │─ Registrazione Email ─────┐\n\n     │                           │\n\n     ▼                           ▼\n\n[Portale Backend] ─ Check Entra ID ─► [Microsoft Graph API]\n\n     │                               │\n\n     ├─ Genera cod_cli e tenant_id   │\n\n     ├─ Scrive in tabella `users`    │\n\n     │                               │\n\n     └─ Login tramite EntraID OIDC ◄─┘\n\n```sql","size_chars":458,"tokens_estimate":114}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"3️⃣ Architettura Generale del Portale (Microservizi / Container)","anchor_slug":"3-architettura-generale-del-portale-microservizi-container","chunk_index":5,"content":"## 3️⃣ Architettura Generale del Portale (Microservizi / Container)\n\n```sql\n\n[Browser]\n\n   │\n\n   ▼\n\n[Portal]\n\n   │\n\n   ▼\n\n[API Gateway]\n\n   ├──► [Auth Service] ──► [ACL, Tenant Validation]\n\n   │       │\n\n   │       └──► [Admin Service]\n\n   │\n\n   ├──► [Viewer App]\n\n   ├──► [Scheduler]\n\n   ├──► [Upload Service]\n\n   ├──► [Import Service]\n\n   ├──► [Enrichment API]\n\n   └──► [Dashboard Service]\n\n```sql","size_chars":399,"tokens_estimate":100}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"4️⃣ Database - SQL Server","anchor_slug":"4-database-sql-server","chunk_index":6,"content":"## 4️⃣ Database - SQL Server","size_chars":28,"tokens_estimate":7}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":3,"anchor_text":"Tabelle principali:","anchor_slug":"tabelle-principali","chunk_index":7,"content":"### Tabelle principali:\n\n  \n\n**users:**\n\n- tenant_id\n\n- cod_cli\n\n- email\n\n- stato\n\n- notify_by_email\n\n  \n\n**user_notification_settings:**\n\n- tenant_id\n\n- cod_cli\n\n- channel (EMAIL, SMS, PUSH)\n\n- enabled","size_chars":202,"tokens_estimate":50}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"5️⃣ Gestione Notifiche","anchor_slug":"5-gestione-notifiche","chunk_index":8,"content":"## 5️⃣ Gestione Notifiche\n\n  \n\n**Livello Generale:**\n\n- notify_by_email TRUE/FALSE\n\n  \n\n**Livello Dettaglio:**\n\n- user_notification_settings per canale\n\n  \n\n**Priorità invio:**\n\n1. notify_by_email = 0 → blocca\n\n2. Se EMAIL ON in override → invia\n\n3. Se non override → applica flag generale","size_chars":289,"tokens_estimate":72}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"6️⃣ Integrazione API esterne (Microsoft Graph, Shopify, Amazon, ecc.)","anchor_slug":"6-integrazione-api-esterne-microsoft-graph-shopify-amazon-ecc","chunk_index":9,"content":"## 6️⃣ Integrazione API esterne (Microsoft Graph, Shopify, Amazon, ecc.)","size_chars":72,"tokens_estimate":18}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":3,"anchor_text":"Esempi API Graph:","anchor_slug":"esempi-api-graph","chunk_index":10,"content":"### Esempi API Graph:\n\n```sql\n\nGET /v1.0/users?$filter=userPrincipalName eq 'user@domain.com'\n\nPOST /v1.0/users { user data ... }\n\n```sql","size_chars":137,"tokens_estimate":34}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"7️⃣ Gestione ACL, Tenant e Sicurezza","anchor_slug":"7-gestione-acl-tenant-e-sicurezza","chunk_index":11,"content":"## 7️⃣ Gestione ACL, Tenant e Sicurezza\n\n**Accesso:**\n\n- JWT con tenant_id, ACL\n\n  \n\n**Segregazione dati:**\n\n- WHERE tenant_id = ?\n\n  \n\n**ACL:**\n\n- Tabella user_access\n\n  \n\n**Ruoli:**\n\n- Viewer, Scheduler, Admin, Enrichment","size_chars":223,"tokens_estimate":56}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"8️⃣ Estensione Futuro: Data Quality Flow","anchor_slug":"8-estensione-futuro-data-quality-flow","chunk_index":12,"content":"## 8️⃣ Estensione Futuro: Data Quality Flow\n\n**Flussi futuri:**\n\n- Upload (Excel, CSV, JSON)\n\n- Quality: Completezza, Formati, Business Rules\n\n- Report anomaly & fix","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"9️⃣ Deployment e Tecnologie","anchor_slug":"9-deployment-e-tecnologie","chunk_index":13,"content":"## 9️⃣ Deployment e Tecnologie\n\n**Componenti:**\n\n- Frontend Docker Azure Web App\n\n- Backend Docker Azure Web App\n\n- DB Azure SQL (esterno)","size_chars":138,"tokens_estimate":34}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"🔑 Tenant vs Microsoft Entra ID","anchor_slug":"tenant-vs-microsoft-entra-id","chunk_index":14,"content":"## 🔑 Tenant vs Microsoft Entra ID\n\n| Nome       | Funzione                          | Dove vive  |\n\n|------------|----------------------------------|------------|\n\n| tenant_id  | Isolamento logico DB               | SQL Azure  |\n\n| Entra ID   | Federazione accessi                | Microsoft  |\n\n  \n\nEntrambi convivono senza conflitti.","size_chars":336,"tokens_estimate":84}
{"doc_id":"ew-04-accesso-registrazione-notifiche","path":"easyway-webapp/04-accesso-registrazione-notifiche.md","title":"EasyWay Data Portal - Documentazione Funzionale Completa","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:09+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-05-codice-easyway-portale","path":"easyway-webapp/05-codice-easyway-portale.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\nDefinire l'architettura frontend di EasyWay Data Portal in modo coerente con:\n- la struttura backend `easyway-portal-api`\n- le policy multi-tenant, ACL e sicurezza definite nel progetto\n- le tabelle logiche e fisiche del database (`EasyWay DataPortal - DB`)\n- la roadmap AI e self-service dell'utente finale","size_chars":320,"tokens_estimate":80}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Struttura Progetto Frontend (Next.js)","anchor_slug":"struttura-progetto-frontend-nextjs","chunk_index":2,"content":"## Struttura Progetto Frontend (Next.js)\n\n```text\n/app\n/dashboard -> Dashboard overview globale\n/upload -> Modulo caricamento file\n/enrichment -> Stato arricchimenti e controlli qualità\n/notifications -> Visualizzazione notifiche per utente/tenant\n/workspace -> Area self-service e AI Assistant\n/components\n/ui -> Componenti riutilizzabili (Button, Card, Table)\n/layout -> Sidebar, Topbar, Breadcrumb\n/lib\n/api -> Connettori API per ogni controller\n/auth -> Gestione token, ACL, context utente\n/acl -> Logica permessi per visualizzazione moduli\n/utils\n/logger.ts -> Audit azioni frontend verso backend\n```\n\n---","size_chars":610,"tokens_estimate":152}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Mappatura Controller Backend -> Frontend UI","anchor_slug":"mappatura-controller-backend-frontend-ui","chunk_index":3,"content":"## Mappatura Controller Backend -> Frontend UI\n\n| Backend Controller (`src/controllers`) | Frontend Sezione `/app/` | API Connector (`lib/api/...`) |\n|----------------------------------------|---------------------------|-------------------------------|\n| `usersController.ts`                   | `/users` (gestione profili) | `lib/api/users.ts` |\n| `notificationsController.ts`           | `/notifications` | `lib/api/notifications.ts` |\n| `onboardingController.ts`              | `/workspace` | `lib/api/onboarding.ts` |\n| `brandingController.ts`                | globale (topbar, logo, tema) | `lib/api/branding.ts` |\n| `configController.ts`                  | `/settings` (admin only) | `lib/api/config.ts` |\n| `healthController.ts`                  | invisibile, usato per checkup | `lib/api/health.ts` |\n\n---","size_chars":813,"tokens_estimate":203}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Multi-Tenant e ACL (Access Control Layer)","anchor_slug":"multi-tenant-e-acl-access-control-layer","chunk_index":4,"content":"## Multi-Tenant e ACL (Access Control Layer)\n\nTutte le richieste frontend includono nel contesto:\n- `tenant_id`\n- `user_id` (formato `CDI00000001000`)\n- `profile` ACL (es. `can_upload`, `can_view_enrichment`, `can_manage_users`)\n\nQueste informazioni sono ottenute dopo login via API e salvate in context globale React (es. `TenantContext`, `AuthContext`).\n\n---","size_chars":360,"tokens_estimate":90}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Sicurezza & Logging","anchor_slug":"sicurezza-logging","chunk_index":5,"content":"## Sicurezza & Logging\n\nOgni azione utente frontend:\n- viene loggata con chiamata POST a `api/audit/log`\n- include i metadati:\n  - `event_type` (es: `UPLOAD_FILE`, `AI_DASHBOARD_REQUEST`)\n  - `user_id`, `tenant_id`\n  - `timestamp`\n- supporta masking dinamico se il dataset o colonna è marcata come `MASKED` nel backend (`PORTAL.MASKING_METADATA`)\n\n---","size_chars":351,"tokens_estimate":88}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"AI Dashboard Assistant","anchor_slug":"ai-dashboard-assistant","chunk_index":6,"content":"## AI Dashboard Assistant\n\nLa sezione `/workspace` integra:\n- Textarea per richieste tipo \"Mostrami i report con successo <95% negli ultimi 3 mesi\"\n- Backend AI (OpenAI / Azure OpenAI) con API POST a `/api/assistant/ask`\n- Visualizzazione dinamica dei widget suggeriti\n- Salvataggio query/risposta per audit\n\n---","size_chars":312,"tokens_estimate":78}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Esempio ACL e Componente Condizionale","anchor_slug":"esempio-acl-e-componente-condizionale","chunk_index":7,"content":"## Esempio ACL e Componente Condizionale\n\n```tsx\n{user?.profile?.can_upload && (\n  <UploadArea />\n)}\n```","size_chars":104,"tokens_estimate":26}
{"doc_id":"ew-06-frontend-architecture","path":"easyway-webapp/06-frontend-architecture.md","title":"EasyWay Data Portal - Frontend Architecture & Integration","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:36+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":8,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"🎯 Scopo del Documento  \r","anchor_slug":"scopo-del-documento","chunk_index":1,"content":"## 🎯 Scopo del Documento  \r\nDefinire le regole ufficiali di **naming convention** per:  \r\n- Utenze di servizio tecniche  \r\n- Gruppi di accesso IAM (RBAC)  \n\nQuesto garantisce ordine, chiarezza e coerenza su tutta la piattaforma EasyWay DataPortal.\n\n---","size_chars":253,"tokens_estimate":63}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"🔑 Naming Convention - Utenze Tecniche di Servizio  \r","anchor_slug":"naming-convention-utenze-tecniche-di-servizio","chunk_index":2,"content":"## 🔑 Naming Convention - Utenze Tecniche di Servizio","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":3,"anchor_text":"📋 Prefisso da usare: `portal.`  \r","anchor_slug":"prefisso-da-usare-portal","chunk_index":3,"content":"### 📋 Prefisso da usare: `portal.`  \r\nLe utenze tecniche devono iniziare sempre con `portal.`.  \r\nQueste utenze sono dedicate a:  \r\n- Portale EasyWay  \r\n- Power BI  \r\n- ETL, App esterne  \r\n- Accesso Storage Explorer (admin)","size_chars":224,"tokens_estimate":56}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":3,"anchor_text":"📂 Esempi standard:\r","anchor_slug":"esempi-standard","chunk_index":4,"content":"### 📂 Esempi standard:\r\n| Nome utenza tecnica           | Scopo                          | Ambito      |\r\n|--------------------------------|--------------------------------|-------------|\r\n| `portal.datalake.dev.read`     | Lettura dati Datalake           | App, Power BI |\r\n| `portal.datalake.dev.write`    | Scrittura su Datalake           | ETL, App    |\r\n| `portal.datalake.dev.admin`    | Admin su Datalake (Explorer)    | Amministrazione |\r\n| `portal.storage.dev.read`      | Lettura su Blob Storage (assets)| Assets, immagini |\r\n| `portal.storage.dev.write`     | Scrittura su Blob Storage       | Upload App  |\r\n| `portal.storage.dev.admin`     | Admin su Blob Storage           | IAM, ACL    |\n\n---","size_chars":708,"tokens_estimate":177}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"🔑 Naming Convention - Gruppi IAM (RBAC)  \r","anchor_slug":"naming-convention-gruppi-iam-rbac","chunk_index":5,"content":"## 🔑 Naming Convention - Gruppi IAM (RBAC)","size_chars":43,"tokens_estimate":11}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":3,"anchor_text":"📋 Prefisso da usare: `grp.`  \r","anchor_slug":"prefisso-da-usare-grp","chunk_index":6,"content":"### 📋 Prefisso da usare: `grp.`  \r\nI gruppi IAM devono iniziare sempre con `grp.`.  \r\nQuesti gruppi controllano l'accesso tramite RBAC su Azure.","size_chars":145,"tokens_estimate":36}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":3,"anchor_text":"📂 Esempi standard:\r","anchor_slug":"esempi-standard","chunk_index":7,"content":"### 📂 Esempi standard:\r\n| Nome gruppo IAM                | Permesso        | Ambito     |\r\n|--------------------------------|-----------------|------------|\r\n| `grp.portal.datalake.read`     | Lettura         | Datalake   |\r\n| `grp.portal.datalake.write`    | Scrittura       | Datalake   |\r\n| `grp.admin.datalake`           | Amministrazione | Datalake   |\r\n| `grp.portal.storage.read`      | Lettura         | Blob Storage |\r\n| `grp.admin.storage`            | Amministrazione | Blob Storage |\n\n---","size_chars":501,"tokens_estimate":125}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"📊 Differenza tra Utenze e Gruppi\r","anchor_slug":"differenza-tra-utenze-e-gruppi","chunk_index":8,"content":"## 📊 Differenza tra Utenze e Gruppi\r\n| Tipologia      | Prefisso | Scopo                                 |\r\n|----------------|----------|----------------------------------------|\r\n| **Utenza tecnica** | `portal.` | Account di servizio per App, Power BI, ETL |\r\n| **Gruppo IAM**     | `grp.`    | Gestione permessi tramite RBAC IAM      |\n\n---","size_chars":343,"tokens_estimate":86}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"🛑 Regola fondamentale\r","anchor_slug":"regola-fondamentale","chunk_index":9,"content":"## 🛑 Regola fondamentale\r\n| Tipo        | Utenti diretti? | Consiglio |\r\n|-------------|-----------------|-----------|\r\n| Storage IAM | **No**           | Solo tramite `grp.` gruppi |\r\n| Accesso tecnico | **Sì** (utenza tecnica `portal.`) | Per App / Power BI / ETL |\n\n---","size_chars":273,"tokens_estimate":68}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"🚩 Esempio di organizzazione pulita\r","anchor_slug":"esempio-di-organizzazione-pulita","chunk_index":10,"content":"## 🚩 Esempio di organizzazione pulita\n\n```sql\r\nUsers:\r\n└── portal.datalake.dev.admin@tenant.onmicrosoft.com\r\n└── portal.storage.dev.read@tenant.onmicrosoft.com\n\nGroups:\r\n└── grp.admin.datalake\r\n└── grp.portal.datalake.read\r\n```sql\n\n---","size_chars":236,"tokens_estimate":59}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"📝 Perché questa convenzione?\r","anchor_slug":"perch-questa-convenzione","chunk_index":11,"content":"## 📝 Perché questa convenzione?\r\n| Motivazione   | Beneficio       |\r\n|---------------|-----------------|\r\n| Chiarezza     | Capisci subito cosa fa ogni utenza o gruppo |\r\n| Scalabilità   | Aggiungere nuovi ruoli è semplice e ordinato |\r\n| Audit         | IAM più pulito e leggibile nei log           |\n\n---","size_chars":308,"tokens_estimate":77}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"📂 Best Practice - Assegnazione Permessi e IAM (IAM Assignment)\r","anchor_slug":"best-practice-assegnazione-permessi-e-iam-iam-assignment","chunk_index":12,"content":"## 📂 Best Practice - Assegnazione Permessi e IAM (IAM Assignment)\r\nQuando assegni i permessi tramite IAM su Azure Storage o Datalake, usa sempre una **descrizione chiara** e coerente.","size_chars":184,"tokens_estimate":46}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":3,"anchor_text":"📄 Esempio di descrizione:\r","anchor_slug":"esempio-di-descrizione","chunk_index":13,"content":"### 📄 Esempio di descrizione:\r\n```sql\r\nIAM Assignment:\r\nGruppo: grp.admin.datalake\r\nRuolo: Storage Account Contributor\r\nScopo: Accesso amministrazione Datalake (IAM + ACL)\r\n```sql","size_chars":180,"tokens_estimate":45}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":3,"anchor_text":"📋 Esempi pratici di descrizione:\r","anchor_slug":"esempi-pratici-di-descrizione","chunk_index":14,"content":"### 📋 Esempi pratici di descrizione:\r\n| Gruppo IAM             | Ruolo Assegnato               | Descrizione consigliata                                       |\r\n|-------------------------|--------------------------------|----------------------------------------------------------------|\r\n| `grp.admin.datalake`    | `Storage Account Contributor`   | Accesso amministrativo completo al Datalake tramite IAM + ACL  |\r\n| `grp.portal.datalake.read` | `Storage Blob Data Reader`    | Accesso in sola lettura ai dati certificati Datalake per report |\r\n| `grp.portal.datalake.write`| `Storage Blob Data Contributor` | Scrittura dati in staging/landing per ETL e App                |\n\n---","size_chars":682,"tokens_estimate":170}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"🔔 Note operative future\r","anchor_slug":"note-operative-future","chunk_index":15,"content":"## 🔔 Note operative future\r\n- Ogni nuova utenza o gruppo deve rispettare questa convenzione.\r\n- Nessuna utenza personale (es. `giuseppebelviso@`) deve avere permessi su Storage in produzione.","size_chars":192,"tokens_estimate":48}
{"doc_id":"ew-07-iam-naming-utenti-gruppi","path":"easyway-webapp/07-iam-naming-utenti-gruppi.md","title":"📂 Wiki IAM - Naming Convention Utenze Tecniche e Gruppi  ","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:10+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":16,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\nIntegrare **AI Agents intelligenti e operativi** all'interno della piattaforma EasyWay DataPortal, per automatizzare attività di Application Management Services (AMS) e abilitare un'interazione naturale, efficace e contestualizzata con i servizi della piattaforma.","size_chars":277,"tokens_estimate":69}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Sommario\r","anchor_slug":"sommario","chunk_index":2,"content":"## Sommario\n\n- [1. Introduzione](#1-introduzione)\r\n- [2. Scenari di utilizzo](#2-scenari-di-utilizzo)\r\n- [3. Architettura Conversazionale](#3-architettura-conversazionale)\r\n- [4. Tecnologie Azure utilizzate](#4-tecnologie-azure-utilizzate)\r\n- [5. Integrazione con EasyWay DataPortal](#5-integrazione-con-easyway-dataportal)\r\n- [6. Multitenancy e Sicurezza](#6-multitenancy-e-sicurezza)\r\n- [7. Costi stimati](#7-costi-stimati-per-1-ai-agent)\r\n- [8. Roadmap evolutiva](#8-roadmap-evolutiva)\r\n- [9. Naming convention AI Agents](#9-naming-convention-ai-agents)\n\n---","size_chars":561,"tokens_estimate":140}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"1. Introduzione\r","anchor_slug":"1-introduzione","chunk_index":3,"content":"## 1. Introduzione\n\nL'obiettivo è sviluppare un'infrastruttura di **AI Agents** evoluti, in grado di:\r\n- Rispondere in linguaggio naturale a domande sul portale.\r\n- Eseguire azioni operative (es. avvio flussi, verifica ACL, apertura ticket).\r\n- Automatizzare il supporto AMS con intelligenza e precisione.\r\n- Garantire segmentazione multi-tenant e sicurezza by design.\n\n---","size_chars":373,"tokens_estimate":93}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"2. Scenari di utilizzo\r","anchor_slug":"2-scenari-di-utilizzo","chunk_index":4,"content":"## 2. Scenari di utilizzo\n\n| AI Agent | Funzione principale | Canale previsto |\r\n|--------|---------------------|-----------------|\r\n| `agent.upload` | Guida al caricamento dati e gestione errori | Web, Teams |\r\n| `agent.acl` | Supporto su permessi, profili e tenant | Web |\r\n| `agent.dq` | Analisi Data Quality, righe scartate, motivi | Web |\r\n| `agent.billing` | Verifica piani, licenze, costi | Web, Email |\r\n| `agent.audit` | Accesso e consultazione audit logs | Interno (Admins) |\n\n---","size_chars":490,"tokens_estimate":122}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"3. Architettura Conversazionale\r","anchor_slug":"3-architettura-conversazionale","chunk_index":5,"content":"## 3. Architettura Conversazionale\n\n- **Front-end Web**: AI Agent integrato nel portale via iframe/widget.\r\n- **Canali secondari**: Microsoft Teams (AMS), App mobile futura.\r\n- **Bot Service**: Azure Bot Framework o Power Virtual Agents.\r\n- **AI Engine**: Azure OpenAI (GPT-4/3.5) con grounding su contenuti reali.\r\n- **Dati di base**: Azure Cognitive Search su `.md`, log, PDF tecnici.\r\n- **Speech Services**: opzionale per interazioni vocali.\n\n---","size_chars":449,"tokens_estimate":112}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"4. Tecnologie Azure utilizzate\r","anchor_slug":"4-tecnologie-azure-utilizzate","chunk_index":6,"content":"## 4. Tecnologie Azure utilizzate\n\n| Servizio | Funzione |\r\n|---------|----------|\r\n| Azure Bot Service | Orchestrazione agenti e canali |\r\n| Azure OpenAI | Risposte intelligenti e contestualizzate |\r\n| Azure Cognitive Search | Grounding su documentazione EasyWay |\r\n| Azure Storage | Repository knowledge base & documenti |\r\n| Azure Speech | Input/output vocale naturale |\r\n| Azure App Service | Hosting container multi-tenant AI Agent |\n\n---","size_chars":443,"tokens_estimate":111}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"5. Integrazione con EasyWay DataPortal\r","anchor_slug":"5-integrazione-con-easyway-dataportal","chunk_index":7,"content":"## 5. Integrazione con EasyWay DataPortal\n\n- Gli AI Agents operano nel contesto dell’utente autenticato.\r\n- Rispettano completamente ACL, `tenant_id`, `profile_id`.\r\n- Possono accedere a dati certificati `GOLD`, `PORTAL`, `AUDIT`.\r\n- Ogni interazione può essere tracciata in `portal-audit/`.\n\n---","size_chars":296,"tokens_estimate":74}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"6. Multitenancy e Sicurezza\r","anchor_slug":"6-multitenancy-e-sicurezza","chunk_index":8,"content":"## 6. Multitenancy e Sicurezza\n\n- Gli AI Agents applicano filtraggio dei dati per tenant e profilo.\r\n- Non accedono mai a dati di tenant terzi.\r\n- Integrati con Entra ID, Audit SQL e Audit Datalake.\r\n- Ogni azione può essere loggata per finalità legali, GDPR, SOC2.\n\n---","size_chars":270,"tokens_estimate":68}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"7. Costi stimati (per 1 AI Agent)\r","anchor_slug":"7-costi-stimati-per-1-ai-agent","chunk_index":9,"content":"## 7. Costi stimati (per 1 AI Agent)\n\n| Voce | Tipo | Stima mensile |\r\n|------|------|----------------|\r\n| Azure OpenAI (GPT-4) | API usage | ~40–60€ |\r\n| Azure Bot Service | Hosting | ~60€ |\r\n| Azure Cognitive Search | 1 unità | ~100€ |\r\n| Azure Speech (TTS/STT) | Opzionale | ~5–10€ |\r\n| Azure Storage | ~10GB | ~2€ |\n\n**Totale stimato: ~200–230€/mese** per AI Agent AMS in produzione limitata.\n\n---","size_chars":401,"tokens_estimate":100}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"8. Roadmap evolutiva\r","anchor_slug":"8-roadmap-evolutiva","chunk_index":10,"content":"## 8. Roadmap evolutiva\n\n| Fase | Azione |\r\n|------|--------|\r\n| 1 | Prototipo `agent.upload` su ambiente Dev |\r\n| 2 | Integrazione ACL e multi-tenant |\r\n| 3 | Grounding documentazione `.md` (analisi funzionale, ACL, pipeline) |\r\n| 4 | Logging audit e feedback |\r\n| 5 | Estensione vocale (Azure Speech) |\r\n| 6 | Rilascio `agent.acl`, `agent.dq`, `agent.billing` |\r\n| 7 | Dashboard analytics uso & efficienza AMS |\n\n---","size_chars":418,"tokens_estimate":104}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"9. Naming convention AI Agents\r","anchor_slug":"9-naming-convention-ai-agents","chunk_index":11,"content":"## 9. Naming convention AI Agents\n\nTutti gli agenti seguono il prefisso `agent.` e il dominio funzionale:\n\n- `agent.upload`\r\n- `agent.acl`\r\n- `agent.dq`\r\n- `agent.billing`\r\n- `agent.audit`\n\nI nomi sono chiari, coerenti, e riflettono la modularità microservizi EasyWay.\n\n---","size_chars":273,"tokens_estimate":68}
{"doc_id":"ew-10-ai-agents","path":"easyway-webapp/10-ai-agents.md","title":"EasyWay DataPortal – Conversational Intelligence & AMS","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:52+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":12,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":1,"content":"## ✅ Scopo del file\n\nConfigurazione iniziale e sicura di login, utenti, ruoli, permessi e policy a livello SQL Server e database,  \r\nper ambiente **EASYWAY_PORTAL_DEV**.\n\n---","size_chars":174,"tokens_estimate":44}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"1️⃣ **Login SQL Server (da creare su MASTER)**\r","anchor_slug":"1-login-sql-server-da-creare-su-master","chunk_index":2,"content":"## 1️⃣ **Login SQL Server (da creare su MASTER)**\n\n```sql\r\nCREATE LOGIN [EWPORTAL_APP_RO] \r\nWITH PASSWORD = 'R4nd0m!PW2024$Xx-RO@';\n\nCREATE LOGIN [EWPORTAL_APP_RW] \r\nWITH PASSWORD = 'R4nd0m!PW2024$Xx-RW@';\n\nCREATE LOGIN [EWPORTAL_ADMIN]   \r\nWITH PASSWORD = 'R4nd0m!PW2024$Xx-AD@';\n\n\r\n2️⃣ **Users (da creare dentro EASYWAY_PORTAL_DEV)**\n\n```sql\r\nUSE [EASYWAY_PORTAL_DEV];\n\nCREATE USER [EWPORTAL_APP_RO] FOR LOGIN [EWPORTAL_APP_RO];\r\nCREATE USER [EWPORTAL_APP_RW] FOR LOGIN [EWPORTAL_APP_RW];\r\nCREATE USER [EWPORTAL_ADMIN]   FOR LOGIN [EWPORTAL_ADMIN];\r\n```sql\n\n3️⃣ **Ruoli di Sicurezza**\n\n```sql\r\n-- Read-Only (Reporting)\r\nCREATE ROLE EWPORTAL_RO;\r\nALTER ROLE EWPORTAL_RO ADD MEMBER EWPORTAL_APP_RO;\n\n-- Read-Write (WebApp)\r\nCREATE ROLE EWPORTAL_RW;\r\nALTER ROLE EWPORTAL_RW ADD MEMBER EWPORTAL_APP_RW;\n\n-- Admin (DBA / ETL)\r\nCREATE ROLE EWPORTAL_ADMIN_ROLE;\r\nALTER ROLE EWPORTAL_ADMIN_ROLE ADD MEMBER EWPORTAL_ADMIN;\r\n```sql\n\n4️⃣ **Permessi per Schema**\n\n```sql\r\n-- READ-ONLY\r\nGRANT SELECT ON SCHEMA::REPORTING TO EWPORTAL_RO;\r\nGRANT SELECT ON SCHEMA::BRONZE    TO EWPORTAL_RO;\r\nGRANT SELECT ON SCHEMA::SILVER    TO EWPORTAL_RO;\r\nGRANT SELECT ON SCHEMA::GOLD      TO EWPORTAL_RO;\n\n-- READ-WRITE\r\nGRANT SELECT, INSERT, UPDATE, DELETE ON SCHEMA::PORTAL TO EWPORTAL_RW;\r\nGRANT SELECT, INSERT, UPDATE, DELETE ON SCHEMA::BRONZE TO EWPORTAL_RW;\r\nGRANT SELECT, INSERT, UPDATE, DELETE ON SCHEMA::SILVER TO EWPORTAL_RW;\r\nGRANT SELECT, INSERT, UPDATE, DELETE ON SCHEMA::WORK   TO EWPORTAL_RW;\r\nGRANT SELECT ON SCHEMA::GOLD TO EWPORTAL_RW;\r\nGRANT SELECT ON SCHEMA::REPORTING TO EWPORTAL_RW;\n\n-- FULL ADMIN\r\nGRANT CONTROL ON SCHEMA::PORTAL    TO EWPORTAL_ADMIN_ROLE;\r\nGRANT CONTROL ON SCHEMA::BRONZE    TO EWPORTAL_ADMIN_ROLE;\r\nGRANT CONTROL ON SCHEMA::SILVER    TO EWPORTAL_ADMIN_ROLE;\r\nGRANT CONTROL ON SCHEMA::GOLD      TO EWPORTAL_ADMIN_ROLE;\r\nGRANT CONTROL ON SCHEMA::REPORTING TO EWPORTAL_ADMIN_ROLE;\r\nGRANT CONTROL ON SCHEMA::WORK      TO EWPORTAL_ADMIN_ROLE;\r\n```sql\n\n📌 **Best practice**\r\n*   **Nessun prefisso**: il DB è interamente dedicato a EasyWay Data Portal.\r\n    \r\n*   **Ruoli e permessi ben segregati** (WebApp, Reporting, Admin).\r\n    \r\n*   **Password complesse e uniche** per ogni login (da ruotare periodicamente).\r\n    \r\n*   Ogni cambiamento deve essere tracciato anche in documentazione di sicurezza aziendale.\r\n    \n\n* * *\n\n🔑 **Audit & compliance**\r\n-------------------------","size_chars":2387,"tokens_estimate":597}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"1️⃣ **Login SQL Server (da creare su MASTER)**\r","anchor_slug":"1-login-sql-server-da-creare-su-master","chunk_index":3,"content":"*   L’assegnazione dei permessi deve essere tracciata anche nei log di change management.\r\n    \r\n*   I login devono essere monitorati tramite SQL Server Audit, Log Analytics o Azure Defender.","size_chars":191,"tokens_estimate":48}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":5,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":6,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-01a-db-setup","path":"easyway-webapp/01_database_architecture/01a-db-setup.md","title":"EasyWay Data Portal - Database SETUP","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":7,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-01b-schema-structure","path":"easyway-webapp/01_database_architecture/01b-schema-structure.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:44+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\r\n- Quali sono le tabelle e gli schemi principali?\r\n- Dove sono le convenzioni di naming e i collegamenti a programmability?\r\n- Quali passi minimi per aggiornare struttura e indici?\r\n- Dove trovare le entità correlate nel dizionario?","size_chars":258,"tokens_estimate":64}
{"doc_id":"ew-db-best-practices","path":"easyway-webapp/01_database_architecture/best-practices-checklist.md","title":"best-practices-checklist","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"best-practices-checklist","anchor_slug":"best-practices-checklist","chunk_index":1,"content":"Obiettivo\n- Fornire una checklist operativa e agent‑friendly per verificare che il DB sia conforme alle linee guida EasyWay.\n\nChecklist (alto livello)\n| Area | Regola | Stato | Note |\n| --- | --- | --- | --- |\n| Schemi | Esistono gli schemi PORTAL/BRONZE/SILVER/GOLD/REPORTING/WORK | ⬜ | V1 create_schemas |\n| Sequence | Sequence NDG create (TEN/USER + DEBUG) | ⬜ | V2 core_sequences |\n| Tabelle core | TENANT/USERS/CONFIGURATION con colonne standard | ⬜ | V3 portal_core_tables |\n| Logging | LOG_AUDIT, STATS_EXECUTION_LOG, STATS_EXECUTION_TABLE_LOG | ⬜ | V4 logging_tables |\n| RLS | Funzione predicate + Security Policy (OFF/ON) | ⬜ | V5 rls_setup |\n| SP core | CRUD TENANT, DEBUG register tenant+user, notify stub | ⬜ | V6 stored_procedures_core |\n| Seed | Profili/parametri base inseriti | ⬜ | V7 seed_minimum |\n| Extended props | Descrizioni/PII via extended properties | ⬜ | V8 extended_properties |\n| Flyway | `flyway_schema_history` allineata su tutti gli ambienti | ⬜ | Pipeline CI/CD |\n| Drift gate | Gate “DB Drift Check” in pipeline attivo | ⬜ | drift.json artifact |\n\nChecklist (tabelle)\n| Tabella | PK (id) | tenant_id | created_by | created_at | updated_at | status | ext_attributes |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n| PORTAL.TENANT | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ |\n| PORTAL.USERS | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ |\n| PORTAL.CONFIGURATION | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ |\n| ... | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ | ⬜ |\n\nChecklist (SP)\n| SP | TRY/CATCH + TRAN | Logging `sp_log_stats_execution` | Output standard (status/rows/err) | Debug version (se prevista) |\n| --- | --- | --- | --- | --- |\n| PORTAL.sp_insert_tenant | ⬜ | ⬜ | ⬜ | ⬜ |\n| PORTAL.sp_update_tenant | ⬜ | ⬜ | ⬜ | ⬜ |\n| PORTAL.sp_delete_tenant | ⬜ | ⬜ | ⬜ | ⬜ |\n| PORTAL.sp_debug_register_tenant_and_user | ⬜ | ⬜ | ⬜ | ⬜ |\n| ... | ⬜ | ⬜ | ⬜ | ⬜ |\n\nNote operative\n- RLS: abilita la security policy solo dopo aver verificato che l’app imposti `SESSION_CONTEXT('tenant_id')` (vedi `withTenantContext`).\n- Migrazioni: 1 file = 1 scopo; commento/header con scopo e ticket.\n- Documentazione: genera/aggiorna ERD & SP Catalog con `npm run db:generate-docs` dopo modifiche strutturali.","size_chars":2152,"tokens_estimate":538}
{"doc_id":"ew-db-studio","path":"easyway-webapp/01_database_architecture/db-studio.md","title":"db-studio","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"db-studio","anchor_slug":"db-studio","chunk_index":1,"content":"Obiettivo\n- Generare documentazione aggiornata dal DB (schema attuale) in pochi secondi, pronta per wiki e agenti.\n\nOutput\n- `out/db-docs/ERD.md` – ER diagram (Mermaid) generato automaticamente\n- `out/db-docs/SP_CATALOG.md` – Catalogo Stored Procedure e parametri\n\nCome si esegue\n```sql\ncd EasyWay-DataPortal/easyway-portal-api\nnpm run db:generate-docs\n```sql\nEnv richieste (come per API): `DB_CONN_STRING` (o `DB_AAD=true` con `DB_HOST/DB_NAME`).\n\nPipeline\n- Può essere invocato in uno stage dedicato (DB-Docs) per aggiornare la documentazione.\n\nNote\n- Gli script leggono INFORMATION_SCHEMA/sys.* e producono output idempotente.\n- Estensioni future: relazioni by columns, extended properties come descrizioni.","size_chars":710,"tokens_estimate":178}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\n- Rendere esplicito l'elenco di tabelle e stored procedure usando **solo** le fonti canoniche del repo.\n- Ridurre ambiguita: un agente (o un umano) puo verificare rapidamente cosa esiste e dove e documentato.","size_chars":221,"tokens_estimate":55}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Quali tabelle/procedure esistono nello schema `PORTAL` secondo le fonti canoniche?\n- Quali file sono la fonte e come posso rigenerare questo inventario?","size_chars":180,"tokens_estimate":45}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Source of truth (repo)","anchor_slug":"source-of-truth-repo","chunk_index":3,"content":"## Source of truth (repo)\n- Flyway migrations (canonico, corrente): `db/flyway/sql`\n\nDeploy operativa: usare migrazioni Flyway in `db/flyway/` (apply controllato).","size_chars":163,"tokens_estimate":41}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Tabelle (PORTAL) - canonico","anchor_slug":"tabelle-portal-canonico","chunk_index":4,"content":"## Tabelle (PORTAL) - canonico\n- `PORTAL.CONFIGURATION`\n- `PORTAL.LOG_AUDIT`\n- `PORTAL.MASKING_METADATA`\n- `PORTAL.PROFILE_DOMAINS`\n- `PORTAL.RLS_METADATA`\n- `PORTAL.SECTION_ACCESS`\n- `PORTAL.STATS_EXECUTION_LOG`\n- `PORTAL.STATS_EXECUTION_TABLE_LOG`\n- `PORTAL.SUBSCRIPTION`\n- `PORTAL.TENANT`\n- `PORTAL.USER_NOTIFICATION_SETTINGS`\n- `PORTAL.USERS`","size_chars":346,"tokens_estimate":86}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Stored procedure (PORTAL) - canonico","anchor_slug":"stored-procedure-portal-canonico","chunk_index":5,"content":"## Stored procedure (PORTAL) - canonico\n- `PORTAL.SP_DEBUG_REGISTER_TENANT_AND_USER`\n- `PORTAL.SP_DELETE_CONFIGURATION`\n- `PORTAL.SP_DELETE_PROFILE_DOMAIN`\n- `PORTAL.SP_DELETE_TENANT`\n- `PORTAL.SP_DELETE_USER`\n- `PORTAL.SP_INSERT_CONFIGURATION`\n- `PORTAL.SP_INSERT_PROFILE_DOMAIN`\n- `PORTAL.SP_INSERT_TENANT`\n- `PORTAL.SP_INSERT_USER`\n- `PORTAL.SP_LOG_STATS_EXECUTION`\n- `PORTAL.SP_LOG_STATS_TABLE`\n- `PORTAL.SP_SEND_NOTIFICATION`\n- `PORTAL.SP_UPDATE_CONFIGURATION`\n- `PORTAL.SP_UPDATE_PROFILE_DOMAIN`\n- `PORTAL.SP_UPDATE_TENANT`\n- `PORTAL.SP_UPDATE_USER`","size_chars":555,"tokens_estimate":139}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Dove e' documentato (Wiki)","anchor_slug":"dove-e-documentato-wiki","chunk_index":6,"content":"## Dove e' documentato (Wiki)\n- Overview schema/tabelle: `easyway-webapp/01_database_architecture/portal.md`\n- Overview SP: `easyway-webapp/01_database_architecture/storeprocess.md`\n- SP per area: `easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/index.md`\n- Logging: `easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md`","size_chars":445,"tokens_estimate":111}
{"doc_id":"ew-db-ddl-inventory","path":"easyway-webapp/01_database_architecture/ddl-inventory.md","title":"DB PORTAL - Inventario DDL (canonico)","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:32:16+01:00","section_level":2,"anchor_text":"Rigenerazione (idempotente)","anchor_slug":"rigenerazione-idempotente","chunk_index":7,"content":"## Rigenerazione (idempotente)\n- Solo Flyway (canonico): `pwsh scripts/db-ddl-inventory.ps1 -WriteWiki`\n- Include provisioning (dev/local): `pwsh scripts/db-ddl-inventory.ps1 -IncludeProvisioning -WriteWiki`\n- Include snapshot DDL (legacy): `pwsh scripts/db-ddl-inventory.ps1 -IncludeSnapshot -WriteWiki`\n- Include legacy export (audit): `pwsh scripts/db-ddl-inventory.ps1 -IncludeLegacy -WriteWiki`","size_chars":399,"tokens_estimate":100}
{"doc_id":"ew-db-flyway","path":"easyway-webapp/01_database_architecture/flyway.md","title":"Contesto","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:40:48+01:00","section_level":2,"anchor_text":"Contesto","anchor_slug":"contesto","chunk_index":1,"content":"## Contesto\n- Source-of-truth DB (canonico): migrazioni Flyway in `db/flyway/sql/`.\n- Provisioning dev/local: wrapper `db/provisioning/apply-flyway.ps1` (human-in-the-loop).\n- Artefatti storici (non canonici): `old/db/` (ex `DataBase/`, export `DDL_PORTAL_*`).\n\nCos'è Flyway\n- Tool open-source (Redgate) per versionare ed applicare migrazioni DB (DDL, DML, funzioni, SP, RLS.).\n- Tiene uno storico (tabella `flyway_schema_history`) e applica solo le nuove versioni.\n- Si integra perfettamente con CI/CD e ChatOps (audit nativo + query di stato).\n\nCome funziona\n- Crea `flyway_schema_history` nel DB e registra: versione, checksum, autore, timestamp, esito.\n- Legge script in ordine dalla cartella configurata (es. `db/flyway/sql/`):\n```text\ndb/flyway/sql/\n├─ V1__create_schemas.sql\n├─ V2__core_sequences.sql\n├─ V3__portal_core_tables.sql\n├─ V4__portal_logging_tables.sql\n├─ V5__rls_and_masking.sql\n└─ V6__stored_procedures_core.sql\n```\n- Esegue solo le migrazioni non ancora registrate; in caso di errore, si ferma e fallisce la pipeline.\n\nNaming (Flyway Standard)\n- Versioned: `V<n>__descrizione.sql`\n- Undo (opzionale): `U<n>__rollback.sql`\n- Repeatable: `R__nome.sql` (ri-eseguito se cambia file)\n- Baseline (per DB già esistenti): `B<n>__baseline.sql` o `flyway baseline`\n\nBest practice EasyWay\n- 1 script = 1 scopo (tabella, SP, sequence, RLS.)\n- Commento/header standard a inizio file (progetto, autore, scopo, ticket)\n- Rollback: dove possibile aggiungere `U__rollback_*.sql`\n- Logging: audit Flyway + nostre tabelle `PORTAL.LOG_AUDIT` e `PORTAL.STATS_EXECUTION_*`\n- Pipeline: integrazione Azure DevOps (plan/apply gating) e variabili segrete in Variable Group/Key Vault\n\nIntegrazione EasyWay\n- Cartella migrazioni: `db/flyway/sql/`\n- Config: `db/flyway/flyway.conf` (locations, baselineOnMigrate, ecc.)\n- Esempio `flyway.conf` (DEV):\n```text\nlocations=filesystem:./sql\nbaselineOnMigrate=true\nsqlMigrationSuffixes=.sql\nconnectRetries=5\n# Le credenziali (URL/USER/PASSWORD) si passano come env nel runner\n```\n\nEsecuzione (CLI)\n```powershell\n# Env (esempio SQL Auth)\n$env:FLYWAY_URL = 'jdbc:sqlserver://<host>:1433;databaseName=<db>;encrypt=true'\n$env:FLYWAY_USER = '<user>'\n$env:FLYWAY_PASSWORD = '<password>'","size_chars":2215,"tokens_estimate":554}
{"doc_id":"ew-db-flyway","path":"easyway-webapp/01_database_architecture/flyway.md","title":"Contesto","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:40:48+01:00","section_level":2,"anchor_text":"Contesto","anchor_slug":"contesto","chunk_index":2,"content":"flyway -configFiles=db/flyway/flyway.conf validate\nflyway -configFiles=db/flyway/flyway.conf baseline -baselineVersion=1   # solo su DB esistenti\nflyway -configFiles=db/flyway/flyway.conf migrate\n```","size_chars":199,"tokens_estimate":50}
{"doc_id":"ew-db-flyway","path":"easyway-webapp/01_database_architecture/flyway.md","title":"Contesto","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:40:48+01:00","section_level":2,"anchor_text":"Provisioning dev/local (wrapper)","anchor_slug":"provisioning-devlocal-wrapper","chunk_index":3,"content":"## Provisioning dev/local (wrapper)\nPer setup locale, usa il wrapper (human-in-the-loop) che applica Flyway:\n- Validate: `pwsh db/provisioning/apply-flyway.ps1 -Action validate`\n- Migrate: `pwsh db/provisioning/apply-flyway.ps1 -Action migrate`\n\nNota: gli artefatti storici sono in `old/db/` (non canonico).\n\nChatOps/AMS - Query utili\n```sql\n-- Ultima migrazione applicata\nSELECT TOP 1 version, description, installed_on, installed_by\nFROM flyway_schema_history ORDER BY installed_on DESC;\n\n-- Migrazioni fallite o pendenti\nSELECT * FROM flyway_schema_history WHERE success = 0;\n```\n\nStato nel repo\n- Skeleton già presente: `db/flyway/` con `sql/` e `flyway.conf`.\n- Migrazioni baseline create: V1 (schemi), V2 (sequence), V3 (tabelle core PORTAL), V4 (logging/audit).\n- Prossime: V5 (RLS), V6 (SP core + debug), V7 (seed), V8 (extended properties).\n\nNota su DataBase/ vs db/\n- `db/` è la fonte canonica (DevOps-ready): migrazioni in `db/flyway/sql/`.\n- `DataBase/` è deprecata (compat/redirect); gli artefatti storici sono archiviati in `old/db/`.\n- Obiettivo: mantenere una sola referenza e rigenerare inventari/documentazione sempre da Flyway.","size_chars":1146,"tokens_estimate":286}
{"doc_id":"ew-db-howto-create-table","path":"easyway-webapp/01_database_architecture/howto-create-table.md","title":"HowTo: creare una tabella","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Regola base (razionalizzazione)","anchor_slug":"regola-base-razionalizzazione","chunk_index":1,"content":"## Regola base (razionalizzazione)\n- Source-of-truth tecnica: migrazioni in `db/flyway/` (deploy controllato).\n- Source-of-truth documentale: Wiki sotto `easyway-webapp/01_database_architecture/`.\n- Artefatti storici (non canonici): `old/db/` (ex `DataBase/`), solo per audit/ricostruibilita'.","size_chars":293,"tokens_estimate":73}
{"doc_id":"ew-db-howto-create-table","path":"easyway-webapp/01_database_architecture/howto-create-table.md","title":"HowTo: creare una tabella","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Passi (WHAT-first)","anchor_slug":"passi-what-first","chunk_index":2,"content":"## Passi (WHAT-first)\n1. Compila un intent WHAT `db.table.create` (schema, table, columns, indici, privacy/PII, tenanting).\n2. Esegui in WhatIf per vedere cosa verrebbe generato.\n3. Genera artefatti (Flyway + pagina Wiki tabella).\n4. (Opzionale) Apply su DB solo con gates verdi e approvazione.\n5. Aggiorna/rigenera inventario DDL (`ddl-inventory.md`) se la policy di inventory lo richiede.","size_chars":390,"tokens_estimate":98}
{"doc_id":"ew-db-howto-create-table","path":"easyway-webapp/01_database_architecture/howto-create-table.md","title":"HowTo: creare una tabella","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Comandi","anchor_slug":"comandi","chunk_index":3,"content":"## Comandi\n- Esempio intent: `agents/agent_dba/templates/intent.db-table-create.sample.json`\n- Generazione (WhatIf):\n  - `pwsh scripts/agent-dba.ps1 -Action db-table:create -IntentPath agents/agent_dba/templates/intent.db-table-create.sample.json -WhatIf -NonInteractive`\n- Generazione (scrive file):\n  - `pwsh scripts/agent-dba.ps1 -Action db-table:create -IntentPath agents/agent_dba/templates/intent.db-table-create.sample.json -NonInteractive`","size_chars":447,"tokens_estimate":112}
{"doc_id":"ew-db-howto-create-table","path":"easyway-webapp/01_database_architecture/howto-create-table.md","title":"HowTo: creare una tabella","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Qual e' la pipeline corretta per aggiungere una tabella senza ambiguita?\n- Dove finiscono i file (Flyway, Wiki) e cosa e' canonico?\n- Come gestire PII/tenanting/RLS in modo governato?","size_chars":211,"tokens_estimate":53}
{"doc_id":"ew-easyway-webapp-01-database-architecture-index","path":"easyway-webapp/01_database_architecture/index.md","title":"Indice","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:25:33+01:00","section_level":2,"anchor_text":"Contesto","anchor_slug":"contesto","chunk_index":1,"content":"## Contesto\n- Source-of-truth DB (canonico): migrazioni Flyway in `db/flyway/sql/`.\n- Provisioning dev/local: wrapper `db/provisioning/apply-flyway.ps1` (human-in-the-loop).\n- Artefatti storici (non canonici): `old/db/` (ex `DataBase/` e export `DDL_PORTAL_*`).\n\n- [01a-db-setup.md](./01a-db-setup.md) - Setup DB (prerequisiti, ruoli, connessioni).\n- [01b-schema-structure.md](./01b-schema-structure.md) - Struttura schema e naming.\n- [ddl-inventory.md](./ddl-inventory.md) - Inventario tabelle/SP (rigenerato da Flyway: `db/flyway/sql/`).\n- [howto-create-table.md](./howto-create-table.md) - HowTo: creare una tabella (agentico, WHAT-first).","size_chars":642,"tokens_estimate":160}
{"doc_id":"ew-easyway-webapp-01-database-architecture-index","path":"easyway-webapp/01_database_architecture/index.md","title":"Indice","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:25:33+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Quali documenti devo leggere per installare e configurare il DB?\n- Dove trovo la struttura degli schemi e le regole di naming?\n- Qual è la lista “source-of-truth” di tabelle e stored procedure (da DDL)?\n- Quali sono i link canonici da usare nelle altre pagine DB?","size_chars":291,"tokens_estimate":73}
{"doc_id":"ew-db-portal","path":"easyway-webapp/01_database_architecture/portal.md","title":"portal","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:11:01+01:00","section_level":2,"anchor_text":"portal","anchor_slug":"portal","chunk_index":1,"content":"Obiettivo\n- Definire struttura, regole e best practice per le tabelle core del portale.\n\nSource of truth (repo)\n- DDL canonico (corrente): `db/flyway/sql/` (migrazioni incrementali)\n- Bootstrap dev/local: `db/provisioning/apply-flyway.ps1` (wrapper; applica Flyway con conferma)\n- Archivio storico: `old/db/` (non canonico)\n- Inventario (Wiki): `easyway-webapp/01_database_architecture/ddl-inventory.md`\n\nColonne standard\n- id (INT IDENTITY, PK), tenant_id (NVARCHAR(50), NOT NULL), created_by/created_at/updated_at (default), status (NVARCHAR(50)), ext_attributes (NVARCHAR(MAX)).\n\nTabelle principali\n- TENANT: anagrafica clienti (tenant_id univoco, plan_code, estensioni JSON)\n- USERS: utenti multi-tenant (user_id univoco per tenant, email univoca per tenant, ACL, is_active)\n- CONFIGURATION: parametri runtime (univocità per tenant+section+key, enabled)\n- LOG_AUDIT: eventi sistema/API/job (payload JSON)\n- STATS_EXECUTION_LOG: log di esecuzione SP, righe affette, esito\n- STATS_EXECUTION_TABLE_LOG: dettaglio per tabella (FK → execution_id)\n\nIndice & performance\n- Unicità: TENANT(tenant_id), USERS(tenant_id,user_id), USERS(tenant_id,email)\n- Filtri tipici: (tenant_id), (status), (created_at)\n\nNote\n- RLS e funzioni predicate verranno aggiunte in una migrazione dedicata.","size_chars":1278,"tokens_estimate":320}
{"doc_id":"ew-db-sequence","path":"easyway-webapp/01_database_architecture/sequence.md","title":"sequence","owner":"team-data","tags":"artifact/sequence","entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"sequence","anchor_slug":"sequence","chunk_index":1,"content":"Sequence principali (PORTAL)\n- SEQ_TENANT_ID → genera parte numerica di TENxxxxx (start 1000)\n- SEQ_USER_ID → genera parte numerica di CDIxxxxx (start 1000)\n- SEQ_TENANT_ID_DEBUG / SEQ_USER_ID_DEBUG → sequenze per inserimenti di test\n\nRegola\n- Le SP di insert formattano il codice finale (prefisso + padding) se non fornito in input.","size_chars":333,"tokens_estimate":83}
{"doc_id":"ew-db-storeprocess","path":"easyway-webapp/01_database_architecture/storeprocess.md","title":"storeprocess","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:11:22+01:00","section_level":2,"anchor_text":"storeprocess","anchor_slug":"storeprocess","chunk_index":1,"content":"Standard SP\n- Parametri chiari (in/out), `@created_by` obbligatorio\n- Transazione + TRY/CATCH\n- Logging: `PORTAL.sp_log_stats_execution` (+ `sp_log_stats_table` ove utile)\n- Output JSON-friendly: `status`, `id/code`, `error_message`, `rows_*`\n- Versione `sp_debug_*` per ambienti test\n\nSource of truth (repo)\n- DDL canonico (corrente): `db/flyway/sql/` (migrazioni incrementali)\n- Bootstrap dev/local (debug/utility): `db/provisioning/apply-flyway.ps1` (wrapper; applica Flyway con conferma)\n- Archivio storico: `old/db/` (non canonico)\n- Inventario (Wiki): `easyway-webapp/01_database_architecture/ddl-inventory.md`\n- SP per area (Wiki): `easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/index.md`\n\nCategorie principali\n- Setup/Utility, Tenant, Users, ACL/Profile Domains, Section Access, Config/Subscription, Notifications, Audit/Masking/RLS, Stats/Monitoring, Debug/Diagnostics\n\nProssimi passi\n- Migrazioni dedicate per SP core e versioni debug","size_chars":999,"tokens_estimate":250}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":1,"content":"## ✅ Scopo del file\n\nQuesto documento descrive tutte le tabelle anagrafiche, di ACL, di configurazione e di subscription dello schema `PORTAL` di EasyWay Data Portal, secondo le best practice multi-tenant SaaS.\n\n---","size_chars":215,"tokens_estimate":54}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"📋 **Riepilogo tabelle principali schema PORTAL**\r","anchor_slug":"riepilogo-tabelle-principali-schema-portal","chunk_index":2,"content":"## 📋 **Riepilogo tabelle principali schema PORTAL**\n\n| Tabella                    | Scopo/Funzione                                      | Note Chiave                              |\r\n|----------------------------|-----------------------------------------------------|-------------------------------------------|\r\n| TENANT                     | Anagrafica clienti/tenant SaaS                      | Un tenant = un’azienda o cliente          |\r\n| SUBSCRIPTION               | Stato abbonamento, scadenze, pagamenti              | Stripe/PayPal/Nexi, nessun dato carta     |\r\n| PROFILE_DOMAINS            | Profili/ruoli utente (ACL, permessi)                | Gestione ruoli e autorizzazioni           |\r\n| USERS                      | Utenti registrati (multi-tenant, NDG)               | Login locale/federato, tenant_id, ACL     |\r\n| SECTION_ACCESS             | Accesso sezioni portale per tenant                  | Sostenibilità, Data Quality, Ecommerce    |\r\n| USER_NOTIFICATION_SETTINGS | Preferenze di notifica utente                       | Email, alert, digest                      |\r\n| MASKING_METADATA           | Colonne soggette a mascheramento dati sensibili     | Compliance GDPR/SOC2, metadata masking    |\r\n| RLS_METADATA               | Row-Level Security, filtri per tenant su tabelle    | Sicurezza, filtri multi-tenant            |\r\n| CONFIGURATION              | Parametri, flag, chiavi, feature toggle             | Override per tenant/globali, API config   |\n\n---","size_chars":1486,"tokens_estimate":372}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Tenant (Cliente)**\r","anchor_slug":"1-tenant-cliente","chunk_index":3,"content":"### 1️⃣ **Tenant (Cliente)**\n\n> **Gestisce tutte le aziende/tenant che accedono alla piattaforma EasyWay.  \r\nOgni record corrisponde a un cliente (azienda, organizzazione, partita IVA, ecc).  \r\nIl campo `plan_code` definisce il piano commerciale attivo (BASE, BRONZE, SILVER, GOLD).  \r\nContiene estensioni custom JSON per dati aggiuntivi.**\n\n```sql\r\n-- Anagrafica Tenant (Cliente/azienda)\r\nCREATE TABLE PORTAL.TENANT (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50) NOT NULL UNIQUE,      -- Codice NDG es. TEN00000001000\r\n    name NVARCHAR(255) NOT NULL,                 -- Ragione sociale/nome visualizzato\r\n    plan_code NVARCHAR(50) NOT NULL,             -- BASE, BRONZE, SILVER, GOLD\r\n    ext_attributes NVARCHAR(MAX),                -- Estensioni JSON custom\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME()\r\n);\r\n```sql","size_chars":929,"tokens_estimate":232}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Abbonamenti / Subscription**\r","anchor_slug":"2-abbonamenti-subscription","chunk_index":4,"content":"### 2️⃣ **Abbonamenti / Subscription**\r\nTiene traccia degli abbonamenti attivi, delle scadenze, e del provider di pagamento esterno (Stripe, PayPal, Nexi).  \r\nMai salvare dati carta, solo ID/token transazione!  \r\nPermette logica di rinnovo, scadenza, upgrade/downgrade piani.\n\n```sql\r\n-- Gestione abbonamenti, scadenze, stato pagamento\r\nCREATE TABLE PORTAL.SUBSCRIPTION (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50) NOT NULL,                 -- FK PORTAL.TENANT.tenant_id\r\n    plan_code NVARCHAR(50) NOT NULL,                 -- Piano commerciale scelto\r\n    status NVARCHAR(50) NOT NULL,                    -- ACTIVE, EXPIRED, SUSPENDED, ecc.\r\n    start_date DATETIME2 NOT NULL,\r\n    end_date DATETIME2 NOT NULL,\r\n    external_payment_id NVARCHAR(100),               -- ID Stripe/PayPal/Nexi\r\n    payment_provider NVARCHAR(50),                   -- Stripe, PayPal, Nexi, ecc.\r\n    last_payment_date DATETIME2,\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    FOREIGN KEY (tenant_id) REFERENCES PORTAL.TENANT(tenant_id)\r\n);\r\n```sql","size_chars":1180,"tokens_estimate":295}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Profili utente (ACL)**\r","anchor_slug":"3-profili-utente-acl","chunk_index":5,"content":"### 3️⃣ **Profili utente (ACL)**\r\nElenco dei profili ACL/ruoli disponibili nel portale.  \r\nOgni utente avrà un profilo associato (es: TENANT_ADMIN, VIEWER, SCHEDULER).  \r\nLe descrizioni e le estensioni JSON permettono di personalizzare permessi e visibilità.\n\n```SQL\r\n-- Domini di profilo ACL\r\nCREATE TABLE PORTAL.PROFILE_DOMAINS (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    profile_code NVARCHAR(50) NOT NULL UNIQUE,        -- Es. TENANT_ADMIN, VIEWER\r\n    description NVARCHAR(255),\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME()\r\n);\r\n```sql","size_chars":666,"tokens_estimate":166}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Anagrafica Utenti**\r","anchor_slug":"4-anagrafica-utenti","chunk_index":6,"content":"### 4️⃣ **Anagrafica Utenti**\r\nTutti gli utenti abilitati al portale, con login locale o federato (Microsoft, Google, SAML, ecc).  \r\nInclude info su ACL, stato, e dati anagrafici minimi.  \r\nNessuna password in chiaro, solo hash lato app.\n\n```SQL\r\n-- Utenti multi-tenant\r\nCREATE TABLE PORTAL.USERS (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    user_id NVARCHAR(50) NOT NULL UNIQUE,             -- Codice NDG es. CDI00000001000\r\n    tenant_id NVARCHAR(50) NOT NULL,                  -- FK PORTAL.TENANT.tenant_id\r\n    email NVARCHAR(255) NOT NULL,\r\n    name NVARCHAR(100),\r\n    surname NVARCHAR(100),\r\n    password NVARCHAR(255),                           -- Password hashata (NULL se federato)\r\n    provider NVARCHAR(50),                            -- Provider federato, NULL=locale\r\n    provider_user_id NVARCHAR(255),\r\n    status NVARCHAR(50),\r\n    profile_code NVARCHAR(50) NOT NULL,               -- FK PROFILE_DOMAINS\r\n    is_tenant_admin BIT,\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    FOREIGN KEY (tenant_id) REFERENCES PORTAL.TENANT(tenant_id),\r\n    FOREIGN KEY (profile_code) REFERENCES PORTAL.PROFILE_DOMAINS(profile_code)\r\n);\r\n```sql","size_chars":1275,"tokens_estimate":319}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"5️⃣ **Accesso sezioni Portale**\r","anchor_slug":"5-accesso-sezioni-portale","chunk_index":7,"content":"### 5️⃣ **Accesso sezioni Portale**\r\nGestione dell’abilitazione/disabilitazione di specifiche sezioni (Sostenibilità, Data Quality, Ecommerce, ecc.) per ogni tenant.  \r\nPermette la visibilità granulare delle funzioni offerte a ciascun cliente.\n\n```SQL\r\n-- Gestione abilitazione sezioni portale per tenant\r\nCREATE TABLE PORTAL.SECTION_ACCESS (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50) NOT NULL,              -- FK PORTAL.TENANT.tenant_id\r\n    section_code NVARCHAR(50),                    -- Es. SOSTENIBILITA, DATAQUALITY\r\n    is_enabled BIT,\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    FOREIGN KEY (tenant_id) REFERENCES PORTAL.TENANT(tenant_id)\r\n);\r\n```sql","size_chars":815,"tokens_estimate":204}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"5️⃣ **Accesso sezioni Portale** (Policy Section Access custom)\r","anchor_slug":"5-accesso-sezioni-portale-policy-section-access-custom","chunk_index":8,"content":"## 5️⃣ **Accesso sezioni Portale** (Policy Section Access custom)\n\nGestione avanzata e flessibile di quali sezioni/funzionalità (Sostenibilità, Data Quality, Ecommerce, ecc.)  \r\nsono abilitate/disabilitate per ogni tenant, profilo ACL, o singolo utente, con supporto per accessi temporanei, permessi premium, override granulari.\n\n**La tabella PORTAL.SECTION_ACCESS consente policy custom con questa logica:**","size_chars":408,"tokens_estimate":102}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"📑 **Tabellina campi chiave**\r","anchor_slug":"tabellina-campi-chiave","chunk_index":9,"content":"### 📑 **Tabellina campi chiave**\r\n| Campo        | Uso/Funzione                                    | Note                                  |\r\n|--------------|-------------------------------------------------|---------------------------------------|\r\n| tenant_id    | Tenant destinatario della policy                | FK obbligatoria                       |\r\n| section_code | Codice sezione (es. SOSTENIBILITA, ECOMMERCE)   |                                       |\r\n| profile_code | (opzionale) Profilo ACL per granularità         | Per controllare su ruoli specifici     |\r\n| user_id      | (opzionale) Utente specifico per override       | Per abilitare/disabilitare singolo     |\r\n| is_enabled   | Flag abilitazione/disabilitazione               | 1 = abilitato, 0 = disabilitato        |\r\n| valid_from/to| Periodo validità policy (accesso temporaneo)    | Per “feature a scadenza”               |\r\n| ext_attributes| JSON con permessi extra, note, motivazioni     | Audit, motivazioni override, tag       |","size_chars":1010,"tokens_estimate":252}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"🏗️ **DDL con estensioni**\r","anchor_slug":"ddl-con-estensioni","chunk_index":10,"content":"### 🏗️ **DDL con estensioni**\r\n```sql\r\nCREATE TABLE PORTAL.SECTION_ACCESS (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50) NOT NULL,              -- FK PORTAL.TENANT.tenant_id\r\n    section_code NVARCHAR(50),                    -- Es: SOSTENIBILITA, DATAQUALITY, ECOMMERCE\r\n    profile_code NVARCHAR(50) NULL,               -- (opzionale) FK PROFILE_DOMAINS per granularità su profilo\r\n    user_id NVARCHAR(50) NULL,                    -- (opzionale) FK USERS per override singolo utente\r\n    is_enabled BIT,                               -- Flag attiva/disattiva\r\n    valid_from DATETIME2 NULL,                    -- Periodo di validità (custom access temporanei)\r\n    valid_to DATETIME2 NULL,\r\n    ext_attributes NVARCHAR(MAX),                 -- Campi custom (es. JSON con note o permessi extra)\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    FOREIGN KEY (tenant_id) REFERENCES PORTAL.TENANT(tenant_id)\r\n    -- FK opzionali su profile_code, user_id se vuoi enforcement SQL\r\n);\r\n```sql\r\nEsempi pratici di policy custom:\r\n| tenant_id | section_code | profile_code | user_id | is_enabled | valid_from | valid_to | ext_attributes |\r\n| --- | --- | --- | --- | --- | --- | --- | --- |\r\n| TEN0000000100 | SOSTENIBILITA | NULL | NULL | 1 | NULL | NULL | NULL |\r\n| TEN0000000100 | ECOMMERCE | VIEWER | NULL | 0 | NULL | NULL | NULL |\r\n| TEN0000000101 | DATAQUALITY | NULL | CDI0000002 | 1 | 2025-01-01 | 2025-12-31 | {\"note\":\"accesso premium\"} |\n\n\r\n**Best practice:**\r\n*   Usa ext_attributes per motivazioni di override, permessi temporanei, note audit\r\n    \r\n*   Audit ogni modifica tramite LOG_AUDIT\r\n    \r\n*   Mantieni la granularità solo dove necessario (tenant > profilo > utente > periodo > custom)\r\n    \r\n*   Struttura sempre pronta a essere estesa per nuove sezioni/funzioni","size_chars":1889,"tokens_estimate":472}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"6️⃣ **Preferenze Notifica Utente**\r","anchor_slug":"6-preferenze-notifica-utente","chunk_index":11,"content":"### 6️⃣ **Preferenze Notifica Utente**\n\nConfigurazione delle preferenze di notifica per ogni utente (upload, alert, digest).  \r\nLa tabella permette la gestione avanzata di notifiche personalizzate per utente/tenant.\n\n```SQL\r\n-- Preferenze notifica granulari per utente\r\nCREATE TABLE PORTAL.USER_NOTIFICATION_SETTINGS (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50) NOT NULL,                  -- FK PORTAL.TENANT.tenant_id\r\n    user_id NVARCHAR(50) NOT NULL,                    -- FK PORTAL.USERS.user_id\r\n    notify_on_upload BIT,\r\n    notify_on_alert BIT,\r\n    notify_on_digest BIT,\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    FOREIGN KEY (tenant_id) REFERENCES PORTAL.TENANT(tenant_id),\r\n    FOREIGN KEY (user_id) REFERENCES PORTAL.USERS(user_id)\r\n);\r\n```sql","size_chars":912,"tokens_estimate":228}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"7️⃣ **Mascheramento dati sensibili (GDPR, SOC2, ISO27001, DORA)**\r","anchor_slug":"7-mascheramento-dati-sensibili-gdpr-soc2-iso27001-dora","chunk_index":12,"content":"### 7️⃣ **Mascheramento dati sensibili (GDPR, SOC2, ISO27001, DORA)**\r\nRegistra tutte le colonne soggette a mascheramento (Dynamic Data Masking),  \r\ncon regole, note e dettagli per compliance e audit.  \r\nUsata da funzioni e policy di sicurezza.\n\n```SQL\r\n-- Metadata colonne da mascherare (GDPR/SOC2)\r\nCREATE TABLE PORTAL.MASKING_METADATA (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50),                         -- NULL = globale, valorizzato = per tenant\r\n    schema_name NVARCHAR(50),\r\n    table_name NVARCHAR(100),\r\n    column_name NVARCHAR(100),\r\n    mask_type NVARCHAR(50),\r\n    note NVARCHAR(255),\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME()\r\n);\r\n```sql","size_chars":804,"tokens_estimate":201}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"8️⃣ **Row-Level Security (RLS) Metadata**\r","anchor_slug":"8-row-level-security-rls-metadata","chunk_index":13,"content":"### 8️⃣ **Row-Level Security (RLS) Metadata**\r\nTraccia le policy di Row-Level Security applicate alle tabelle per filtraggio automatico  \r\nsui dati per tenant, garantendo isolamento dati, sicurezza multi-tenant, auditing.\r\n```SQL\r\n-- Metadata Row-Level Security\r\nCREATE TABLE PORTAL.RLS_METADATA (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50),                         -- NULL = globale, valorizzato = per tenant\r\n    schema_name NVARCHAR(50),\r\n    table_name NVARCHAR(100),\r\n    column_name NVARCHAR(100),\r\n    policy_name NVARCHAR(100),\r\n    predicate_function NVARCHAR(255),\r\n    note NVARCHAR(255),\r\n    ext_attributes NVARCHAR(MAX),\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME()\r\n);\r\n```sql","size_chars":804,"tokens_estimate":201}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"9️⃣ **Configurazione globale/tenant**\r","anchor_slug":"9-configurazione-globaletenant","chunk_index":14,"content":"### 9️⃣ **Configurazione globale/tenant**\r\nGestione centralizzata dei parametri di configurazione della piattaforma,  \r\nflag, feature toggle, chiavi API, limiti, soglie, override per tenant e parametri globali.  \r\nEstensibile e auditabile.\n\n```SQL\r\n-- Parametri di configurazione e flag globali/per-tenant\r\nCREATE TABLE PORTAL.CONFIGURATION (\r\n    id INT IDENTITY(1,1) PRIMARY KEY,\r\n    tenant_id NVARCHAR(50),                              -- NULL = globale, valorizzato = per tenant\r\n    config_key NVARCHAR(100) NOT NULL,\r\n    config_value NVARCHAR(MAX) NOT NULL,\r\n    description NVARCHAR(255),\r\n    is_active BIT DEFAULT 1,\r\n    created_by NVARCHAR(255),\r\n    created_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    updated_at DATETIME2 DEFAULT SYSUTCDATETIME(),\r\n    UNIQUE (tenant_id, config_key)\r\n);\r\n```sql\n\n📝 **Best practice & note operative**\r\n-------------------------------------\n\n*   Ogni tabella preceduta da commento descrittivo\r\n    \r\n*   Tabellina riepilogativa delle tabelle all’inizio della sezione\r\n    \r\n*   PK/FK obbligatorie in tutte le anagrafiche principali\r\n    \r\n*   Surrogate key INT (`id`) + chiave NDG (`tenant_id`, `user_id`) sempre\r\n    \r\n*   `ext_attributes` come JSON per campi custom per tenant/utente\r\n    \r\n*   NO dati sensibili (carta, CVC, ecc.) in alcuna tabella: solo ID/token forniti da provider\r\n    \r\n*   Audit e compliance: tutti i cambiamenti devono essere tracciati\r\n    \r\n*   Configurazione: parametri e flag in PORTAL.CONFIGURATION, override per tenant\r\n    \r\n*   Abbonamento: stato abilitato/disabilitato sempre verificato via SUBSCRIPTION","size_chars":1586,"tokens_estimate":396}
{"doc_id":"ew-portal","path":"easyway-webapp/01_database_architecture/01b_schema_structure/portal.md","title":"EasyWay Data Portal - PORTAL.md","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":2,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":3,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":278,"tokens_estimate":70}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":4,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":232,"tokens_estimate":58}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":5,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":6,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":211,"tokens_estimate":53}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":7,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":8,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":278,"tokens_estimate":70}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":9,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":232,"tokens_estimate":58}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":10,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":301,"tokens_estimate":75}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":11,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":12,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":278,"tokens_estimate":70}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":232,"tokens_estimate":58}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":14,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-programmability","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":15,"content":"## Collegamenti\n- [Entities Index](../../../../entities-index.md)","size_chars":65,"tokens_estimate":16}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":2,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":3,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1686,"tokens_estimate":422}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":5,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1640,"tokens_estimate":410}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":6,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":7,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":8,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1619,"tokens_estimate":405}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":9,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":10,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":11,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1686,"tokens_estimate":422}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":12,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1640,"tokens_estimate":410}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":14,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":15,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1709,"tokens_estimate":427}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":16,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":17,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":18,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1686,"tokens_estimate":422}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":19,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":20,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section -- Modello in uso: Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n-- Queste funzioni sono da creare nello schema PORTAL.\n\n-- ========================\n-- 1️⃣ Funzione PRODUZIONE: Generazione tenant_id (TEN00000001000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n    RETURN 'TEN' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n-- ========================\n-- 2️⃣ Funzione PRODUZIONE: Generazione user_id (CDI00000001000)\n-- ========================\n\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n    RETURN 'CDI' + RIGHT('000000000' + CAST(@seq AS NVARCHAR), 9);\nEND\nGO\n```sql\n\n-- ========================\n-- 3️⃣ Funzione DEBUG: Generazione tenant_id di test (TENDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_tenant_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n    RETURN 'TENDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql\n\n-- ========================\n-- 4️⃣ Funzione DEBUG: Generazione user_id di test (CDIDEBUG000)\n-- ========================\n```sql\nCREATE FUNCTION PORTAL.fn_next_user_id_debug()\nRETURNS NVARCHAR(50)\nAS\nBEGIN\n    DECLARE @seq INT = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n    RETURN 'CDIDEBUG' + RIGHT('000' + CAST(@seq AS NVARCHAR), 3);\nEND\nGO\n```sql","size_chars":1640,"tokens_estimate":410}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":21,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":22,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-function","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/function.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":23,"content":"## Collegamenti\n- [Entities Index](../../../../../entities-index.md)","size_chars":68,"tokens_estimate":17}
{"doc_id":"ew-portal-programmability-index","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/index.md","title":"Indice","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:35:48+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Dove trovare guide e template per function/sequence/stored procedure?\n- Quali regole di naming e policy applicare prima di creare un nuovo artefatto?\n- Dove consultare l’indice delle stored procedure già documentate?\n- Quali link canonici usare quando documento una nuova SP?","size_chars":303,"tokens_estimate":76}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":1,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":2,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":3,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":5,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.","size_chars":54,"tokens_estimate":14}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL\r","anchor_slug":"schemaddl","chunk_index":6,"content":"## Schema/DDL\r\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\r\n`sql\r\n-- Esempio DDL idempotente\r\n`\r\n\"@\r\n  # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":289,"tokens_estimate":72}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":7,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":8,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":9,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":10,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":11,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n = Ensure-Section # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":239,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":12,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":13,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":14,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":16,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n 'Vincoli e Indici' @\"\r\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":125,"tokens_estimate":31}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query\r","anchor_slug":"esempi-query","chunk_index":17,"content":"## Esempi Query\r\n`sql\r\n-- SELECT ... FROM ...\r\n`\r\n\"@\r\n  # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":221,"tokens_estimate":55}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":18,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":19,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":20,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":21,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":22,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.","size_chars":54,"tokens_estimate":14}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL\r","anchor_slug":"schemaddl","chunk_index":23,"content":"## Schema/DDL\r\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\r\n`sql\r\n-- Esempio DDL idempotente\r\n`\r\n\"@\r\n  # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":289,"tokens_estimate":72}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":24,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":25,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":26,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":27,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":28,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n = Ensure-Section # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":239,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":29,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":30,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":31,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":32,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":33,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n 'Vincoli e Indici' @\"\r\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\r\n = Ensure-Section # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":310,"tokens_estimate":78}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":34,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":35,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":36,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":37,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":38,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.","size_chars":54,"tokens_estimate":14}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL\r","anchor_slug":"schemaddl","chunk_index":39,"content":"## Schema/DDL\r\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\r\n`sql\r\n-- Esempio DDL idempotente\r\n`\r\n\"@\r\n  # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":289,"tokens_estimate":72}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":40,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":41,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":42,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":43,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":44,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n = Ensure-Section # EasyWay Data Portal – SEQUENCE\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG univoche, ext_attributes, RLS, auditing).\n\n---","size_chars":239,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del file\r","anchor_slug":"scopo-del-file","chunk_index":45,"content":"## ✅ Scopo del file\n\nDefinire tutte le **sequence numeriche** utilizzate per la generazione dei codici NDG (tenant, user, ecc.)  \r\nsia in produzione che in debug/test, garantendo tracciabilità e nessuna collisione tra dati reali e mock.\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"1️⃣ Sequence PRODUZIONE (NDG reali)\r","anchor_slug":"1-sequence-produzione-ndg-reali","chunk_index":46,"content":"## 1️⃣ Sequence PRODUZIONE (NDG reali)\n\n```sql\r\n-- Sequence per tenant_id (NDG es. TEN00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\n\n-- Sequence per user_id (NDG es. CDI00000001000)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID\r\n    AS INT\r\n    START WITH 1000\r\n    INCREMENT BY 1;\r\n```sql","size_chars":338,"tokens_estimate":84}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"2️⃣ Sequence DEBUG/TEST (codici demo)\r","anchor_slug":"2-sequence-debugtest-codici-demo","chunk_index":47,"content":"## 2️⃣ Sequence DEBUG/TEST (codici demo)\n\n```sql\r\n-- Sequence di debug per tenant_id (codici: TENDEBUG000 ... TENDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_TENANT_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\n\n-- Sequence di debug per user_id (codici: CDIDEBUG000 ... CDIDEBUG999)\r\nCREATE SEQUENCE PORTAL.SEQ_USER_ID_DEBUG\r\n    AS INT\r\n    START WITH 0\r\n    INCREMENT BY 1\r\n    MINVALUE 0\r\n    MAXVALUE 999\r\n    CYCLE;\r\n```sql","size_chars":480,"tokens_estimate":120}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":48,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":49,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n 'Vincoli e Indici' @\"\r\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\r\n 'Domande a cui risponde' @\"\r\n- Cosa fa?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":281,"tokens_estimate":70}
{"doc_id":"ew-sequence","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/sequence.md","title":"EasyWay Data Portal - SEQUENCE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti\r","anchor_slug":"collegamenti","chunk_index":50,"content":"## Collegamenti\r\n- [Entities Index](../../../../../entities-index.md)","size_chars":69,"tokens_estimate":17}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":1,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":2,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---","size_chars":1075,"tokens_estimate":269}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"Riferimento agentico (breve)\r","anchor_slug":"riferimento-agentico-breve","chunk_index":3,"content":"### Riferimento agentico (breve)\n\nPer supportare la creazione automatizzata da agenti (LLM/tooling) di DDL/SP conformi agli standard EasyWay:\r\n- Linee guida agentiche: vedere `docs/agentic/AGENTIC_READINESS.md:1`\r\n- Template SQL pronti: `docs/agentic/templates/ddl/template_table.sql:1` e `docs/agentic/templates/sp/*.sql:1`\r\n- Esempi concreti (Users/Onboarding): `easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md:1`\n\nGli agenti devono usare template idempotenti (CREATE OR ALTER, IF NOT EXISTS), prevedere variante `_DEBUG`, e garantire logging su `PORTAL.STATS_EXECUTION_LOG` in ogni SP.\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":763,"tokens_estimate":191}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":4,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":5,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":6,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":7,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":8,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":9,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":10,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":11,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":12,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":13,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":14,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.","size_chars":54,"tokens_estimate":14}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL\r","anchor_slug":"schemaddl","chunk_index":15,"content":"## Schema/DDL\r\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\r\n`sql\r\n-- Esempio DDL idempotente\r\n`\r\n\"@\r\n  # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":341,"tokens_estimate":85}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":16,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":17,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":18,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":19,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":20,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":21,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":22,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":23,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":24,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":25,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":26,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":27,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":28,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n = Ensure-Section # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":291,"tokens_estimate":73}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":29,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":30,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":31,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":32,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":33,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":34,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":35,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":36,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":37,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":38,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":39,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":40,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":41,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n 'Vincoli e Indici' @\"\r\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":125,"tokens_estimate":31}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query\r","anchor_slug":"esempi-query","chunk_index":42,"content":"## Esempi Query\r\n`sql\r\n-- SELECT ... FROM ...\r\n`\r\n\"@\r\n  # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":273,"tokens_estimate":68}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":43,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":44,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":45,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":46,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":47,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":48,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":49,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":50,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":51,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":52,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":53,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":54,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":55,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.","size_chars":54,"tokens_estimate":14}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL\r","anchor_slug":"schemaddl","chunk_index":56,"content":"## Schema/DDL\r\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\r\n`sql\r\n-- Esempio DDL idempotente\r\n`\r\n\"@\r\n  # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":341,"tokens_estimate":85}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":57,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":58,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":59,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":60,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":61,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":62,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":63,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":64,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":65,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":66,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":67,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":68,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":69,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n = Ensure-Section # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":291,"tokens_estimate":73}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":70,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":71,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":72,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":73,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":74,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":75,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":76,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":77,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":78,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":79,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":80,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":81,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":82,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n 'Vincoli e Indici' @\"\r\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\r\n = Ensure-Section # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":362,"tokens_estimate":90}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":83,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":84,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":85,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":86,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":87,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":88,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":89,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":90,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":91,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":92,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":93,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":94,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":95,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.","size_chars":54,"tokens_estimate":14}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL\r","anchor_slug":"schemaddl","chunk_index":96,"content":"## Schema/DDL\r\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\r\n`sql\r\n-- Esempio DDL idempotente\r\n`\r\n\"@\r\n  # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":341,"tokens_estimate":85}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":97,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":98,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":99,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":100,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":101,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":102,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":103,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":104,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":105,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":106,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":107,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":108,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":109,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n = Ensure-Section # EasyWay Data Portal – STORE PROCEDURE: Linee Guida, Best Practice e Template\n\n> **Modello in uso:** Nexus Multi-Tenant (anagrafiche larghe, surrogate key INT, NDG, ext_attributes, auditing, logging automatico).\n\n---","size_chars":291,"tokens_estimate":73}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"✅ Scopo del documento\r","anchor_slug":"scopo-del-documento","chunk_index":110,"content":"## ✅ Scopo del documento\n\nDefinire e standardizzare la **struttura, i pattern, e le best practice** delle store procedure (SP) per EasyWay Data Portal.  \r\nObiettivo: **nessun dato chiave inserito manualmente**, **tutto tracciato**, massima robustezza per AMS, DevOps, audit.\n\n---","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"**Principi generali EasyWay per Store Process**\r","anchor_slug":"principi-generali-easyway-per-store-process","chunk_index":111,"content":"### **Principi generali EasyWay per Store Process**\n\n- **Tutto l’onboarding, le operazioni DML, e la logica applicativa passano sempre da store procedure.**\r\n- **Nessun insert/update diretto sulle tabelle anagrafiche e di business.**\r\n- **Ogni store procedure aggiorna sempre i campi di auditing (`created_by`, `created_at`, `updated_at`).**\r\n- **Tutte le SP devono scrivere SEMPRE un record su `PORTAL.STATS_EXECUTION_LOG`** con:\r\n    - nome procedura,\r\n    - tenant_id, user_id,\r\n    - righe inserite/aggiornate/cancellate,\r\n    - start_time, end_time, durata,\r\n    - status (`OK`/`ERROR`),\r\n    - error_message se presente,\r\n    - tabelle impattate, tipo operazione, chi ha eseguito.\r\n- **Ogni store procedure importante** (soprattutto quelle richiamate da API/servizi/portale) ha anche la versione `_DEBUG`:\r\n    - Usa sequence e codici di test (es. `TENDEBUG001`)\r\n    - Parametri di default per demo, UAT, sandbox, DevOps\r\n    - Sempre logging su `PORTAL.STATS_EXECUTION_LOG`\r\n- **Gestione errori atomica:** TRY/CATCH, ROLLBACK su errore, transazione sempre chiusa\n\n---\n\n🚦 **Roadmap Operativa Store Procedure EasyWay Data Portal**\r\n------------------------------------------------------------","size_chars":1199,"tokens_estimate":300}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"1️⃣ **Regole fisse**\r","anchor_slug":"1-regole-fisse","chunk_index":112,"content":"### 1️⃣ **Regole fisse**\n\n*   Tutte le DML su tabelle principali si fanno **SOLO tramite store process**.\r\n    \r\n*   Ogni store process esegue **logging completo su `PORTAL.STATS_EXECUTION_LOG`** (e tabella TABLE_LOG se necessario).\r\n    \r\n*   **DEBUG**: ogni store ha sempre la sua versione di test (sequence e NDG separati).\r\n    \r\n*   La logica NDG (tenant/user) viene sempre generata dentro la store (mai lato API).\r\n    \r\n*   **Gestione atomica (TRY/CATCH + TRANSACTION)** sempre, rollback automatico su errore.\r\n    \r\n*   **`created_by` di default = nome SP** (o servizio/utente passato in input).\r\n    \n\n* * *","size_chars":616,"tokens_estimate":154}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"2️⃣ **Prossimi step e template**\r","anchor_slug":"2-prossimi-step-e-template","chunk_index":113,"content":"### 2️⃣ **Prossimi step e template**\n\nPer ogni tabella chiave di PORTAL (e analoghe in altri schema), fornirò:\r\n*   **Store di INSERT** (con NDG, auditing, logging)\r\n    \r\n*   **Store di UPDATE** (per scenari reali, aggiornamento sicuro e tracciato)\r\n    \r\n*   **Store di DELETE “safe”** (soft delete, flag, o logga tutto)\r\n    \r\n*   **Versione DEBUG per ogni store**\r\n    \r\n*   **Documentazione .md pronta per Wiki**\r\n    \n\n* * *","size_chars":430,"tokens_estimate":108}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\r","anchor_slug":"3-esempio-template-standard-insertupdatedelete","chunk_index":114,"content":"### 3️⃣ **Esempio template standard INSERT/UPDATE/DELETE**\n\n(già pronto per pipeline, API, batch, ecc.)\n\n#### **a) INSERT (Onboarding/Creazione)**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_[TABLE]     -- parametri tabella... AS BEGIN     SET NOCOUNT ON;     -- transazione, insert, auditing, logging END GO\r\n```sql\n\n#### **b) UPDATE**\n\n```sql \r\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, update, auditing, logging END GO`\r\n```sql\r\n#### **c) DELETE / SOFT DELETE**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_[TABLE]     -- parametri... AS BEGIN     SET NOCOUNT ON;     -- transazione, soft delete (flag), logging END GO\r\n```sql\r\n#### **d) DEBUG**\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_[TABLE] AS BEGIN     -- chiama insert con parametri demo/sandbox, usa sequence debug END GO`\r\n```sql\n\n* * *","size_chars":907,"tokens_estimate":227}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"4️⃣ **Automazione della documentazione**\r","anchor_slug":"4-automazione-della-documentazione","chunk_index":115,"content":"### 4️⃣ **Automazione della documentazione**\n\nTutte le SP saranno documentate in **Markdown** pronto per Azure DevOps.  \r\nLe sezioni per ogni store sono sempre:\n\n| Sezione | Contenuto |\r\n| --- | --- |\r\n| Scopo | Cosa fa la store |\r\n| Parametri | Elenco parametri e descrizione |\r\n| Logica Dati | Dettaglio di business (NDG, auditing, ecc.) |\r\n| Logging | Modalità di tracking e error handling |\r\n| Debug | Differenze rispetto alla produzione |\r\n| Esempi | Chiamata reale/test |\r\n| Versione | Data, autore, note AMS/DevOps |","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"**Template** ##\r","anchor_slug":"template","chunk_index":116,"content":"## **Template** ##","size_chars":18,"tokens_estimate":4}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":117,"content":"## Template standard EasyWay (produzione)\n\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255),\r\n    @plan_code NVARCHAR(50),\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255),\r\n    @name NVARCHAR(100),\r\n    @surname NVARCHAR(100),\r\n    @password NVARCHAR(255) = NULL,\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = NULL\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\r\n    DECLARE @rows_inserted INT = 0, @rows_updated INT = 0, @rows_deleted INT = 0;\r\n    DECLARE @status NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        -- NDG tenant_id se mancante\r\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\r\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\r\n        END\n\n        -- NDG user_id se mancante\r\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\r\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\r\n        END\n\n        -- Tenant\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, created_by)\r\n            VALUES (@tenant_id, @tenant_name, @plan_code, COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Profilo admin se manca\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = 'TENANT_ADMIN')\r\n        BEGIN\r\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, created_by)\r\n            VALUES ('TENANT_ADMIN', 'Amministratore Tenant', COALESCE(@created_by, 'sp_register_tenant_and_user'));\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END","size_chars":2218,"tokens_estimate":554}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":118,"content":"        -- User admin\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USERS (\r\n                user_id, tenant_id, email, name, surname, password,\r\n                provider, provider_user_id, profile_code, is_tenant_admin, created_by\r\n            )\r\n            VALUES (\r\n                @user_id, @tenant_id, @email, @name, @surname, @password,\r\n                @provider, @provider_user_id, 'TENANT_ADMIN', 1, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        -- Notifiche default\r\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE user_id = @user_id)\r\n        BEGIN\r\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS (\r\n                tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, created_by\r\n            )\r\n            VALUES (\r\n                @tenant_id, @user_id, 1, 1, 0, COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n            );\r\n            SET @rows_inserted = @rows_inserted + 1;\r\n        END\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        SET @status = 'ERROR';\r\n        SET @error_message = ERROR_MESSAGE();\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    -- Logging obbligatorio\r\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_register_tenant_and_user', @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @status, @error_message,\r\n        @start_time, SYSUTCDATETIME(), DATEDIFF(MILLISECOND, @start_time, SYSUTCDATETIME()),\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', COALESCE(@created_by, 'sp_register_tenant_and_user')\r\n    );\r\nEND\r\n```sql","size_chars":2054,"tokens_estimate":514}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":119,"content":"3️⃣ Template DEBUG EasyWay\r\n```sql\r\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_id NVARCHAR(50) = NULL,\r\n    @tenant_name NVARCHAR(255) = 'Demo Tenant Srl',\r\n    @plan_code NVARCHAR(50) = 'BRONZE',\r\n    @user_id NVARCHAR(50) = NULL,\r\n    @email NVARCHAR(255) = 'debuguser+demo@easyway.it',\r\n    @name NVARCHAR(100) = 'Mario',\r\n    @surname NVARCHAR(100) = 'Debug',\r\n    @password NVARCHAR(255) = 'HASHED_PASSWORD',\r\n    @provider NVARCHAR(50) = NULL,\r\n    @provider_user_id NVARCHAR(255) = NULL,\r\n    @created_by NVARCHAR(255) = 'sp_debug_register_tenant_and_user'\r\nAS\r\nBEGIN\r\n    SET NOCOUNT ON;\r\n    -- Come sopra, ma sequence di debug e NDG debug\r\n    BEGIN TRY\r\n        BEGIN TRANSACTION;\n\n        IF @tenant_id IS NULL OR @tenant_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_tenant INT;\r\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\r\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\r\n        END\n\n        IF @user_id IS NULL OR @user_id = ''\r\n        BEGIN\r\n            DECLARE @next_seq_user INT;\r\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\r\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\r\n        END\n\n        -- Logica identica alla store principale...\n\n        COMMIT TRANSACTION;\r\n    END TRY\r\n    BEGIN CATCH\r\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\r\n    END CATCH\n\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\r\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, status, error_message,\r\n        start_time, end_time, duration_ms, affected_tables, operation_types, created_by\r\n    ) VALUES (\r\n        'sp_debug_register_tenant_and_user', @tenant_id, @user_id, 1, 0, 0, 'OK', NULL,\r\n        SYSUTCDATETIME(), SYSUTCDATETIME(), 0,\r\n        'PORTAL.TENANT,PORTAL.PROFILE_DOMAINS,PORTAL.USERS,PORTAL.USER_NOTIFICATION_SETTINGS',\r\n        'INSERT', 'sp_debug_register_tenant_and_user'\r\n    );\r\nEND\n\n```sql\r\n4️⃣ Best practice operative\r\n---------------------------","size_chars":2109,"tokens_estimate":527}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Template standard EasyWay (produzione)\r","anchor_slug":"template-standard-easyway-produzione","chunk_index":120,"content":"*   Tutte le SP usano sempre i parametri NDG e multi-tenant.\r\n    \r\n*   **Gestione logging/statistiche**: ogni esecuzione tracciata.\r\n    \r\n*   **Le versioni DEBUG** usano sempre ID e sequence separate, non “sporcano” la produzione.\r\n    \r\n*   **Nessuna insert manuale** sulle tabelle principali: sempre via SP.\r\n    \r\n*   **Modello pronto per future automazioni (CI/CD, pipeline, audit AMS, etc)**.\r\n    \n\n* * *\n\n5️⃣ Esempio pratico di chiamata\r\n-------------------------------\n\n```sql\r\nEXEC PORTAL.sp_register_tenant_and_user\r\n    @tenant_name = 'Acme Srl',\r\n    @plan_code = 'BRONZE',\r\n    @email = 'admin@acme.it',\r\n    @name = 'Mario',\r\n    @surname = 'Rossi',\r\n    @password = 'HASHED_PASSWORD',\r\n    @created_by = 'API_GATEWAY';\n\n```sql\r\n```sql\r\nEXEC PORTAL.sp_debug_register_tenant_and_user\r\n    @tenant_name = 'Tenant Test',\r\n    @plan_code = 'DEBUG',\r\n    @email = 'debug@easyway.it',\r\n    @name = 'Debug',\r\n    @surname = 'User',\r\n    @password = 'DEBUG_HASH',\r\n    @created_by = 'DEBUG_TOOL';\r\n```sql\n\n🔒 Ogni store process nuova/futura dovrà sempre seguire queste linee guida.","size_chars":1089,"tokens_estimate":272}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":121,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo\r","anchor_slug":"scopo","chunk_index":122,"content":"## Scopo\r\nBreve descrizione dello scopo del documento.\r\n 'Vincoli e Indici' @\"\r\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\r\n 'Domande a cui risponde' @\"\r\n- Cosa fa?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":281,"tokens_estimate":70}
{"doc_id":"ew-stored-procedure","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md","title":"EasyWay Data Portal - STORE PROCEDURE: Linee Guida, Best Practice e Template","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti\r","anchor_slug":"collegamenti","chunk_index":123,"content":"## Collegamenti\r\n- [Entities Index](../../../../../entities-index.md)","size_chars":69,"tokens_estimate":17}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"a) **sp_insert_configuration**","anchor_slug":"a-spinsertconfiguration","chunk_index":1,"content":"### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2131,"tokens_estimate":533}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":2,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":3,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":4,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\nllm:\n  include: true\n  pii: none\n  chunk_hint: 250-400\n  redaction: [email, phone]\nentities: []\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2358,"tokens_estimate":590}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":5,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":6,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":7,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":8,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":9,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":10,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":11,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":12,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":13,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":14,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2203,"tokens_estimate":551}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":15,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":16,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":17,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":18,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":19,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":20,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":21,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2182,"tokens_estimate":546}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":22,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":23,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":24,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":25,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":26,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":27,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":28,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":29,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":30,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":31,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":32,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":33,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":34,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2203,"tokens_estimate":551}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":35,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":36,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":37,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":38,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":39,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":40,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2272,"tokens_estimate":568}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":41,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":42,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":43,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":44,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":45,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":46,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":47,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":48,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":49,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":50,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":51,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":52,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":53,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_configuration**\n\n```sql\n\n--INIZIO SEZIONE STORE PROCEDURE CONFIGURATION \n--STORE PROCEDURE – INSERT CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.CONFIGURATION\n            WHERE tenant_id = @tenant_id AND config_key = @config_key\n        )\n        BEGIN\n            INSERT INTO PORTAL.CONFIGURATION (\n                tenant_id, config_key, config_value, description, is_active, created_by\n            )\n            VALUES (\n                @tenant_id, @config_key, @config_value, @description, @is_active,\n                COALESCE(@created_by, 'sp_insert_configuration')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n\n```sql","size_chars":2203,"tokens_estimate":551}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_configuration**","anchor_slug":"b-spupdateconfiguration","chunk_index":54,"content":"### b) **sp_update_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_configuration\n    @id INT,\n    @config_value NVARCHAR(MAX) = NULL,\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.CONFIGURATION\n        SET\n            config_value = COALESCE(@config_value, config_value),\n            description = COALESCE(@description, description),\n            is_active = COALESCE(@is_active, is_active),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_configuration')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_configuration',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1828,"tokens_estimate":457}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_configuration**","anchor_slug":"c-spdeleteconfiguration","chunk_index":55,"content":"### c) **sp_delete_configuration**\n\n```sql\n--STORE PROCEDURE – UPDATE CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_configuration\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.CONFIGURATION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_configuration',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1403,"tokens_estimate":351}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":56,"content":"### d) **sp_debug_insert_configuration**\n\n```sql\n--STORE PROCEDURE – INSERT DEBUG CONFIGURATION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_configuration\n    @tenant_id NVARCHAR(50) = NULL,\n    @config_key NVARCHAR(100),\n    @config_value NVARCHAR(MAX),\n    @description NVARCHAR(255) = NULL,\n    @is_active BIT = 1,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.CONFIGURATION (\n            tenant_id, config_key, config_value, description, is_active, created_by\n        )\n        VALUES (\n            @tenant_id, @config_key, @config_value, @description, @is_active,\n            COALESCE(@created_by, 'sp_debug_insert_configuration')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_configuration');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_configuration',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.CONFIGURATION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @config_key AS config_key, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n--FINE SEZIONE STORE PROCEDURE CONFIGURATION \n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt esempio:\n> Imposta per il tenant TEN00000001001 la configurazione MAX_FILE_SIZE_MB a 50\n\n```sql\nEXEC PORTAL.sp_insert_configuration @tenant_id = 'TEN00000001001', @config_key = 'MAX_FILE_SIZE_MB', @config_value = '50', @created_by = 'chatbot_ams';\n```sql","size_chars":2262,"tokens_estimate":566}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_configuration**","anchor_slug":"d-spdebuginsertconfiguration","chunk_index":57,"content":"Risposta bot:\n| status | tenant_id | config_key | error_message | rows_inserted |\n| --- | --- | --- | --- | --- |\n| OK | TEN00000001001 | MAX_FILE_SIZE_MB | NULL | 1 |","size_chars":167,"tokens_estimate":42}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":58,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":59,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-configuration","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/configuration.md","title":"a) **sp_insert_configuration**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":60,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-portal-stored-procedure-index","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/index.md","title":"Indice","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:35:48+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Quali stored procedure sono documentate per lo schema PORTAL e dove sono?\n- Dove trovare firma, input/output ed esempi di invocazione per ogni SP?\n- Quali SP gestiscono logging/audit e come validare il loro output?\n- Qual è il link canonico da usare quando referenzio una SP in altre pagine?","size_chars":319,"tokens_estimate":80}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"a) **sp_insert_profile_domain**","anchor_slug":"a-spinsertprofiledomain","chunk_index":1,"content":"### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1784,"tokens_estimate":446}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"a) **sp_insert_profile_domain**","anchor_slug":"a-spinsertprofiledomain","chunk_index":2,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"a) **sp_insert_profile_domain**","anchor_slug":"a-spinsertprofiledomain","chunk_index":3,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"a) **sp_insert_profile_domain**","anchor_slug":"a-spinsertprofiledomain","chunk_index":4,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":6,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":7,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1902,"tokens_estimate":476}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":8,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":9,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":10,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":11,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":12,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1856,"tokens_estimate":464}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":14,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":15,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":16,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":17,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":18,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1835,"tokens_estimate":459}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":19,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":20,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":21,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":22,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":23,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":24,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1902,"tokens_estimate":476}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":25,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":26,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":27,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":28,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":29,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1856,"tokens_estimate":464}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":30,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":31,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":32,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":33,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":34,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1925,"tokens_estimate":481}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":35,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":36,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":37,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":38,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":39,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":40,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1902,"tokens_estimate":476}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":41,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":42,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":43,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":44,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":45,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_profile_domain**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1856,"tokens_estimate":464}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":46,"content":"\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.PROFILE_DOMAINS\n        SET\n            description = COALESCE(@description, description),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_profile_domain')\n        WHERE profile_code = @profile_code;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_profile_domain',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql","size_chars":1751,"tokens_estimate":438}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":47,"content":"```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_profile_domain\n    @profile_code NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_profile_domain',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql\n\n```sql\n-- DEBUG (inserimento di profilo ACL per test/debug)\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_profile_domain\n    @profile_code NVARCHAR(50),\n    @description NVARCHAR(255) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.PROFILE_DOMAINS WHERE profile_code = @profile_code)\n        BEGIN\n            INSERT INTO PORTAL.PROFILE_DOMAINS (profile_code, description, ext_attributes, created_by)\n            VALUES (@profile_code, @description, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_profile_domain'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_mess","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":48,"content":"age = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_profile_domain');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_profile_domain',\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @profile_code AS profile_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n* * *","size_chars":826,"tokens_estimate":206}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":49,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":50,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-profile-domains","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/profile-domains.md","title":"a) **sp_insert_profile_domain**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":51,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"a) **sp_insert_section_access**","anchor_slug":"a-spinsertsectionaccess","chunk_index":1,"content":"### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":1969,"tokens_estimate":492}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":2,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":3,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":4,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":6,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":7,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2087,"tokens_estimate":522}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":8,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":9,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":10,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":11,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":12,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2041,"tokens_estimate":510}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":13,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":14,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":15,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":16,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":17,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":18,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2020,"tokens_estimate":505}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":19,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":20,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":21,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":22,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":23,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":24,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2087,"tokens_estimate":522}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":25,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":26,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":27,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":28,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":29,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2041,"tokens_estimate":510}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":30,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":31,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":32,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":33,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":34,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2110,"tokens_estimate":528}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":35,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":36,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":37,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":38,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":39,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":40,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2087,"tokens_estimate":522}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":41,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":42,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":43,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":44,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":45,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_section_access**\n\n```sql\n-- INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2041,"tokens_estimate":510}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"b) **sp_update_section_access**","anchor_slug":"b-spupdatesectionaccess","chunk_index":46,"content":"### b) **sp_update_section_access**\n\n```sql\n-- UPDATE\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_section_access\n    @id INT,\n    @is_enabled BIT = NULL,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SECTION_ACCESS\n        SET\n            is_enabled = COALESCE(@is_enabled, is_enabled),\n            valid_from = COALESCE(@valid_from, valid_from),\n            valid_to = COALESCE(@valid_to, valid_to),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_section_access')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_section_access',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":1891,"tokens_estimate":473}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"c) **sp_delete_section_access**","anchor_slug":"c-spdeletesectionaccess","chunk_index":47,"content":"### c) **sp_delete_section_access**\n\n```sql\n-- DELETE\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_section_access\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SECTION_ACCESS WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_section_access',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql","size_chars":1375,"tokens_estimate":344}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_section_access**","anchor_slug":"d-spdebuginsertsectionaccess","chunk_index":48,"content":"### d) **sp_debug_insert_section_access**\n\n```sql\n-- DEBUG INSERT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_section_access\n    @tenant_id NVARCHAR(50),\n    @section_code NVARCHAR(50),\n    @profile_code NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @is_enabled BIT,\n    @valid_from DATETIME2 = NULL,\n    @valid_to DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SECTION_ACCESS (tenant_id, section_code, profile_code, user_id, is_enabled, valid_from, valid_to, ext_attributes, created_by)\n        VALUES (@tenant_id, @section_code, @profile_code, @user_id, @is_enabled, @valid_from, @valid_to, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_section_access'));\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_section_access');\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_section_access',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SECTION_ACCESS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @section_code AS section_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":2006,"tokens_estimate":502}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":49,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":50,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-section-access","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/section-access.md","title":"a) **sp_insert_section_access**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:01+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":51,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":2,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":3,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2333,"tokens_estimate":583}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":4,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":6,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2287,"tokens_estimate":572}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":7,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":8,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":9,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":10,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2266,"tokens_estimate":566}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":11,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":12,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":14,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2333,"tokens_estimate":583}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":15,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":16,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":17,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2287,"tokens_estimate":572}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":18,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":19,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":20,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2356,"tokens_estimate":589}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":21,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":22,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":23,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":24,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2333,"tokens_estimate":583}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":25,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":26,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":27,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section * Abbiamo definito una SP,  `sp_log_stats_execution`, con tutti i parametri necessari (proc_name, rows, status, etc).\n    \n*   Nelle altre store process, al posto dell’`INSERT INTO ...` metti solo la chiamata a questa SP.\n    \n*   Se domani aggiungi colonne o cambi qualcosa nel log, lo cambi in una sola SP.\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_log_stats_execution\n    @proc_name NVARCHAR(200),\n    @tenant_id NVARCHAR(50) = NULL,\n    @user_id NVARCHAR(50) = NULL,\n    @rows_inserted INT = 0,\n    @rows_updated INT = 0,\n    @rows_deleted INT = 0,\n    @rows_total INT = 0,\n    @status NVARCHAR(50) = 'OK',\n    @error_message NVARCHAR(2000) = NULL,\n    @start_time DATETIME2 = NULL,\n    @end_time DATETIME2 = NULL,\n    @affected_tables NVARCHAR(500) = NULL,\n    @operation_types NVARCHAR(100) = NULL,\n    @payload NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    INSERT INTO PORTAL.STATS_EXECUTION_LOG (\n        proc_name, tenant_id, user_id, rows_inserted, rows_updated, rows_deleted, rows_total,\n        status, error_message, start_time, end_time, duration_ms,\n        affected_tables, operation_types, payload, created_by, created_at\n    )\n    VALUES (\n        @proc_name, @tenant_id, @user_id, @rows_inserted, @rows_updated, @rows_deleted, @rows_total,\n        @status, @error_message, @start_time, @end_time, \n        DATEDIFF(MILLISECOND, @start_time, @end_time),\n        @affected_tables, @operation_types, @payload,\n        COALESCE(@created_by, @proc_name), SYSUTCDATETIME()\n    );\nEND\nGO\n```sql\n\n2️⃣ **Nuovo template di chiamata nelle altre SP**\n-------------------------------------------------\n\n**Esempio, nella tua SP di update:**\n\n```sql\n-- Dopo il TRY/CATCH, al posto del vecchio INSERT:\nEXEC PORTAL.sp_log_stats_execution\n    @proc_name = 'sp_update_profile_domain',\n    @tenant_id = NULL,\n    @user_id = NULL,\n    @rows_updated = @rows_updated,\n    @status = @status,\n    @error_message = @error_message,\n    @start_time = @start_time,\n    @end_time = SYSUTCDATETIME(),\n    @affected_tables = 'PORTAL.PROFILE_DOMAINS',\n    @operation_types = 'UPDATE',\n    @payload = NULL,\n    @created_by = COALESCE(@updated_by, 'sp_update_profile_domain');\n```sql","size_chars":2287,"tokens_estimate":572}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":28,"content":"**PS:**\n*   Puoi usare lo stesso pattern per **insert, delete, debug** (cambiando i parametri per il tipo di operazione).\n    \n*   Se ti serve loggare info extra (payload JSON, nome tabella, ecc.), basta passarlo nei parametri.\n    \n*   Se vuoi logging anche sulle tabelle di dettaglio (STATS_EXECUTION_TABLE_LOG) basta aggiungere un’ulteriore SP analoga.","size_chars":355,"tokens_estimate":89}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":29,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":30,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-stats-execution-log","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/stats-execution-log.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":31,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"a) **sp_insert_subscription**","anchor_slug":"a-spinsertsubscription","chunk_index":1,"content":"### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"a) **sp_insert_subscription**","anchor_slug":"a-spinsertsubscription","chunk_index":2,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":3,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":4,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":5,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\nllm:\n  include: true\n  pii: none\n  chunk_hint: 250-400\n  redaction: [email, phone]\nentities: []\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":6,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":7,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":8,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":9,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');","size_chars":1995,"tokens_estimate":499}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":10,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":591,"tokens_estimate":148}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":11,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":12,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":13,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":14,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":16,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2376,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":17,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":18,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":19,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":20,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":21,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":22,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":23,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":24,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2355,"tokens_estimate":589}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":25,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":26,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":27,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":28,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":29,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":30,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":31,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":32,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');","size_chars":1995,"tokens_estimate":499}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":33,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":591,"tokens_estimate":148}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":34,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":35,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":36,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":37,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":38,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":39,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2376,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":40,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":41,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":42,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":43,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":44,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":45,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":46,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');","size_chars":2018,"tokens_estimate":504}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":47,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":591,"tokens_estimate":148}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":48,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":49,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":50,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":51,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":52,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":53,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":54,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');","size_chars":1995,"tokens_estimate":499}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":55,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":591,"tokens_estimate":148}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":56,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":57,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":58,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":59,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":60,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":61,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_subscription**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SUBSCRIPTION \n--STORE PROCEDURE –  INSERT SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.SUBSCRIPTION WHERE tenant_id = @tenant_id\n              AND plan_code = @plan_code AND start_date = @start_date\n        )\n        BEGIN\n            INSERT INTO PORTAL.SUBSCRIPTION (\n                tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n                payment_provider, last_payment_date, ext_attributes, created_by\n            )\n            VALUES (\n                @tenant_id, @plan_code, @status, @start_date, @end_date,\n                @external_payment_id, @payment_provider, @last_payment_date,\n                @ext_attributes, COALESCE(@created_by, 'sp_insert_subscription')\n            );\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2376,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":62,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_subscription**","anchor_slug":"b-spupdatesubscription","chunk_index":63,"content":"### b) **sp_update_subscription**\n\n```sql\n--STORE PROCEDURE –  UPDATE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_subscription\n    @id INT,\n    @plan_code NVARCHAR(50) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @start_date DATETIME2 = NULL,\n    @end_date DATETIME2 = NULL,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.SUBSCRIPTION\n        SET\n            plan_code = COALESCE(@plan_code, plan_code),\n            status = COALESCE(@status, status),\n            start_date = COALESCE(@start_date, start_date),\n            end_date = COALESCE(@end_date, end_date),\n            external_payment_id = COALESCE(@external_payment_id, external_payment_id),\n            payment_provider = COALESCE(@payment_provider, payment_provider),\n            last_payment_date = COALESCE(@last_payment_date, last_payment_date),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_subscription')\n        WHERE id = @id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_subscription',\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_subscription**","anchor_slug":"c-spdeletesubscription","chunk_index":64,"content":"### c) **sp_delete_subscription**\n\n```sql\n--STORE PROCEDURE –  DELETE SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_subscription\n    @id INT,\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.SUBSCRIPTION WHERE id = @id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_subscription',\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @id AS id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1398,"tokens_estimate":350}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":65,"content":"### d) **sp_debug_insert_subscription**\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SUBSCRIPTION\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_subscription\n    @tenant_id NVARCHAR(50),\n    @plan_code NVARCHAR(50),\n    @status NVARCHAR(50) = 'ACTIVE',\n    @start_date DATETIME2,\n    @end_date DATETIME2,\n    @external_payment_id NVARCHAR(100) = NULL,\n    @payment_provider NVARCHAR(50) = NULL,\n    @last_payment_date DATETIME2 = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        INSERT INTO PORTAL.SUBSCRIPTION (\n            tenant_id, plan_code, status, start_date, end_date, external_payment_id,\n            payment_provider, last_payment_date, ext_attributes, created_by\n        )\n        VALUES (\n            @tenant_id, @plan_code, @status, @start_date, @end_date,\n            @external_payment_id, @payment_provider, @last_payment_date,\n            @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_subscription')\n        );\n        SET @rows_inserted = 1;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_subscription');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_subscription',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.SUBSCRIPTION',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @plan_code AS plan_code, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SUBSCRIPTION\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---","size_chars":2304,"tokens_estimate":576}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_subscription**","anchor_slug":"d-spdebuginsertsubscription","chunk_index":66,"content":"Prompt esempio:\n> Inserisci una nuova subscription GOLD per il tenant TEN00000001001 dal 2025-01-01 al 2026-01-01\n\n```sql\nEXEC PORTAL.sp_insert_subscription\n    @tenant_id = 'TEN00000001001',\n    @plan_code = 'GOLD',\n    @start_date = '2025-01-01',\n    @end_date = '2026-01-01',\n    @created_by = 'chatbot_ams';","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":67,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":68,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-subscription","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/subscription.md","title":"a) **sp_insert_subscription**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":69,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":1,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":3,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":4,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2373,"tokens_estimate":593}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":5,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":6,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":7,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":8,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":9,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":10,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2327,"tokens_estimate":582}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":11,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":12,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":14,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":16,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":17,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2306,"tokens_estimate":576}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":18,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":19,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":20,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":21,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":22,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":23,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":24,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2373,"tokens_estimate":593}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":25,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":26,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":27,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":28,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":29,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":30,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2327,"tokens_estimate":582}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":31,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":32,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":33,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":34,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":35,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":36,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2396,"tokens_estimate":599}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":37,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":38,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":39,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":40,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":41,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":42,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":43,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2373,"tokens_estimate":593}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":44,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":45,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":46,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":47,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":48,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":49,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section **Di seguito troverai:**\n----------------------------\n\n*   Store **INSERT** (con NDG, logging, auditing)\n    \n*   Store **UPDATE** (update fields, logging, auditing)\n    \n*   Store **DELETE** (soft delete o hard, logging, auditing)\n    \n*   Versione **DEBUG** per ogni store process\n\n\n1️⃣ `sp_insert_tenant`\n```sql\n--INIZIO SEZIONE STORE PROCEDURE USERS \n--STORE PROCEDURE – INSERIMENTO TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID;\n            SET @tenant_id = 'TEN' + RIGHT('000000000' + CAST(@next_seq_tenant AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attributes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2327,"tokens_estimate":582}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":50,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n2️⃣ `sp_update_tenant`\n\n```sql\n--STORE PROCEDURE – AGGIORNA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_tenant\n    @tenant_id NVARCHAR(50),\n    @name NVARCHAR(255) = NULL,\n    @plan_code NVARCHAR(50) = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.TENANT\n        SET\n            name = COALESCE(@name, name),\n            plan_code = COALESCE(@plan_code, plan_code),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_tenant')\n        WHERE tenant_id = @tenant_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_tenant',\n        @tenant_id = @tenant_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n```sql\n\n3️⃣ `sp_delete_tenant`","size_chars":1998,"tokens_estimate":500}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":51,"content":"```sql\n--STORE PROCEDURE – CANCELLA TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_tenant\n    @tenant_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.TENANT WHERE tenant_id = @tenant_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_tenant',\n        @tenant_id = @tenant_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n```sql\n\n5️⃣ `sp_debug_insert_tenant`\n\n```sql\n--STORE PROCEDURE – DEBUG INSERT TENANT\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_tenant\n    @tenant_id NVARCHAR(50) = NULL,\n    @name NVARCHAR(255),\n    @plan_code NVARCHAR(50),\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @tenant_id IS NULL OR @tenant_id = ''\n        BEGIN\n            DECLARE @next_seq_tenant INT;\n            SET @next_seq_tenant = NEXT VALUE FOR PORTAL.SEQ_TENANT_ID_DEBUG;\n            SET @tenant_id = 'TENDEBUG' + RIGHT('000' + CAST(@next_seq_tenant AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.TENANT WHERE tenant_id = @tenant_id)\n        BEGIN\n            INSERT INTO PORTAL.TENANT (tenant_id, name, plan_code, ext_attr","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":52,"content":"ibutes, created_by)\n            VALUES (@tenant_id, @name, @plan_code, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_tenant'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_tenant');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_tenant',\n        @tenant_id = @tenant_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.TENANT',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql\n\n\n📑 **Documentazione .md**\n-------------------------\n\nPer ogni store procedure avrai la sezione .md standard così:","size_chars":1229,"tokens_estimate":307}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"sp_insert_tenant","anchor_slug":"spinserttenant","chunk_index":53,"content":"### sp_insert_tenant\n\n| Parametro      | Tipo           | Descrizione                  |\n|----------------|----------------|------------------------------|\n| tenant_id      | NVARCHAR(50)   | Codice NDG (auto se NULL)    |\n| name           | NVARCHAR(255)  | Ragione sociale/nome tenant  |\n| plan_code      | NVARCHAR(50)   | Piano EasyWay                |\n| ext_attributes | NVARCHAR(MAX)  | Estensioni JSON custom       |\n| created_by     | NVARCHAR(255)  | Utente/SP di creazione       |\n\n- Logging automatico su STATS_EXECUTION_LOG.\n- Gestione NDG e transazione atomica.\n- Versione DEBUG disponibile.","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":54,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":55,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-tenant","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/tenant.md","title":"sp_insert_tenant","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":56,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"a) **sp_insert_user_notification_settings**","anchor_slug":"a-spinsertusernotificationsettings","chunk_index":1,"content":"### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2288,"tokens_estimate":572}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":2,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":3,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":4,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":6,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":7,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2245,"tokens_estimate":561}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":8,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":159,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":9,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":10,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":11,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":12,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2360,"tokens_estimate":590}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":14,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":15,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":16,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":17,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":18,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":19,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2339,"tokens_estimate":585}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":20,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":21,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":22,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":23,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":24,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":25,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2245,"tokens_estimate":561}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":26,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":159,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":27,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":28,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":29,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":30,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":31,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2360,"tokens_estimate":590}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":32,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":33,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":34,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":35,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":36,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":37,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":159,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":38,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":39,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":40,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":41,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":42,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":43,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;","size_chars":2245,"tokens_estimate":561}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":44,"content":"    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":159,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":45,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":46,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":47,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":48,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":49,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section ### a) **sp_insert_user_notification_settings**\n\n```sql\n--INIZIO SEZIONE STORE PROCEDURE SECTION_ACCESS \n--STORE PROCEDURE –  INSERT SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n```sql","size_chars":2360,"tokens_estimate":590}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"b) **sp_update_user_notification_settings**","anchor_slug":"b-spupdateusernotificationsettings","chunk_index":50,"content":"### b) **sp_update_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  UPDATE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = NULL,\n    @notify_on_alert BIT = NULL,\n    @notify_on_digest BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USER_NOTIFICATION_SETTINGS\n        SET\n            notify_on_upload = COALESCE(@notify_on_upload, notify_on_upload),\n            notify_on_alert = COALESCE(@notify_on_alert, notify_on_alert),\n            notify_on_digest = COALESCE(@notify_on_digest, notify_on_digest),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user_notification_setting')\n        WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n```sql","size_chars":2249,"tokens_estimate":562}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"c) **sp_delete_user_notification_settings**","anchor_slug":"c-spdeleteusernotificationsettings","chunk_index":51,"content":"### c) **sp_delete_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  DELETE SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USER_NOTIFICATION_SETTINGS WHERE tenant_id = @tenant_id AND user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n```sql","size_chars":1659,"tokens_estimate":415}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"d) **sp_debug_insert_user_notification_settings**","anchor_slug":"d-spdebuginsertusernotificationsettings","chunk_index":52,"content":"### d) **sp_debug_insert_user_notification_settings**\n\n\n```sql\n--STORE PROCEDURE –  INSERT DEBUG SECTION_ACCESS\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user_notification_setting\n    @tenant_id NVARCHAR(50),\n    @user_id NVARCHAR(50),\n    @notify_on_upload BIT = 0,\n    @notify_on_alert BIT = 0,\n    @notify_on_digest BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF NOT EXISTS (\n            SELECT 1 FROM PORTAL.USER_NOTIFICATION_SETTINGS\n            WHERE tenant_id = @tenant_id AND user_id = @user_id\n        )\n        BEGIN\n            INSERT INTO PORTAL.USER_NOTIFICATION_SETTINGS\n                (tenant_id, user_id, notify_on_upload, notify_on_alert, notify_on_digest, ext_attributes, created_by)\n            VALUES\n                (@tenant_id, @user_id, @notify_on_upload, @notify_on_alert, @notify_on_digest, @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user_notification_setting'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user_notification_setting');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user_notification_setting',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USER_NOTIFICATION_SETTINGS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @tenant_id AS tenant_id, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n--FINE SEZIONE STORE PROCEDURE SECTION_ACCESS\n```sql","size_chars":2323,"tokens_estimate":581}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":53,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":54,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-user-notification-settings","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/user-notification-settings.md","title":"a) **sp_insert_user_notification_settings**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":55,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":2,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":3,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2172,"tokens_estimate":543}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":4,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":5,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":6,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":7,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":8,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":9,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2126,"tokens_estimate":532}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":10,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":11,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":12,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":13,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":14,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":15,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->","size_chars":122,"tokens_estimate":30}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":16,"content":"## Esempi Query\n`sql\n-- SELECT ... FROM ...\n`\n\"@\n  a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2105,"tokens_estimate":526}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":17,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":18,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":19,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Esempi Query","anchor_slug":"esempi-query","chunk_index":20,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":21,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":22,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":23,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2172,"tokens_estimate":543}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":24,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":25,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":26,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":27,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":28,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":29,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2126,"tokens_estimate":532}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":30,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":31,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":32,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":33,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":34,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":35,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n = Ensure-Section a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2195,"tokens_estimate":549}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":36,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":37,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":38,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":39,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":40,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":41,"content":"## Scopo\nBreve descrizione dello scopo del documento.","size_chars":53,"tokens_estimate":13}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":42,"content":"## Schema/DDL\n<!-- Inserire DDL idempotente (IF NOT EXISTS ... CREATE ...) -->\n`sql\n-- Esempio DDL idempotente\n`\n\"@\n  a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2172,"tokens_estimate":543}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":43,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":44,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":45,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Schema/DDL","anchor_slug":"schemaddl","chunk_index":46,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":47,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":48,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n = Ensure-Section a) **sp_insert_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID;\n            SET @user_id = 'CDI' + RIGHT('000000000' + CAST(@next_seq_user AS NVARCHAR), 9);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_insert_user');","size_chars":2126,"tokens_estimate":532}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":49,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    -- **Conversational Intelligence output**\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\n```sql\n\n\nb) **sp_update_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_update_user\n    @user_id NVARCHAR(50),\n    @tenant_id NVARCHAR(50) = NULL,\n    @email NVARCHAR(255) = NULL,\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50) = NULL,\n    @is_tenant_admin BIT = NULL,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @updated_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_updated INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        UPDATE PORTAL.USERS\n        SET\n            tenant_id = COALESCE(@tenant_id, tenant_id),\n            email = COALESCE(@email, email),\n            name = COALESCE(@name, name),\n            surname = COALESCE(@surname, surname),\n            password = COALESCE(@password, password),\n            provider = COALESCE(@provider, provider),\n            provider_user_id = COALESCE(@provider_user_id, provider_user_id),\n            status = COALESCE(@status, status),\n            profile_code = COALESCE(@profile_code, profile_code),\n            is_tenant_admin = COALESCE(@is_tenant_admin, is_tenant_admin),\n            ext_attributes = COALESCE(@ext_attributes, ext_attributes),\n            updated_at = SYSUTCDATETIME(),\n            created_by = COALESCE(@updated_by, 'sp_update_user')\n        WHERE user_id = @user_id;\n        SET @rows_updated = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_M","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":50,"content":"ESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @updated_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @updated_by_final = COALESCE(@updated_by, 'sp_update_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_update_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_updated = @rows_updated,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'UPDATE',\n        @created_by = @updated_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_updated AS rows_updated;\nEND\nGO\n\n\n```sql\n\n\nc) **sp_delete_user**\n---------------------\n\n```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_delete_user\n    @user_id NVARCHAR(50),\n    @deleted_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_deleted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        DELETE FROM PORTAL.USERS WHERE user_id = @user_id;\n        SET @rows_deleted = @@ROWCOUNT;\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @deleted_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @deleted_by_final = COALESCE(@deleted_by, 'sp_delete_user');\n\n    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_delete_user',\n        @user_id = @user_id,\n        @rows_deleted = @rows_deleted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'DELETE',\n        @created_by = @deleted_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_deleted AS rows_deleted;\nEND\nGO\n\n\n```sql\n\n\nd) **sp_debug_insert_user**\n---------------------------","size_chars":2268,"tokens_estimate":567}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":51,"content":"```sql\nCREATE OR ALTER PROCEDURE PORTAL.sp_debug_insert_user\n    @user_id NVARCHAR(50) = NULL,\n    @tenant_id NVARCHAR(50),\n    @email NVARCHAR(255),\n    @name NVARCHAR(100) = NULL,\n    @surname NVARCHAR(100) = NULL,\n    @password NVARCHAR(255) = NULL,\n    @provider NVARCHAR(50) = NULL,\n    @provider_user_id NVARCHAR(255) = NULL,\n    @status NVARCHAR(50) = NULL,\n    @profile_code NVARCHAR(50),\n    @is_tenant_admin BIT = 0,\n    @ext_attributes NVARCHAR(MAX) = NULL,\n    @created_by NVARCHAR(255) = NULL\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @start_time DATETIME2 = SYSUTCDATETIME();\n    DECLARE @rows_inserted INT = 0, @status_out NVARCHAR(50) = 'OK', @error_message NVARCHAR(2000) = NULL;\n    BEGIN TRY\n        BEGIN TRANSACTION;\n        IF @user_id IS NULL OR @user_id = ''\n        BEGIN\n            DECLARE @next_seq_user INT;\n            SET @next_seq_user = NEXT VALUE FOR PORTAL.SEQ_USER_ID_DEBUG;\n            SET @user_id = 'CDIDEBUG' + RIGHT('000' + CAST(@next_seq_user AS NVARCHAR), 3);\n        END\n        IF NOT EXISTS (SELECT 1 FROM PORTAL.USERS WHERE user_id = @user_id)\n        BEGIN\n            INSERT INTO PORTAL.USERS (user_id, tenant_id, email, name, surname, password,\n                                      provider, provider_user_id, status, profile_code, is_tenant_admin,\n                                      ext_attributes, created_by)\n            VALUES (@user_id, @tenant_id, @email, @name, @surname, @password,\n                    @provider, @provider_user_id, @status, @profile_code, @is_tenant_admin,\n                    @ext_attributes, COALESCE(@created_by, 'sp_debug_insert_user'));\n            SET @rows_inserted = 1;\n        END\n        COMMIT TRANSACTION;\n    END TRY\n    BEGIN CATCH\n        SET @status_out = 'ERROR'; SET @error_message = ERROR_MESSAGE();\n        IF @@TRANCOUNT > 0 ROLLBACK TRANSACTION;\n    END CATCH\n\n    DECLARE @created_by_final NVARCHAR(255);\n    DECLARE @end_time DATETIME2 = SYSUTCDATETIME();\n    SET @created_by_final = COALESCE(@created_by, 'sp_debug_insert_user');","size_chars":2032,"tokens_estimate":508}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":52,"content":"    EXEC PORTAL.sp_log_stats_execution\n        @proc_name = 'sp_debug_insert_user',\n        @tenant_id = @tenant_id,\n        @user_id = @user_id,\n        @rows_inserted = @rows_inserted,\n        @status = @status_out,\n        @error_message = @error_message,\n        @start_time = @start_time,\n        @end_time = @end_time,\n        @affected_tables = 'PORTAL.USERS',\n        @operation_types = 'INSERT',\n        @created_by = @created_by_final;\n\n    SELECT @status_out AS status, @user_id AS user_id, @error_message AS error_message, @rows_inserted AS rows_inserted;\nEND\nGO\n\nGO\n\n```sql\n---\n👾 Conversational Intelligence Ready\n---\n\nPrompt di esempio chatbot:\n> Crea utente “luca@azienda.it” per tenant TEN00000001001, profilo ADMIN\n\n```sql\nEXEC PORTAL.sp_insert_user @tenant_id='TEN00000001001', @email='luca@azienda.it', @profile_code='ADMIN', @created_by='chatbot_ams';\n```sql\n\nRisposta bot:\n\n| status | user_id | error_message | rows_inserted |\n| --- | --- | --- | --- |\n| OK | CDI00000001001 | NULL | 1 |","size_chars":1009,"tokens_estimate":252}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":53,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":54,"content":"## Scopo\nBreve descrizione dello scopo del documento.\n 'Vincoli e Indici' @\"\n<!-- Elencare PK, FK, IDX, CHECK, DEFAULT -->\n 'Domande a cui risponde' @\"\n- Cosa fa?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-users","path":"easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure/users.md","title":"Domande a cui risponde","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T15:31:25+01:00","section_level":2,"anchor_text":"Collegamenti","anchor_slug":"collegamenti","chunk_index":55,"content":"## Collegamenti\n- [Entities Index](../../../../../../entities-index.md)","size_chars":71,"tokens_estimate":18}
{"doc_id":"ew-api-ext","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md","title":"Integrazione API Esterne - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Lookup - Integrazione API Esterne","anchor_slug":"lookup-integrazione-api-esterne","chunk_index":1,"content":"## Lookup - Integrazione API Esterne\n\n| Cosa vuoi | Cosa devi scrivere | Dammi il .md | Stato |\n|-----------|--------------------|--------------|-------|\n| Tabella integrazioni API | Dammi tabella integrazioni API | Dammi il .md tabella integrazioni API | IN BOZZA |\n| Dettaglio API Microsoft Graph | Dammi dettaglio API Microsoft Graph | Dammi il .md dettaglio API Microsoft Graph | IN BOZZA |\n| Dettaglio API Shopify | Dammi dettaglio API Shopify | Dammi il .md dettaglio API Shopify | IN BOZZA |\n| Dettaglio API Fatture in Cloud | Dammi dettaglio API Fatture in Cloud | Dammi il .md dettaglio API Fatture in Cloud | IN BOZZA |\n| Dettaglio API Amazon | Dammi dettaglio API Amazon | Dammi il .md dettaglio API Amazon | IN BOZZA |\n| Policy sicurezza/gestione key | Dammi policy API key security | Dammi il .md policy API key security | IN BOZZA |\n| Flusso esempio chiamata esterna | Dammi esempio flusso chiamata API esterna | Dammi il .md esempio flusso chiamata API esterna | IN BOZZA |","size_chars":988,"tokens_estimate":247}
{"doc_id":"ew-api-ext","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md","title":"Integrazione API Esterne - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Tabella Integrazioni API Esterne","anchor_slug":"tabella-integrazioni-api-esterne","chunk_index":2,"content":"## Tabella Integrazioni API Esterne\n\n| Servizio/API | Scopo integrazione | Endpoint principali | Autenticazione | Frequenza / Modalità | Note operative |\n|--------------|--------------------|---------------------|----------------|----------------------|----------------|\n| Microsoft Graph API | Identity, Teams, Calendari, utenti, email | /me, /users, /groups, /mail | OAuth2, Entra ID | Real-time, scheduled | Gestione deleghe, permessi granulari |\n| Shopify | Sync ordini, prodotti, clienti | /orders, /products, /customers | OAuth2, API Key | Batch, webhooks | Gestione multi-shop, mapping tenant |\n| Fatture in Cloud | Import/export fatture, clienti, documenti | /invoices, /clients, /products | OAuth2, API Key | Batch, schedulato | Gestione errori e validazione dati |\n| Amazon Seller API | Sync ordini, stock, prezzi | /orders, /inventory, /products | OAuth2, AWS IAM | Batch, polling | Attenzione limiti rate API |\n| Altri SaaS | CRM, analytics, storage, ecc. | Vari | Vari | Da valutare | Architettura plug-in, versioning API |\n\n---","size_chars":1041,"tokens_estimate":260}
{"doc_id":"ew-api-ext","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md","title":"Integrazione API Esterne - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Policy Sicurezza & Gestione Key/API","anchor_slug":"policy-sicurezza-gestione-keyapi","chunk_index":3,"content":"## Policy Sicurezza & Gestione Key/API\n\n- Gestione centralizzata key e segreti: tutte le API Key/token OAuth sono salvate in Azure Key Vault, mai in chiaro nel codice o config file.\n- Token rotation: pianificare la rotazione periodica dei token/key secondo policy vendor.\n- Scope e permessi minimi: ogni integrazione riceve solo i permessi realmente necessari (principio di least privilege).\n- Audit e logging: tutte le chiamate a API esterne vanno loggate con dettaglio (successo, errore, payload minimale).\n- Gestione errori e fallback: implementare retry, alerting e circuit breaker su errori ripetuti o API non disponibili.\n\n---","size_chars":632,"tokens_estimate":158}
{"doc_id":"ew-api-ext","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md","title":"Integrazione API Esterne - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Best Practice Integrazione API Esterne","anchor_slug":"best-practice-integrazione-api-esterne","chunk_index":4,"content":"## Best Practice Integrazione API Esterne\n\n- Architettura plug-in/microservizio dedicato: ogni integrazione vive in un proprio microservizio/container, gestibile e scalabile indipendentemente.\n- Versioning e backward compatibility: adattare logica e mapping dati per gestire evoluzioni API vendor senza rompere i flussi esistenti.\n- Gestione mapping tenant: ogni chiamata esterna è sempre associata a uno specifico tenant_id, per evitare mix dati tra clienti.\n- Mock e sandbox: testare sempre su ambienti sandbox/dev forniti dai vendor prima di passare in produzione.","size_chars":567,"tokens_estimate":142}
{"doc_id":"ew-api-ext","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione.md","title":"Integrazione API Esterne - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-best-practice-naming-&-scalabilità","path":"easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md","title":"Lookup – Best Practice Naming & Scalabilità","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Tabella Naming Convention (macro overview)","anchor_slug":"tabella-naming-convention-macro-overview","chunk_index":1,"content":"## Tabella Naming Convention (macro overview)\n\n| Oggetto             | Esempio                               | Regola/Base                                   | Note Operative                            |\n|---------------------|---------------------------------------|-----------------------------------------------|-------------------------------------------|\n| Resource Group      | ew-rg-portal-dev                      | ew-rg-[modulo]-[env]                          | Un RG per ogni ambiente/app principale    |\n| Storage Account     | ewdatalakedev                         | ew[datalake][env] (no caratteri speciali)     | Massimo 24 caratteri                      |\n| App Service         | ew-app-portal-dev                     | ew-app-[modulo]-[env]                         | Unica entrypoint web/app per microservizi |\n| Container/Microserv.| ew-user-mgmt-svc-dev                  | ew-[dominio]-svc-[env]                        | Nome breve, chiaro, dominio funzione      |\n| Key Vault           | ew-kv-portal-dev                      | ew-kv-[modulo]-[env]                          | Un vault per ogni ambiente/app            |\n| SQL DB              | easyway_portal_dev                    | easyway_portal_[env]                          | Senza trattini/breve/descrittivo          |\n| Datalake Folder     | landing/, staging/, official/         | landing/, staging/, official/, ...            | Come da schema dati                       |\n| API endpoint        | /api/users, /api/notifications        | /api/[dominio]                                | Seguire naming RESTful                    |\n| Service Principal   | portal.datalake.read                  | [modulo].[ambito].[permesso]                  | Come da policy sicurezza                  |\n| Slot Azure          | ew-app-portal-dev-slot                | ew-app-[modulo]-[env]-slot                    | Usare solo per test/blue-green            |","size_chars":1918,"tokens_estimate":480}
{"doc_id":"ew-best-practice-naming-&-scalabilità","path":"easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md","title":"Lookup – Best Practice Naming & Scalabilità","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Best Practice Scalabilità\r","anchor_slug":"best-practice-scalabilit","chunk_index":2,"content":"## Best Practice Scalabilità\n\n- **Scalabilità orizzontale:**  \r\n  Ogni microservizio/container va deployato per supportare scaling orizzontale (più istanze), anche in App Service Plan Basic.\r\n- **No monoliti:**  \r\n  Ogni dominio funzionale separato (user, notifiche, DQ, e-commerce…).\r\n- **API Gateway unico:**  \r\n  Tutte le chiamate passano da Gateway, che può scalare indipendentemente dai servizi.\r\n- **Slot di staging/blue-green deploy:**  \r\n  Usa slot per zero downtime deploy, rollback rapido, ambienti test/prod separati.\r\n- **Resource group per ambiente:**  \r\n  Un RG per dev, test, prod: facilita cleanup, governance e gestione costi.\r\n- **Naming standard uniforme:**  \r\n  Tutte le risorse devono seguire lo standard tabellare per evitare conflitti e automatizzare script/pipeline.\n\n---","size_chars":795,"tokens_estimate":199}
{"doc_id":"ew-best-practice-naming-&-scalabilità","path":"easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md","title":"Lookup – Best Practice Naming & Scalabilità","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Checklist Naming & Scalabilità\r","anchor_slug":"checklist-naming-scalabilit","chunk_index":3,"content":"## Checklist Naming & Scalabilità\n\n| ID   | Controllo                                | Obbligatorio | Note/Best Practice                                       | Stato  |\r\n|------|------------------------------------------|--------------|----------------------------------------------------------|--------|\r\n| 1    | Tutte le risorse seguono naming standard | Sì           | Consultare tabella naming prima di creare risorse        |        |\r\n| 2    | Scaling microservizi/slot                | Sì           | Minimo 2 istanze per servizi core, usare slot per deploy |        |\r\n| 3    | Un RG per ogni ambiente                  | Sì           | Facilita gestione costi/policy e clean-up                |        |\r\n| 4    | Naming chiaro su API/endpoint            | Sì           | /api/[dominio], no ambiguità nei percorsi                |        |\r\n| 5    | Service Principal chiari e segregati     | Sì           | Uno per dominio/permesso, niente permessi eccessivi      |        |\r\n| 6    | Naming versionato in pipeline/script     | Sì           | Variabili/env/nome parametrici in ogni script            |        |\n\n---","size_chars":1126,"tokens_estimate":282}
{"doc_id":"ew-best-practice-naming-&-scalabilità","path":"easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md","title":"Lookup – Best Practice Naming & Scalabilità","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Nota operativa\r","anchor_slug":"nota-operativa","chunk_index":4,"content":"## Nota operativa\n\n- **La tabella naming va aggiornata e consultata prima di creare qualunque risorsa, script o pipeline.**\r\n- **Le pipeline di provisioning (IaC) devono sempre applicare queste regole.**\r\n- **Eventuali eccezioni/naming legacy vanno documentate in README di progetto.**\n\n---","size_chars":290,"tokens_estimate":72}
{"doc_id":"ew-best-practice-naming-&-scalabilità","path":"easyway-webapp/02_logiche_easyway/best-practice-naming-and-scalability.md","title":"Lookup – Best Practice Naming & Scalabilità","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-index","path":"easyway-webapp/02_logiche_easyway/index.md","title":"Indice","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:58:34+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Dove trovo le guide per login/onboarding e notifiche?\n- Dove sono le regole di logging/audit e le policy di sicurezza?\n- Quali pagine sono canoniche per integrazioni con API esterne?","size_chars":210,"tokens_estimate":52}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-integrate-ada-best-practices","path":"easyway-webapp/02_logiche_easyway/integrate-ada-best-practices.md","title":"Integrare le best-practice ADA in EasyWayDataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Integrare le best-practice ADA in EasyWayDataPortal","anchor_slug":"integrare-le-best-practice-ada-in-easywaydataportal","chunk_index":1,"content":"# Integrare le best-practice ADA in EasyWayDataPortal\n\nSommario\n- Documento operativo che raccoglie i frammenti utili presi da ADA e li mappa direttamente nella documentazione e nei deliverable di EasyWayDataPortal. Scopo pratico: trasferire ciò che funziona (runbook, policy, criteri di monitoraggio, patterns di networking) adattandolo a una soluzione cloud‑native (PaaS / container) con DR cross‑cloud (Azure primary, GCP DR). Componenti esclusi: Databricks, Informatica, Axon, Synapse.\n\n1) Principi generali importati da ADA (già integrati nella wiki)\n- Runbook e checklist operative: riutilizzare le sequenze di test e i criteri di accettazione come baseline per i runbook‑as‑code.\n  - Dove: convertiti in runbook-as-code previsti dal piano (vedi Wiki/DR_Inventory_Matrix.md — azioni successive).\n- Policy di monitoraggio e soglie: regole da App Insights / Log Analytics da adattare ai nomi metrici EasyWay.\n  - Dove: riferimenti inseriti nelle pagine di monitoring e automazione export log.\n- Pattern di network isolation: principi di uso di Private Endpoints e segmentazione di rete come standard di sicurezza.\n  - Dove: policy di configurazione e security (policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md).\n- Gestione segreti e policy di rotazione: Key Vault come fonte di verità e requisito di audit.\n  - Dove: step‑1 setup ambiente + parametrization best practices.\n- WAF / hardening rules: ruleset consigliati e checklist di hardening presi da ADA.\n  - Dove: indicazioni sintetiche inserite nelle pagine di deploy e raccomandazione architetturale.\n\n2) Elementi ADA che ho trasformato in deliverable EasyWay (nuovi o aggiornati)\n- Runbook‑as‑Code (MVP DR test) — concetto e stack proposto\n  - Terraform + Azure Pipelines / GitHub Actions + PowerShell/Az CLI + Cloud Build (GCP).\n  - Azione: generare template runbook (script + pipeline) per DB+Storage+Ingress (prossimo deliverable).\n- Script sincronizzazione login SQL (SID) — pattern operativo\n  - Azione: template script SQL/PowerShell da produrre come primo artefatto (fase 1).\n- Terraform modules mapping Azure → GCP (POC)\n  - Azione: repo POC per Cloud SQL, GCS, Secret Manager, Cloud LB (fase 1/2).\n- Sincronizzazione Storage (ADLS → GCS)\n  - Azione: design pattern azcopy/gsutil o Cloud Run job (fase 1).\n- Segreti & certificati cross‑cloud\n  - Azione: pipeline sicura per replicare (solo per test DR) segreti i","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-integrate-ada-best-practices","path":"easyway-webapp/02_logiche_easyway/integrate-ada-best-practices.md","title":"Integrare le best-practice ADA in EasyWayDataPortal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Integrare le best-practice ADA in EasyWayDataPortal","anchor_slug":"integrare-le-best-practice-ada-in-easywaydataportal","chunk_index":2,"content":"n Secret Manager con audit.\n- DNS & Ingress playbook\n  - Azione: playbook as‑code Front Door ↔ Cloud LB + health probes + rollback DNS.\n- Monitoring & RTO/RPO automation\n  - Azione: runbook di test schedulato e dashboard condivisa per misurare RTO/RPO.\n\n3) Dove ho aggiunto/modificato contenuti nella wiki\n- Nuova pagina: this file (integrate-ada-best-practices.md) — raccolta operativa e mapping.\n- DR Inventory Matrix: Wiki/EasyWayData.wiki/DR_Inventory_Matrix.md — matrice iniziale con RTO/RPO e azioni successive (fase 0).\n- Ho lasciato inalterate le pagine esistenti (deploy-app-service.md, datalake IAM, gestione-configurazioni) ma ho indicato nei loro contenuti i punti ADA rilevanti (runbook, segreti, monitoring).\n  - Dove appropriato ho aggiunto note operative (es. riferimento a template runbook e script SID da produrre).\n\n4) Priorità operative consigliate (ordine esecutivo)\n- Phase 0: Inventory tecnico + matrice dettagliata componente → RTO/RPO (5 giorni) — già avviata.\n- Phase 1: Script SQL SID + runbook teardown + Terraform POC GCP (DB+GCS+Secret Manager+LB) — 7–12 giorni.\n- Phase 2: Runbook end‑to‑end, segreti sync e monitoring automazione — 10–20 giorni.\n- Phase 3: Test E2E, hardening, produzione runbook e operationalization — 7–14 giorni.\n\n5) Prossime azioni immediate che posso fare (se confermi)\n- Generare la matrice completa (CSV + MD) con nomi risorsa / RG / subscription (richiede accesso o output da script Az CLI).\n- Produrre il template script SQL SID + piccolo runbook teardown (primo artefatto consegnabile).\n- Avviare repo Terraform POC su GCP (bozza di moduli).\n\n6) Comunicazione e governance\n- Suggerisco di versionare tutti i runbook e i moduli Terraform in repo dedicato (feature branch + PR + checklist di validazione).\n- Assegnare owner e reviewer per ogni deliverable (DBA, DevOps, Security, Network).\n\nNote finali\n- Ho già integrato in wiki i contenuti ADA rilevanti in forma adattata e operativa. Se vuoi, procedo ora con la Phase 0 (inventory dettagliata) oppure creo subito il template SQL SID + runbook minimo.","size_chars":2060,"tokens_estimate":515}
{"doc_id":"ew-logging-audit","path":"easyway-webapp/02_logiche_easyway/logging-and-audit.md","title":"Logging & Audit – EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Lookup Logging & Audit – Microservizi & API Gateway","anchor_slug":"lookup-logging-audit-microservizi-api-gateway","chunk_index":1,"content":"## Lookup Logging & Audit – Microservizi & API Gateway\n\n| Cosa vuoi                   | Cosa devi scrivere                 | Dammi il .md                          | Stato    |\n|-----------------------------|------------------------------------|---------------------------------------|----------|\n| Overview logging & audit    | Dammi overview logging audit       | Dammi il .md overview logging audit   | IN BOZZA |\n| Tabella eventi da tracciare | Dammi tabella eventi audit         | Dammi il .md tabella eventi audit     | IN BOZZA |\n| Best practice monitoring    | Dammi best practice monitoring     | Dammi il .md best practice monitoring | IN BOZZA |\n| Esempio flusso log/audit    | Dammi esempio flusso audit         | Dammi il .md esempio flusso audit     | IN BOZZA |","size_chars":775,"tokens_estimate":194}
{"doc_id":"ew-logging-audit","path":"easyway-webapp/02_logiche_easyway/logging-and-audit.md","title":"Logging & Audit – EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Tabella Eventi/Audit da Tracciare\r","anchor_slug":"tabella-eventiaudit-da-tracciare","chunk_index":2,"content":"## Tabella Eventi/Audit da Tracciare\n\n| Ambito                   | Evento/Azione da tracciare                         | Dove si traccia         | Livello Criticità | Retention Policy     | Note Operative                                   |\r\n|--------------------------|----------------------------------------------------|-------------------------|-------------------|----------------------|--------------------------------------------------|\r\n| Login                    | Successo, errore, tentativi anomali                | API Gateway, Auth Svc   | Alto              | 12 mesi (min)        | Alert su 5+ tentativi falliti da stesso IP/user  |\r\n| Accesso dati sensibili   | Query, export, download, mascheramento             | Microservizi, DB        | Alto              | 12 mesi (min)        | Masking attivo, log dettagliato                  |\r\n| Modifica ACL/permessi    | Cambio ruolo, aggiunta/rimozione accessi           | User Mgmt, DB           | Alto              | 24 mesi (min)        | Alert a owner tenant/admin                       |\r\n| Modifica configurazioni  | Cambi su parametri, segreti, environment           | Config Svc, Key Vault   | Medio             | 12 mesi (min)        | Notifica automatica se variazione critica        |\r\n| Flusso onboarding        | Creazione utente, validazione, rifiuto             | User Mgmt, Notifiche    | Medio             | 6 mesi               | Log workflow step by step                        |\r\n| Job ETL / Pipeline dati  | Avvio, successo, errore, righe scartate            | Data Quality, ETL Svc   | Alto/Medio        | 12 mesi              | Log su portal-audit e technical storage          |\r\n| Accesso amministrativo   | Login admin, accesso via SSH/CLI/Portal            | Portal, Storage, DB     | Alto              | 24 mesi              | Accesso consentito solo a identity approvate     |\r\n| Anomalie e alert         | Rilevazione attività anomale, superamento soglie   | Tutti i servizi         | Alto              | 24 mesi              | Alert automatico via email/Teams                 |\n\n---","size_chars":2071,"tokens_estimate":518}
{"doc_id":"ew-logging-audit","path":"easyway-webapp/02_logiche_easyway/logging-and-audit.md","title":"Logging & Audit – EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Best Practice Monitoring & Audit\r","anchor_slug":"best-practice-monitoring-audit","chunk_index":3,"content":"## Best Practice Monitoring & Audit\n\n- **Log centralizzato**: tutti i log vanno su Log Analytics (Azure) o su una cartella dedicata (`portal-audit`) nello storage Datalake.\r\n- **Retention policy**: minima di 12 mesi (24 mesi per ACL/permessi/amministrazione).\r\n- **Alert automatici**: attivati su pattern anomali, errori di login, cambi ACL, accesso a dati sensibili.\r\n- **Log masking**: mai salvare password/token; mascherare dati sensibili anche nei log.\r\n- **Audit trail DB**: usare funzioni native (SQL Server Audit, triggers) per tracciare accessi e modifiche critiche.\r\n- **Notifica owner/admin**: ogni modifica ACL, accesso admin o variazione parametri critici notifica i responsabili tenant e/o owner globale.\n\n---","size_chars":722,"tokens_estimate":180}
{"doc_id":"ew-logging-audit","path":"easyway-webapp/02_logiche_easyway/logging-and-audit.md","title":"Logging & Audit – EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Esempio di Flusso Audit (testuale)\r","anchor_slug":"esempio-di-flusso-audit-testuale","chunk_index":4,"content":"## Esempio di Flusso Audit (testuale)\n\n[Utente] → [API Gateway] → [Microservizio] → [DB/Storage]  \r\n|  \r\nv  \r\n[Logging/Audit centralizzato: evento, user_id, tenant_id, timestamp, dettaglio, outcome]  \r\n|  \r\n+--> [Alert se evento critico/anomalia]  \r\n+--> [Retention e archiviazione audit trail]\n\n\n\n---\n\n> **Nota**: Tutte le policy di logging & audit sono “PRONTE PER CODICE” dopo validazione e saranno recepite in ogni script, template e implementazione.","size_chars":454,"tokens_estimate":114}
{"doc_id":"ew-logging-audit","path":"easyway-webapp/02_logiche_easyway/logging-and-audit.md","title":"Logging & Audit – EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Lookup - Flussi Onboarding/Login","anchor_slug":"lookup-flussi-onboardinglogin","chunk_index":1,"content":"## Lookup - Flussi Onboarding/Login\n\n| Cosa vuoi | Cosa devi scrivere | Dammi il .md | Stato |\n|-----------|--------------------|--------------|-------|\n| Overview onboarding/login | Dammi overview onboarding login | Dammi il .md overview onboarding login | IN BOZZA |\n| Tabella flussi utente | Dammi tabella flussi login | Dammi il .md tabella flussi login | IN BOZZA |\n| Best practice onboarding | Dammi best practice onboarding | Dammi il .md best practice onboarding | IN BOZZA |\n| Esempio flusso step-by-step | Dammi esempio flusso onboarding | Dammi il .md esempio flusso onboarding | IN BOZZA |","size_chars":601,"tokens_estimate":150}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Tabella Flussi Utente","anchor_slug":"tabella-flussi-utente","chunk_index":2,"content":"## Tabella Flussi Utente\n\n| Flusso | Attori | Step Principali | Security/ACL | Note Operative |\n|--------|--------|-----------------|--------------|----------------|\n| Onboarding locale | Utente finale | Registrazione, conferma email, creazione credenziali, primo login | Policy password/MFA, ACL | Utente collegato a tenant_id |\n| Onboarding federato | Utente azienda/partner | SSO via Entra ID, mappatura tenant, mapping ruoli | SSO Entra ID, ACL mapping | Auto-provisioning se abilitato |\n| Onboarding prospect/demo | Nuovo cliente | Richiesta accesso, validazione, assegnazione tenant, invito | Validazione manuale/admin | Flusso semplificato, accesso limitato |\n| Login locale | Utente finale | Inserimento credenziali, validazione, MFA se richiesto | Token JWT, MFA opzionale | Tentativi falliti loggati |\n| Login federato | Utente azienda | SSO redirect, validazione token, mapping ruoli | Token Entra ID, ACL mapping | Timeout/session management |\n| Recupero credenziali | Utente finale | Reset password, verifica identità, set nuova password | Link one-time, scadenza | Alert admin su troppi reset |\n\n---","size_chars":1113,"tokens_estimate":278}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Best Practice Onboarding/Login","anchor_slug":"best-practice-onboardinglogin","chunk_index":3,"content":"## Best Practice Onboarding/Login\n\n- Sempre richiesta conferma email o SSO validato prima accesso\n- Ogni utente associato a tenant_id e profilo (ruolo/ACL)\n- Password policy forte + MFA per admin/superuser\n- Log di ogni tentativo di login, reset e modifica profilo\n- Flusso prospect/demo separato e \"sandboxato\" rispetto a clienti reali\n- Timeout sessione e refresh token configurabili\n- Processo di disabilitazione/reactivation gestito da admin tenant\n\n---","size_chars":457,"tokens_estimate":114}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Esempio Flusso Step-by-Step - Onboarding Locale","anchor_slug":"esempio-flusso-step-by-step-onboarding-locale","chunk_index":4,"content":"## Esempio Flusso Step-by-Step - Onboarding Locale\n\n1. Utente apre pagina di registrazione e inserisce dati (email, nome, azienda)\n2. Sistema invia email di conferma con link one-time\n3. Utente clicca link, crea password e completa registrazione\n4. Primo login, viene assegnato a tenant/azienda e ruolo di default\n5. System logga ogni passaggio e invia welcome email/alert admin tenant\n\nNota:\nOgni step deve essere tracciato nei log/audit e gestito secondo policy di sicurezza (tentativi, token, scadenze, MFA).","size_chars":511,"tokens_estimate":128}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":6,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":7,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-login-onboarding","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding.md","title":"Flussi Onboarding/Login - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":8,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Lookup - Gestione Notifiche","anchor_slug":"lookup-gestione-notifiche","chunk_index":1,"content":"## Lookup - Gestione Notifiche\n\n| Cosa vuoi | Cosa devi scrivere | Dammi il .md | Stato |\n|-----------|--------------------|--------------|-------|\n| Tabella tipologia notifiche | Dammi tabella notifiche | Dammi il .md tabella notifiche | IN BOZZA |\n| Gestione preferenze notifica utente | Dammi preferenze notifiche utente | Dammi il .md preferenze notifiche utente | IN BOZZA |\n| Flusso invio notifiche (step by step) | Dammi flusso invio notifiche | Dammi il .md flusso invio notifiche | IN BOZZA |\n| Best practice notifiche multi-tenant | Dammi best practice notifiche | Dammi il .md best practice notifiche | IN BOZZA |\n| Logging/audit notifiche | Dammi logging notifiche | Dammi il .md logging notifiche | IN BOZZA |","size_chars":722,"tokens_estimate":180}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Tabella Tipologia Notifiche","anchor_slug":"tabella-tipologia-notifiche","chunk_index":2,"content":"## Tabella Tipologia Notifiche\n\n| Tipo Notifica | Scopo/Trigger | Canale | Configurabile da utente | Note Operative |\n|---------------|--------------|--------|--------------------------|----------------|\n| Onboarding/Welcome | Primo accesso, registrazione completata | Email | No | Obbligatoria, template standard |\n| Cambio password/MFA | Reset credenziali, abilitazione MFA | Email, SMS | No | Alert immediato, link one-time |\n| Alert sicurezza | Accesso anomalo, tentativi falliti | Email, Teams | No | Alert ad admin e utente, logging obbl. |\n| Notifiche sistema | Errori ETL, esito batch, job completato | Email, Teams | Sì | Configurabile da profilo/ruolo |\n| Notifiche billing | Scadenza servizio, fattura disponibile | Email | Sì | Solo owner/admin tenant |\n| Reminder scadenze | Token/API in scadenza, task da completare | Email | Sì | Alert automatico, scheduling |\n| Notifiche personalizzate | Eventi business, comunicazioni custom | Email, Teams | Sì | Gestite da admin tenant/prodotto |\n\n---","size_chars":1004,"tokens_estimate":251}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Gestione Preferenze Notifica Utente","anchor_slug":"gestione-preferenze-notifica-utente","chunk_index":3,"content":"## Gestione Preferenze Notifica Utente\n\n- Ogni utente può configurare su quali canali ricevere le notifiche (email, Teams, solo dashboard, ecc.) e quali categorie attivare/disattivare.\n- Le preferenze sono salvate su tabella `user_notification_settings` (schema PORTAL).\n- Notifiche obbligatorie (onboarding, alert sicurezza) non sono disattivabili.\n- Modifica preferenze tracciata in audit log (timestamp, chi ha modificato, vecchio e nuovo stato).\n- Template multilingua e personalizzabili (per tenant/ruolo).\n\n---","size_chars":516,"tokens_estimate":129}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Flusso Invio Notifiche (step-by-step)","anchor_slug":"flusso-invio-notifiche-step-by-step","chunk_index":4,"content":"## Flusso Invio Notifiche (step-by-step)\n\n1. Microservizio/interfaccia rileva evento che richiede notifica (es: job ETL fallito, nuovo login)\n2. Recupera preferenze notifica utente/tenant (canale, categoria)\n3. Costruisce messaggio usando template predefinito (con merge dati dinamici)\n4. Invia tramite canale selezionato (SMTP, Teams webhook, SMS gateway)\n5. Logga evento di invio (stato: consegnato, errore, retry)\n6. Se fallisce, tenta retry secondo policy e allerta admin se errore persistente\n\n---","size_chars":502,"tokens_estimate":126}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Best Practice Notifiche Multi-tenant","anchor_slug":"best-practice-notifiche-multi-tenant","chunk_index":5,"content":"## Best Practice Notifiche Multi-tenant\n\n- Tutte le notifiche devono sempre essere riferite a tenant_id e user_id, per garantire isolamento dati.\n- Canali separati per ambiente (dev/test/prod): in dev/test, le notifiche vanno solo a indirizzi di test (mai clienti reali).\n- Configurazione dinamica canali e template per ogni tenant (supporto white-label).\n- Audit logging attivo per tutte le notifiche inviate/non consegnate.\n- Retry automatico per canali non disponibili, con alert escalation.\n- Conservazione log invio almeno 6 mesi, con dettaglio messaggio, stato, destinatario.\n\n---","size_chars":586,"tokens_estimate":146}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Logging/Audit Notifiche","anchor_slug":"loggingaudit-notifiche","chunk_index":6,"content":"## Logging/Audit Notifiche\n\n- Tutte le notifiche inviate sono registrate su tabella `notification_log` (tenant_id, user_id, tipo, canale, timestamp, stato).\n- Errori di invio tracciati con motivo, tentativi e outcome finale.\n- Modifica preferenze sempre loggata (vecchio e nuovo valore, chi e quando).\n- Integrazione con flussi di audit centrale (`portal-audit`), per compliance.\n\n---","size_chars":384,"tokens_estimate":96}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Nota operativa","anchor_slug":"nota-operativa","chunk_index":7,"content":"## Nota operativa\n\n- Prima di attivare notifiche verso clienti/utenti reali, testare canali e template su ambiente sandbox/dev.\n- I template email/notifica devono essere versionati e gestiti come asset del portale (cartella portal-assets).","size_chars":239,"tokens_estimate":60}
{"doc_id":"ew-notifiche","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione.md","title":"Gestione Notifiche - EasyWay Data Portal","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":8,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Dettaglio Implementativo Policy Chiave\r","anchor_slug":"dettaglio-implementativo-policy-chiave","chunk_index":1,"content":"## Dettaglio Implementativo Policy Chiave","size_chars":41,"tokens_estimate":10}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"1. Isolation Tenant & Row-Level Security\r","anchor_slug":"1-isolation-tenant-row-level-security","chunk_index":2,"content":"### 1. Isolation Tenant & Row-Level Security\r\n- Ogni richiesta (API Gateway → microservizio → DB) **porta sempre il tenant_id**.\r\n- Le query DB usano filtri su tenant_id (e profilo/ruolo se necessario).\r\n- Implementazione RLS su tutte le tabelle multi-tenant.\r\n- **Refuso da evitare:** mai lasciare endpoint senza validazione tenant/ruolo.","size_chars":339,"tokens_estimate":85}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"2. Identity Tecnica\r","anchor_slug":"2-identity-tecnica","chunk_index":3,"content":"### 2. Identity Tecnica\r\n- Ogni microservizio/container **usa un Managed Identity Azure** oppure uno specifico Service Principal.\r\n- Le identity hanno **solo i permessi strettamente necessari** (least privilege).\r\n- Accesso a Key Vault, storage e DB solo tramite queste identity.","size_chars":279,"tokens_estimate":70}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"3. Gestione Segreti e Parametri\r","anchor_slug":"3-gestione-segreti-e-parametri","chunk_index":4,"content":"### 3. Gestione Segreti e Parametri\r\n- Nessuna password/chiave hardcoded nel codice o pipeline.\r\n- Tutte le connessioni, segreti, token API sono su **Azure Key Vault** o (in locale) file `.env` cifrati/versionati.\r\n- Ogni accesso ai segreti viene loggato/auditato e ruotato periodicamente.","size_chars":289,"tokens_estimate":72}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"4. Networking Sicuro\r","anchor_slug":"4-networking-sicuro","chunk_index":5,"content":"### 4. Networking Sicuro\r\n- Ogni microservizio è raggiungibile **solo via VNet interna** o Private Endpoint.\r\n- Accesso pubblico solo all’API Gateway.\r\n- Nessun database o storage esposto su Internet.\r\n- Firewall e NSG su ogni subnet/container group.","size_chars":250,"tokens_estimate":62}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"5. Policy Config Versionabile\r","anchor_slug":"5-policy-config-versionabile","chunk_index":6,"content":"### 5. Policy Config Versionabile\r\n- Tutte le configurazioni sono mantenute come **Infrastructure as Code** (Bicep, ARM, Terraform) o in repository YAML/GitOps.\r\n- Ogni modifica/configurazione ambientale è storicizzata.\r\n- Niente “parametri manuali” inseriti a mano su Azure Portal.","size_chars":282,"tokens_estimate":70}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"6. Audit & Logging\r","anchor_slug":"6-audit-logging","chunk_index":7,"content":"### 6. Audit & Logging\r\n- Ogni richiesta critica (login, cambio ACL, accesso dati sensibili, errore auth) è tracciata in modo centralizzato.\r\n- Log e audit trail con retention policy e alert su accessi/anomalie.\r\n- Tutto lo storico a disposizione per compliance e troubleshooting.\n\n---","size_chars":285,"tokens_estimate":71}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"**Best Practice Operativa**\r","anchor_slug":"best-practice-operativa","chunk_index":8,"content":"## **Best Practice Operativa**\r\n> Ogni script, template o codice dovrà SEMPRE:\r\n> - Integrare queste policy come requisito base\r\n> - Indicare (in README/commenti) che le configurazioni vanno versionate e i segreti gestiti fuori dal codice\r\n> - Prevedere auditing/logging centralizzato per qualsiasi azione rilevante\n\n---\n\n**Se questa sezione va bene, la segno come “PRONTA PER CODICE” e passo alla prossima macro-sezione che vuoi tu.**\r\nVuoi aggiungere o dettagliare una specifica policy?  \r\nOppure proseguiamo con la prossima sezione (es: “Gestione logging & audit”, “Best practice naming e scaling”, ecc.)?","size_chars":608,"tokens_estimate":152}
{"doc_id":"ew-policy-di-configurazione-&-sicurezza-–-microservizi-e-api-gateway","path":"easyway-webapp/02_logiche_easyway/policy-di-configurazione-and-sicurezza-microservizi-e-api-gateway.md","title":"Policy di Configurazione & Sicurezza – Microservizi e API Gateway","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":9,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Dalle chat emerge chiaramente che:**","anchor_slug":"dalle-chat-emerge-chiaramente-che","chunk_index":1,"content":"### **Dalle chat emerge chiaramente che:**\n\n*   EasyWay Data Portal è un **SaaS B2B multi-tenant** moderno, orientato a:\n    *   **Data platform** e dashboard multi-dominio (economics, sostenibilità, data quality, e-commerce, integrazione API esterne…)\n        \n    *   **Accesso controllato e segregato per tenant/cliente** (e per ruoli/profili/gruppi ACL)\n        \n    *   **Sicurezza, compliance (GDPR/SOC2/DORA), tracciabilità, versioning e audit trail** a livello enterprise\n        \n    *   **Alta configurabilità**, template e workflow personalizzabili, onboarding flessibile, policy gestite via DB/parametri\n        \n*   Vuoi una piattaforma **“future proof”**: pronta per nuove estensioni, microservizi, federazione, API, crescita dei dati\n    \n*   **Centralità di:**\n    *   DB relazionale strutturato (SQL Server, modelli GOLD/BRONZE/PORTAL…)\n        \n    *   Storage Datalake (Azure)\n        \n    *   Microservizi/Container come logica di servizio (gestione domini, ACL, integrazione API)\n        \n    *   Provisioning e gestione accessi via Azure Entra ID, policy IAM strutturata, naming convenzionato\n        \n*   Vuoi evitare “monoliti” e preferisci una **Web App composta da microservizi/container**,  \n    ma con governance semplice, sicurezza top, e capacità di deployment e test anche su ambiente dev/local\n    \n\n* * *\n\n**2. Che alternative architetturali abbiamo su Azure?**\n-------------------------------------------------------","size_chars":1450,"tokens_estimate":362}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**A. Azure App Service Plan + Container**","anchor_slug":"a-azure-app-service-plan-container","chunk_index":2,"content":"### **A. Azure App Service Plan + Container**\n\n*   Containerizzando i microservizi ma deployando su istanze PaaS, con scaling gestito da Azure\n    \n*   **Pro:**\n    *   Semplicità di setup, costi prevedibili, nessuna gestione cluster/VM\n        \n    *   Perfetto per MVP, PoC e piccoli team\n        \n    *   Facile da integrare con pipeline Azure DevOps/GitHub Actions\n        \n*   **Contro:**\n    *   Limitato nel clustering avanzato, scaling multi-regione, service mesh, gestione segreti evoluta\n        \n    *   Più “monolitico” in gestione release: meno adatto per decine di microservizi indipendenti","size_chars":604,"tokens_estimate":151}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**B. Azure Container Apps**","anchor_slug":"b-azure-container-apps","chunk_index":3,"content":"### **B. Azure Container Apps**\n\n*   Un’evoluzione tra App Service e AKS: gestisce il deployment di container, scaling on demand, senza dover gestire un cluster AKS\n    \n*   **Pro:**\n    *   Molta elasticità, auto-scaling anche su eventi/kafka\n        \n    *   Più economico di AKS per carichi fluttuanti/batch\n        \n    *   Perfetto per microservizi indipendenti, senza overhead di cluster management\n        \n*   **Contro:**\n    *   Più nuovo/meno maturo di App Service o AKS (meno documentazione, meno automazioni enterprise)\n        \n    *   Limiti su networking avanzato rispetto ad AKS puro","size_chars":599,"tokens_estimate":150}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**C. AKS – Azure Kubernetes Service (full cluster Kubernetes)**","anchor_slug":"c-aks-azure-kubernetes-service-full-cluster-kubernetes","chunk_index":4,"content":"### **C. AKS – Azure Kubernetes Service (full cluster Kubernetes)**\n\n*   Il top della flessibilità, ma anche della complessità gestionale\n    \n*   **Pro:**\n    *   Standard de facto per microservizi/container a livello enterprise, multi-cloud, multi-region\n        \n    *   Gestione service mesh, ingress, segreti, RBAC, operator, custom CRD, rolling update, canary deploy, blue/green…\n        \n    *   Pronto per federazioni, evoluzioni architetturali, orchestrazione avanzata\n        \n*   **Contro:**\n    *   Curva di apprendimento, overhead gestionale (patch, backup, monitoring, logging cluster)\n        \n    *   Costi fissi (minimo 1-3 VM sempre attive, anche a carico zero)\n        \n    *   Pipeline CI/CD più complesse, più error-prone se il team non è già formato su Kubernetes\n        \n\n* * *\n\n**3. Quale scegliere per EasyWay Data Portal?**\n-----------------------------------------------\n\n**La tua vision** (dalle chat) indica una piattaforma che:\n*   Deve **scalare e federarsi** in futuro, ma che **vuoi lanciare in modo rapido e ordinato** oggi\n    \n*   Prevede tanti microservizi, ma con processi chiari di audit, naming, e gestione template\n    \n*   Vuole essere sempre pronta a “migrare di livello” senza bloccare il delivery","size_chars":1242,"tokens_estimate":310}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**La mia raccomandazione pratica:**","anchor_slug":"la-mia-raccomandazione-pratica","chunk_index":5,"content":"### **La mia raccomandazione pratica:**","size_chars":39,"tokens_estimate":10}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Fase 1 (MVP, primo go-live, delivery rapido):**","anchor_slug":"fase-1-mvp-primo-go-live-delivery-rapido","chunk_index":6,"content":"### **Fase 1 (MVP, primo go-live, delivery rapido):**\n\n*   **App Service Plan + Container Apps**\n    *   Sfrutta i microservizi come container (con Azure Container Registry)\n        \n    *   Deploy su App Service Plan o Azure Container Apps\n        \n    *   Governa routing via Azure API Management Developer (per dev) o Standard (per prod)\n        \n    *   **PRO:**\n        *   Semplicità, rapidità di sviluppo, test locale immediato, costi bassi (vedi sotto)\n            \n        *   Governance IAM, naming, logging già allineati a quanto progettato","size_chars":551,"tokens_estimate":138}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Fase 2 (Crescita, enterprise, federazione, multi-region):**","anchor_slug":"fase-2-crescita-enterprise-federazione-multi-region","chunk_index":7,"content":"### **Fase 2 (Crescita, enterprise, federazione, multi-region):**\n\n*   **Migrazione graduale ad AKS**\n    *   Una volta consolidati processi, security, pipeline, si può spostare (anche uno alla volta) i microservizi/container su AKS\n        \n    *   Permette di scalare, isolare, federare a piacere, e aggiungere advanced features (service mesh, autoscaling, multi-cloud ecc.)\n        \n\n* * *\n\n**4. Forecast costi (2025)**\n----------------------------","size_chars":451,"tokens_estimate":113}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Scenario 1 – App Service Plan + Container Apps + Dev API Management**","anchor_slug":"scenario-1-app-service-plan-container-apps-dev-api-management","chunk_index":8,"content":"### **Scenario 1 – App Service Plan + Container Apps + Dev API Management**\n\n*   **App Service Plan S1**: ~65 €/mese per app (scalabile, ma puoi partire anche con meno)\n    \n*   **Azure Container Registry**: ~4 €/mese (Basic, storage immagini)\n    \n*   **Container Apps**: pay-per-use, costi bassi per microservizi “sleeping”\n    \n*   **API Management Developer**: 45 €/mese (dev/test, nessun SLA)\n    \n*   **Storage Account (LRS)**: ~20 €/mese (datalake dev, prezzi variabili)\n    \n*   **DB SQL Server**: da ~15-80 €/mese (dev/test, si adatta a carico, DTU/Managed Instance)\n    \n\n> **Stima costi DEV/PoC**:  \n> ~150-250 €/mese per tutto il core, **se tieni poche risorse attive** e spegni/elimini quelle non usate (es. API Mgmt).\n\n> **Stima costi PROD primo go-live**:  \n> 250-400 €/mese se attivi almeno 2-3 microservizi/container, API Mgmt Standard, storage + DB SQL, scaling base.\n\n* * *","size_chars":892,"tokens_estimate":223}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Scenario 2 – AKS (Kubernetes Full)**","anchor_slug":"scenario-2-aks-kubernetes-full","chunk_index":9,"content":"### **Scenario 2 – AKS (Kubernetes Full)**\n\n*   **AKS cluster**: almeno 2 nodi VM (B2s): ~50 €/mese per nodo = 100 €/mese\n    \n*   **Load balancer pubblico AKS**: ~18 €/mese\n    \n*   **Container Registry**: 4 €/mese\n    \n*   **API Mgmt Standard**: 700 €/mese (se vuoi alta disponibilità, proxy, multi-tenant)\n    \n*   **Storage + DB**: come sopra (~20 + 80 €/mese)\n    \n\n> **Stima minima mensile, anche a risorse spente:**  \n> AKS+API Mgmt Standard: **~900-1.000 €/mese** per ambiente produzione  \n> (con opzione di abbassare i costi solo riducendo i nodi o scegliendo API Mgmt Basic).\n\n* * *","size_chars":592,"tokens_estimate":148}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Scenario 3 – Hybrid/Container Apps**","anchor_slug":"scenario-3-hybridcontainer-apps","chunk_index":10,"content":"### **Scenario 3 – Hybrid/Container Apps**\n\n*   **Container Apps**: se usi scaling su eventi, batch, lavori saltuari\n    \n*   Costi elastici (scali a zero se nessun traffico)\n    \n*   Perfetto per ambienti dev, test, PoC, e per servizi accessori\n    \n\n* * *\n\n**5. PRO/CONTRO – Tabella pratica**\n-----------------------------------\n\n| Approccio | PRO | CONTRO | Quando preferirlo |\n| --- | --- | --- | --- |\n| App Service Plan | Semplicità, costi bassi, poco setup, start veloce | Meno custom/scalabile di AKS | MVP, go-live veloce, team piccolo |\n| Container Apps | Scalabilità elastica, poco management, pay per use | Meno maturo, meno networking avanzato | Batch, microservizi separati, PoC |\n| AKS (Kubernetes) | Enterprise, massima flessibilità, standard de facto | Costi fissi, curva learning, più devops | Espansione, federazione, grandi volumi |\n\n* * *\n\n**6. Visione d’insieme / Best Practice finale**\n-----------------------------------------------\n\n**Iniziare con App Service Plan/Container Apps** è la scelta migliore per EasyWay Data Portal ora:\n*   Delivery rapido, costi sotto controllo, possibilità di test locale\n    \n*   Puoi implementare TUTTE le best practice già progettate (ACL, logging, security, onboarding, API Mgmt)\n    \n*   **Quando (e se) crescerai**: potrai fare “lift & shift” su AKS gradualmente,  \n    riutilizzando pipeline, container, policy e naming (già standardizzato)\n    \n**AKS sarà lo step naturale appena serviranno:**\n*   Multi-region\n    \n*   Migliaia di utenti/concurrency elevata\n    \n*   Custom routing/networking/mesh avanzate\n    \n*   Federation/multi-cloud\n    \n\n* * *","size_chars":1615,"tokens_estimate":404}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":3,"anchor_text":"**Azioni pratiche immediate**","anchor_slug":"azioni-pratiche-immediate","chunk_index":11,"content":"### **Azioni pratiche immediate**\n\n*   Prepara i manifest/container e pipeline **in modo che siano già “portabili”** (Dockerfile, IaC, template versionati)\n    \n*   Centralizza policy e naming in repository/Key Vault, come già previsto\n    \n*   **Non fossilizzarti ora su AKS**: è la naturale evoluzione, ma puoi starci dopo con calma e senza ansie di lock-in\n    \n\n* * *\n\n**7. Forecast futuro**\n----------------------\n\n*   **Dev/test:** puoi mantenere costi <200€/mese\n    \n*   **Prod**: per tutto il portale “base”, stimerei **300-500€/mese** in modalità PaaS/container,  \n    salendo a >900€/mese solo scegliendo full AKS con API Mgmt Standard/Premium.","size_chars":655,"tokens_estimate":164}
{"doc_id":"ew-raccomandazione-architetturale-–-easyway-data-portal","path":"easyway-webapp/02_logiche_easyway/raccomandazione-architetturale-easyway-data-portal.md","title":"**Dalle chat emerge chiaramente che:**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":12,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-api-invio-notifica","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"**1. Schema di validazione**","anchor_slug":"1-schema-di-validazione","chunk_index":1,"content":"### **1. Schema di validazione**\n\n`src/validators/notificationValidator.ts`\n\n```sql\nexport const sendNotificationSchema = z.object({\n  recipients: z.array(z.string().min(6).max(64)), // array di user_id\n  category: z.string().min(3).max(32),   // es: \"ALERT\"\n  channel: z.string().min(3).max(16),    // es: \"EMAIL\", \"SMS\"\n  message: z.string().min(1).max(1024),\n  ext_attributes: z.record(z.any()).optional()\n});\n\n```sql","size_chars":420,"tokens_estimate":105}
{"doc_id":"ew-api-invio-notifica","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"**2. Controller**","anchor_slug":"2-controller","chunk_index":2,"content":"### **2. Controller**\n\n`src/controllers/notificationsController.ts`\n\n```sql\nimport { Request, Response } from \"express\";\nimport sql from \"mssql\";\nimport { logger } from \"../utils/logger\";\n\nexport async function sendNotification(req: Request, res: Response) {\n  const pool = await sql.connect(process.env.DB_CONN_STRING!);\n  const tenantId = (req as any).tenantId;\n  const { recipients, category, channel, message, ext_attributes = {} } = req.body;\n\n  try {\n    // Per ogni destinatario, chiama la SP (o batch, secondo design DB)\n    for (const user_id of recipients) {\n      await pool.request()\n        .input(\"tenant_id\", sql.NVarChar, tenantId)\n        .input(\"user_id\", sql.NVarChar, user_id)\n        .input(\"category\", sql.NVarChar, category)\n        .input(\"channel\", sql.NVarChar, channel)\n        .input(\"message\", sql.NVarChar, message)\n        .input(\"ext_attributes\", sql.NVarChar, JSON.stringify(ext_attributes))\n        .execute(\"PORTAL.sp_send_notification\");\n    }\n\n    logger.info(\"Notification sent\", {\n      tenantId,\n      recipientsCount: recipients.length,\n      category,\n      channel,\n      event: \"NOTIFY_SEND\",\n      time: new Date().toISOString()\n    });\n\n    res.status(200).json({ ok: true, sent: recipients.length });\n\n  } catch (err: any) {\n    logger.error(\"Send notification failed\", {\n      tenantId,\n      error: err.message,\n      event: \"NOTIFY_SEND_ERROR\",\n      time: new Date().toISOString()\n    });\n    res.status(500).json({ error: err.message });\n  }\n}\n\n```sql","size_chars":1503,"tokens_estimate":376}
{"doc_id":"ew-api-invio-notifica","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"**3. Rotta**","anchor_slug":"3-rotta","chunk_index":3,"content":"### **3. Rotta**\n\n`src/routes/notifications.ts`  \n_(aggiungi accanto a subscribe)_\n\n```sql\nimport { sendNotification } from \"../controllers/notificationsController\";\nimport { sendNotificationSchema } from \"../validators/notificationValidator\";\n\nrouter.post(\"/send\", validateBody(sendNotificationSchema), sendNotification);\n\n```sql","size_chars":330,"tokens_estimate":82}
{"doc_id":"ew-api-invio-notifica","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"ENDPOINT: POST `/api/notifications/send`","anchor_slug":"endpoint-post-apinotificationssend","chunk_index":4,"content":"### ENDPOINT: POST `/api/notifications/send`\n\n**Descrizione**  \nInvia (o simula l’invio) una notifica a uno o più utenti,  \nmappando la chiamata alla store procedure `PORTAL.sp_send_notification`.\n\n**Validazione**  \n- recipients: array di user_id, obbligatorio\n- category, channel, message: obbligatori, validati per lunghezza/formato\n\n**Logging**\n- Log business su file/console (event: NOTIFY_SEND)\n- Errori loggati, mai dati sensibili\n\n**Test**\n- POST `/api/notifications/send`  \n  Body:\n  ```json\n  {\n    \"recipients\": [\"USR000001\", \"USR000002\"],\n    \"category\": \"ALERT\",\n    \"channel\": \"EMAIL\",\n    \"message\": \"Messaggio di esempio\",\n    \"ext_attributes\": { \"source\": \"system\" }\n  }\n  ```\nRisposta 200 OK, o 500 in caso di errore","size_chars":733,"tokens_estimate":183}
{"doc_id":"ew-api-invio-notifica","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-invio-notifica.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-api-notifiche","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"**1. Schema di validazione**","anchor_slug":"1-schema-di-validazione","chunk_index":1,"content":"### **1. Schema di validazione**\n\n`src/validators/notificationValidator.ts`\n\n\n```sql\nimport { z } from \"zod\";\n\nexport const subscribeSchema = z.object({\n  user_id: z.string().min(6).max(64),\n  category: z.string().min(3).max(32),   // es: \"NEWS\", \"ALERT\", \"BILLING\"\n  channel: z.string().min(3).max(16)     // es: \"EMAIL\", \"SMS\", \"PUSH\"\n});\n\n```sql","size_chars":348,"tokens_estimate":87}
{"doc_id":"ew-api-notifiche","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"**2. Controller**","anchor_slug":"2-controller","chunk_index":2,"content":"### **2. Controller**\n\n`src/controllers/notificationsController.ts`\n\n```sql\nimport { Request, Response } from \"express\";\nimport sql from \"mssql\";\nimport { logger } from \"../utils/logger\";\n\nexport async function subscribeNotification(req: Request, res: Response) {\n  const pool = await sql.connect(process.env.DB_CONN_STRING!);\n  const { user_id, category, channel } = req.body;\n  const tenantId = (req as any).tenantId;\n\n  try {\n    // Chiama la stored procedure di subscription (nome conforme a EasyWay DB)\n    await pool.request()\n      .input(\"tenant_id\", sql.NVarChar, tenantId)\n      .input(\"user_id\", sql.NVarChar, user_id)\n      .input(\"category\", sql.NVarChar, category)\n      .input(\"channel\", sql.NVarChar, channel)\n      .execute(\"PORTAL.sp_subscribe_notification\");\n\n    // Log business (no dati sensibili)\n    logger.info(\"User subscribed to notification\", {\n      tenantId,\n      userId: user_id,\n      category,\n      channel,\n      event: \"NOTIFY_SUBSCRIBE\",\n      time: new Date().toISOString()\n    });\n\n    res.status(200).json({ ok: true });\n  } catch (err: any) {\n    logger.error(\"Subscription failed\", {\n      tenantId,\n      userId: user_id,\n      error: err.message,\n      event: \"NOTIFY_SUBSCRIBE_ERROR\",\n      time: new Date().toISOString()\n    });\n    res.status(500).json({ error: err.message });\n  }\n}\n\n```sql","size_chars":1338,"tokens_estimate":334}
{"doc_id":"ew-api-notifiche","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"**3. Rotta**","anchor_slug":"3-rotta","chunk_index":3,"content":"### **3. Rotta**\n\n`src/routes/notifications.ts`\n\n```sql\nimport { Router } from \"express\";\nimport { subscribeNotification } from \"../controllers/notificationsController\";\nimport { validateBody } from \"../middleware/validate\";\nimport { subscribeSchema } from \"../validators/notificationValidator\";\n\nconst router = Router();\n\nrouter.post(\"/subscribe\", validateBody(subscribeSchema), subscribeNotification);\n\nexport default router;\n\n```sql\n\nAggiungi in `app.ts`:\n\n```sql\nimport notificationsRoutes from \"./routes/notifications\";\napp.use(\"/api/notifications\", notificationsRoutes);\n```sql","size_chars":583,"tokens_estimate":146}
{"doc_id":"ew-api-notifiche","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-notifiche.md","title":"**1. Schema di validazione**","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-api-onboarding","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-onboarding.md","title":"ENDPOINT: POST `/api/onboarding`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"ENDPOINT: POST `/api/onboarding`","anchor_slug":"endpoint-post-apionboarding","chunk_index":1,"content":"### ENDPOINT: POST `/api/onboarding`\n\n**Descrizione**  \nPermette di registrare un nuovo tenant + user in un colpo solo.  \nChiamata REST che mappa la store procedure core di onboarding (`PORTAL.sp_debug_register_tenant_and_user`).\n\n**Best Practice**\n- Input sempre validato (zod, middleware)\n- Log in `PORTAL.STATS_EXECUTION_LOG` (via SP) con esito, tempi, parametri, eventuale errore\n- Logging applicativo solo info chiave (mai dati sensibili)\n\n**Come si testa**\n- POST `/api/onboarding` con JSON body:\n  ```json\n  {\n    \"tenant_name\": \"Nuovo Cliente Srl\",\n    \"user_email\": \"amministratore@nuovocliente.it\",\n    \"display_name\": \"Mario Rossi\",\n    \"profile_id\": \"ADMIN\",\n    \"ext_attributes\": { \"source\": \"web\", \"ip\": \"1.2.3.4\" }\n  }\n  ```\n*   Risposta 201 OK con result.\n    \n*   In caso di errore: 500 + messaggio.\n    \n\nyaml\n\nCopyEdit\n\n`---  ### **STOP**`","size_chars":858,"tokens_estimate":214}
{"doc_id":"ew-api-onboarding","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/api-onboarding.md","title":"ENDPOINT: POST `/api/onboarding`","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-checklist-di-test-api","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md","title":"Checklist di test API (EasyWay Data Portal)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Checklist di test API (EasyWay Data Portal)","anchor_slug":"checklist-di-test-api-easyway-data-portal","chunk_index":1,"content":"## Checklist di test API (EasyWay Data Portal)\n\n1. **Validazione input**\n   - ❑ Richiesta con dati validi restituisce 2xx e il risultato atteso\n   - ❑ Richiesta con dati non validi restituisce errore 400 con dettaglio chiaro\n\n2. **Multi-tenant enforced**\n   - ❑ Senza header `X-Tenant-Id` → errore 400\n   - ❑ Con tenant valido → solo dati del tenant\n\n3. **Chiamata Store Procedure**\n   - ❑ L’API chiama effettivamente la SP core (log presente su DB)\n   - ❑ Parametri REST mappati 1:1 su parametri SP\n   - ❑ Ogni default, NDG, validazione logica è rispettata come da DB\n\n4. **Logging**\n   - ❑ Ogni chiamata è loggata su `PORTAL.STATS_EXECUTION_LOG` (SP + errori)\n   - ❑ Log in file JSON `business.log.json` (privo di dati sensibili)\n   - ❑ Eventuali errori sono loggati (sia su file che su tabella)\n\n5. **Edge case / errori**\n   - ❑ Parametri mancanti, invalidi, valori ai limiti\n   - ❑ Errori della SP correttamente gestiti (500 o messaggio specifico)\n   - ❑ Nessuna informazione sensibile in risposta o log\n\n6. **Sicurezza**\n   - ❑ Nessun dato sensibile in chiaro nei log/esportazioni\n   - ❑ Accessi e permessi sempre validati via ACL/profili\n\n7. **Automazione**\n   - ❑ Test automatici o collection Postman eseguibili e versionate\n   - ❑ Pipeline DevOps verifica successo/fallimento\n\n8. **Documentazione**\n   - ❑ Endpoint, input/output, errori, logica sempre documentati nella Wiki\n   - ❑ Eventuali deviazioni, workaround, edge case riportati subito in doc","size_chars":1457,"tokens_estimate":364}
{"doc_id":"ew-checklist-di-test-api","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md","title":"Checklist di test API (EasyWay Data Portal)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-checklist-di-test-api","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md","title":"Checklist di test API (EasyWay Data Portal)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":3,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-checklist-di-test-api","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md","title":"Checklist di test API (EasyWay Data Portal)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":4,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-checklist-di-test-api","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/checklist-di-test-api.md","title":"Checklist di test API (EasyWay Data Portal)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:48+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":5,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-convenzioni-rest-e-naming","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/convenzioni-rest-e-naming.md","title":"Convenzioni REST EasyWay","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Convenzioni REST EasyWay","anchor_slug":"convenzioni-rest-easyway","chunk_index":1,"content":"## Convenzioni REST EasyWay\n\n- **Path sempre in minuscolo**, separatore trattino\n  - Es: `/api/onboarding`, `/api/users/:user_id`, `/api/profiles`\n- **Verbi HTTP standard**\n  - GET → lettura\n  - POST → creazione\n  - PUT → modifica/aggiornamento\n  - DELETE → soft delete/disattivazione\n- **Parametri path sempre dopo `/api/` e prima delle azioni**\n  - `/api/user/:user_id/profiles`\n- **Header custom sempre con “X-”**\n  - `X-Tenant-Id`, `X-Request-Id`\n- **Body sempre JSON**\n- **Errori sempre con struttura coerente:**\n  ```json\n  {\n    \"error\": \"Messaggio chiaro\",\n    \"details\": [ ... ] // opzionale\n  }\n   ```\n\n*   **Nessun dato sensibile nei body o log**\n    \n*   **Input/output tipizzato e validato con schema TypeScript/Zod**\n    \n*   **Ogni endpoint REST mappa direttamente una SP core**","size_chars":793,"tokens_estimate":198}
{"doc_id":"ew-convenzioni-rest-e-naming","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/convenzioni-rest-e-naming.md","title":"Convenzioni REST EasyWay","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Overview","anchor_slug":"overview","chunk_index":1,"content":"## Overview\n\nL’integrazione Shopify permette di:\n- Sincronizzare ordini, prodotti e clienti dal marketplace Shopify al portale (analisi, arricchimento, dashboard)\n- Automatizzare workflow (import dati, notifiche, arricchimento profili)\n- Supportare più negozi/tenant, mantenendo separazione logica tra clienti","size_chars":309,"tokens_estimate":77}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Tabella Integrazione Shopify\r","anchor_slug":"tabella-integrazione-shopify","chunk_index":2,"content":"## Tabella Integrazione Shopify\n\n| Aspetto            | Descrizione                                                      |\r\n|--------------------|------------------------------------------------------------------|\r\n| Endpoint principali| /admin/api/2024-04/orders.json, /products.json, /customers.json  |\r\n| Autenticazione     | OAuth2 (consigliato), oppure API Key e password (solo legacy)    |\r\n| Modalità           | Batch sync (periodico), real-time via Webhook, manual trigger    |\r\n| Mapping tenant     | Ogni chiamata è legata a tenant_id/negozio specifico             |\r\n| Policy sicurezza   | Token/API key solo in Key Vault, logging chiamate e errori       |\r\n| Rate limit         | 2 requests/sec per endpoint (Shopify), backoff su errore 429     |\r\n| Sandbox            | Usare dev store Shopify per test, mai fare prove su shop reale   |\n\n---","size_chars":855,"tokens_estimate":214}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempio Pratico – Recupero Ordini (API)\r","anchor_slug":"esempio-pratico-recupero-ordini-api","chunk_index":3,"content":"## Esempio Pratico – Recupero Ordini (API)","size_chars":42,"tokens_estimate":10}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"1. **Chiamata GET ordini da Shopify**\r","anchor_slug":"1-chiamata-get-ordini-da-shopify","chunk_index":4,"content":"### 1. **Chiamata GET ordini da Shopify**\n\n**Endpoint:**  \r\n`GET https://<shop>.myshopify.com/admin/api/2024-04/orders.json?status=any&limit=5`\n\n**Header:**  \n\nX-Shopify-Access-Token: <token_sicuro_salvato_in_KeyVault>  \r\nContent-Type: application/json","size_chars":252,"tokens_estimate":63}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"2. **Esempio request (pseudo-codice Node.js/JS)**\r","anchor_slug":"2-esempio-request-pseudo-codice-nodejsjs","chunk_index":5,"content":"### 2. **Esempio request (pseudo-codice Node.js/JS)**\n\n```js\r\nconst axios = require('axios');\r\nconst accessToken = process.env.SHOPIFY_TOKEN; // Recuperato da Key Vault in produzione\n\nconst shop = 'nome-shop';\r\nconst url = `https://${shop}.myshopify.com/admin/api/2024-04/orders.json?status=any&limit=5`;\n\nconst response = await axios.get(url, {\r\n  headers: {\r\n    'X-Shopify-Access-Token': accessToken,\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n// Esempio logging:\r\nconsole.log({\r\n  event: 'shopify_fetch_orders',\r\n  shop,\r\n  tenant_id: 'CDI000001234',\r\n  count: response.data.orders.length,\r\n  status: response.status,\r\n  timestamp: new Date().toISOString()\r\n});\r\n```sql\n\n3. **Esempio risposta JSON (semplificata)**\r\n```sql\r\n{\r\n  \"orders\": [\r\n    {\r\n      \"id\": 123456789,\r\n      \"created_at\": \"2025-07-21T10:20:00+02:00\",\r\n      \"total_price\": \"39.99\",\r\n      \"customer\": {\r\n        \"id\": 99887766,\r\n        \"email\": \"cliente@email.it\",\r\n        \"first_name\": \"Mario\",\r\n        \"last_name\": \"Rossi\"\r\n      },\r\n      \"line_items\": [\r\n        { \"name\": \"T-Shirt Blu\", \"quantity\": 2 }\r\n      ],\r\n      \"financial_status\": \"paid\"\r\n    }\r\n    // ...\r\n  ]\r\n}\r\n```sql\r\n4. **Mapping dati e logica applicativa**\n\n| Campo Shopify | Campo EasyWay Data Portal | Note mapping |\r\n| --- | --- | --- |\r\n| id (ordine) | order_id | Unico per shop/tenant |\r\n| created_at | order_date | UTC standard |\r\n| total_price | total_price | Converte in formato standard |\r\n| customer.email | customer_email | Email masking per privacy |\r\n| line_items | prodotti | Mapping prodotti con codice interno |\r\n| financial_status | payment_status | Mapping dominio valori interno |","size_chars":1657,"tokens_estimate":414}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"5. **Logging e gestione errori**\r","anchor_slug":"5-logging-e-gestione-errori","chunk_index":6,"content":"### 5. **Logging e gestione errori**\r\n*   Loggare **ogni sync**: esito, count ordini, tenant/shop, timestamp, eventuali errori (es. 401, 429).\r\n    \r\n*   **Gestione errori:**\r\n    *   401/403 → alert admin e blocco sync su tenant\r\n        \r\n    *   429 → retry con backoff esponenziale\r\n        \r\n    *   Qualsiasi errore fatale: log in `portal-audit`, alert, e chiusura batch","size_chars":376,"tokens_estimate":94}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"6. **Best practice security**\r","anchor_slug":"6-best-practice-security","chunk_index":7,"content":"### 6. **Best practice security**\n\n*   **Token sempre in Key Vault,** mai in codice/config file.\r\n    \r\n*   **Ogni chiamata API deve portare anche il tenant_id** (per logging e separazione).\r\n    \r\n*   **Abilitare Webhook Shopify** per sync real-time di ordini/eventi rilevanti.","size_chars":278,"tokens_estimate":70}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":3,"anchor_text":"7. **Flusso sintesi (testuale)**\r","anchor_slug":"7-flusso-sintesi-testuale","chunk_index":8,"content":"### 7. **Flusso sintesi (testuale)**\r\n```sql\r\n[EasyWay Portal] → [Microservizio Shopify] → [Shopify API]\r\n      |\r\n      v\r\n[Recupera token sicuro] → [Effettua chiamata GET] → [Valida e mappa dati] → [Logga evento] → [Aggiorna DB]\r\n      |\r\n      +--> [Se errore → logga, allerta admin, gestisce retry]\r\n```sql\n\nNota operativa\r\n--------------\n\n*   **Per ogni nuovo shop/tenant**, va generato token OAuth dedicato e salvato in Key Vault associato al tenant_id.\r\n    \r\n*   Prima di andare in produzione, testare tutte le chiamate in ambiente Shopify dev/store di prova.\r\n    \r\n*   Tieni traccia dei mapping tra campi Shopify e DB del portale, aggiornando documentazione a ogni nuova release API.","size_chars":693,"tokens_estimate":173}
{"doc_id":"ew-esempio-integrazione-shopify","path":"easyway-webapp/02_logiche_easyway/api-esterne-integrazione/esempio-integrazione-shopify.md","title":"Integrazione Shopify – Dettaglio & Esempio Pratico","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":9,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-logging-and-audit-readme","path":"easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md","title":"Checklist Operativa – Logging & Audit","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\nGarantire che tutti i servizi, microservizi, pipeline e infrastrutture rispettino policy di logging, auditing e compliance, minimizzando i rischi e facilitando troubleshooting e auditing normativo.","size_chars":210,"tokens_estimate":52}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-logging-and-audit-readme","path":"easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md","title":"Checklist Operativa – Logging & Audit","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Checklist Logging & Audit\r","anchor_slug":"checklist-logging-audit","chunk_index":2,"content":"## Checklist Logging & Audit\n\n| ID   | Policy/Controllo                                    | Azione da eseguire                                              | Obbligatorio | Note/Best Practice                                      | Stato  |\r\n|------|-----------------------------------------------------|-----------------------------------------------------------------|--------------|---------------------------------------------------------|--------|\r\n| 1    | Log centralizzato                                   | Tutti i log inviati a Log Analytics o `portal-audit` su Datalake| Sì           | Evitare file log sparsi o solo su disco locale           |        |\r\n| 2    | Retention policy >=12 mesi (>=24 ACL/admin)         | Impostare retention minima 12 mesi (24 per security/admin)       | Sì           | Anche in ambiente DEV                                    |        |\r\n| 3    | Alert automatici                                    | Attivare alert automatici su errori login, ACL, dati sensibili   | Sì           | Email/Teams/Monitor                                      |        |\r\n| 4    | Audit trail su DB                                   | Abilitare SQL Audit/trigger su tabelle sensibili                 | Sì           | Anche accesso diretto a DB                               |        |\r\n| 5    | Log masking                                         | Mascherare password, token, dati personali nei log               | Sì           | Mai loggare secret in chiaro                             |        |\r\n| 6    | Log ETL/batch separati                              | Pipeline ETL scrivono log separati in `technical/`               | Sì           | Separare dai log funzionali                              |        |\r\n| 7    | Notifica owner/admin eventi critici                  | Invio notifica su ACL, accesso admin, variazione config          | Sì           | Sempre notificare responsabile tenant/global             |        |\r\n| 8    | Doc/README policy logging audit                     | Ogni script/template cita questa policy in README/doc            | Sì           | Policy sempre in evidenza per dev/team                   |        |\r\n| 9    | Log compliance GDPR/SOC2/DORA                       | Loggati solo eventi previsti e con masking conforme              | Sì           | Seguire policy masking, no dati sensibili in chiaro      |        |\r\n| 10   | Logging sem","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-logging-and-audit-readme","path":"easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md","title":"Checklist Operativa – Logging & Audit","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Checklist Logging & Audit\r","anchor_slug":"checklist-logging-audit","chunk_index":3,"content":"pre attivo anche in test                  | Mai disabilitare logging neanche in DEV/test                     | Sì           | Catch incidenti prima del go-live                        |        |\n\n---","size_chars":198,"tokens_estimate":50}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-logging-and-audit-readme","path":"easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md","title":"Checklist Operativa – Logging & Audit","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Template di commento/README da includere in ogni script/codice\r","anchor_slug":"template-di-commentoreadme-da-includere-in-ogni-scriptcodice","chunk_index":4,"content":"## Template di commento/README da includere in ogni script/codice\n\n> ⚠️ **Policy Logging & Audit EasyWay Data Portal:**  \r\n> - Centralizza tutti i log su Log Analytics o cartella `portal-audit`\r\n> - Maschera SEMPRE dati sensibili nei log  \r\n> - Mantieni retention minima 12 mesi (24 per security/admin)  \r\n> - Attiva alert automatici su eventi critici  \r\n> - Documenta questa policy in ogni README/script/template\n\n---","size_chars":418,"tokens_estimate":104}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-logging-and-audit-readme","path":"easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md","title":"Checklist Operativa – Logging & Audit","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Note operative\r","anchor_slug":"note-operative","chunk_index":5,"content":"## Note operative\n\n- Il rispetto di questa checklist è richiesto **anche per sviluppatori esterni, fornitori, o dev temporanei**\r\n- Ogni pull request/cambio infrastruttura deve includere validazione di questa checklist\r\n- In caso di dubbi, chiedere conferma a security/data owner o architetto progetto\n\n---","size_chars":306,"tokens_estimate":76}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-logging-and-audit-readme","path":"easyway-webapp/02_logiche_easyway/logging-and-audit/readme.md","title":"Checklist Operativa – Logging & Audit","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":6,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempi Flussi Avanzati Onboarding/Login","anchor_slug":"esempi-flussi-avanzati-onboardinglogin","chunk_index":1,"content":"## Esempi Flussi Avanzati Onboarding/Login\n\n| Flusso/Variante                   | Attori                   | Step Principali                                                          | Security/ACL                        | Note Operative                                   |\n|-----------------------------------|--------------------------|--------------------------------------------------------------------------|--------------------------------------|--------------------------------------------------|\n| Onboarding SSO aziendale custom   | Utente azienda/IT admin  | Admin IT configura SSO (es. via Entra ID, SAML, OIDC), provisioning utenti automatico | Policy SSO, ACL mapping, auto-onboard | Flusso zero-touch, utenti creati al primo login   |\n| Onboarding da Azure Marketplace   | Cliente marketplace      | Utente acquista/attiva dal marketplace, riceve invito onboarding automatico          | ACL predefiniti, mapping offerta      | Stato “pending” finché completato primo login     |\n| Gestione consensi privacy         | Utente finale            | Accetta/revoca consensi privacy all’atto di onboarding o nel profilo                 | Policy privacy, logging, audit       | Gestire versioning consensi e revoca retroattiva  |\n| Onboarding con autenticazione forte (SPID/CIE) | Utente pubblico       | Login con SPID/CIE, mappatura identità e assegnazione tenant/profilo                 | SPID/CIE integration, ACL mapping    | Obbligatorio in ambito pubblico/PA               |\n| Provisioning utenti “just-in-time”| Utente azienda/SSO       | Utente SSO non ancora presente, viene creato “al volo” al primo accesso              | SSO, claim mapping, policy onboarding| Profilo base fino a completamento anagrafica      |\n| Gestione consensi granulari       | Utente finale            | Possibilità di accettare/negare consensi specifici (newsletter, analytics, ecc.)     | Policy granular, audit consensi      | Stato consensi loggato con timestamp e motivazione|\n| Flusso “invito da altro sistema”  | Admin/integrazione esterna| Invio automatico di invito a utente da altro sistema/app                             | API external, ACL mapping            | Validazione invito e mappatura su tenant esistente|\n| Multi-factor onboarding           | Utente finale            | Obbligo attivazione MFA (OTP, Authenticator App) durante onboarding                  | Policy MFA, logging, audit     ","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempi Flussi Avanzati Onboarding/Login","anchor_slug":"esempi-flussi-avanzati-onboardinglogin","chunk_index":2,"content":"| Blocco login se MFA non completato                |\n| Onboarding/Accesso tramite QR code| Utente mobile/desktop    | Scan QR per onboarding rapido su dispositivi mobili                                  | Token QR one-time, ACL onboarding    | Valido per demo, eventi o partnership             |","size_chars":296,"tokens_estimate":74}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Dettaglio Esempio – SSO Aziendale Custom (Entra ID/SAML/OIDC)\r","anchor_slug":"dettaglio-esempio-sso-aziendale-custom-entra-idsamloidc","chunk_index":3,"content":"## Dettaglio Esempio – SSO Aziendale Custom (Entra ID/SAML/OIDC)\n\n1. Admin IT dell’azienda entra nell’area “Configura SSO”\r\n2. Registra dominio e imposta federazione (es: metadati SAML o OIDC)\r\n3. Testa la connessione con account di prova\r\n4. Dal primo login di un utente aziendale → provisioning automatico (profilo base, ACL default)\r\n5. Utente può essere auto-approvato o soggetto a verifica admin tenant\r\n6. Logging di tutta la procedura su audit centrale e notifica owner tenant\n\n---","size_chars":488,"tokens_estimate":122}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Dettaglio Esempio – Gestione Consensi Privacy\r","anchor_slug":"dettaglio-esempio-gestione-consensi-privacy","chunk_index":4,"content":"## Dettaglio Esempio – Gestione Consensi Privacy\n\n1. Utente, in fase di onboarding o nella sezione “Profilo”, visualizza i consensi richiesti e opzionali (es: marketing, profilazione, newsletter, analytics…)\r\n2. Ogni consenso può essere accettato/negato singolarmente, con registrazione timestamp e versione testo informativa\r\n3. Modifica consensi tracciata in audit log\r\n4. In caso di revoca, il sistema deve bloccare/aggiornare le funzionalità collegate\r\n5. Log e stato consensi accessibili su richiesta (per GDPR)\n\n---","size_chars":521,"tokens_estimate":130}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Dettaglio Esempio – Onboarding da Azure Marketplace\r","anchor_slug":"dettaglio-esempio-onboarding-da-azure-marketplace","chunk_index":5,"content":"## Dettaglio Esempio – Onboarding da Azure Marketplace\n\n1. Cliente attiva servizio direttamente da Azure Marketplace\r\n2. Sistema genera tenant_id e invia invito onboarding al referente specificato in fase d’ordine\r\n3. Utente accede al portale tramite link ricevuto, completa anagrafica, imposta password/MFA\r\n4. Profilo, ACL e permessi pre-caricati in base al tipo di offerta sottoscritta (es: demo, starter, premium)\r\n5. Logging di tutte le azioni, stato “pending” finché onboarding completato\n\n---","size_chars":499,"tokens_estimate":125}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Nota operativa\r","anchor_slug":"nota-operativa","chunk_index":6,"content":"## Nota operativa\n\n- Tutti i flussi avanzati vanno sempre collegati alle stesse policy di logging/audit, notifiche admin, e gestione ACL/tenant.\r\n- Le **customizzazioni (es. SSO, consensi, onboarding esterni)** vanno descritte anche nelle API/contratti REST tra sistemi.","size_chars":270,"tokens_estimate":68}
{"doc_id":"ew-esempi-flussi-avanzati-onboarding-login","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-avanzati-onboarding-login.md","title":"Esempi Flussi Avanzati Onboarding/Login","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":7,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-esempi-flussi-verticali-pa-–-accesso-tramite-spid-e-cie","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md","title":"Esempi Flussi Verticali PA – Accesso tramite SPID e CIE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempio Dettagliato – Accesso tramite SPID\r","anchor_slug":"esempio-dettagliato-accesso-tramite-spid","chunk_index":1,"content":"## Esempio Dettagliato – Accesso tramite SPID\n\n1. Utente PA apre la pagina di login e seleziona “Accedi con SPID”\r\n2. Sistema effettua redirect verso l’Identity Provider SPID scelto dall’utente\r\n3. Utente completa autenticazione sul portale SPID (livello 1, 2 o 3)\r\n4. Identity Provider rimanda callback all’applicazione con attributi (es. codice fiscale, nome, ente di appartenenza)\r\n5. Sistema crea (o aggiorna) profilo utente, associa a tenant/ente corretto, applica ruoli ACL corrispondenti\r\n6. Logging completo di ogni step (tentativi, esito, mapping ACL, dati minimi)\r\n7. Utente accede alla dashboard secondo i permessi assegnati dal mapping\n\n---","size_chars":652,"tokens_estimate":163}
{"doc_id":"ew-esempi-flussi-verticali-pa-–-accesso-tramite-spid-e-cie","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md","title":"Esempi Flussi Verticali PA – Accesso tramite SPID e CIE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempio Dettagliato – Accesso tramite CIE\r","anchor_slug":"esempio-dettagliato-accesso-tramite-cie","chunk_index":2,"content":"## Esempio Dettagliato – Accesso tramite CIE\n\n1. Utente seleziona “Accedi con CIE”\r\n2. Viene avviato il middleware CIE (browser plugin, desktop app, o mobile NFC)\r\n3. Utente autentica tramite PIN e dispositivo abilitato (NFC, smart card reader)\r\n4. Sistema riceve callback dal servizio CIE con dati anagrafici certificati\r\n5. Creazione/mapping automatico profilo utente, assegnazione tenant e ruoli, logging completo di processo\r\n6. Accesso consentito solo se attributi minimi presenti e validi\n\n---","size_chars":499,"tokens_estimate":125}
{"doc_id":"ew-esempi-flussi-verticali-pa-–-accesso-tramite-spid-e-cie","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md","title":"Esempi Flussi Verticali PA – Accesso tramite SPID e CIE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempio Onboarding Integrato SPID/CIE\r","anchor_slug":"esempio-onboarding-integrato-spidcie","chunk_index":3,"content":"## Esempio Onboarding Integrato SPID/CIE\n\n- Al primo accesso tramite SPID o CIE, l’utente non presente viene automaticamente creato come “utente PA”, associato a tenant dell’ente di appartenenza, e profilato in base agli attributi forniti.\r\n- In caso di accesso ripetuto con provider diverso (es. prima SPID, poi CIE), sistema unifica il profilo in base a codice fiscale.\r\n- Ogni variazione/mapping viene tracciata in audit, con log motivazione e data/ora.\n\n---","size_chars":461,"tokens_estimate":115}
{"doc_id":"ew-esempi-flussi-verticali-pa-–-accesso-tramite-spid-e-cie","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md","title":"Esempi Flussi Verticali PA – Accesso tramite SPID e CIE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Note Operative Verticale PA\r","anchor_slug":"note-operative-verticale-pa","chunk_index":4,"content":"## Note Operative Verticale PA\n\n- **Audit trail dettagliato** per ogni accesso, cambio provider, update profilo\r\n- **Conservazione dati** in conformità con linee guida AGID (minimo, necessario, logging)\r\n- **Mapping attributi → ACL/ruoli** basato su dati SPID/CIE (ruolo pubblico, ente, funzione)\r\n- **Possibilità di auto-provisioning** per enti federati; per altri, validazione manuale admin\r\n- **Alert automatici** su accessi anomali, tentativi falliti, cambi provider\n\n---","size_chars":475,"tokens_estimate":119}
{"doc_id":"ew-esempi-flussi-verticali-pa-–-accesso-tramite-spid-e-cie","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md","title":"Esempi Flussi Verticali PA – Accesso tramite SPID e CIE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Vantaggi per la PA\r","anchor_slug":"vantaggi-per-la-pa","chunk_index":5,"content":"## Vantaggi per la PA\n\n- Accesso **semplice e sicuro** per cittadini, aziende e dipendenti pubblici\r\n- Nessun onboarding manuale: dati certificati da provider\r\n- **Compliance completa** con normative italiane (SPID/CIE, GDPR, AGID)\r\n- Tutto il processo pronto per essere **automatizzato e auditato** via microservizi e policy\n\n---","size_chars":330,"tokens_estimate":82}
{"doc_id":"ew-esempi-flussi-verticali-pa-–-accesso-tramite-spid-e-cie","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/esempi-flussi-verticali-pa-accesso-tramite-spid-e-cie.md","title":"Esempi Flussi Verticali PA – Accesso tramite SPID e CIE","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":6,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-login-flussi-onboarding-readme","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md","title":"Flussi Onboarding/Login - Dettagli & Variazioni","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Tabella Flussi Aggiuntivi e Variazioni","anchor_slug":"tabella-flussi-aggiuntivi-e-variazioni","chunk_index":1,"content":"## Tabella Flussi Aggiuntivi e Variazioni\n\n| Flusso/Variante | Attori | Step Principali | Security/ACL | Note Operative |\n|-----------------|--------|-----------------|--------------|----------------|\n| Disabilitazione utente | Admin tenant/sys | Selezione utente, conferma disabilitazione, update stato in DB | ACL admin, audit obbligatorio | Utente non può accedere né ricevere notifiche |\n| Re-invito utente | Admin tenant/sys | Genera nuovo link di attivazione, invio via email, reset stato | One-time token, scadenza | Tracciamento riinvii in audit/log |\n| Upgrade prospect -> cliente | Admin globale/sys | Validazione dati, assegnazione tenant reale, aggiornamento profilo | ACL admin/global, audit | Aggiornamento ACL e ruoli automatico |\n| Cambio tenant/azienda utente | Admin globale | Scollega da vecchio tenant, collega a nuovo, aggiorna riferimenti | ACL admin/global, audit | Bloccare temporaneamente accesso se sensibile |\n| Invito aziendale multiplo | Admin tenant | Upload elenco email, invio inviti multipli, gestione batch | Batch token univoci, audit | Stato pending fino a attivazione |\n| Disabilitazione temporanea | Admin tenant/sys | Imposta flag temporaneo, logga motivazione, scadenza auto-react | Policy custom, alert admin | Accesso negato per X giorni, alert scadenza |\n| Cambio ruolo/profilo | Admin tenant/sys | Modifica ruolo ACL, conferma, logging motivazione | ACL mapping, audit | Notifica utente e log obbligatorio |\n| Gestione accessi invito scaduto | Utente finale | Tenta accesso con link vecchio/scaduto, riceve nuovo invito/reset | Token scadenza, retry limit | Log tentativi, alert su abuso |\n| Disiscrizione definitiva | Utente finale | Richiesta cancellazione, doppia conferma, revoca e anonimizzazione | GDPR compliant, audit | Mascheramento/anonymizzazione in DB/log |\n\n---","size_chars":1818,"tokens_estimate":454}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-login-flussi-onboarding-readme","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md","title":"Flussi Onboarding/Login - Dettagli & Variazioni","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Dettaglio Pratiche Operative","anchor_slug":"dettaglio-pratiche-operative","chunk_index":2,"content":"## Dettaglio Pratiche Operative\n\n- Audit trail obbligatorio per tutte le variazioni di stato utente e ACL\n- Notifica automatica agli admin per eventi critici (disabilitazione, upgrade, cambio tenant)\n- Policy di scadenza token per tutti gli inviti/ri-inviti e reset password\n- Anonimizzazione dati in caso di cancellazione/disiscrizione, secondo GDPR\n- Batch processing per inviti multipli: gestire stato pending, errore invio e retry limit\n- Logging motivazione per ogni variazione manuale da parte di admin\n\n---","size_chars":513,"tokens_estimate":128}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-login-flussi-onboarding-readme","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md","title":"Flussi Onboarding/Login - Dettagli & Variazioni","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempio Flusso \"Upgrade prospect -> cliente reale\"","anchor_slug":"esempio-flusso-upgrade-prospect-cliente-reale","chunk_index":3,"content":"## Esempio Flusso \"Upgrade prospect -> cliente reale\"\n\n1. Admin globale seleziona utente prospect dal sistema\n2. Verifica dati e azienda cliente\n3. Assegna utente a tenant reale e aggiorna ruolo/profilo\n4. Sistema invia email di upgrade e notifica sia utente che admin tenant\n5. Log di ogni step su portal-audit e tabella audit DB\n\n---","size_chars":335,"tokens_estimate":84}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-login-flussi-onboarding-readme","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md","title":"Flussi Onboarding/Login - Dettagli & Variazioni","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Esempio Flusso \"Disabilitazione temporanea\"","anchor_slug":"esempio-flusso-disabilitazione-temporanea","chunk_index":4,"content":"## Esempio Flusso \"Disabilitazione temporanea\"\n\n1. Admin tenant seleziona utente da sospendere\n2. Imposta flag `temporarily_disabled` e durata (es. 7gg)\n3. Utente viene bloccato da login e servizi, riceve email con motivazione\n4. Alert automatico agli admin sulla data di riattivazione prevista\n5. Sistema riattiva accesso in automatico allo scadere, oppure su intervento manuale\n\nNota:\nOgni variazione di stato, ruolo o tenant deve essere tracciata, notificata e soggetta a policy di retention e audit come già definito nella sezione Logging & Audit.","size_chars":551,"tokens_estimate":138}
{"doc_id":"ew-easyway-webapp-02-logiche-easyway-login-flussi-onboarding-readme","path":"easyway-webapp/02_logiche_easyway/login-flussi-onboarding/readme.md","title":"Flussi Onboarding/Login - Dettagli & Variazioni","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"1. Flusso Gestione Template Email","anchor_slug":"1-flusso-gestione-template-email","chunk_index":1,"content":"## 1. Flusso Gestione Template Email\n\n1. Amministratore o product owner carica un file Excel (es. `email_templates.xlsx`) nella cartella `portal-assets/` dello Storage Datalake.\n2. Il microservizio notifiche, ogni volta che deve inviare un'email:\n   - accede al file Excel tramite API Storage\n   - legge il template relativo al tipo di notifica richiesto (es: onboarding, alert, billing)\n   - effettua il merge dei dati dinamici (nome utente, data, tenant, ecc.) nelle variabili del template\n   - invia l'email secondo le preferenze utente (lingua, canale)\n3. Il sistema può aggiornare i template senza deployare codice, solo sostituendo il file Excel.\n4. Tutte le modifiche e gli invii sono loggati (tabella `notification_log`).","size_chars":729,"tokens_estimate":182}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"2. Struttura file Excel `email_templates.xlsx`","anchor_slug":"2-struttura-file-excel-emailtemplatesxlsx","chunk_index":2,"content":"## 2. Struttura file Excel `email_templates.xlsx`\n\n| Tipo_Notifica | Lingua | Oggetto | Corpo |\n|--------------|--------|---------|-------|\n| onboarding | IT | Benvenuto su EasyWay Data Portal | Ciao {{nome}}, il tuo account per {{tenant}} è stato attivato! |\n| onboarding | EN | Welcome to EasyWay Data Portal | Hi {{name}}, your account for {{tenant}} is now active! |\n| alert_sicurezza | IT | Accesso anomalo rilevato | È stato rilevato un accesso anomalo al tuo account il {{data}} |\n| alert_sicurezza | EN | Suspicious Login Detected | A suspicious login to your account was detected on {{date}} |\n| reset_password | IT | Reimposta la tua password | Per reimpostare la password clicca qui: {{reset_link}} |\n| reset_password | EN | Reset Your Password | To reset your password click here: {{reset_link}} |\n\n- Colonne consigliate: `Tipo_Notifica`, `Lingua`, `Oggetto`, `Corpo`\n- Placeholder variabili: usa doppie graffe (`{{ }}`) per tutti i dati dinamici (es. nome, link, tenant, data)\n\n---","size_chars":994,"tokens_estimate":248}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"3. Esempio di codice (pseudo, architettura agnostica)","anchor_slug":"3-esempio-di-codice-pseudo-architettura-agnostica","chunk_index":3,"content":"## 3. Esempio di codice (pseudo, architettura agnostica)\n\n```python\nimport pandas as pd\n\ndef get_template(tipo, lingua, params, excel_path):\n    df = pd.read_excel(excel_path)\n    tpl = df[(df['Tipo_Notifica']==tipo) & (df['Lingua']==lingua)].iloc[0]\n    oggetto = tpl['Oggetto'].format(**params)\n    corpo = tpl['Corpo']\n    for k, v in params.items():\n        corpo = corpo.replace(f'{{{{{k}}}}}', str(v))\n    return oggetto, corpo\n```\n\nEsempio chiamata:\n\n```python\nparams = {\"nome\": \"Mario\", \"tenant\": \"AziendaXYZ\", \"data\": \"21/07/2025\", \"reset_link\": \"https://...\"}\noggetto, corpo = get_template(\"onboarding\", \"IT\", params, \"email_templates.xlsx\")\n```\n\n---","size_chars":660,"tokens_estimate":165}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"4. Flusso \"Ready for Codice\"","anchor_slug":"4-flusso-ready-for-codice","chunk_index":4,"content":"## 4. Flusso \"Ready for Codice\"\n\n```text\n[Admin] -> [Carica email_templates.xlsx su portal-assets/]\n      |\n      v\n[Microservizio Notifiche] -> [Leggi template Excel via API Storage]\n      |\n      v\n[Costruisci email con merge variabili] -> [Invia email]\n      |\n      v\n[Log invio + template utilizzato + outcome]\n```\n\n---","size_chars":324,"tokens_estimate":81}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"5. Best Practice","anchor_slug":"5-best-practice","chunk_index":5,"content":"## 5. Best Practice\n\n- Versiona sempre i template (timestamp, backup excel)\n- Mantieni template multilingua e personalizzati per tenant, aggiungendo colonna \"Tenant\" se serve\n- Testa sempre il parsing/merge dati su ambiente di sviluppo\n- Logga nome file, versione, tipo notifica per ogni invio\n- Aggiornare i template non richiede deploy, basta sostituire Excel\n\n---","size_chars":366,"tokens_estimate":92}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"6. Esempi concreti (IT/EN)","anchor_slug":"6-esempi-concreti-iten","chunk_index":6,"content":"## 6. Esempi concreti (IT/EN)\n\nEsempio Onboarding IT:\n- Oggetto: `Benvenuto su EasyWay Data Portal`\n- Corpo: `Ciao {{nome}}, il tuo account per {{tenant}} è stato attivato!`\n\nEsempio Alert Sicurezza EN:\n- Oggetto: `Suspicious Login Detected`\n- Corpo: `A suspicious login to your account was detected on {{date}}.`\n\nNota operativa:\nOgni modifica ai template viene tracciata e può essere validata da admin. In produzione i template sono gestiti solo via Storage e mai hardcodati nel codice.","size_chars":488,"tokens_estimate":122}
{"doc_id":"ew-esempi-notifiche-and-template-email-configurabili","path":"easyway-webapp/02_logiche_easyway/notifiche-gestione/esempi-notifiche-and-template-email-configurabili.md","title":"Esempi Notifiche & Template Email Configurabili (Excel su Storage)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:47:54+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":7,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🎯 Scopo del Documento","anchor_slug":"scopo-del-documento","chunk_index":1,"content":"## 🎯 Scopo del Documento\nDefinire le **linee guida ufficiali** per la gestione ordinata, sicura e scalabile degli accessi allo **Storage Account Blob** e al **Datalake Gen2** in EasyWay DataPortal, inclusi:\n- Utenze di servizio\n- Gruppi di accesso (RBAC)\n- Naming convention\n- Best practice operative","size_chars":301,"tokens_estimate":75}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🔎 Differenza tra Blob Storage e Datalake HNS\r","anchor_slug":"differenza-tra-blob-storage-e-datalake-hns","chunk_index":2,"content":"## 🔎 Differenza tra Blob Storage e Datalake HNS\n\n| Nome Utenza               | Ambito               | Scopo principale        | Tipo di accesso        |\r\n|----------------------------|----------------------|--------------------------|-------------------------|\r\n| `portal.storage.*`         | Blob Storage (classico)| Assets, log, template    | RBAC (IAM)               |\r\n| `portal.datalake.*`        | Datalake Gen2 (HNS)   | Tenant data, ETL, staging| RBAC + ACL POSIX (fine-grained) |","size_chars":489,"tokens_estimate":122}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"📂 Esempio struttura\r","anchor_slug":"esempio-struttura","chunk_index":3,"content":"### 📂 Esempio struttura\r\n```sql\r\new-datalakedev/\r\n├── tenant-xxxx/\r\n│   ├── landing/\r\n│   ├── staging/\r\n│   ├── official/\r\n│   └── invalidrows/\r\n├── portal-assets/\r\n├── portal-audit/\r\n```sql\n\n---","size_chars":196,"tokens_estimate":49}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🏷️ Naming Convention - Utenze di Servizio\r","anchor_slug":"naming-convention-utenze-di-servizio","chunk_index":4,"content":"## 🏷️ Naming Convention - Utenze di Servizio\n\n| Nome                       | Permessi                | Scopo             |\r\n|-----------------------------|--------------------------|-------------------|\r\n| `portal.datalake.easyway.read`   | Lettura                 | Interno EasyWay    |\r\n| `portal.datalake.easyway.write`  | Scrittura               | Interno EasyWay    |\r\n| `portal.datalake.vendorA.read`   | Lettura                 | Vendor A           |\r\n| `portal.datalake.vendorA.write`  | Scrittura               | Vendor A           |\r\n| `portal.storage.easyway.read`    | Lettura Blob Storage     | Interno EasyWay    |\r\n| `admin.datalake`                 | Amministrazione Datalake | ACL, gestione dati |\r\n| `admin.storage`                  | Amministrazione Storage  | IAM, risorse Azure |\n\n---","size_chars":806,"tokens_estimate":202}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🏷️ Naming Convention - Gruppi di Accesso (RBAC)\r","anchor_slug":"naming-convention-gruppi-di-accesso-rbac","chunk_index":5,"content":"## 🏷️ Naming Convention - Gruppi di Accesso (RBAC)\n\n| Nome Gruppo                     | Ambito        | Permesso             |\r\n|----------------------------------|---------------|-----------------------|\r\n| `grp.portal.datalake.read`       | Datalake      | Lettura               |\r\n| `grp.portal.datalake.write`      | Datalake      | Scrittura             |\r\n| `grp.admin.datalake`             | Datalake      | Amministrazione       |\r\n| `grp.portal.storage.read`        | Blob Storage  | Lettura               |\r\n| `grp.admin.storage`              | Blob Storage  | Amministrazione       |\n\n---","size_chars":600,"tokens_estimate":150}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🔐 Assegnazione Ruoli Azure RBAC (IAM)\r","anchor_slug":"assegnazione-ruoli-azure-rbac-iam","chunk_index":6,"content":"## 🔐 Assegnazione Ruoli Azure RBAC (IAM)\n\n| Ambito     | Permesso    | Ruolo Azure                         |\r\n|------------|-------------|--------------------------------------|\r\n| Datalake   | Read        | `Storage Blob Data Reader`           |\r\n| Datalake   | Write       | `Storage Blob Data Contributor`      |\r\n| Datalake   | Admin       | `Storage Account Contributor`        |\r\n| Blob       | Read        | `Storage Blob Data Reader`           |\r\n| Blob       | Admin       | `Storage Account Contributor`        |\n\n---","size_chars":528,"tokens_estimate":132}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"📑 Best Practice Operative\r","anchor_slug":"best-practice-operative","chunk_index":7,"content":"## 📑 Best Practice Operative","size_chars":29,"tokens_estimate":7}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"✅ 1. **Utenze di Servizio**\r","anchor_slug":"1-utenze-di-servizio","chunk_index":8,"content":"### ✅ 1. **Utenze di Servizio**\r\n- Create sempre su **Microsoft Entra ID (Azure AD)**\r\n- Separate per ambito (Datalake vs Storage)\r\n- Nessuna licenza necessaria (solo IAM)","size_chars":171,"tokens_estimate":43}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"✅ 2. **Gruppi di Accesso**\r","anchor_slug":"2-gruppi-di-accesso","chunk_index":9,"content":"### ✅ 2. **Gruppi di Accesso**\r\n- Nessun utente diretto, solo gruppi (principio Least Privilege)\r\n- Naming `grp.*` sempre chiaro e coerente","size_chars":139,"tokens_estimate":35}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"✅ 3. **Permessi e Segregazione**\r","anchor_slug":"3-permessi-e-segregazione","chunk_index":10,"content":"### ✅ 3. **Permessi e Segregazione**\r\n- RBAC su tutto lo Storage Account (IAM Azure)\r\n- ACL POSIX per segregare accesso a cartelle tenant specifiche su Datalake\n\n---","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🔒 Esempio Accesso Vendor (Datalake ACL)\r","anchor_slug":"esempio-accesso-vendor-datalake-acl","chunk_index":11,"content":"## 🔒 Esempio Accesso Vendor (Datalake ACL)\r\n| Vendor    | Path consentito            | Permesso |\r\n|-----------|-----------------------------|----------|\r\n| Vendor A  | `/tenant-0001/landing`       | Read     |\r\n| Vendor B  | `/tenant-0002/landing`       | Write    |\n\n---","size_chars":273,"tokens_estimate":68}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🚀 Suggerimento Automazione (futuro)\r","anchor_slug":"suggerimento-automazione-futuro","chunk_index":12,"content":"## 🚀 Suggerimento Automazione (futuro)","size_chars":39,"tokens_estimate":10}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"Tool consigliati:\r","anchor_slug":"tool-consigliati","chunk_index":13,"content":"### Tool consigliati:\r\n- **Terraform / Bicep / ARM Template** per creare:\r\n  - Gruppi\r\n  - Ruoli\r\n  - Utenze\r\n  - Policy ACL","size_chars":124,"tokens_estimate":31}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":3,"anchor_text":"Esempio naming automatizzato:\r","anchor_slug":"esempio-naming-automatizzato","chunk_index":14,"content":"### Esempio naming automatizzato:\r\n```sql\r\naz ad group create --display-name \"grp.portal.datalake.read\" --mail-nickname \"grp.portal.datalake.read\"\r\n```sql\n\n---","size_chars":159,"tokens_estimate":40}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🛑 Regole Fondamentali (La Bibbia)\r","anchor_slug":"regole-fondamentali-la-bibbia","chunk_index":15,"content":"## 🛑 Regole Fondamentali (La Bibbia)\r\n- Nessun accesso diretto a utenti umani su Storage Prod\r\n- Tutto segregato tramite gruppi IAM e utenze tecniche\r\n- Ogni utenza ha uno scopo preciso e limitato\r\n- Audit sempre attivo su accessi e permessi\r\n- Naming chiaro, immutabile nel tempo\n\n---","size_chars":286,"tokens_estimate":72}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"🔔 Prossimi Step\r","anchor_slug":"prossimi-step","chunk_index":16,"content":"## 🔔 Prossimi Step\r\n- Formalizzare procedure operative (joiner/mover/leaver utenti e gruppi)\r\n- Automatizzare provisioning (Terraform/Bicep)\r\n- Standardizzare nelle policy ISO aziendali (ISO27001, GDPR, DORA)","size_chars":209,"tokens_estimate":52}
{"doc_id":"ew-datalake-standard","path":"easyway-webapp/03_datalake_dev/easyway-dataportal-standard-accesso-storage-e-datalake-iam-and-naming.md","title":"🗂️ EasyWay DataPortal - Standard Accesso Storage e Datalake (IAM & Naming)","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:43:02+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":17,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-easyway-webapp-03-datalake-dev-index","path":"easyway-webapp/03_datalake_dev/index.md","title":"Indice","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:58:34+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual e lo standard per accesso e naming del datalake?\n- Dove trovo i prerequisiti IAM per lavorare sul datalake?","size_chars":140,"tokens_estimate":35}
{"doc_id":"ew-apim-jwt-tenant-claim-policy","path":"easyway-webapp/05_codice_easyway_portale/apim-jwt-tenant-claim-policy.md","title":"apim-jwt-tenant-claim-policy","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:11+01:00","section_level":2,"anchor_text":"apim-jwt-tenant-claim-policy","anchor_slug":"apim-jwt-tenant-claim-policy","chunk_index":1,"content":"Obiettivo\n- Validare il JWT in ingresso e derivare il tenant da un claim applicativo (es. `ew_tenant_id`).\n- Opzionale: impostare un header interno per compatibilità con sistemi legacy o per auditing.\n\nEsempio di policy (inbound)\n```sql\n<policies>\n  <inbound>\n    <base />\n    <validate-jwt header-name=\"Authorization\" failed-validation-httpcode=\"401\" failed-validation-error-message=\"Invalid token\">\n      <openid-config url=\"https://login.microsoftonline.com/{TENANT_ID}/v2.0/.well-known/openid-configuration\" />\n      <required-claims>\n        <claim name=\"ew_tenant_id\" match=\"any\">\n          <value>.*</value>\n        </claim>\n      </required-claims>\n      <audiences>\n        <audience>api://your-app-id</audience>\n      </audiences>\n    </validate-jwt>\n\n    <!-- Opzionale: header interno, non esposto ai client -->\n    <set-header name=\"X-Tenant-Id\" exists-action=\"override\">\n      <value>@(((Jwt)context.Variables[\"jwt\"]).Claims[\"ew_tenant_id\"])</value>\n    </set-header>\n  </inbound>\n  <backend>\n    <base />\n  </backend>\n  <outbound>\n    <base />\n  </outbound>\n  <on-error>\n    <base />\n  </on-error>\n</policies>\n```sql\n\nNote\n- Il backend EasyWay non richiede più `X-Tenant-Id` dal client; legge il tenant dai claim del token.\n- L’header impostato da APIM può servire per audit/troubleshooting, ma non è necessario.\n- Usa prodotti/policy APIM per rate‑limit multi‑tenant, IP allowlist e mTLS secondo necessità.","size_chars":1422,"tokens_estimate":356}
{"doc_id":"ew-docs","path":"easyway-webapp/05_codice_easyway_portale/docs.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\r\n- Quali documenti compongono l’area “Codice EasyWay Portale”?\r\n- Dove trovare API, frontend, policy e script di supporto?\r\n- Quali sono gli step consigliati per leggere e contribuire al codice?\r\n- Come verificare naming, anchor e manifest per questa sezione?","size_chars":285,"tokens_estimate":71}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Codice","anchor_slug":"codice","chunk_index":1,"content":"## Codice\n\nQuesta sezione raccoglie **tutta la documentazione tecnica, di sviluppo e le best practice**  \nche guidano la realizzazione, la manutenzione e l’evoluzione del backend EasyWay Data Portal.\n\nTutti gli step sono allineati al [Manifesto Tecnologico & Analitico] e alle policy di logging, sicurezza, compliance e conversational readiness.\n\nConsulta questa sezione ogni volta che sviluppi, aggiorni o testi nuovi servizi, endpoint o logiche del portale.","size_chars":459,"tokens_estimate":115}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Premessa e Visione","anchor_slug":"premessa-e-visione","chunk_index":2,"content":"## Premessa e Visione\n\nEasyWay Data Portal **non nasce come semplice demo** o prototipo,  \nma come piattaforma **enterprise-ready**: **scalabile**, **multi-tenant**, configurabile in modo atomico, pensata per sostenere logiche di branding, sicurezza, compliance, automazione DevOps e conversational intelligence fin dal primo commit.\n\n> **Non costruiamo Hello World. Costruiamo un’infrastruttura pronta a crescere, evolvere, parlare.**","size_chars":435,"tokens_estimate":109}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Scelte Architetturali e Motivazioni\r","anchor_slug":"scelte-architetturali-e-motivazioni","chunk_index":3,"content":"## Scelte Architetturali e Motivazioni\n\n- **Node.js + TypeScript**\r\n    - Scegliamo TypeScript per controllo, sicurezza, qualità e manutenzione superiore rispetto a JavaScript puro.\r\n    - **Perché TypeScript?**\r\n        - Tipizzazione forte e controlli statici: meno bug, meno sorprese.\r\n        - Refactor sicuri, onboarding più rapido di nuovi sviluppatori.\r\n        - Standard cloud moderno, compatibile con qualsiasi team enterprise.\r\n    - **Node.js**: de facto standard per API moderne, ecosistema vastissimo, perfetta integrazione con servizi cloud (Azure in primis).\n\n- **Struttura multi-tenant**\r\n    - Tutto nasce per essere parametrico: ogni tenant (cliente) ha la sua configurazione di branding, etichette, regole di business, senza cambiare codice.\r\n    - **Multi-tenant enforced by design**: ogni richiesta API passa sempre dal middleware che garantisce isolamento dati e comportamenti.\n\n- **Configurazione atomica (YAML su Datalake + DB)**\r\n    - Branding e parametri statici in YAML su Datalake: versionabili, modificabili senza deploy, override per tenant immediato.\r\n    - Parametri dinamici (feature toggle, limiti, preferenze, ACL, conversational settings) su DB: aggiornabili real-time, auditabili, gestibili via portale admin.\n\n- **DevOps, Automazione, e Conversational-Ready**\r\n    - Ogni step è pensato per essere deployabile tramite pipeline Azure DevOps: **niente operazioni manuali, tutto versionato, tracciabile, rollbackabile**.\r\n    - Script di setup, pipeline, README, best practice **e convenzioni conversational** forniti da subito.\n\n---","size_chars":1571,"tokens_estimate":393}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Metodo di Lavoro\r","anchor_slug":"metodo-di-lavoro","chunk_index":4,"content":"## Metodo di Lavoro\n\n- **Ogni step viene validato, documentato e spiegato**\r\n    - Ogni scelta tecnologica e strutturale è motivata, mai casuale.\r\n    - Quando serve, ci fermiamo e ragioniamo sulle alternative.\r\n    - Ogni file, cartella, API ha uno scopo chiaro e una spiegazione “perché/come”.\r\n    - **Tutto è progettato per essere auditabile, “spiegabile” a persone, AI, AMS e chatbot.**\n\n---","size_chars":396,"tokens_estimate":99}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Punti chiave delle scelte tecniche\r","anchor_slug":"punti-chiave-delle-scelte-tecniche","chunk_index":5,"content":"## Punti chiave delle scelte tecniche\n\n- **TypeScript**\r\n    - Più controllo = meno bug\r\n    - Tipi chiari = team più produttivo\r\n    - Progetti più grandi = meno fatica nel tempo\n\n- **Multi-tenant**\r\n    - Dati e comportamenti sempre separati per tenant, nessuna contaminazione.\r\n    - Ogni tenant è “unico” senza duplicare codice.\n\n- **Config fuori dal codice**\r\n    - Branding, etichette, path, limiti, conversational settings: tutti parametrici.\r\n    - Modifica config = niente deploy, niente downtime.\n\n- **DevOps & Conversational Ready**\r\n    - Tutto automatizzato: build, test, deploy, backup, logging, monitoring, e interfaccia agent-aware.\n\n---","size_chars":653,"tokens_estimate":163}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Struttura progetto (STEP 1.1)\r","anchor_slug":"struttura-progetto-step-11","chunk_index":6,"content":"## Struttura progetto (STEP 1.1)\r\n*(vedi albero cartelle dettagliato qui sotto, già validato e documentato nel README)*\n\n**STEP 1.1 — Struttura cartelle & file principale**\r\n---------------------------------------------------\n\n\n\n\r\n**STEP 1.1 — Struttura cartelle & file principale**\r\n---------------------------------------------------\n\n```sql\r\neasyway-portal-api/  \r\n│  \r\n├─ .env.example # Config base (esempio, non versionato)  \r\n├─ package.json # Dipendenze, script NPM  \r\n├─ tsconfig.json # Config TypeScript  \r\n├─ README.md # Istruzioni tecniche e uso  \r\n│  \r\n├─ /src  \r\n│ ├─ app.ts # Entrypoint Express  \r\n│ ├─ server.ts # Avvio server standalone  \r\n│ ├─ /config  \r\n│ │ ├─ index.ts # Loader configurazioni (YAML + DB)  \r\n│ │ ├─ brandingLoader.ts # Funzione lettura YAML dal Datalake  \r\n│ │ └─ dbConfigLoader.ts # Funzione lettura config da DB  \r\n│ ├─ /routes  \r\n│ │ └─ health.ts # Rotta di healthcheck base  \r\n│ ├─ /middleware  \r\n│ │ └─ tenant.ts # Middleware estrazione tenant  \r\n│ ├─ /controllers  \r\n│ │ └─ healthController.ts  \r\n│ ├─ /models  \r\n│ │ └─ configuration.ts # Model config DB  \r\n│ ├─ /utils  \r\n│ │ └─ logger.ts # Utility logging  \r\n│ └─ /types  \r\n│ └─ config.d.ts # Tipizzazione configurazioni  \r\n│  \r\n├─ /datalake-sample  \r\n│ └─ branding.tenant01.yaml # Esempio YAML branding/config per tenant  \r\n│  \r\n└─ /deploy  \r\n└─ azure-pipeline.yml # Pipeline base per build/test/deploy\n\n```sql\n\n* * *\n\n\r\n---\n\n**Questo è il vero punto zero “Codex style”**:  \r\nogni pezzo pronto all’uso, **parametrico, multi-tenant, DevOps e conversational-friendly**.\n\n---\n\n**Architettura di una WebApp/Backend moderna (Express/Node.js/TS)**\r\n-------------------------------------------------------------------","size_chars":1704,"tokens_estimate":426}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**Macro-componenti principali:**\r","anchor_slug":"macro-componenti-principali","chunk_index":7,"content":"### **Macro-componenti principali:**\n\n- **models/**  \r\n    Definiscono la **struttura dei dati** (User, Profile, Notification, ecc.).  \r\n    Cambiano solo se cambia il DB o aggiungi campi.\n\n- **routes/**  \r\n    Definiscono **gli endpoint esposti** (es: `/api/users`, `/api/branding`, ecc.).  \r\n    Mappano l’endpoint HTTP (GET/POST/PUT/DELETE) al relativo controller.\n\n- **controllers/**  \r\n    Dove risiede la **logica vera** di ogni endpoint:  \r\n    _“Quando arriva una GET su `/api/users`, cosa succede?”_\n\n- **config/**  \r\n    Gestione centralizzata delle **configurazioni** (branding, parametri DB, ecc.).  \r\n    Si aggiorna se cambi modello/config, YAML/DB, override.\n\n- **middleware/**  \r\n    Blocchi riusabili prima dei controller  \r\n    (validazione token, estrazione tenant, logging richieste, agent-aware...).\n\n- **utils/**  \r\n    Funzioni generiche (logging, date, parsing).\n\n- **queries/**  \r\n    SQL versionato, per mantenere la logica dati fuori dal codice.\n\n---\n\n**Controller, routes e config si evolvono più di tutto il resto**  \r\nperché qui aggiungi/migliori endpoint, logica e parametrizzazione.\n\n---\n\n**Tabella di sintesi:**\n\n| Cartella     | Cambia spesso? | Perché cambia                         |\r\n| ------------ | -------------- | ------------------------------------- |\r\n| controllers  | ✅ spesso      | Cambi logica endpoint                 |\r\n| routes       | ✅ spesso      | Aggiungi/rimuovi endpoint API         |\r\n| config       | ✅ spesso      | Nuovi parametri, gestione config      |\r\n| models       | ❌ poco        | Solo se cambia struttura dati         |\r\n| middleware   | ❌ poco        | Solo per security/validazione/agent   |\r\n| utils        | ❌ poco        | Solo nuove utility                    |\r\n| queries      | ❌ poco        | Solo nuova query/ottimizzazione       |\n\n---","size_chars":1817,"tokens_estimate":454}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Best Practice Logging — Dati Sensibili (EasyWay)\r","anchor_slug":"best-practice-logging-dati-sensibili-easyway","chunk_index":8,"content":"## Best Practice Logging — Dati Sensibili (EasyWay)\n\n- **Logga solo ciò che serve, maschera tutto il resto.**\r\n- **Mai dati sensibili in chiaro** su file, Datalake, export, workspace.\r\n- **Documenta la policy** e attieniti sempre (es. funzione `maskEmail` in `/utils/logUtils.ts`).\r\n- **Ogni log conversational o di sistema** rispetta questi principi.\n\n---","size_chars":356,"tokens_estimate":89}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Validazione dati in ingresso — Pattern EasyWay\r","anchor_slug":"validazione-dati-in-ingresso-pattern-easyway","chunk_index":9,"content":"## Validazione dati in ingresso — Pattern EasyWay\n\n- Ogni endpoint che scrive su DB (POST/PUT) valida i dati con schema TypeScript/Zod.\r\n- Input errato = risposta 400 dettagliata.\r\n- Schemi in `/validators`, middleware in `/middleware/validate.ts`.\r\n- Ogni CRUD ha schema di validazione.\n\n**Esempio errore:**\r\n```json\r\n{\r\n  \"error\": \"Validation failed\",\r\n  \"details\": [\r\n    { \"path\": [\"email\"], \"message\": \"Invalid email\" }\r\n  ]\r\n}\r\n```sql\n\n8. Roadmap evolutiva\n\n| Fase | Azione |\r\n| --- | --- |\r\n| 1 | Refactor endpoint `/upload` in `/api/agent/upload/initiate` |\r\n| 2 | Aggiunta validazione ACL per tutti gli endpoint agent-aware |\r\n| 3 | Standardizzazione risposte JSON |\r\n| 4 | Logging automatico in `portal-audit/` |\r\n| 5 | SDK interno `AgentOrchestrator` per semplificare chiamate |\r\n| 6 | Esporre metadati disponibili per ogni agent |\r\n| 7 | Estensione agenti futuri: DQ, ACL, Audit, Billing |\n\n---","size_chars":906,"tokens_estimate":226}
{"doc_id":"ew-api-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-api.md","title":"EasyWay Data Portal — Manifesto Tecnologico & Analitico","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":10,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-frontend","path":"easyway-webapp/05_codice_easyway_portale/easyway-portal-frontend.md","title":"Domande a cui risponde","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-iac","path":"easyway-webapp/05_codice_easyway_portale/iac.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\r\n- Quali risorse IaC sono previste per il portale?\r\n- Come si struttura il deploy (ambiente, variabili, segreti)?\r\n- Dove trovare policy e naming per componenti cloud?\r\n- Come validare naming/ancore e tracciare i cambiamenti?","size_chars":251,"tokens_estimate":63}
{"doc_id":"ew-easyway-webapp-05-codice-easyway-portale-index","path":"easyway-webapp/05_codice_easyway_portale/index.md","title":"Indice","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:58:34+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Quali capitoli descrivono API, frontend e IaC del portale?\n- Dove sono le istruzioni per QA/test locale?\n- Quali sono i link canonici per questa sezione?","size_chars":181,"tokens_estimate":45}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Aggiornamenti dal 2025-07-28 al 2025-07-29","anchor_slug":"aggiornamenti-dal-2025-07-28-al-2025-07-29","chunk_index":1,"content":"## Aggiornamenti dal 2025-07-28 al 2025-07-29","size_chars":45,"tokens_estimate":11}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"npm: command not found\" / \"node: command not found\"","anchor_slug":"errore-npm-command-not-found-node-command-not-found","chunk_index":2,"content":"### Errore: \"npm: command not found\" / \"node: command not found\"\n- Motivo: Node.js non è stato aggiunto al PATH di sistema dopo l'installazione.\n- Soluzione: riavvia il PC, oppure aggiungi manualmente `C:\\Program Files\\nodejs\\` alla variabile d'ambiente PATH.\n\n---","size_chars":264,"tokens_estimate":66}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"Could not read package.json\"","anchor_slug":"errore-could-not-read-packagejson","chunk_index":3,"content":"### Errore: \"Could not read package.json\"\n- Motivo: lancio di comandi npm dalla cartella sbagliata (non contiene `package.json`).\n- Soluzione: spostati nella cartella giusta con `cd easyway-portal-api`.\n\n---","size_chars":207,"tokens_estimate":52}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"Cannot find module 'zod'\"","anchor_slug":"errore-cannot-find-module-zod","chunk_index":4,"content":"### Errore: \"Cannot find module 'zod'\"\n- Motivo: la dipendenza `zod` non è installata.\n- Soluzione: lancia `npm install zod` nella cartella giusta.\n\n---","size_chars":152,"tokens_estimate":38}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"ReferenceError: validateParams is not defined\" / \"validateBody is not defined\"","anchor_slug":"errore-referenceerror-validateparams-is-not-defined-validatebody-is-not-defined","chunk_index":5,"content":"### Errore: \"ReferenceError: validateParams is not defined\" / \"validateBody is not defined\"\n- Motivo: funzione middleware usata senza importarla.\n- Soluzione: importa la funzione mancante, es.\n  `import { validateParams, validateBody } from \"../middleware/validate\";`\n\n---","size_chars":272,"tokens_estimate":68}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"ReferenceError: userIdParamSchema is not defined\"","anchor_slug":"errore-referenceerror-useridparamschema-is-not-defined","chunk_index":6,"content":"### Errore: \"ReferenceError: userIdParamSchema is not defined\"\n- Motivo: schema usato senza importarlo.\n- Soluzione: importa lo schema dove serve, es.\n  `import { userIdParamSchema } from \"../validators/userValidator\";`\n\n---","size_chars":224,"tokens_estimate":56}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"ReferenceError: z is not defined\"","anchor_slug":"errore-referenceerror-z-is-not-defined","chunk_index":7,"content":"### Errore: \"ReferenceError: z is not defined\"\n- Motivo: manca import di `z` da Zod.\n- Soluzione: `import { z } from \"zod\";` all'inizio del file.\n\n---","size_chars":150,"tokens_estimate":38}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"ReferenceError: subscribeNotification is not defined\" / \"controllerFunction is not defined\"","anchor_slug":"errore-referenceerror-subscribenotification-is-not-defined-controllerfunction-is-not-defined","chunk_index":8,"content":"### Errore: \"ReferenceError: subscribeNotification is not defined\" / \"controllerFunction is not defined\"\n- Motivo: funzione controller non importata o non creata.\n- Soluzione:\n  - Se esiste: `import { subscribeNotification } from \"../controllers/notificationsController\";`\n  - Altrimenti, usa funzione placeholder inline per test:\n    ```typescript\n    router.post(\"/subscribe\", (req, res) => {\n      res.status(201).json({ message: \"Notifica iscrizione ricevuta!\" });\n    });\n    ```\n\n---","size_chars":489,"tokens_estimate":122}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"Cannot POST /api/notifications/subscribe\" (404 Not Found)","anchor_slug":"errore-cannot-post-apinotificationssubscribe-404-not-found","chunk_index":9,"content":"### Errore: \"Cannot POST /api/notifications/subscribe\" (404 Not Found)\n- Motivo: route non implementata o non registrata correttamente in `app.ts`.\n- Soluzione:\n  - Implementa la route in `routes/notifications.ts`\n  - Registra la route in `app.ts` con: `app.use(\"/api/notifications\", notificationsRoutes);`\n\n---","size_chars":311,"tokens_estimate":78}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"400 Bad Request: Invalid or missing X-Tenant-Id header\"","anchor_slug":"errore-400-bad-request-invalid-or-missing-x-tenant-id-header","chunk_index":10,"content":"### Errore: \"400 Bad Request: Invalid or missing X-Tenant-Id header\"\n- Motivo: header `X-Tenant-Id` mancante, richiesto dal middleware multi-tenant.\n- Soluzione: aggiungi l'header nella richiesta: `X-Tenant-Id: tenant01`\n\n---","size_chars":225,"tokens_estimate":56}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Errore: \"Missing script: 'dev'\"","anchor_slug":"errore-missing-script-dev","chunk_index":11,"content":"### Errore: \"Missing script: 'dev'\"\n- Motivo: comando lanciato dalla cartella sbagliata o manca lo script in `package.json`.\n- Soluzione:\n  - Assicurati di essere in `easyway-portal-api`\n  - Verifica che in `package.json` ci sia:\n    ```json\n    \"scripts\": {\n      \"dev\": \"ts-node-dev --respawn --transpile-only src/server.ts\"\n    }\n    ```\n\n---","size_chars":345,"tokens_estimate":86}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Come fermare e rilanciare il backend","anchor_slug":"come-fermare-e-rilanciare-il-backend","chunk_index":12,"content":"### Come fermare e rilanciare il backend\n- Ferma: premi `Ctrl + C` nel terminale.\n- Rilancia: esegui di nuovo `npm run dev`.\n\n---","size_chars":129,"tokens_estimate":32}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"Come testare le API senza Postman","anchor_slug":"come-testare-le-api-senza-postman","chunk_index":13,"content":"### Come testare le API senza Postman\n- Crea un file `.http` (es: `easyway-api-test.http`)\n- Installa REST Client in VSCode: `https://marketplace.visualstudio.com/items?itemName=humao.rest-client`\n- Scrivi le chiamate, separa con `###`, clicca su \"Send Request\"\n\n---","size_chars":266,"tokens_estimate":66}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Note generali","anchor_slug":"note-generali","chunk_index":14,"content":"## Note generali\n- Importa sempre tutte le funzioni/schema che usi\n- Lancia sempre i comandi dalla cartella dove c'è `package.json`\n- Aggiorna il file `.env` con le variabili corrette\n- Aggiungi sempre gli header richiesti dalle tue policy/middleware\n- Se vedi \"not defined\", controlla import e percorso\n\nProssimi aggiornamenti: aggiungi ogni nuovo errore/soluzione con data, per mantenere sempre questa chat come \"bibbia\" di setup e debug EasyWay.","size_chars":448,"tokens_estimate":112}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":15,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":16,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":17,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-qa-setup-and-test-locale","path":"easyway-webapp/05_codice_easyway_portale/qa-setup-and-test-locale.md","title":"EasyWay Data Portal - Q&A Setup & Test Locale","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":18,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-easyway-webapp-05-codice-easyway-portale-readme","path":"easyway-webapp/05_codice_easyway_portale/readme.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Come è organizzata la cartella del codice del portale?\n- Dove trovare guide di avvio, policy e script utili?\n- Quali passi seguire per contribuire o fare troubleshooting?\n- Come verificare consistenza (naming/ancore) e generare i manifest?","size_chars":267,"tokens_estimate":67}
{"doc_id":"ew-easyway-webapp-05-codice-easyway-portale-scripts","path":"easyway-webapp/05_codice_easyway_portale/scripts.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:57:46+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\r\n- Quali script sono disponibili per sviluppatori e operatori?\r\n- Come eseguire build, test, lint e normalizzazione documentale?\r\n- Come generare manifest, anchors e chunk per gli agenti?\r\n- Dove consultare i report e come interpretarli?","size_chars":263,"tokens_estimate":66}
{"doc_id":"ew-security-observability","path":"easyway-webapp/05_codice_easyway_portale/security-and-observability.md","title":"security-and-observability","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:12+01:00","section_level":2,"anchor_text":"security-and-observability","anchor_slug":"security-and-observability","chunk_index":1,"content":"Obiettivi\n- Hardening API: helmet, CORS ristretto, rate limiting, body limit, compression.\n- Correlazione e tracciamento: `X-Request-Id`, `X-Correlation-Id`, log coerenti.\n- Autenticazione: JWT (Entra ID), estrazione tenant da claim applicativo (no header client).\n\nImplementazione (backend)\n- `src/app.ts`:\n  - `helmet()`\n  - `cors()` con allowlist da `ALLOWED_ORIGINS` (CSV)\n  - `compression()`\n  - `express-rate-limit` (env: `RATE_LIMIT_WINDOW_MS`, `RATE_LIMIT_MAX`)\n  - `express.json({ limit: BODY_LIMIT })`\n  - generazione di `X-Request-Id` e `X-Correlation-Id` (uuid v4), riutilizzando header in ingresso se presenti\n  - `authenticateJwt` prima di tutte le rotte (verifica token via JWKS)\n  - `extractTenantId` usa il claim dal token (default `ew_tenant_id` configurabile via `TENANT_CLAIM`)\n  - `withTenantContext(tenantId, fn)` imposta `SESSION_CONTEXT('tenant_id')` su SQL (RLS); flag `RLS_CONTEXT_ENABLED=false` per disattivare in debug\n  - helper `runTenantQuery(tenantId, fn)` per route GOLD/REPORTING future\n\nOsservabilità (OTel + App Insights)\n- Imposta in `.env.local`:\n  - `APPLICATIONINSIGHTS_CONNECTION_STRING` (da Azure Portal)\n  - `OTEL_ENABLED=true`\n  - (Opzionale) `OTEL_RESOURCE_ATTRIBUTES=service.name=easyway-portal-api,service.namespace=easyway,deployment.environment=dev`\n- Avvio: l’SDK OTel viene attivato automaticamente (auto‑instrumentations HTTP/SQL/Blob)\n- Verifica in App Insights:\n  - `requests | order by timestamp desc`\n  - `dependencies | where type in ('SQL','http') | order by timestamp desc`\n\nPropagazione\n- Logger allega implicitamente gli ID (tramite middleware di logging); gli handler possono accedere a `req.requestId` e `req.correlationId`.\n- In futuro: OpenTelemetry per tracing distribuito (span DB/Blob) e Application Insights.\n\nConfigurazione\n- `ALLOWED_ORIGINS`: domini abilitati (CSV). Default: `http://localhost:3000`.\n- `RATE_LIMIT_WINDOW_MS`: finestra (ms). Default: `60000`.\n- `RATE_LIMIT_MAX`: richieste per finestra. Default: `600`.\n- `BODY_LIMIT`: default `1mb`.\n- `PORTAL_BASE_PATH`: default `/portal`.\n\nNote\n- Per ambienti dietro LB, impostare `TRUST_PROXY=true` per X-Forwarded-*.\n- Validazione input già gestita via Zod nei middleware.\n- Rimuovere `X-Tenant-Id` dai client: il tenant è determinato dal token.","size_chars":2272,"tokens_estimate":568}
{"doc_id":"ew-security-observability","path":"easyway-webapp/05_codice_easyway_portale/security-and-observability.md","title":"security-and-observability","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:40:12+01:00","section_level":2,"anchor_text":"security-and-observability","anchor_slug":"security-and-observability","chunk_index":2,"content":"Uso consigliato (GOLD/REPORTING)\n- Per rotte GOLD/REPORTING e query sensibili, usa una di queste forme:\n  - `await runTenantQuery(req.tenantId, (reqDb) => reqDb.query('...'))`\n  - `await withTenantContext(req.tenantId, async (tx) => new sql.Request(tx).query('...'))`\n- Per debug locale senza RLS: imposta `RLS_CONTEXT_ENABLED=false` in `.env.local`.\n- `AUTH_ISSUER`, `AUTH_JWKS_URI`, `AUTH_AUDIENCE` (opzionale), `TENANT_CLAIM` (default `ew_tenant_id`)\n- `RLS_CONTEXT_ENABLED` (default `true`): se `false`, non imposta il contesto RLS a DB (debug)\n\nApprofondimenti\n- Parametrizzazione completa: vedi `Wiki/EasyWayData.wiki/parametrization-best-practices.md`","size_chars":658,"tokens_estimate":164}
{"doc_id":"ew-agentic-readiness-examples","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md","title":"Agentic Readiness & Esempi (Users/Onboarding)","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":1,"content":"## Scopo\nRendere il Portale 100% agentico: agenti (LLM/tooling) devono poter proporre, generare e applicare DDL/SP in modo sicuro e idempotente, rispettando gli standard EasyWay, con test e pipeline.","size_chars":199,"tokens_estimate":50}
{"doc_id":"ew-agentic-readiness-examples","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md","title":"Agentic Readiness & Esempi (Users/Onboarding)","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Linee guida agentiche","anchor_slug":"linee-guida-agentiche","chunk_index":2,"content":"## Linee guida agentiche\n- Riferimento centrale: `docs/agentic/AGENTIC_READINESS.md:1`\n  - Principi: idempotenza, solo SP per DML, logging obbligatorio, variante `_DEBUG`, naming, sicurezza.\n  - Mini‑DSL JSON per generare DDL e SP dai template.\n  - Guardrail e processo PR/migrazioni.\n- Template SQL:\n  - DDL tabella: `docs/agentic/templates/ddl/template_table.sql:1`\n  - SP produzione: `docs/agentic/templates/sp/template_sp_insert.sql:1`, `template_sp_update.sql:1`, `template_sp_delete.sql:1`\n  - SP debug: `docs/agentic/templates/sp/template_sp_debug_insert.sql:1`","size_chars":568,"tokens_estimate":142}
{"doc_id":"ew-agentic-readiness-examples","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md","title":"Agentic Readiness & Esempi (Users/Onboarding)","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Esempio 1 — USERS (CRUD via SP)","anchor_slug":"esempio-1-users-crud-via-sp","chunk_index":3,"content":"## Esempio 1 — USERS (CRUD via SP)\nObiettivo: eliminare DML diretti dalle API e passare a SP coerenti con il DDL standard `PORTAL.USERS`.\n\n1) Mini‑DSL JSON proposto all’agente\n```json\n{\n  \"entity\": \"USERS\",\n  \"schema\": \"PORTAL\",\n  \"columns\": [\n    {\"name\": \"user_id\", \"type\": \"NVARCHAR(50)\", \"constraints\": [\"UNIQUE\", \"NOT NULL\"]},\n    {\"name\": \"tenant_id\", \"type\": \"NVARCHAR(50)\", \"constraints\": [\"NOT NULL\"]},\n    {\"name\": \"email\", \"type\": \"NVARCHAR(255)\", \"constraints\": [\"NOT NULL\"]},\n    {\"name\": \"profile_code\", \"type\": \"NVARCHAR(50)\", \"constraints\": [\"NOT NULL\"]},\n    {\"name\": \"status\", \"type\": \"NVARCHAR(50)\", \"constraints\": []}\n  ],\n  \"ndg\": {\"sequence\": \"SEQ_USER_ID\", \"prefix\": \"CDI\", \"width\": 9},\n  \"sp\": {\n    \"insert\": {\"name\": \"sp_insert_user\"},\n    \"update\": {\"name\": \"sp_update_user\"},\n    \"delete\": {\"name\": \"sp_delete_user\"},\n    \"debug\":  {\"name\": \"sp_debug_insert_user\"}\n  }\n}\n```sql\n\n2) Output atteso (generato dai template)\n- SP produzione: `PORTAL.sp_insert_user`, `PORTAL.sp_update_user`, `PORTAL.sp_delete_user`\n- SP debug: `PORTAL.sp_debug_insert_user`\n- Tutte con TRY/CATCH, TRANSACTION e scrittura su `PORTAL.STATS_EXECUTION_LOG`.\n\n3) Integrazione API\n- Il controller `easyway-portal-api/src/controllers/usersController.ts:1` deve invocare solo SP (`pool.request().execute('PORTAL.sp_update_user')`, ecc.).\n- Validatori Zod aggiornati al modello DDL: `profile_code`, `status` (e/o mapping documentato da `display_name/profile_id`).\n\n4) Test\n- REST Client: `tests/api/rest-client/users.http:1`\n- Checklist agentica: `tests/agentic/README.md:1`","size_chars":1572,"tokens_estimate":393}
{"doc_id":"ew-agentic-readiness-examples","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md","title":"Agentic Readiness & Esempi (Users/Onboarding)","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Esempio 2 — ONBOARDING (Tenant + Admin User)","anchor_slug":"esempio-2-onboarding-tenant-admin-user","chunk_index":4,"content":"## Esempio 2 — ONBOARDING (Tenant + Admin User)\nObiettivo: confermare il pattern SP + variante DEBUG per onboarding.\n\n1) SP di riferimento (Wiki)\n- Produzione: `PORTAL.sp_register_tenant_and_user` (vedi `easyway-webapp/01_database_architecture/01b_schema_structure/PORTAL/programmability/stored-procedure.md:2798`)\n- Debug: `PORTAL.sp_debug_register_tenant_and_user` (`.../stored-procedure.md:2901`)\n\n2) Mini‑DSL JSON (per generare/aggiornare le SP da template)\n```json\n{\n  \"entity\": \"tenant_and_user\",\n  \"schema\": \"PORTAL\",\n  \"sp\": {\n    \"insert\": {\"name\": \"sp_register_tenant_and_user\"},\n    \"debug\":  {\"name\": \"sp_debug_register_tenant_and_user\"}\n  },\n  \"ndg\": {\n    \"tenant\": {\"sequence\": \"SEQ_TENANT_ID\", \"prefix\": \"TEN\", \"width\": 9},\n    \"user\":   {\"sequence\": \"SEQ_USER_ID\",   \"prefix\": \"CDI\", \"width\": 9}\n  }\n}\n```sql\n\n3) Integrazione API\n- Controller: `easyway-portal-api/src/controllers/onboardingController.ts:1` già invoca la SP debug via `.execute(\"PORTAL.sp_debug_register_tenant_and_user\")`.\n- Input validato: `easyway-portal-api/src/validators/onboardingValidator.ts:1`\n\n4) Test\n- REST Client: `tests/api/rest-client/onboarding.http:1`\n- Log conversazionali/agent-aware: presenti nel controller con `logger.info/error`.","size_chars":1235,"tokens_estimate":309}
{"doc_id":"ew-agentic-readiness-examples","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/agentic-readiness-and-examples.md","title":"Agentic Readiness & Esempi (Users/Onboarding)","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Processo PR/Migrazioni (riassunto)","anchor_slug":"processo-prmigrazioni-riassunto","chunk_index":5,"content":"## Processo PR/Migrazioni (riassunto)\n1. L'agente propone mini-DSL JSON e genera i file SQL dai template (`docs/agentic/templates/...`).\n2. I file vanno versionati come migrazioni Flyway in `db/flyway/sql/` con naming Flyway (`V<ts>__...sql`).\n3. Aggiornare la Wiki (questa pagina) con i riferimenti a nuove SP/tabelle.\n4. Pipeline: applica migrazioni in `test`, esegue smoke test (`tests/api/rest-client/...`).\n5. Approvazione e promozione verso UAT/PROD.","size_chars":456,"tokens_estimate":114}
{"doc_id":"ew-dinamiche-di-manutenzione","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md","title":"Capitolo - Dinamiche di Manutenzione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Architettura delle Cartelle — Dinamiche di Manutenzione","anchor_slug":"architettura-delle-cartelle-dinamiche-di-manutenzione","chunk_index":1,"content":"## Architettura delle Cartelle — Dinamiche di Manutenzione\n\nIn EasyWay Data Portal, la struttura delle cartelle segue pattern enterprise  \nper garantire chiarezza, scalabilità, facile manutenzione e onboarding immediato di nuovi sviluppatori e agenti automatici.","size_chars":262,"tokens_estimate":66}
{"doc_id":"ew-dinamiche-di-manutenzione","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md","title":"Capitolo - Dinamiche di Manutenzione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"Quali cartelle “si muovono” di più?\r","anchor_slug":"quali-cartelle-si-muovono-di-pi","chunk_index":2,"content":"### Quali cartelle “si muovono” di più?\n\n| Cartella      | Modifica frequente? | Perché cambia |\r\n|---------------|:-------------------:|--------------|\r\n| `/controllers`|   ✅ (spesso)       | Qui vive la logica degli endpoint. Cambia ogni volta che si aggiorna una funzione, una regola, una validazione, ecc. |\r\n| `/routes`     |   ✅ (spesso)       | Qui mappi tutti gli endpoint REST. Cambia quando aggiungi, togli o rinomini API. |\r\n| `/config`     |   ✅ (spesso)       | Gestisce le modalità di caricamento delle configurazioni (YAML, DB, blob). Cambia quando aggiungi nuove opzioni parametriche. |\r\n| `/models`     |   ❌ (raramente)    | Fotografia della struttura dati (DB). Cambia solo se cambia il database o la business entity. |\r\n| `/middleware` |   ❌ (raramente)    | Blocchi di logica riusabile (es: security, logging, multi-tenant, conversational hooks). Cambia solo per nuove policy di sicurezza, logging o agent-awareness. |\r\n| `/utils`      |   ❌ (raramente)    | Utility generiche, funzioni di supporto. Cambia poco, solo con nuove necessità tecniche o evoluzioni conversational. |\r\n| `/queries`    |   ❌ (raramente)    | Query SQL pronte all’uso, versionate e riusate. Cambiano solo per ottimizzazioni, evoluzioni del dato, nuove policy di accesso. |\n\n---","size_chars":1273,"tokens_estimate":318}
{"doc_id":"ew-dinamiche-di-manutenzione","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md","title":"Capitolo - Dinamiche di Manutenzione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**Best Practice per la manutenzione**\r","anchor_slug":"best-practice-per-la-manutenzione","chunk_index":3,"content":"### **Best Practice per la manutenzione**\n\n- **Focus sui controller**: qui vive la business logic e la conversational logic. Documenta bene funzioni, parametri di input/output e motivazione (“intent”).\r\n- **Routes sempre minimali**: nessuna logica nelle route, solo collegamento route → controller.\r\n- **Config chiara e centralizzata**: ogni nuova configurazione/documentazione va aggiornata con fonte, formato, chi la usa e se è accessibile anche ad agenti automatici.\r\n- **Aggiorna sempre la sezione “Architettura”** ogni volta che introduci una nuova funzionalità o evolvi una logica chiave.\r\n- **Commenta ogni nuovo file e funzione**: specifica a cosa serve, chi la usa (umano, agent, servizio), esempio d’uso.\r\n- **Rivedi e aggiorna la tabella delle dinamiche** ogni volta che la struttura o le policy si evolvono.\n\n---","size_chars":824,"tokens_estimate":206}
{"doc_id":"ew-dinamiche-di-manutenzione","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md","title":"Capitolo - Dinamiche di Manutenzione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**Esempio concreto**\r","anchor_slug":"esempio-concreto","chunk_index":4,"content":"### **Esempio concreto**\n\n- Un nuovo sviluppatore, QA o agente automatico che entra e vede `/controllers/usersController.ts`,  \r\n  trova lì la logica per `/api/users` e sa che ogni modifica utenti passa da qui.\r\n- Per sapere dove e come si carica la configurazione di un tenant o di una feature, va in `/config/` e trova documentazione aggiornata.\r\n- Per tracciare una nuova azione conversational, aggiungi/migliora il logging e documenta subito la nuova entry-point in questa sezione.\n\n---\n\n**Questa sezione va sempre all’inizio della documentazione tecnica.  \r\nFacilita onboarding di persone e AI, riduce errori, aumenta la trasparenza e rende il progetto self-maintainable nel tempo.**","size_chars":688,"tokens_estimate":172}
{"doc_id":"ew-dinamiche-di-manutenzione","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/dinamiche-di-manutenzione.md","title":"Capitolo - Dinamiche di Manutenzione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-endpoint-overview","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/endpoint.md","title":"Domande a cui risponde","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-gestione-log-and-policy-dati-sensibili","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md","title":"Gestione Log - EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"**Principi guida**","anchor_slug":"principi-guida","chunk_index":1,"content":"## **Principi guida**\n- **Logga solo ciò che serve**, maschera tutto il resto.\n- **Mai dati sensibili in chiaro** su file, Datalake, o esportazione.\n- **Documenta la policy**: scrivi sempre cosa si può loggare e come si mascherano i dati.\n- Tutti i log business/audit sono in formato JSON e pronti per essere esportati su Datalake.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-gestione-log-and-policy-dati-sensibili","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md","title":"Gestione Log - EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"**Tipi di log gestiti**\r","anchor_slug":"tipi-di-log-gestiti","chunk_index":2,"content":"## **Tipi di log gestiti**\n\n| Tipo                | Dove va                         | Livello | Retention | Destinazione finale         |\r\n|---------------------|---------------------------------|---------|-----------|----------------------------|\r\n| Log applicativo     | Console, file locale            | info, error, warn, debug | 7gg     | Solo DEV/Debug             |\r\n| Log business/audit  | File JSON (`logs/business.log.json`) | info, error         | 30gg    | Datalake, BI, auditing     |\r\n| Log tecnico/trace   | File locale, Log Analytics (solo warning/error) | warning, error | 3gg     | Log Analytics (con filtro) |\n\n---","size_chars":633,"tokens_estimate":158}
{"doc_id":"ew-gestione-log-and-policy-dati-sensibili","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md","title":"Gestione Log - EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"**Policy dati sensibili**\r","anchor_slug":"policy-dati-sensibili","chunk_index":3,"content":"## **Policy dati sensibili**\r\n- **Password, hash, CF, IBAN, dati sanitari**: **NON devono mai apparire nei log.**\r\n- **Email, nomi**: Devono essere **mascherati** o pseudonimizzati (vedi funzione `maskEmail` in `/utils/logUtils.ts`).\r\n- **Solo ID interni e chiavi tecniche nei log standard.**\n\n---","size_chars":297,"tokens_estimate":74}
{"doc_id":"ew-gestione-log-and-policy-dati-sensibili","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md","title":"Gestione Log - EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"**Best practice**\r","anchor_slug":"best-practice","chunk_index":4,"content":"## **Best practice**\r\n- **Logging a livelli differenti** in base all’ambiente (`LOG_LEVEL` via .env/config)\r\n- **Rotazione automatica** dei file di log (no log “giganti”)\r\n- **Log di errore e business in file separati**\r\n- **Esportazione dei log business/audit su Datalake** (via pipeline/script)\r\n- **Controllo accessi**: Solo gruppi tecnici possono leggere i log completi\n\n---","size_chars":378,"tokens_estimate":94}
{"doc_id":"ew-gestione-log-and-policy-dati-sensibili","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md","title":"Gestione Log - EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"**Snippet esempio log business**\r","anchor_slug":"snippet-esempio-log-business","chunk_index":5,"content":"## **Snippet esempio log business**\r\n```json\r\n{\r\n  \"level\": \"info\",\r\n  \"message\": \"User created\",\r\n  \"tenantId\": \"tenant01\",\r\n  \"userEmail\": \"j****e@easyway.com\",  // Mascherato!\r\n  \"event\": \"USER_CREATE\",\r\n  \"time\": \"2025-07-27T12:34:56.789Z\"\r\n}\r\n```sql\n\n**Workflow export log**\r\n-----------------------\n\n1.  I log business/audit vengono scritti in `logs/business.log.json`\r\n    \r\n2.  Una pipeline automatica copia periodicamente i file log su Datalake (`/portal-logs/`)\r\n    \r\n3.  Log business e audit sono pronti per analisi, compliance, auditing — e **mai contengono dati sensibili**!\n\n\r\n**Riferimenti**\r\n---------------\n\n*   Policy e best practice allineate con GDPR, SOC2, DORA\r\n    \r\n*   Vedi anche sezione “Validazione avanzata dati in ingresso” per evitare log di dati errati o rumorosi\n\n**Best practice e check periodico**\r\n---------------\r\n*    Log e policy aggiornati dopo ogni refactor\r\n    \r\n*    Verifica periodica di mascheramento dati su nuovi endpoint\r\n    \r\n*    Test export/automation sempre con dati fittizi/anonimizzati\r\n    \r\n*    Documentazione aggiornata su ogni nuovo tipo di log","size_chars":1105,"tokens_estimate":276}
{"doc_id":"ew-gestione-log-and-policy-dati-sensibili","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md","title":"Gestione Log - EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":6,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-easyway-portal-api-index","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/index.md","title":"Indice","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:58:34+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Quali documenti sono canonici per sviluppare e manutenere la API?\n- Dove trovare la lista endpoint e il template per nuovi endpoint?\n- Dove sono definite le regole di logging e gestione dati sensibili?","size_chars":229,"tokens_estimate":57}
{"doc_id":"ew-policy-api-store-procedure-easyway-data-portal","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md","title":"Policy API/Store Procedure — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Principio Guida","anchor_slug":"principio-guida","chunk_index":1,"content":"## Principio Guida\n\nTutta la business logic principale di EasyWay Data Portal risiede **nelle Store Procedure (SP) del database**.  \nLe API backend **non contengono regole o logiche complesse**:  \nsi limitano a **orchestrare le chiamate alle SP**, validare l’input, gestire autenticazione e logging conversazionale.","size_chars":315,"tokens_estimate":79}
{"doc_id":"ew-policy-api-store-procedure-easyway-data-portal","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md","title":"Policy API/Store Procedure — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Vantaggi del modello\r","anchor_slug":"vantaggi-del-modello","chunk_index":2,"content":"## Vantaggi del modello\n\n- **Centralizzazione delle regole**:  \r\n  Ogni logica (onboarding, ACL, auditing, preferenze, notifica, ecc.) vive solo su una SP,  \r\n  evitando duplicazioni o divergenze tra codice e dati.\r\n- **Evoluzione rapida**:  \r\n  Modifiche a una SP sono subito attive per tutte le API che la chiamano,  \r\n  senza bisogno di deployare di nuovo il backend.\r\n- **Audit e compliance**:  \r\n  Tutte le operazioni critiche sono tracciate dal DB,  \r\n  con logging, auditing e security policy definite una volta sola.\r\n- **Chiarezza e onboarding**:  \r\n  Gli sviluppatori backend si concentrano su orchestrazione, validazione e logging,  \r\n  chi lavora sul DB può evolvere la logica senza impattare le API.\n\n---","size_chars":717,"tokens_estimate":179}
{"doc_id":"ew-policy-api-store-procedure-easyway-data-portal","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md","title":"Policy API/Store Procedure — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Pattern operativo\r","anchor_slug":"pattern-operativo","chunk_index":3,"content":"## Pattern operativo\n\n1. **Chiamata API**:  \r\n   L’utente (o agent) invia una richiesta REST all’endpoint (es: `/api/onboarding`).\r\n2. **Validazione e logging**:  \r\n   Il backend verifica l’input (middleware, validator), logga l’azione (conversational/agent-aware).\r\n3. **Chiamata Store Procedure**:  \r\n   Il controller esegue la SP di riferimento (`PORTAL.sp_debug_register_tenant_and_user` e simili),  \r\n   passando tutti i parametri richiesti dal modello dati.\r\n4. **Risposta e logging**:  \r\n   Il risultato della SP viene restituito all’API e loggato secondo policy di auditing/conversational.\r\n5. **Modifiche alla logica**:  \r\n   Tutto ciò che riguarda la business rule si aggiorna solo a livello di SP.\n\n---","size_chars":713,"tokens_estimate":178}
{"doc_id":"ew-policy-api-store-procedure-easyway-data-portal","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md","title":"Policy API/Store Procedure — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Esempio pratico\r","anchor_slug":"esempio-pratico","chunk_index":4,"content":"## Esempio pratico\n\n```ts\r\n// Chiamata API (controller)\r\nawait pool.request()\r\n  .input(\"tenant_id\", sql.NVarChar, tenantId)\r\n  .input(\"user_email\", sql.NVarChar, user_email)\r\n  .input(\"profile_id\", sql.NVarChar, profile_id)\r\n  .execute(\"PORTAL.sp_debug_register_tenant_and_user\");\r\n```sql\n\n_La SP si occupa di tutte le regole: validazione, insert, auditing, ACL, logging su DB…_\n\n* * *\n\nBest Practice\r\n-------------\n\n*   **Ogni endpoint API deve chiamare solo la SP di riferimento,**  \r\n    senza replicare logiche di business lato Node.js.\r\n    \r\n*   **Documenta sempre la relazione “API → Store Procedure”** in modo chiaro (Wiki, codice, README).\r\n    \r\n*   **Le evoluzioni di business rule avvengono a livello di SP:**  \r\n    le API backend restano leggere, manutenibili, sicure.\r\n    \r\n*   **Tutti i controller devono gestire errori SP e logging in modo conversational/agent-aware.**","size_chars":888,"tokens_estimate":222}
{"doc_id":"ew-policy-api-store-procedure-easyway-data-portal","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/policy-api-store-procedure-easyway-data-portal.md","title":"Policy API/Store Procedure — EasyWay Data Portal","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":3,"anchor_text":"**B) Dove stanno i file realmente**","anchor_slug":"b-dove-stanno-i-file-realmente","chunk_index":1,"content":"### **B) Dove stanno i file realmente**\n\n*   **package.json, tsconfig.json, README.md, src/**  \n    Sono **file e cartelle di codice**:\n    *   **Vanno SEMPRE nella root del repository di codice** (`easyway-portal-api/`)\n        \n    *   **Non devono mai stare sul Datalake**, né in cartelle dati, né su storage pubblico\n        \n    *   Sono gestiti da Git/Azure DevOps come ogni altro codice di backend\n        \n\n* * *","size_chars":420,"tokens_estimate":105}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":3,"anchor_text":"**C) Cosa metti (e NON metti) su Datalake**","anchor_slug":"c-cosa-metti-e-non-metti-su-datalake","chunk_index":2,"content":"### **C) Cosa metti (e NON metti) su Datalake**\n\n*   **Su Datalake** metterai SOLO i file di configurazione/branding YAML “produttivi”,  \n    cioè quelli che l’app dovrà leggere per mostrare i colori, le etichette, le immagini per ciascun tenant.\n    \n*   **Nel repo di codice** tieni una cartella `/datalake-sample` (o simile)  \n    **solo per esempi** e versionamento degli “schemi” di configurazione  \n    (non è usata a runtime, serve solo come template/copia).\n    \n\n* * *","size_chars":477,"tokens_estimate":119}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":3,"anchor_text":"**D) Dettaglio file per file**","anchor_slug":"d-dettaglio-file-per-file","chunk_index":3,"content":"### **D) Dettaglio file per file**\n\n* * *\n\n#### **1. package.json**\n\n*   **Dove va:**  \n    `easyway-portal-api/package.json` (root della repo del codice, **mai su datalake**)\n    \n*   **A cosa serve:**  \n    File di **configurazione NPM**.  \n    Contiene:\n    *   Nome progetto\n        \n    *   Versione\n        \n    *   Script di avvio/build/test\n        \n    *   Dipendenze (librerie di Node.js e TypeScript)\n        \n*   **Perché serve:**  \n    Senza questo, il progetto non è gestibile da Node.js, non puoi installare o usare dipendenze, né fare il deploy.\n    \n\n* * *\n\n#### **2. tsconfig.json**\n\n*   **Dove va:**  \n    `easyway-portal-api/tsconfig.json`\n    \n*   **A cosa serve:**  \n    File di **configurazione TypeScript** (regole di compilazione, output, etc.)\n    \n*   **Perché serve:**  \n    Permette di scrivere in TypeScript e ottenere il codice pronto da eseguire su Node.js.\n    \n\n* * *\n\n#### **3. README.md**\n\n*   **Dove va:**  \n    `easyway-portal-api/README.md`\n    \n*   **A cosa serve:**  \n    Guida tecnica per chi lavora sul progetto.  \n    Spiega comandi, cartelle, configurazioni minime, come avviare/localmente/buildare.\n    \n\n* * *\n\n#### **4. /src/**\n\n*   **Dove va:**  \n    `easyway-portal-api/src/`\n    \n*   **A cosa serve:**  \n    Contiene **TUTTO il codice sorgente** della webapp (Express, middleware, API, ecc.)\n    \n*   **Perché serve:**  \n    Qui scrivi e mantieni tutto il backend dell’applicazione.\n    \n\n* * *\n\n#### **5. /datalake-sample/**\n\n*   **Dove va:**  \n    `easyway-portal-api/datalake-sample/`\n    \n*   **A cosa serve:**  \n    **Solo per esempio/template** dei file di configurazione YAML da usare/produrre su Datalake.\n    \n*   **Cosa va davvero su Datalake:**  \n    Solo i file definitivi, tipo `/portal-assets/config/branding.tenant01.yaml`  \n    (i file di esempio sono solo reference per sviluppatori).\n    \n\n* * *\n\n#### **6. /deploy/**\n\n*   **Dove va:**  \n    `easyway-portal-api/deploy/`\n    \n*   **A cosa serve:**  \n    File di pipeline Azure DevOps (`azure-pipelines.yml`), script di deploy CI/CD,  \n    **mai su datalake**, solo nel repo di codice o su Azure DevOps.\n    \n\n* * *\n\n**In sintesi pratica**\n----------------------","size_chars":2180,"tokens_estimate":545}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":3,"anchor_text":"**D) Dettaglio file per file**","anchor_slug":"d-dettaglio-file-per-file","chunk_index":4,"content":"*   **Tutto il codice (Node.js/TypeScript, config progetti, pipeline) sta nella repo codice.**\n    \n*   **Solo le configurazioni di branding, label, path, ecc. che servono all’app in runtime, vanno in Datalake (e ci vanno tramite pipeline/script, non “a mano”).**\n    \n*   **Tutto ciò che riguarda tabelle e insert DB, sta solo nella chat DB, mai qui.**","size_chars":353,"tokens_estimate":88}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":6,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":7,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-step-1-setup-ambiente","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente.md","title":"**B) Dove stanno i file realmente**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:51:03+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":8,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-step-2-—-struttura-src-e-primi-file","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-2-—-Struttura-src-e-primi-file.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-step-2-—-struttura-src-e-primi-file","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-2-—-Struttura-src-e-primi-file.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-step-2-—-struttura-src-e-primi-file","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-2-—-Struttura-src-e-primi-file.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-step-2-—-struttura-src-e-primi-file","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-2-—-Struttura-src-e-primi-file.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-step-3---gestione-configurazioni-(yaml-+-db)","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-3-—-Gestione-configurazioni-(YAML-+-DB).md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:41:24+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-step-3---gestione-configurazioni-(yaml-+-db)","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-3-—-Gestione-configurazioni-(YAML-+-DB).md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:41:24+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-step-3---gestione-configurazioni-(yaml-+-db)","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-3-—-Gestione-configurazioni-(YAML-+-DB).md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:41:24+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-step-3---gestione-configurazioni-(yaml-+-db)","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/STEP-3-—-Gestione-configurazioni-(YAML-+-DB).md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:41:24+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":3,"anchor_text":"Gestione delle query SQL nel backend EasyWay","anchor_slug":"gestione-delle-query-sql-nel-backend-easyway","chunk_index":1,"content":"### Gestione delle query SQL nel backend EasyWay\n\n**Pattern adottato: “Locale + Custom/Blob”**\n\n- Tutte le query core, CRUD, migration, viste e stored procedure sono versionate nella cartella `src/queries/` del backend.\n    - Ogni modifica a queste query richiede una nuova versione e un deploy del backend (best practice per coerenza e audit).\n    - Sono facilmente consultabili e manutenibili da tutto il team.\n- In casi particolari (override temporanei, hotfix urgenti, necessità di patch “a caldo”, report dinamici multi-tenant):\n    - Le query possono essere salvate su Azure Datalake/Blob sotto `/portal-config/queries/`.\n    - Il backend è predisposto a cercare prima la versione custom (blob), e se non trovata, utilizza quella locale.\n    - La pipeline DevOps gestisce versioning, update e audit anche dei file custom.\n\n**Vantaggi:**\n- Massima coerenza e sicurezza per la logica core.\n- Flessibilità per esigenze particolari o evoluzioni future, senza cambiare il bundle del backend.","size_chars":992,"tokens_estimate":248}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":3,"anchor_text":"**A. Struttura della cartella queries**","anchor_slug":"a-struttura-della-cartella-queries","chunk_index":2,"content":"### **A. Struttura della cartella queries**\n\nCrea questa struttura nel tuo progetto:\n```sql\neasyway-portal-api/\n└─ src/\n    └─ queries/\n        ├─ users_insert.sql\n        ├─ users_select_by_tenant.sql\n        ├─ users_update.sql\n        ├─ users_delete.sql\n        └─ ... (aggiungi altre query quando servono)\n```sql\n\nB. Esempio di file SQL (users_insert.sql)\n\n```sql\n-- users_insert.sql\nEXEC PORTAL.sp_debug_register_tenant_and_user\n  @tenant_id = @tenant_id,\n  @email = @email,\n  @display_name = @display_name,\n  @profile_id = @profile_id;\n```sql","size_chars":549,"tokens_estimate":137}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":3,"anchor_text":"**C. Funzione di caricamento query con fallback (custom su blob, locale default)**","anchor_slug":"c-funzione-di-caricamento-query-con-fallback-custom-su-blob-locale-default","chunk_index":3,"content":"### **C. Funzione di caricamento query con fallback (custom su blob, locale default)**\n\n`src/queries/queryLoader.ts`\n\n```sql\nimport fs from \"fs\";\nimport path from \"path\";\nimport { loadSqlQueryFromBlob } from \"../config/queryLoader\";\n\n/**\n * Carica una query SQL:\n * - Prima cerca su Blob Storage (custom override)\n * - Se non trovata, usa la versione locale sotto /src/queries\n */\nexport async function loadQueryWithFallback(fileName: string): Promise<string> {\n  try {\n    // Tenta override su Blob (custom)\n    return await loadSqlQueryFromBlob(fileName);\n  } catch (err) {\n    // Se errore (es: blob non esiste), fallback su query locale\n    const localPath = path.join(__dirname, fileName);\n    if (!fs.existsSync(localPath)) {\n      throw new Error(`Query \"${fileName}\" non trovata né su Blob né localmente`);\n    }\n    return fs.readFileSync(localPath, \"utf-8\");\n  }\n}\n```sql\n\nD. Uso nel controller utenti (esempio su createUser)\nsrc/controllers/usersController.ts\n\n```sql\nimport { loadQueryWithFallback } from \"../queries/queryLoader\";\n\nexport async function createUser(req: Request, res: Response) {\n  try {\n    const tenantId = (req as any).tenantId;\n    const { email, display_name, profile_id } = req.body;\n    const pool = await sql.connect(process.env.DB_CONN_STRING!);\n\n    // Usa il loader \"con fallback\"\n    const sqlQuery = await loadQueryWithFallback(\"users_insert.sql\");\n\n    const result = await pool.request()\n      .input(\"tenant_id\", sql.NVarChar, tenantId)\n      .input(\"email\", sql.NVarChar, email)\n      .input(\"display_name\", sql.NVarChar, display_name)\n      .input(\"profile_id\", sql.NVarChar, profile_id)\n      .query(sqlQuery);\n\n    res.status(201).json(result.recordset[0]);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n}\n```sql\n(Stesso schema su tutte le altre operazioni CRUD)","size_chars":1841,"tokens_estimate":460}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":5,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":6,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":7,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.\n\n---","size_chars":336,"tokens_estimate":84}
{"doc_id":"ew-step-4-query-dinamiche-locale-datalake","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake.md","title":"Gestione delle query SQL nel backend EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:37:05+01:00","section_level":3,"anchor_text":"⬇️ See also / Workflow correlati","anchor_slug":"see-also-workflow-correlati","chunk_index":8,"content":"### ⬇️ See also / Workflow correlati\n\n- [n8n-db-table-create → Come creare una nuova tabella DB in modo agentico/automatizzato con intent, pipeline n8n, agent_dba e aggiornamento Wiki](../../orchestrations/n8n-db-table-create.md)  \n Per accelerare e standardizzare la creazione di nuove tabelle versionate e documentate in EasyWay DataPortal, usa questo workflow orchestrato a partire da una “intent spec” e l’integrazione pipeline agent_dba+n8n.","size_chars":446,"tokens_estimate":112}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"**Perché serve**","anchor_slug":"perch-serve","chunk_index":1,"content":"### **Perché serve**\n\n*   **Blocca subito i dati errati o “sporchi”** prima che arrivino al database.\n    \n*   **Evita bug e log inutili** (meno errori sulle API e meno dati da gestire nei log).\n    \n*   **Obbliga a rispettare le regole di business** su formato, presenza, coerenza dei dati.\n    \n*   **Aiuta a mantenere i log DB “puliti” e comprensibili**.\n\nvalidazione completa su:\n- Body (POST/PUT)\n- Querystring (GET con filtri, paginazione…)\n- Parametri route (`:user_id`)\n- Header (`X-Tenant-Id`)\n    \n\n* * *","size_chars":514,"tokens_estimate":128}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"**A. Tecnologia consigliata: Zod (alternativa: Joi)**","anchor_slug":"a-tecnologia-consigliata-zod-alternativa-joi","chunk_index":2,"content":"### **A. Tecnologia consigliata: Zod (alternativa: Joi)**\n\n*   **Zod** è una libreria TypeScript, perfetta per progetti moderni e typed.\n    \n*   Definisci “schemi” per ogni entità/endpoint: se i dati non rispettano lo schema, la richiesta viene bloccata (errore 400).\n    \n\n* * *","size_chars":280,"tokens_estimate":70}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":3,"anchor_text":"**B. Esempio di validazione per utenti (create e update)**","anchor_slug":"b-esempio-di-validazione-per-utenti-create-e-update","chunk_index":3,"content":"### **B. Esempio di validazione per utenti (create e update)**\n\n#### **1. Installa Zod**\n```sql\nnpm install zod\n```sql\n#### **2. Crea schema di validazione**\n\n`src/validators/userValidator.ts`\n\n```sql\nimport { z } from \"zod\";\n\nexport const userCreateSchema = z.object({\n  email: z.string().email(),\n  display_name: z.string().min(3).max(100),\n  profile_id: z.string().min(1),\n});\n\nexport const userUpdateSchema = z.object({\n  email: z.string().email().optional(),\n  display_name: z.string().min(3).max(100).optional(),\n  profile_id: z.string().min(1).optional(),\n  is_active: z.boolean().optional()\n});\n\n```sql\n\n#### **3. Middleware generico di validazione**\n\n`src/middleware/validate.ts`\n\n```sql\nimport { Request, Response, NextFunction } from \"express\";\nimport { ZodSchema } from \"zod\";\n\nexport function validateBody(schema: ZodSchema<any>) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.body);\n    if (!result.success) {\n      return res.status(400).json({ error: \"Validation failed\", details: result.error.errors });\n    }\n    req.body = result.data; // eventuale sanitizzazione\n    next();\n  };\n}\n```sql\n\n#### **4. Usa il middleware nelle route utenti**\n\n`src/routes/users.ts`\n\n```sql\nimport { Router } from \"express\";\nimport { getUsers, createUser, updateUser, deleteUser } from \"../controllers/usersController\";\nimport { validateBody } from \"../middleware/validate\";\nimport { userCreateSchema, userUpdateSchema } from \"../validators/userValidator\";\n\nconst router = Router();\n\nrouter.get(\"/\", getUsers);\nrouter.post(\"/\", validateBody(userCreateSchema), createUser);\nrouter.put(\"/:user_id\", validateBody(userUpdateSchema), updateUser);\nrouter.delete(\"/:user_id\", deleteUser);\n\nexport default router;\n\n```sql","size_chars":1771,"tokens_estimate":443}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":5,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":6,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-step-5-validazione-avanzata-dati-in-ingresso","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso.md","title":"**Perché serve**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:49+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":7,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-endp-001","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001-get-api-config.md","title":"ENDPOINT: GET `/api/config`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"ENDPOINT: GET `/api/config`","anchor_slug":"endpoint-get-apiconfig","chunk_index":1,"content":"### ENDPOINT: GET `/api/config`\n\n**Descrizione**\n> Restituisce la configurazione dinamica per il tenant corrente, leggendo dalla tabella `PORTAL.CONFIGURATION`.  \n> Permette di ottenere tutti i parametri o filtrarli per sezione (`?section=nome_sezione`).\n\n**Best Practice**\r\n- Richiede header `X-Tenant-Id`\r\n- Permette filtro opzionale via querystring (`?section=feature_toggle`, ecc.)\r\n- Risposta 404 se nessuna config trovata per tenant/section\r\n- Gestione chiara degli errori\r\n- Risposta sempre JSON (`{ \"config_key\": \"config_value\", ... }`)\n\n---\n\n**Cosa fa tecnicamente**\r\n1. Estrae `tenantId` dal middleware\r\n2. Legge (opzionalmente) il parametro `section` dalla querystring\r\n3. Interroga la tabella `PORTAL.CONFIGURATION` per quel tenant e sezione\r\n4. Ritorna i parametri come oggetto chiave/valore\n\n---\n\n**Come si testa**\r\n- Avvia il backend (`npm run dev`)\r\n- Esegui una GET su `/api/config` con header `X-Tenant-Id: tenant01`\r\n- (Opzionale) Aggiungi `?section=feature_toggle` alla URL\r\n- Risposta attesa (esempio):\r\n  ```json\r\n  {\r\n    \"enable_data_quality\": \"true\",\r\n    \"max_file_size\": \"1048576\"\r\n  }\r\n  ```\r\n- Risposta errore:\r\n  ```json\r\n  { \"error\": \"No configuration found for this tenant/section\" }\r\n  ```\r\n- Esempio chiamata:\n\n  ```json\r\n     curl -X GET \"http://localhost:3000/api/config?section=feature_toggle\" \\\r\n     -H \"X-Tenant-Id: tenant01\"\r\n  ```\n\n---\n\n**Con questo hai un endpoint parametrico, dinamico e multi-tenant  \r\n- stesso pattern riusabile per ogni futura configurazione!**","size_chars":1508,"tokens_estimate":377}
{"doc_id":"ew-endp-001","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001-get-api-config.md","title":"ENDPOINT: GET `/api/config`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-endp-001a","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001a-get-api-config-da-db.md","title":"A. Codice - File da creare/aggiornare","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"A. Codice - File da creare/aggiornare","anchor_slug":"a-codice-file-da-creareaggiornare","chunk_index":1,"content":"## A. Codice - File da creare/aggiornare\n\n1. `src/routes/config.ts`\n\n```sql\n// easyway-portal-api/src/routes/config.ts\nimport { Router } from \"express\";\nimport { getDbConfig } from \"../controllers/configController\";\n\nconst router = Router();\n\n// Endpoint GET /api/config\nrouter.get(\"/\", getDbConfig);\n\nexport default router;\n```sql\n\n2. `src/controllers/configController.ts`\n\n```sql\n// easyway-portal-api/src/controllers/configController.ts\nimport { Request, Response } from \"express\";\nimport { loadDbConfig } from \"../config/dbConfigLoader\";\n\nexport async function getDbConfig(req: Request, res: Response) {\n  try {\n    const tenantId = (req as any).tenantId;\n    const section = req.query.section as string | undefined;\n\n    const config = await loadDbConfig(tenantId, section);\n\n    if (Object.keys(config).length === 0) {\n      return res.status(404).json({ error: \"No configuration found for this tenant/section\" });\n    }\n\n    res.json(config);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message || \"Internal server error\" });\n  }\n}\n```sql\n\n3. Aggiorna `src/app.ts` per includere la nuova rotta\n   - Aggiungi dopo gli altri import:\n```sql\nimport configRoutes from \"./routes/config\";\n```sql\n   - Aggiungi questa riga sotto le altre rotte:\n```sql\napp.use(\"/api/config\", configRoutes);\n```sql","size_chars":1312,"tokens_estimate":328}
{"doc_id":"ew-endp-001a","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-001a-get-api-config-da-db.md","title":"A. Codice - File da creare/aggiornare","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-endp-002","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md","title":"**1. `src/routes/branding.ts`**","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**1. `src/routes/branding.ts`**","anchor_slug":"1-srcroutesbrandingts","chunk_index":1,"content":"### **1. `src/routes/branding.ts`**\n\n```sql\n// easyway-portal-api/src/routes/branding.ts\nimport { Router } from \"express\";\nimport { getBrandingConfig } from \"../controllers/brandingController\";\n\nconst router = Router();\n\n// Endpoint GET /api/branding\nrouter.get(\"/\", getBrandingConfig);\n\nexport default router;\n\n```sql\n\n**Dove va:**  \n`easyway-portal-api/src/routes/branding.ts`","size_chars":378,"tokens_estimate":94}
{"doc_id":"ew-endp-002","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md","title":"**1. `src/routes/branding.ts`**","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**2. `src/controllers/brandingController.ts`**","anchor_slug":"2-srccontrollersbrandingcontrollerts","chunk_index":2,"content":"### **2. `src/controllers/brandingController.ts`**\n\n\n```sql\n// easyway-portal-api/src/controllers/brandingController.ts\nimport { Request, Response } from \"express\";\nimport { loadBrandingConfig } from \"../config/brandingLoader\";\n\nexport async function getBrandingConfig(req: Request, res: Response) {\n  try {\n    const tenantId = (req as any).tenantId;\n    const config = await loadBrandingConfig(tenantId);\n    res.json(config);\n  } catch (err: any) {\n    res.status(404).json({ error: err.message || \"Branding config not found\" });\n  }\n}\n```sql\n\n**Dove va:**  \n`easyway-portal-api/src/controllers/brandingController.ts`\n\n**3. Aggiungi la rotta in `src/app.ts`**\n\nAggiungi questa riga **sotto** la riga in cui importi le rotte health:\n\n```sql\nimport brandingRoutes from \"./routes/branding\";\n```sql\nE subito **dopo** la riga  \n```sql\napp.use(\"/api/health\", healthRoutes);`\n```sql\naggiungi:\n```sql\napp.use(\"/api/branding\", brandingRoutes);\n```sql\n\n`src/app.ts` (snippet aggiornato):\n\n```sql\n// easyway-portal-api/src/app.ts\nimport express from \"express\";\nimport dotenv from \"dotenv\";\nimport { logger } from \"./utils/logger\";\nimport { extractTenantId } from \"./middleware/tenant\";\nimport healthRoutes from \"./routes/health\";\nimport brandingRoutes from \"./routes/branding\";\n\n// Carica variabili di ambiente (.env)\ndotenv.config();\n\nconst app = express();\napp.use(express.json());\n\n// Logging di ogni richiesta base\napp.use((req, res, next) => {\n  logger.info(`[${req.method}] ${req.originalUrl}`);\n  next();\n});\n\n// Middleware per estrarre tenant_id da header/JWT (customizza a piacere)\napp.use(extractTenantId);\n\n// Rotte API\napp.use(\"/api/health\", healthRoutes);\napp.use(\"/api/branding\", brandingRoutes);\n\nexport default app;\n\n\n```sql","size_chars":1732,"tokens_estimate":433}
{"doc_id":"ew-endp-002","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-002-get-api-branding.md","title":"**1. `src/routes/branding.ts`**","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"ENDPOINT: CRUD `/api/users`","anchor_slug":"endpoint-crud-apiusers","chunk_index":1,"content":"### ENDPOINT: CRUD `/api/users`\n\n**Descrizione**\n> Permette la gestione completa degli utenti di un tenant (elenco, creazione, modifica, cancellazione/disattivazione).\n> Tutto filtrato per `tenantId`, nessun tenant può accedere agli utenti degli altri.\nGestione completa degli utenti per tenant, tutto filtrato su `tenantId`.\nLe query SQL vengono caricate dalla cartella `src/queries/` (fallback su custom Blob se serve).\n\n**Best Practice**\n- Validazione input obbligatoria (header, body)\n- Tutte le operazioni sono sempre scoperte solo per il tenant corrente\n- Risposta coerente e tipizzata, errori gestiti e chiari\n- Logging di tutte le operazioni (minimo su console/logger, poi DB/audit trail)\n- Testabilità garantita via Postman, REST Client, cURL\n- Validazione input e sicurezza sempre attiva (header, body)\n- Risposta coerente, errori gestiti\n- Logging delle operazioni consigliato\n\n**Cosa fa tecnicamente**\n1. Recupera il `tenantId` dal middleware\n2. Esegue query solo su utenti del tenant\n3. Per ogni operazione (GET, POST, PUT, DELETE) aggiorna solo record del tenant\n4. Restituisce risposta JSON, o errore\n5. Recupera `tenantId` via middleware\n6. Esegue query SQL caricata con fallback (Blob o locale)\n7. Ogni endpoint risponde solo per il tenant corrente\n\n**Come si testa**\n- Avvia il backend (`npm run dev`)\n- GET `/api/users` con header `X-Tenant-Id: tenant01` (elenco utenti tenant)\n- POST `/api/users` con body JSON (creazione utente)\n- PUT `/api/users/:user_id` (aggiornamento)\n- DELETE `/api/users/:user_id` (disattivazione)\n\n\n**Endpoint CRUD Utenti Multi-Tenant**\n-------------------------------------\n\n**Obiettivo:**  \nCreare gli endpoint CRUD (Create, Read, Update, Delete) per la tabella `USERS`,  \nseguendo le best practice multi-tenant e la struttura già definita.","size_chars":1787,"tokens_estimate":447}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**A. Logica e best practice**","anchor_slug":"a-logica-e-best-practice","chunk_index":2,"content":"### **A. Logica e best practice**\n\n*   **Ogni operazione su USERS è SEMPRE filtrata su `tenantId`** (nessun utente di un tenant può vedere o modificare utenti di un altro tenant)\n    \n*   **Risposta e input sempre in JSON**\n    \n*   **Errori gestiti e descrittivi**\n    \n*   **Tipizzazione tramite TypeScript**\n    \n*   **Logging di operazioni CRUD (minimo via logger, poi estendibile su DB)**\n    \n\n* * *","size_chars":405,"tokens_estimate":101}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**B. Struttura dei nuovi file**","anchor_slug":"b-struttura-dei-nuovi-file","chunk_index":3,"content":"### **B. Struttura dei nuovi file**\n\n```sql\n/src/\n├─ controllers/\n│    └─ usersController.ts\n├─ models/\n│    └─ user.ts\n└─ routes/\n     └─ users.ts\n```sql","size_chars":154,"tokens_estimate":38}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**C. 1. Model (tipizzazione)**","anchor_slug":"c-1-model-tipizzazione","chunk_index":4,"content":"### **C. 1. Model (tipizzazione)**\n\n`src/models/user.ts`\n\n```sql\n// easyway-portal-api/src/models/user.ts\n\nexport interface User {\n  user_id: string;        // NDG, es: CDI0000010001\n  tenant_id: string;\n  email: string;\n  display_name: string;\n  is_active: boolean;\n  profile_id: string;\n  created_at: Date;\n  updated_at: Date;\n}\n```sql","size_chars":337,"tokens_estimate":84}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**C. 2. Controller (logica CRUD base)**","anchor_slug":"c-2-controller-logica-crud-base","chunk_index":5,"content":"### **C. 2. Controller (logica CRUD base)**\n\n`src/controllers/usersController.ts`\n\n```sql\n// easyway-portal-api/src/controllers/usersController.ts\nimport { Request, Response } from \"express\";\nimport sql from \"mssql\";\nimport { User } from \"../models/user\";\n\n// Utility per estrarre tenant da req\nfunction getTenantId(req: Request): string {\n  return (req as any).tenantId;\n}\n\n// GET /api/users - lista utenti per tenant\nexport async function getUsers(req: Request, res: Response) {\n  try {\n    const tenantId = getTenantId(req);\n    const pool = await sql.connect(process.env.DB_CONN_STRING!);\n\n    const result = await pool.request()\n      .input(\"tenant_id\", sql.NVarChar, tenantId)\n      .query(\"SELECT * FROM PORTAL.USERS WHERE tenant_id = @tenant_id\");\n\n    res.json(result.recordset as User[]);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n}\n\n// POST /api/users - crea utente per tenant\nexport async function createUser(req: Request, res: Response) {\n  try {\n    const tenantId = getTenantId(req);\n    const { email, display_name, profile_id } = req.body;\n\n    const pool = await sql.connect(process.env.DB_CONN_STRING!);\n    // Generate nuovo NDG\n    // Qui puoi mettere la tua logica: esempio con sequence SQL Server\n\n    const result = await pool.request()\n      .input(\"tenant_id\", sql.NVarChar, tenantId)\n      .input(\"email\", sql.NVarChar, email)\n      .input(\"display_name\", sql.NVarChar, display_name)\n      .input(\"profile_id\", sql.NVarChar, profile_id)\n      .query(`\n        INSERT INTO PORTAL.USERS (tenant_id, email, display_name, profile_id, is_active, created_at, updated_at)\n        VALUES (@tenant_id, @email, @display_name, @profile_id, 1, SYSUTCDATETIME(), SYSUTCDATETIME());\n        SELECT * FROM PORTAL.USERS WHERE user_id = SCOPE_IDENTITY();\n      `);\n\n    res.status(201).json(result.recordset[0] as User);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n}\n\n// PUT /api/users/:user_id - aggiorna utente per tenant\nexport async function updateUser(req: Request, res: Response) {\n  try {\n    const tenantId = getTenantId(req);\n    const { user_id } = req.params;\n    const { email, display_name, profile_id, is_active } = req.body;\n\n    const pool = await sql.connect(process.env.DB_CONN_STRING!);","size_chars":2284,"tokens_estimate":571}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**C. 2. Controller (logica CRUD base)**","anchor_slug":"c-2-controller-logica-crud-base","chunk_index":6,"content":"    const result = await pool.request()\n      .input(\"user_id\", sql.NVarChar, user_id)\n      .input(\"tenant_id\", sql.NVarChar, tenantId)\n      .input(\"email\", sql.NVarChar, email)\n      .input(\"display_name\", sql.NVarChar, display_name)\n      .input(\"profile_id\", sql.NVarChar, profile_id)\n      .input(\"is_active\", sql.Bit, is_active)\n      .query(`\n        UPDATE PORTAL.USERS\n        SET email = @email,\n            display_name = @display_name,\n            profile_id = @profile_id,\n            is_active = @is_active,\n            updated_at = SYSUTCDATETIME()\n        WHERE user_id = @user_id AND tenant_id = @tenant_id;\n        SELECT * FROM PORTAL.USERS WHERE user_id = @user_id AND tenant_id = @tenant_id;\n      `);\n\n    res.json(result.recordset[0] as User);\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n}\n\n// DELETE /api/users/:user_id - disattiva utente per tenant\nexport async function deleteUser(req: Request, res: Response) {\n  try {\n    const tenantId = getTenantId(req);\n    const { user_id } = req.params;\n\n    const pool = await sql.connect(process.env.DB_CONN_STRING!);\n\n    await pool.request()\n      .input(\"user_id\", sql.NVarChar, user_id)\n      .input(\"tenant_id\", sql.NVarChar, tenantId)\n      .query(`\n        UPDATE PORTAL.USERS\n        SET is_active = 0,\n            updated_at = SYSUTCDATETIME()\n        WHERE user_id = @user_id AND tenant_id = @tenant_id;\n      `);\n\n    res.status(204).send();\n  } catch (err: any) {\n    res.status(500).json({ error: err.message });\n  }\n}\n```sql","size_chars":1541,"tokens_estimate":385}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**C. 4. Aggiornamento app.ts**","anchor_slug":"c-4-aggiornamento-appts","chunk_index":7,"content":"### **C. 4. Aggiornamento app.ts**\n\nAggiungi l'import:\n\n```sql\nimport usersRoutes from \"./routes/users\";\n\n```sql\n\nE sotto le altre route:\n```sql\napp.use(\"/api/users\", usersRoutes);\n```sql","size_chars":187,"tokens_estimate":47}
{"doc_id":"ew-endp-003","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/endp-003-get-crud-api-users.md","title":"ENDPOINT: CRUD `/api/users`","owner":"team-api","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":8,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-easyway-webapp-05-codice-easyway-portale-easyway-portal-api-endpoint-index","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/index.md","title":"Indice","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:58:34+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Quali endpoint sono documentati e dove sono le istruzioni?\n- Qual e il template canonico per aggiungere un nuovo endpoint?\n- Quali file del codice devo toccare per ogni endpoint?","size_chars":206,"tokens_estimate":52}
{"doc_id":"ew-template-endpoint","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/template-endpoint.md","title":"ENDPOINT: [HTTP_VERB] `/api/your-endpoint`","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"ENDPOINT: [HTTP_VERB] `/api/your-endpoint`","anchor_slug":"endpoint-httpverb-apiyour-endpoint","chunk_index":1,"content":"### ENDPOINT: [HTTP_VERB] `/api/your-endpoint`\n\n**Descrizione**\n> [Breve descrizione della funzione dell’endpoint.  \nEsempio: “Restituisce la configurazione di branding (colori, etichette, immagini, path) per il tenant corrente.”]\n\n```\n\n**Best Practice**\r\n- Validazione degli input (header, parametri, body) obbligatoria\r\n- L’header `X-Tenant-Id` deve sempre essere presente e valido\r\n- Gestione esplicita degli errori (404 se config mancante, 400 su input errato, 500 per errori interni)\r\n- Risposta sempre in JSON, coerente con le tipizzazioni definite in `/types/config.d.ts`\r\n- Logging di accesso ed errori tramite logger centralizzato\r\n- Ogni endpoint deve poter essere testato tramite Postman/cURL (testabilità garantita)\n\n---\n\n**Cosa fa tecnicamente**\r\n1. Estrae il `tenantId` tramite middleware multi-tenant\r\n2. [Esegue le operazioni specifiche — es: lettura config YAML, query DB, ecc.]\r\n3. Restituisce la risposta JSON strutturata (o errore gestito)\n\n---\n\n**Come si testa**\r\n- Avvia il backend (`npm run dev`)\r\n- Esegui una richiesta `[HTTP_VERB]` su `/api/your-endpoint`  \r\n  con header `X-Tenant-Id: [nome_tenant]`\r\n- [Se necessario: aggiungi body, querystring, ecc.]\r\n- Risposta attesa:  \r\n  ```json\r\n  {\r\n    // Esempio di risposta attesa\r\n  }\n\nRisposta in caso di errore:\r\n{\r\n  \"error\": \"Messaggio di errore\"\r\n}\n\nEsempio chiamata (curl/Postman)\r\ncurl -X [HTTP_VERB] \"http://localhost:3000/api/your-endpoint\" \\\r\n  -H \"X-Tenant-Id: tenant01\"\r\n  [--data '{\"param\": \"value\"}']\n\n\r\n---\n\n**Puoi copiarlo e riutilizzarlo identico per ogni endpoint futuro.  \r\nPronto a produrre subito il prossimo endpoint (es: GET `/api/config` da DB)?**\n\n```sql","size_chars":1652,"tokens_estimate":413}
{"doc_id":"ew-template-endpoint","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/template-endpoint.md","title":"ENDPOINT: [HTTP_VERB] `/api/your-endpoint`","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-come-si-testa","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-come-si-testa","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-come-si-testa","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-come-si-testa","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/ENDPOINT/Template-ENDPOINT/come-si-testa.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\nCentralizzare e storicizzare i log business/audit esportandoli su Azure Datalake  \nin modo automatizzato, sicuro e compliant con policy GDPR, SOC2, DORA.","size_chars":166,"tokens_estimate":42}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Soluzione consigliata (EasyWay Data Portal)\r","anchor_slug":"soluzione-consigliata-easyway-data-portal","chunk_index":2,"content":"## Soluzione consigliata (EasyWay Data Portal)\n\n- **Pipeline Azure DevOps** che esegue periodicamente (es. ogni notte) un export automatico dei file log (`logs/business.log.json`) sul Datalake (`/portal-logs/`).\r\n- **Task di export** basato su [azcopy](https://learn.microsoft.com/en-us/azure/storage/common/storage-use-azcopy-v10)  \r\n  (CLI ufficiale Microsoft, auditata e supportata).\n\n---","size_chars":391,"tokens_estimate":98}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Flusso tecnico\r","anchor_slug":"flusso-tecnico","chunk_index":3,"content":"## Flusso tecnico\n\n1. **Scrittura dei log**:  \r\n   Il backend scrive tutti i log business/audit in file JSON locali (`logs/business.log.json`).\r\n2. **Automazione export**:  \r\n   Una pipeline DevOps (o uno script schedulato) lancia azcopy per copiare i log sul container Datalake dedicato.\r\n3. **Sicurezza**:  \r\n   Solo l’identità di servizio della pipeline può scrivere su `/portal-logs/`.\r\n4. **Audit trail**:  \r\n   Ogni run della pipeline è tracciata (chi, quando, esito) e auditabile via Azure DevOps.\n\n---","size_chars":509,"tokens_estimate":127}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Snippet esempio pipeline (YAML)\r","anchor_slug":"snippet-esempio-pipeline-yaml","chunk_index":4,"content":"## Snippet esempio pipeline (YAML)\n\n```yaml\r\ntrigger: none\n\nschedules:\r\n  - cron: \"0 1 * * *\"  # Ogni notte alle 01:00\r\n    displayName: Export business log to Datalake\r\n    branches:\r\n      include: [\"main\"]\n\njobs:\r\n- job: ExportBusinessLog\r\n  pool:\r\n    vmImage: 'ubuntu-latest'\r\n  steps:\r\n  - script: |\r\n      azcopy copy \"logs/business.log.json\" \"https://NOMESTORAGE.dfs.core.windows.net/portal-logs/business_$(date +%Y%m%d).log.json\" --overwrite=true\r\n    displayName: 'Upload log su Datalake'\r\n    env:\r\n      AZCOPY_SPA_CLIENT_SECRET: $(AZCOPY_SPA_CLIENT_SECRET)\r\n```sql\n\nPolicy e best practice\r\n----------------------\n\n*   **Logga solo ciò che serve, maschera tutto il resto.**\r\n    \r\n*   **Mai dati sensibili in chiaro**: i log su Datalake non devono contenere password, hash, dati personali non mascherati, info sensibili (vedi policy log).\r\n    \r\n*   **Tutto il workflow di export è tracciato via pipeline,** con alert in caso di errore/fallimento.\r\n    \r\n*   **L’utenza di servizio usata da azcopy** è segregata e ha solo i permessi minimi necessari.\r\n    \n\n* * *\n\nAlternative e note\r\n------------------\n\n*   Per esigenze ETL complesse o grandi volumi: valuta Azure Data Factory (ADF) per orchestrare export e trasformazioni log.\r\n    \r\n*   Composer/Airflow solo per ambienti già maturi DataOps o multi-cloud.\r\n    \r\n*   Mai export “a mano”: solo automazione tracciata.\r\n    \n\n* * *\n\nCompliance\r\n----------\n\n*   **Soluzione auditabile, tracciata e gestita via Azure AD** (RBAC, Managed Identity).\r\n    \r\n*   Retention su Datalake secondo policy di sicurezza/legale.\r\n    \r\n*   Allineata a best practice Microsoft, GDPR, SOC2, DORA.\r\n    \n\n* * *\n\n**Vedi anche:**\r\n*   Sezione “Gestione Log”\r\n    \r\n*   Policy log dati sensibili","size_chars":1738,"tokens_estimate":434}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":5,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":6,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":7,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-automazione-export-log-su-datalake-e-compliance","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/automazione-export-log-su-datalake-e-compliance.md","title":"Automazione export log su Datalake & Compliance","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":8,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-logging-conversational-ready-agent-aware","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/logging-conversational-ready-agent-aware.md","title":"Logging conversational-ready (agent-aware)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**C. Cosa fare lato chiamanti (frontend, agent, chatbot, orchestratori):**\r","anchor_slug":"c-cosa-fare-lato-chiamanti-frontend-agent-chatbot-orchestratori","chunk_index":1,"content":"### **C. Cosa fare lato chiamanti (frontend, agent, chatbot, orchestratori):**\r\n- Passa sempre header:\r\n  - `X-Origin`: chi sta chiamando (\"user\", \"agent\", \"ams\", \"api\", \"job\"…)\r\n  - `X-Agent-Id`: identificativo agente, se chiamata da agent/app\r\n  - `X-Conversation-Id`: se la chiamata fa parte di un workflow o conversazione bot\n\n---","size_chars":334,"tokens_estimate":84}
{"doc_id":"ew-logging-conversational-ready-agent-aware","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/logging-conversational-ready-agent-aware.md","title":"Logging conversational-ready (agent-aware)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**D. Dove integrare nel progetto**\r","anchor_slug":"d-dove-integrare-nel-progetto","chunk_index":2,"content":"### **D. Dove integrare nel progetto**\r\n- File modificati:\r\n  - `/src/controllers/onboardingController.ts`\r\n  - `/src/utils/logger.ts` (deve supportare campi aggiuntivi)\r\n  - `/README.md` e/o Wiki (sezione Logging agent-aware e Risposta standardizzata)\n\n---","size_chars":257,"tokens_estimate":64}
{"doc_id":"ew-logging-conversational-ready-agent-aware","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili/logging-conversational-ready-agent-aware.md","title":"Logging conversational-ready (agent-aware)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde\r","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\r\n- Cosa fa questa pagina?\r\n- Quali sono i prerequisiti?\r\n- Quali passi devo seguire?\r\n- Quali sono gli errori comuni?\r\n- Dove approfondire?","size_chars":165,"tokens_estimate":41}
{"doc_id":"ew-create-json","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md","title":"EasyWay Data Portal API — Starter Kit","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Comandi principali","anchor_slug":"comandi-principali","chunk_index":1,"content":"## Comandi principali\n\n- `npm install` — installa tutte le dipendenze\n- `npm run dev` — avvia il backend in modalità sviluppo (hot reload)\n- `npm run build` — compila TypeScript in `/dist`\n- `npm start` — avvia il backend dalla build","size_chars":233,"tokens_estimate":58}
{"doc_id":"ew-create-json","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md","title":"EasyWay Data Portal API — Starter Kit","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Struttura file configurazione","anchor_slug":"struttura-file-configurazione","chunk_index":2,"content":"## Struttura file configurazione\n\n- `/datalake-sample/branding.tenant01.yaml` — esempio YAML branding\n- Tabella `PORTAL.CONFIGURATION` (solo DB) — per parametri runtime (script SQL in chat DB)\n```sql\n\n**Dove va:**  \n`easyway-portal-api/README.md`  \n**A cosa serve:**  \nGuida rapida per sviluppatori (setup, build, configurazioni).\n\n* * *\n\n**4. `easyway-portal-api/datalake-sample/branding.tenant01.yaml`**\n------------------------------------------------------------------\n\n```sql\nbranding:\n  primary_color: \"#009FE3\"\n  secondary_color: \"#FFD900\"\n  background_image: \"/portal-assets/img/tenant01_bg.jpg\"\n  logo: \"/portal-assets/img/logo_tenant01.svg\"\n  font: \"Inter, Arial, sans-serif\"\n\nlabels:\n  portal_title: \"EasyWay Data Portal\"\n  login_button: \"Accedi\"\n  welcome_message: \"Benvenuto su EasyWay!\"\n\npaths:\n  official_data: \"/official/tenant01/\"\n  staging_data: \"/staging/tenant01/\"\n  portal_assets: \"/portal-assets/\"\n\n```sql\n\n**Dove va:**  \n`easyway-portal-api/datalake-sample/branding.tenant01.yaml`  \n**A cosa serve:**  \nEsempio/template file di branding e config UI per ogni tenant.  \n**In produzione:** verrà copiato/gestito in Datalake, path es: `/portal-assets/config/branding.tenant01.yaml`\n\n* * *\n\n**5. Database (schema tabella di configurazione)**\n--------------------------------------------------\n\n**Non incluso qui!**  \nScript SQL **solo nella chat DB**:\n\n> **EasyWay DataPortal - DB (modello dati, schema, convenzioni)**","size_chars":1436,"tokens_estimate":359}
{"doc_id":"ew-create-json","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md","title":"EasyWay Data Portal API — Starter Kit","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-create-json","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md","title":"EasyWay Data Portal API — Starter Kit","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":4,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-create-json","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md","title":"EasyWay Data Portal API — Starter Kit","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":5,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-create-json","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-1-setup-ambiente/create-json.md","title":"EasyWay Data Portal API — Starter Kit","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":6,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-conversational-and-agent-aware-ready","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-2-struttura-src-e-primi-file/conversational-and-agent-aware-ready.md","title":"**. Controller**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**. Controller**","anchor_slug":"controller","chunk_index":1,"content":"### **. Controller**\n\n\n```sql\nimport { Request, Response } from \"express\";\nimport sql from \"mssql\";\nimport { logger } from \"../utils/logger\";\n\nexport async function onboarding(req: Request, res: Response) {\n  const startTime = Date.now();\n  const pool = await sql.connect(process.env.DB_CONN_STRING!);\n\n  // Recupero header conversational/agent-aware\n  const origin = req.headers[\"x-origin\"] || \"api\"; // user, agent, ams, api...\n  const agent_id = req.headers[\"x-agent-id\"] || null;\n  const conversation_id = req.headers[\"x-conversation-id\"] || null;\n\n  try {\n    const {\n      tenant_name,\n      user_email,\n      display_name,\n      profile_id,\n      ext_attributes = {}\n    } = req.body;\n\n    // Chiamata store procedure di onboarding\n    const result = await pool.request()\n      .input(\"tenant_name\", sql.NVarChar, tenant_name)\n      .input(\"user_email\", sql.NVarChar, user_email)\n      .input(\"display_name\", sql.NVarChar, display_name)\n      .input(\"profile_id\", sql.NVarChar, profile_id)\n      .input(\"ext_attributes\", sql.NVarChar, JSON.stringify(ext_attributes))\n      .execute(\"PORTAL.sp_debug_register_tenant_and_user\");\n\n    const executionTime = Date.now() - startTime;\n\n    // Logging conversational/agent-aware\n    logger.info(\"Onboarding completato\", {\n      intent: \"ONBOARDING_TENANT_USER\",\n      origin,\n      agent_id,\n      user_id: result.recordset[0]?.user_id || null,\n      tenant_id: result.recordset[0]?.tenant_id || null,\n      conversation_id,\n      esito: \"success\",\n      executionTime,\n      context: { ...ext_attributes, source_ip: req.ip }\n    });\n\n    // Risposta standard conversational/agent-aware\n    res.status(201).json({\n      status: \"success\",\n      message: \"Onboarding completato\",\n      data: result.recordset,\n      intent: \"ONBOARDING_TENANT_USER\",\n      esito: \"success\",\n      conversation_id,\n      origin\n    });\n\n  } catch (err: any) {\n    logger.error(\"Errore onboarding\", {\n      intent: \"ONBOARDING_TENANT_USER\",\n      origin,\n      agent_id,\n      conversation_id,\n      user_email: req.body.user_email,\n      tenant_name: req.body.tenant_name,\n      esito: \"error\",\n      error: err.message,\n      context: { ...req.body.ext_attributes, source_ip: req.ip }\n    });","size_chars":2223,"tokens_estimate":556}
{"doc_id":"ew-conversational-and-agent-aware-ready","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-2-struttura-src-e-primi-file/conversational-and-agent-aware-ready.md","title":"**. Controller**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":3,"anchor_text":"**. Controller**","anchor_slug":"controller","chunk_index":2,"content":"    res.status(500).json({\n      status: \"error\",\n      message: err.message,\n      intent: \"ONBOARDING_TENANT_USER\",\n      esito: \"error\",\n      conversation_id,\n      origin\n    });\n  }\n}\n```sql","size_chars":196,"tokens_estimate":49}
{"doc_id":"ew-conversational-and-agent-aware-ready","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-2-struttura-src-e-primi-file/conversational-and-agent-aware-ready.md","title":"**. Controller**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:38+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-query-in-src-queries","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake/query-in-src-queries.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-query-in-src-queries","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake/query-in-src-queries.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-query-in-src-queries","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake/query-in-src-queries.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-query-in-src-queries","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-4-query-dinamiche-locale-datalake/query-in-src-queries.md","title":"Domande a cui risponde","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:50+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
{"doc_id":"ew-validazione-avanzata","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso/validazione-avanzata.md","title":"**A. Middleware di validazione per parametri e querystring**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:39+01:00","section_level":3,"anchor_text":"**A. Middleware di validazione per parametri e querystring**","anchor_slug":"a-middleware-di-validazione-per-parametri-e-querystring","chunk_index":1,"content":"### **A. Middleware di validazione per parametri e querystring**\n\n#### **1. Middleware generico per parametri route e query**\n\n`src/middleware/validate.ts`  \n_(aggiungi queste funzioni accanto a `validateBody`)_\n\n```sql\nimport { ZodSchema } from \"zod\";\nimport { Request, Response, NextFunction } from \"express\";\n\n// Body già visto prima\nexport function validateBody(schema: ZodSchema<any>) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.body);\n    if (!result.success) {\n      return res.status(400).json({ error: \"Validation failed\", details: result.error.errors });\n    }\n    req.body = result.data;\n    next();\n  };\n}\n\n// Querystring\nexport function validateQuery(schema: ZodSchema<any>) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.query);\n    if (!result.success) {\n      return res.status(400).json({ error: \"Invalid query parameters\", details: result.error.errors });\n    }\n    req.query = result.data;\n    next();\n  };\n}\n\n// Parametri di route (es: /api/users/:user_id)\nexport function validateParams(schema: ZodSchema<any>) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const result = schema.safeParse(req.params);\n    if (!result.success) {\n      return res.status(400).json({ error: \"Invalid route parameters\", details: result.error.errors });\n    }\n    req.params = result.data;\n    next();\n  };\n}\n\n```sql\n\n#### **2. Schema di validazione per parametri**\n\nEsempio per `user_id` (NDG alfanumerico):\n`src/validators/userValidator.ts`  \n_(aggiungi accanto agli altri schema)_\n\n```sql\nexport const userIdParamSchema = z.object({\n  user_id: z.string().min(6).max(32), // adatta a come hai impostato NDG\n});\n\n```sql\n\n#### **3. Schema di validazione per header**\n\nPer `X-Tenant-Id` puoi validare direttamente nel middleware  \n(oppure, se vuoi modularizzare, usa zod).","size_chars":1916,"tokens_estimate":479}
{"doc_id":"ew-validazione-avanzata","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso/validazione-avanzata.md","title":"**A. Middleware di validazione per parametri e querystring**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:39+01:00","section_level":3,"anchor_text":"**B. Esempio di applicazione nelle rotte**","anchor_slug":"b-esempio-di-applicazione-nelle-rotte","chunk_index":2,"content":"### **B. Esempio di applicazione nelle rotte**\n\n`src/routes/users.ts`\n\n```sql\nimport { Router } from \"express\";\nimport { getUsers, createUser, updateUser, deleteUser } from \"../controllers/usersController\";\nimport { validateBody, validateParams } from \"../middleware/validate\";\nimport { userCreateSchema, userUpdateSchema, userIdParamSchema } from \"../validators/userValidator\";\n\nconst router = Router();\n\nrouter.get(\"/\", getUsers);\n\nrouter.post(\"/\", validateBody(userCreateSchema), createUser);\n\nrouter.put(\n  \"/:user_id\",\n  validateParams(userIdParamSchema),\n  validateBody(userUpdateSchema),\n  updateUser\n);\n\nrouter.delete(\n  \"/:user_id\",\n  validateParams(userIdParamSchema),\n  deleteUser\n);\n\nexport default router;\n\n```sql","size_chars":726,"tokens_estimate":182}
{"doc_id":"ew-validazione-avanzata","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso/validazione-avanzata.md","title":"**A. Middleware di validazione per parametri e querystring**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:39+01:00","section_level":3,"anchor_text":"**C. Validazione header (X-Tenant-Id)**","anchor_slug":"c-validazione-header-x-tenant-id","chunk_index":3,"content":"### **C. Validazione header (X-Tenant-Id)**\n\nNel middleware tenant, puoi aggiungere controllo più robusto:\n`src/middleware/tenant.ts`\n\n```sql\nimport { Request, Response, NextFunction } from \"express\";\n\nexport function extractTenantId(req: Request, res: Response, next: NextFunction) {\n  const tenantId = req.header(\"X-Tenant-Id\");\n  if (!tenantId || tenantId.length < 3 || tenantId.length > 32) {\n    return res.status(400).json({ error: \"Invalid or missing X-Tenant-Id header\" });\n  }\n  (req as any).tenantId = tenantId;\n  next();\n}\n\n```sql","size_chars":541,"tokens_estimate":135}
{"doc_id":"ew-validazione-avanzata","path":"easyway-webapp/05_codice_easyway_portale/easyway_portal_api/step-5-validazione-avanzata-dati-in-ingresso/validazione-avanzata.md","title":"**A. Middleware di validazione per parametri e querystring**","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:41:39+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":4,"content":"## Domande a cui risponde\n- Cosa fa questa pagina?\n- Quali sono i prerequisiti?\n- Quali passi devo seguire?\n- Quali sono gli errori comuni?\n- Dove approfondire?","size_chars":160,"tokens_estimate":40}
{"doc_id":"ew-atomic-flows-agentic","path":"etl/atomic-flows-agentic.md","title":"Atomic Flows – Orchestrazione Agent‑First","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:20:01+01:00","section_level":2,"anchor_text":"Atomic Flows – Orchestrazione Agent‑First","anchor_slug":"atomic-flows-orchestrazione-agentfirst","chunk_index":1,"content":"# Atomic Flows – Orchestrazione Agent‑First\n\nScopo\n- Definire un approccio atomico e riusabile per flussi ETL su Azure orchestrati da Airflow e gestiti da un agente.\n- Standardizzare configurazione (YAML), naming, logging e integrazione con ARGOS (DQ/Alerting).\n\nArchitettura (sintesi)\n- DAG padre `wf_all` legge uno YAML e orchestra i 3 figli: `lnd_to_dq` → `dq_to_stg` → `stg_to_ref`.\n- DAG `wf_sched` (o “wf_scan”) genera lo YAML e triggera `wf_all`.\n- Figli atomici: ognuno fa una sola cosa (waiting/copy/DQ, gate+load STG, merge REF).\n\nRepository e Path\n- Package: `atomic_flows` (codice nel repo EasyWayDataPortal)\n  - `atomic_flows/templates/` – DAG figli atomici\n  - `atomic_flows/orchestration/` – DAG padre e scheduler, esempio YAML `atomic_flows/orchestration/wf_all.config.sample.yaml`\n  - `atomic_flows/common/` – operator/sensor/utils (Blob, MSSQL, Databricks, config)\n\nWorkflow YAML (wf_all)\n- Caricato da Blob o filesystem; passato a `wf_all` via `dag_run.conf.config_uri`.\n- Struttura minima:\n  - `landing.container/prefix/poke_interval/timeout`\n  - `children.{lnd_to_dq|dq_to_stg|stg_to_ref}.dag_id` e `conf` (es. `batch_date`)\n- Vedi esempio: `atomic_flows/orchestration/wf_all.config.sample.yaml`\n\nRuolo dell’Agente\n- Intents (proposta): `etl-spec:create`, `etl-spec:validate`, `etl:dry-run`, `etl:deploy`.\n- Compiti:\n  1) Generare/aggiornare YAML (con naming e path landing/dq/stg/ref coerenti).\n  2) Validare (schema e connessioni), simulare (dry-run su un batch) e creare PR.\n  3) Eseguire `wf_sched` o triggerare `wf_all` con `config_uri`.\n  4) Registrare output (contract JSON), log e—se integrato—eventi ARGOS.\n\nBest Practice EasyWay\n- Scelte tecnologiche: vedere “ETL/ELT – Scelte Tecnologiche” (Airflow per orchestrazione; Databricks per trasformazioni; ADF opzionale ingestion semplice).\n- ARGOS: esiti DQ PASS/DEFER/FAIL, payload standard, dedup/suppression e digest (vedi “ARGOS – Alerting & Notifications”).\n- GitOps: YAML e DAG in repo; secrets via Connections/Key Vault; nessuna PII nei messaggi/eventi.\n\nLinee Guida Naming & Logging\n- DAG id: `{domain}_{flow}_{purpose}`; task id verbo_nome.\n- Tabelle: `dq_*`, `stg_*`, `ref_*` con stored procedure dedicate.\n- Log esecuzione: tabella SQL `dbo.etl_logs` (chiavi minime: dag_id, run_id, status, started_at, ended_at, rows_*, error_code).","size_chars":2321,"tokens_estimate":580}
{"doc_id":"ew-atomic-flows-agentic","path":"etl/atomic-flows-agentic.md","title":"Atomic Flows – Orchestrazione Agent‑First","owner":"team-data","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T18:20:01+01:00","section_level":2,"anchor_text":"Atomic Flows – Orchestrazione Agent‑First","anchor_slug":"atomic-flows-orchestrazione-agentfirst","chunk_index":2,"content":"Integrazione ARGOS (M1 – Gating)\n- `lnd_to_dq` produce outcome DQ; mappare in PASS/DEFER/FAIL con `decision_trace_id`.\n- Emissione eventi:\n  - `argos.gate.decision` (per ogni gate principale)\n  - `argos.run.completed` (per run aggregata) con correlazione.\n- Alert: CRITICAL/WARN/INFO secondo mapping; rispetto quiet hours/digest.\n\nOnboarding Nuovo Flusso (checklist)\n1) Definisci landing/container/prefix e convenzioni batch.\n2) Crea SP/SQL per DQ, load STG, merge REF.\n3) Genera YAML wf_all e validalo (schema + connessioni).\n4) PR con DAG parametrizzati e YAML; pipeline ADO valida e rilascia.\n5) Esegui dry‑run; verifica log/eventi/alert.\n6) Pianifica schedule e cost-guardrails (cluster Databricks auto‑terminate, orari orchestratore).\n\nAppendice – Connessioni Airflow\n- `wasb_default`, `mssql_default`, `databricks_default` (opzionale), SMTP.","size_chars":847,"tokens_estimate":212}
{"doc_id":"ew-wiki-old-index","path":"old/index.md","title":"Archivio (old/)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T05:34:36+01:00","section_level":2,"anchor_text":"start-here backups","anchor_slug":"start-here-backups","chunk_index":1,"content":"## start-here backups\n- `start-here.md.bak` — snapshot precedente (backup generico).\n- `start-here.md.bak_fix_legacy` — tentativo di fix legacy (storico).\n- `start-here.md.bak_fix_section7` — tentativo di fix su sezione 7 (storico).","size_chars":232,"tokens_estimate":58}
{"doc_id":"ew-best-practice-scripting","path":"onboarding/best-practice-scripting.md","title":"Best Practice Scripting (PowerShell, Bash, Node.js, Linux/Windows)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:13:53+01:00","section_level":2,"anchor_text":"1. Usa solo PowerShell Core (pwsh) ≥ 7\r","anchor_slug":"1-usa-solo-powershell-core-pwsh-7","chunk_index":1,"content":"## 1. Usa solo PowerShell Core (pwsh) ≥ 7\n\n- Tutti i `.ps1` devono essere eseguiti con `pwsh`, non con Windows PowerShell.\r\n- Evita moduli/cmdlet solo Windows (WMI, reg, COM) e preferisci funzioni cross-platform (file, json, path, text, http, ...).\r\n- Se usi script Bash o Node.js, assicurati che l’uso sia documentato e la logica sia equivalente.","size_chars":347,"tokens_estimate":87}
{"doc_id":"ew-best-practice-scripting","path":"onboarding/best-practice-scripting.md","title":"Best Practice Scripting (PowerShell, Bash, Node.js, Linux/Windows)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:13:53+01:00","section_level":2,"anchor_text":"2. Struttura e shebang cross-platform\r","anchor_slug":"2-struttura-e-shebang-cross-platform","chunk_index":2,"content":"## 2. Struttura e shebang cross-platform\n\n- In cima allo script, inserisci come buona pratica:\r\n  ```powershell\r\n  #!/usr/bin/env pwsh\r\n  ```\r\n- Rendi lo script eseguibile su Linux:\r\n  ```bash\r\n  chmod +x script.ps1\r\n  ```","size_chars":222,"tokens_estimate":56}
{"doc_id":"ew-best-practice-scripting","path":"onboarding/best-practice-scripting.md","title":"Best Practice Scripting (PowerShell, Bash, Node.js, Linux/Windows)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:13:53+01:00","section_level":2,"anchor_text":"3. Percorsi e variabili\r","anchor_slug":"3-percorsi-e-variabili","chunk_index":3,"content":"## 3. Percorsi e variabili\n\n- Usa sempre funzioni cross-platform per i path (es: `Join-Path`, nessuna backslash hardcoded).\r\n- Non dare per scontata la presenza di strumenti Windows-only (ad esempio `sqlcmd.exe`)\r\n- Se serve select tool, verifica OS all’avvio e guida/messaggio adattivo.","size_chars":287,"tokens_estimate":72}
{"doc_id":"ew-best-practice-scripting","path":"onboarding/best-practice-scripting.md","title":"Best Practice Scripting (PowerShell, Bash, Node.js, Linux/Windows)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:13:53+01:00","section_level":2,"anchor_text":"4. Versione alternativa: Bash/Node.js/Python\r","anchor_slug":"4-versione-alternativa-bashnodejspython","chunk_index":4,"content":"## 4. Versione alternativa: Bash/Node.js/Python\n\n- Se una CLI o orchestrazione è critica per il workflow dev/agent, proponi versione parallela `.sh` o `.js`/`.py` oppure aggiungi una recipe di sintesi passo-passo.","size_chars":213,"tokens_estimate":53}
{"doc_id":"ew-best-practice-scripting","path":"onboarding/best-practice-scripting.md","title":"Best Practice Scripting (PowerShell, Bash, Node.js, Linux/Windows)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:13:53+01:00","section_level":2,"anchor_text":"5. Onboarding contributor Linux/macOS\r","anchor_slug":"5-onboarding-contributor-linuxmacos","chunk_index":5,"content":"## 5. Onboarding contributor Linux/macOS\n\n- Nel README/onboarding specifica: serve `pwsh` installato (`sudo apt install powershell`), v7+ consigliato.\r\n- Offri sempre uno “starter env” mock/safe, no cloud cred reali richieste di default.\n\n---","size_chars":242,"tokens_estimate":60}
{"doc_id":"ew-best-practice-scripting","path":"onboarding/best-practice-scripting.md","title":"Best Practice Scripting (PowerShell, Bash, Node.js, Linux/Windows)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:13:53+01:00","section_level":2,"anchor_text":"6. Automatizza il check di portabilità\r","anchor_slug":"6-automatizza-il-check-di-portabilit","chunk_index":6,"content":"## 6. Automatizza il check di portabilità\n\n- agent_docs_review effettua controllo periodico sugli script:\r\n  - Segnala cmdlet/tool solo Windows.\r\n  - Avvisa se manca shebang.\r\n  - Verifica che README/onboarding presenti info Linux/macOS.\r\n  - Suggerisce PR di patch se serve migliorare portabilità.\n\n---\n\n**Esempio check shell (PowerShell):**\r\n```powershell\r\nif ($PSVersionTable.Platform -ne \"Unix\" -and $env:OS -eq $null) {\r\n    Write-Warning \"Questo script potrebbe non essere compatibile fuori da Windows!\"\r\n}\r\n```\n\n**Se trovi uno script poco portabile, crea una issue o PR di suggestion!**","size_chars":593,"tokens_estimate":148}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"1. Sotto-README, manifest e intro micro per ogni cartella chiave\r","anchor_slug":"1-sotto-readme-manifest-e-intro-micro-per-ogni-cartella-chiave","chunk_index":1,"content":"## 1. Sotto-README, manifest e intro micro per ogni cartella chiave\n\n- Ogni folder (agents/, atomic_flows/, scripts/, infra/, docs/, old/, ...) deve avere il proprio README.md, con:\r\n  - Descrizione dello scopo e dei sottodir principali\r\n  - Link alle ricette/riferimenti, manifest/etc.\r\n  - Guideline su come aggiungere/estendere/contribuire\n\n---","size_chars":347,"tokens_estimate":87}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"2. Ogni agent come \"micro-root\" self-contained\r","anchor_slug":"2-ogni-agent-come-micro-root-self-contained","chunk_index":2,"content":"## 2. Ogni agent come \"micro-root\" self-contained\n\n- Struttura minima per ogni agent:\r\n  ```\r\n  agents/agent_nome/\r\n      manifest.json\r\n      README.md           <-- intro/riferimenti/contesto\r\n      src/                <-- codice specifico (opzionale)\r\n      templates/          <-- template o intent usati/agenti\r\n      doc/                <-- brevi how-to e ricette locali\r\n      test/               <-- test/sandbox/fake/mock\r\n      priority.json       <-- orchestrazione build/usage\r\n  ```\r\n- Così ogni agent è plug&play, forkabile e testabile in isolamento.\n\n---","size_chars":569,"tokens_estimate":142}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"3. Wizard/script per accensione nuovo agent\r","anchor_slug":"3-wizardscript-per-accensione-nuovo-agent","chunk_index":3,"content":"## 3. Wizard/script per accensione nuovo agent\n\n- CLI “add-agent” (`pwsh scripts/agent-add.ps1 setup-nuovo-agent`) che:\r\n  - Crea micro-root con struttura base\r\n  - Compila manifest di esempio + stub template/recipe\r\n  - Inserisce README con TODO rimpiazzabili via prompt\n\n---","size_chars":276,"tokens_estimate":69}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"4. Ricette e checklist di parità tra agent\r","anchor_slug":"4-ricette-e-checklist-di-parit-tra-agent","chunk_index":4,"content":"## 4. Ricette e checklist di parità tra agent\n\n- Ogni nuovo agent pubblica una “agent recipe” (atomic_flows/templates/) con:\r\n  - Use case esempio\r\n  - Test locale runnable (pwsh/test, stub input)\r\n  - Passaggi minimi “pronti per CI/CD”\n\n---","size_chars":241,"tokens_estimate":60}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"5. Uniformare path e discovery di manifest/template/recipes\r","anchor_slug":"5-uniformare-path-e-discovery-di-manifesttemplaterecipes","chunk_index":5,"content":"## 5. Uniformare path e discovery di manifest/template/recipes\n\n- Allineare la posizione di manifest e template all’interno di ciascun agent (`agents/agent_x/template/`).\r\n- Global index (`agents/agent-registry.json`) che registra tutti gli agent e ne permette la discovery automatica da tooling/script.\n\n---","size_chars":308,"tokens_estimate":77}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"6. Tagging automatico e searchable nei manifest/recipe\r","anchor_slug":"6-tagging-automatico-e-searchable-nei-manifestrecipe","chunk_index":6,"content":"## 6. Tagging automatico e searchable nei manifest/recipe\n\n- Aggiungi tag (standard: domain, capability, input/output type, version) a manifest e recipe per supportare agent browsing e ricerca automatica.\n\n---","size_chars":209,"tokens_estimate":52}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"7. Welcome wizard per chi sviluppa\r","anchor_slug":"7-welcome-wizard-per-chi-sviluppa","chunk_index":7,"content":"## 7. Welcome wizard per chi sviluppa\n\n- Script di onboarding interattivo (“pwsh scripts/welcome-to-easyway.ps1”) che guida nuovo dev o maintainer su:\r\n  - Struttura della repo\r\n  - Agenti disponibili\r\n  - Come testare/integrare/contribuire (link ricette)\r\n  - Avviso su checklist cross-platform, zero trust e sandbox\n\n---","size_chars":322,"tokens_estimate":80}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"8. Sotto-README “veloce” per atomic_flows/, scripts/ e old/\r","anchor_slug":"8-sotto-readme-veloce-per-atomicflows-scripts-e-old","chunk_index":8,"content":"## 8. Sotto-README “veloce” per atomic_flows/, scripts/ e old/\n\n- Anche i toolkit comuni vanno documentati (1-2 screen/info, mapping agli agent).\r\n- In old/ sottolineare cosa può essere migrato e cosa è “reference only”.\n\n---","size_chars":225,"tokens_estimate":56}
{"doc_id":"ew-developer-agent-experience-upgrades","path":"onboarding/developer-agent-experience-upgrades.md","title":"🚀 Potenziare l’alberatura: più developer-friendly, più scalabile, più agent-ready","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T06:18:07+01:00","section_level":2,"anchor_text":"9. Automazione CI/CD sugli agent\r","anchor_slug":"9-automazione-cicd-sugli-agent","chunk_index":9,"content":"## 9. Automazione CI/CD sugli agent\n\n- Pipeline/CD-pipeline che gira lint, test lint e doc per ogni nuovo agent/commit.\r\n- Se un manifest/recipe non è in standard → warning + suggest PR.\n\n---\n\n**Con queste azioni, EasyWay DataPortal diventa ancora più:\r\n- Facile da navigare e contribuire\r\n- Scalabile a molti team/feature/plugin\r\n- Agent-first, con discovery dinamica e automazione plug&play!**","size_chars":395,"tokens_estimate":99}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\nOgni pagina deve essere auto-consistente: chi legge (umano o agente) deve capire subito **scopo, fonti canoniche, comandi di rigenerazione, artefatti e gate**.","size_chars":172,"tokens_estimate":43}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":2,"anchor_text":"Template consigliato (da incollare)","anchor_slug":"template-consigliato-da-incollare","chunk_index":2,"content":"## Template consigliato (da incollare)","size_chars":38,"tokens_estimate":10}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":3,"anchor_text":"Contesto (repo)","anchor_slug":"contesto-repo","chunk_index":3,"content":"### Contesto (repo)\n- Obiettivi e principi: `agents/goals.json`\n- Orchestrazione/gates (entrypoint): `scripts/ewctl.ps1`\n- Ricette operative (KB): `agents/kb/recipes.jsonl`\n- Osservabilità (eventi): `agents/logs/events.jsonl`\n- Wiki indicizzabile (chunks): `Wiki/EasyWayData.wiki/chunks_master.jsonl` (generato da `Wiki/EasyWayData.wiki/scripts/export-chunks-jsonl.ps1`)","size_chars":370,"tokens_estimate":92}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":3,"anchor_text":"Come rigenerare (idempotente)","anchor_slug":"come-rigenerare-idempotente","chunk_index":4,"content":"### Come rigenerare (idempotente)\n- Indica 1 comando “happy path” e 1 comando “diagnostica/verbose”.\n- Se esistono varianti “legacy/export”, esplicita che sono **solo audit/delta**.","size_chars":181,"tokens_estimate":45}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":3,"anchor_text":"Artefatti e output","anchor_slug":"artefatti-e-output","chunk_index":5,"content":"### Artefatti e output\n- Elenca file generati/aggiornati (path cliccabili) e cosa contengono.","size_chars":93,"tokens_estimate":23}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":3,"anchor_text":"Gate e conferme (human-in-the-loop)","anchor_slug":"gate-e-conferme-human-in-the-loop","chunk_index":6,"content":"### Gate e conferme (human-in-the-loop)\n- Elenca i gate che devono passare prima del merge (Checklist/DB Drift/KB Consistency/WhatFirstLint).\n- Indica cosa richiede conferma umana e perché.","size_chars":189,"tokens_estimate":47}
{"doc_id":"ew-docs-contesto-standard","path":"onboarding/documentazione-contesto-standard.md","title":"Documentazione: Contesto standard (obbligatorio)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:12:57+01:00","section_level":2,"anchor_text":"Checklist rapida (prima del merge)","anchor_slug":"checklist-rapida-prima-del-merge","chunk_index":7,"content":"## Checklist rapida (prima del merge)\n- La pagina cita almeno una fonte canonica (SoT) e un comando idempotente.\n- I cross-link puntano a file/pagine esistenti.\n- Se la pagina è “runtime-facing”, include confini di sicurezza (Zero Trust/sandbox).","size_chars":246,"tokens_estimate":62}
{"doc_id":"ew-proposte-crosslink-faq-edgecase","path":"onboarding/proposte-crosslink-faq-edgecase.md","title":"🧩 Suggerimenti mirati: cross-link, FAQ mancanti, edge-case, automation","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:22:28+01:00","section_level":2,"anchor_text":"Contesto (repo)","anchor_slug":"contesto-repo","chunk_index":1,"content":"## Contesto (repo)\n- Obiettivi e principi: `agents/goals.json`\n- Orchestrazione/gates (entrypoint): `scripts/ewctl.ps1`\n- Ricette operative (KB): `agents/kb/recipes.jsonl`\n- Standard contesto: `Wiki/EasyWayData.wiki/onboarding/documentazione-contesto-standard.md`\n\n| File/cartella target                                                             | Azione                                                          | Esempio/patch da aggiungere                                                           |\n|----------------------------------------------------------------------------------|------------------------------------------------------------------|---------------------------------------------------------------------------------------|\r\n| README.md (root)                                                                 | Cross-link diretto alle guide sandbox/zero-trust, best practice  | `- [Setup sandbox/Zero Trust](wiki/EasyWayData.wiki/onboarding/setup-playground-zero-trust.md)` <br> `- [Scripting cross-platform](wiki/EasyWayData.wiki/onboarding/best-practice-scripting.md)`|\r\n| DEVELOPER_ONBOARDING.md                                                          | Inserire blocco “Domande frequenti”/FAQ                          | `## FAQ Onboarding` <br> “Come faccio test senza DB?” <br> “Come riparto se fallisce uno script?”|\r\n| wiki/EasyWayData.wiki/glossario-errori-faq.md                                    | Nuove FAQ edge/casi+ricorrenti                                   | “❓ Come forzo mock sandbox se DB non disponibile?” <br> “❓ Perché lo script richiede pwsh 7+?” |\r\n| agents/agent_dba/README.md & agent_docs_review/README.md                         | “See also” a sandbox, setup sicurezza e script test/mock         | `- [Guida sandbox/zero trust](../../onboarding/setup-playground-zero-trust.md)`<br> `- [Mock credenziali/script](../../onboarding/best-practice-scripting.md)` |\r\n| scripts/readme.md                                                                | Indicare best practice test/locali/lint                          | “⚙️ Lancia sempre test/lint in sandbox PRIMA di run in ambiente reale.”                  |\r\n| atomic_flows/templates/ (e agent_X/templates/)                                   | Ricetta edge-case: rollback, recovery, failed run                | file markdown “recipe-edgecase-rollback.md” con esempio di fail/fix/ricezione alert     |\r\n| Wik","size_chars":2400,"tokens_estimate":600}
{"doc_id":"ew-proposte-crosslink-faq-edgecase","path":"onboarding/proposte-crosslink-faq-edgecase.md","title":"🧩 Suggerimenti mirati: cross-link, FAQ mancanti, edge-case, automation","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:22:28+01:00","section_level":2,"anchor_text":"Contesto (repo)","anchor_slug":"contesto-repo","chunk_index":2,"content":"i/EasyWayData.wiki/onboarding/README.md                                       | Cross-link a tutte le guide “safety”, edge-case, troubleshooting | Lista puntata di tutte le pagine sandbox, FAQ, policy zero trust, ecc.                  |\r\n| agents/core/ o scripts/automation-entrypoint.md                                  | Script che lancia batch di test/lint/consistency in ogni agent   | Nuovo script test-all-agents.ps1 <br> e checklist output unico                          |\r\n| agents/agent_docs_review/*                                                       | Ricetta auto-test: come testare/integrare il check-portability   | “Esegui check-portabilita-ps1.ps1 ad ogni PR su script, vedi report/avvertenze”          |\r\n| mock/ o test/data/                                                               | Aggiungere dati demo per sandbox (CSV, JSON, sql)                | Es: `demo-users-mock.json`, `sample-output-agentdba.json`                               |\r\n| ogni README agent/test/recipe                                                    | Banner “Testato in sandbox Zero Trust, mock env ONLY!”           | > ⚠️ Questa ricetta/script è sicura solo se eseguita in [sandbox](...)                  |\n\n---\n\n**Nota:** ogni patch può essere proposta via PR, segnalata come TODO o automatizzata con agent_docs_review/test-all.\n\nSuggerisci altri punti pratici via issue o PR!","size_chars":1380,"tokens_estimate":345}
{"doc_id":"ew-setup-playground-zero-trust","path":"onboarding/setup-playground-zero-trust.md","title":"🚦 Setup ambiente di test / sandbox agentica + Zero Trust","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:29:29+01:00","section_level":2,"anchor_text":"Contesto (repo)","anchor_slug":"contesto-repo","chunk_index":1,"content":"## Contesto (repo)\n- Obiettivi e principi: `agents/goals.json`\n- Orchestrazione/gates (entrypoint): `scripts/ewctl.ps1`\n- Ricette operative (KB): `agents/kb/recipes.jsonl`\n- Osservabilita: `agents/logs/events.jsonl`\n- Standard contesto: `Wiki/EasyWayData.wiki/onboarding/documentazione-contesto-standard.md`\n\n**Questa guida ti permette di esplorare EasyWay DataPortal, agent, pipeline e automazioni in sicurezza massima, senza rischio di “toccare” dati o risorse reali.**\n\n---","size_chars":476,"tokens_estimate":119}
{"doc_id":"ew-setup-playground-zero-trust","path":"onboarding/setup-playground-zero-trust.md","title":"🚦 Setup ambiente di test / sandbox agentica + Zero Trust","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:29:29+01:00","section_level":2,"anchor_text":"1. Cos’è il Playground Zero Trust\r","anchor_slug":"1-cos-il-playground-zero-trust","chunk_index":2,"content":"## 1. Cos’è il Playground Zero Trust\n\n- Un ambiente *locale* o *dev isolato* pensato per:\r\n  - Provare agent, workflow, pipeline e script senza accedere a sistemi esterni, database cloud, o segreti veri.\r\n  - Imparare e testare tutto “come in produzione”, ma con dati/credenziali finti e nessun effetto collaterale.\n\n---","size_chars":320,"tokens_estimate":80}
{"doc_id":"ew-setup-playground-zero-trust","path":"onboarding/setup-playground-zero-trust.md","title":"🚦 Setup ambiente di test / sandbox agentica + Zero Trust","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:29:29+01:00","section_level":2,"anchor_text":"2. Setup rapido sandbox\r","anchor_slug":"2-setup-rapido-sandbox","chunk_index":3,"content":"## 2. Setup rapido sandbox\n\n**A) Clona la repository e posizionati nella directory di lavoro**\r\n```bash\r\ngit clone <URL_REPO_EASYWAY>\r\ncd EasyWayDataPortal\r\n```\n\n**B) Crea un file di env “mock”**\r\n```bash\r\ncp .env.example .env\r\n# oppure crea manualmente un file .env con variabili di esempio:\r\necho 'DB_CONN_STRING=\"Server=localhost;Database=FAKE;User Id=mock;Password=mock;\"' > .env\r\necho 'AZURE_STORAGE_KEY=\"fake-key\"' >> .env\r\necho 'AGENT_MODE=mock' >> .env\r\n```\n\n**C) Installa le dipendenze**\r\n```bash\r\nnpm install --prefix EasyWay-DataPortal/easyway-portal-api/\r\n```\n\n**D) Avvia i servizi in modalità sandbox (mock)**\r\n```bash\r\ncd EasyWay-DataPortal/easyway-portal-api/\r\nnpm run dev:mock\r\n# oppure setta DB_MODE=mock e avvia:\r\n# DB_MODE=mock npm run dev\r\n```\n\n**E) Prova una pipeline agentica/CLI di test**\r\n```bash\r\npwsh scripts/agent-dba.ps1 -WhatIf\r\n# non farà alcuna modifica reale!\r\n```\n\n---","size_chars":901,"tokens_estimate":225}
{"doc_id":"ew-setup-playground-zero-trust","path":"onboarding/setup-playground-zero-trust.md","title":"🚦 Setup ambiente di test / sandbox agentica + Zero Trust","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:29:29+01:00","section_level":2,"anchor_text":"3. Policy minime e cosa succede per ogni script\r","anchor_slug":"3-policy-minime-e-cosa-succede-per-ogni-script","chunk_index":4,"content":"## 3. Policy minime e cosa succede per ogni script\n\n| Script/Agent             | Cosa fa in modalità default (mock/safe)           | Gate di sicurezza      | Come fare rollback/reset        |\r\n|--------------------------|---------------------------------------------------|------------------------|---------------------------------|\r\n| agent-dba.ps1            | Opera solo su file locali/mocking, WhatIf di default | Nessun accesso DB reale | Cancella file di output         |\r\n| agent_docs_review.x.ps1  | Legge doc, NON scrive in cloud o repo reale       | Solo log nel file safe | Rollback: cancella i log        |\r\n| agent_datalake           | Simula chiamate, non tocca Datalake reale         | Richiede AGENT_MODE=mock | Nessuna azione su Azure locale  |\r\n| Tutti gli script         | Se DB_MODE/mock/env non è attiva, bloccano run    | Check var. env         | Modifica .env o reset working dir |\n\n**SEMPRE evidenziato nei log “MOCK mode”, nessuna azione su cloud/DB veri.**\n\n---","size_chars":987,"tokens_estimate":247}
{"doc_id":"ew-setup-playground-zero-trust","path":"onboarding/setup-playground-zero-trust.md","title":"🚦 Setup ambiente di test / sandbox agentica + Zero Trust","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:29:29+01:00","section_level":2,"anchor_text":"4. Come tornare “safe” / azzerare dati sandbox\r","anchor_slug":"4-come-tornare-safe-azzerare-dati-sandbox","chunk_index":5,"content":"## 4. Come tornare “safe” / azzerare dati sandbox\n\n- Cancella i file “output”/log in working directory, oppure resetta repo con:\r\n```bash\r\ngit clean -fd\r\ngit reset --hard\r\n```\r\n- Ripristina .env_example su .env\r\n- Per sicurezza, verifica SEMPRE che le variabili d’ambiente non contengano secret reali prima di avviare\r\n- Loggati come utente standard, mai admin/root\n\n---","size_chars":370,"tokens_estimate":92}
{"doc_id":"ew-setup-playground-zero-trust","path":"onboarding/setup-playground-zero-trust.md","title":"🚦 Setup ambiente di test / sandbox agentica + Zero Trust","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:29:29+01:00","section_level":2,"anchor_text":"5. Policy Zero Trust: mai esporre segreti veri!\r","anchor_slug":"5-policy-zero-trust-mai-esporre-segreti-veri","chunk_index":6,"content":"## 5. Policy Zero Trust: mai esporre segreti veri!\n\n> **Attenzione:**  \r\n> Tutte le ricette onboarding, agent, CLI e workflow vanno testate PRIMA solo in modalità mock/sandbox.  \r\n> Solo dopo review e approvals usare token/segreti veri, e MAI committare/gestire questi nel repo.\n\n---\n\n**Per dubbi, suggerisci update direttamente su questa guida via PR o issue!**","size_chars":362,"tokens_estimate":90}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"Contesto (repo)","anchor_slug":"contesto-repo","chunk_index":1,"content":"## Contesto (repo)\n- Obiettivi e principi: `agents/goals.json`\n- Orchestrazione e gates: `scripts/ewctl.ps1` (Checklist/DB Drift/KB Consistency/WhatFirstLint)\n- Ricette operative (KB): `agents/kb/recipes.jsonl`\n- Osservabilita: `agents/logs/events.jsonl`\n- Wiki indicizzabile (chunks): `Wiki/EasyWayData.wiki/chunks_master.jsonl` (generato da `Wiki/EasyWayData.wiki/scripts/export-chunks-jsonl.ps1`)\n- Standard contesto: `Wiki/EasyWayData.wiki/onboarding/documentazione-contesto-standard.md`\n\n---","size_chars":496,"tokens_estimate":124}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"1. Il punto di partenza: repo vivo, ma \"manuale\"","anchor_slug":"1-il-punto-di-partenza-repo-vivo-ma-manuale","chunk_index":2,"content":"## 1. Il punto di partenza: repo vivo, ma \"manuale\"\n\n- EasyWay nasce con un repo ben organizzato (folder, agent, script, doc, template…).\r\n- Tutto è documentato, ma la fruizione della knowledge base è “umana”: ricerca a mano, navigazione file, FAQ e how-to scritte, ma spesso disperse o ridondanti.\r\n- La collaborazione è efficace tra pochi contributor storici, ma difficile da scalare per nuovi team/agent, onboarding faticoso.\n\n---","size_chars":433,"tokens_estimate":108}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"2. Crescita → massa critica: la knowledge base esplode\r","anchor_slug":"2-crescita-massa-critica-la-knowledge-base-esplode","chunk_index":3,"content":"## 2. Crescita → massa critica: la knowledge base esplode\n\n- Il progetto cresce: agent, ricette, manifest, edge-case, best practice si moltiplicano,  \r\n  la documentazione e automazione diventano indispensabili.\r\n- Emergono gap tipici:\r\n  - FAQ duplicate, doc non sempre linkata/crossreferenziata, ricette “nascoste”\r\n  - Difficoltà nel troubleshooting rapido e nell’onboarding dei nuovi\r\n- Si introduce maggiore ordine (README ovunque, naming standard, tagging, templates)  \r\n  e si prepara a una “maturità semantica”.\n\n---","size_chars":524,"tokens_estimate":131}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"3. Si riconosce il bisogno di automazione più “smart”\r","anchor_slug":"3-si-riconosce-il-bisogno-di-automazione-pi-smart","chunk_index":4,"content":"## 3. Si riconosce il bisogno di automazione più “smart”\n\n- Gli agent iniziano a produrre log, report, orchestrano pipeline (n8n e CI/CD).\r\n- Nasce la domanda:  \r\n  _Come possiamo far sì che agent e workflow non solo “eseguano”, ma anche imparino, integrino, suggeriscano fix/test/documentazione senza intervento umano continuo?_\r\n- Si comprende che una knowledge base “classica” non basta più: serve capacità di **scoprire, ragionare e auto-migliorarsi**.\n\n---","size_chars":461,"tokens_estimate":115}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"4. La svolta: knowledge base vettoriale\r","anchor_slug":"4-la-svolta-knowledge-base-vettoriale","chunk_index":5,"content":"## 4. La svolta: knowledge base vettoriale\n\n- Introduzione della **vector db** e della pipeline di embedding:\r\n    - Tutta la doc/manifest/ricette/faq viene chunkata e trasformata in embedding numerici, suggerendo pattern, simili, fix, edge-case nuovi.\r\n    - Le regole di inclusion/exclusion (yaml) rendono trasparente cosa è “runtime” e cosa resta “manuale”.\r\n- La base vettoriale viene aggiornata automaticamente (CI-agente-n8n) a ogni modifica della repo.\n\n---","size_chars":464,"tokens_estimate":116}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"5. Continuous improvement e ciclo agentico\r","anchor_slug":"5-continuous-improvement-e-ciclo-agentico","chunk_index":6,"content":"## 5. Continuous improvement e ciclo agentico\n\n- Da quel momento, ogni domanda — sia umana che agente (n8n, orchestrazione, LLM, copilot) — ottiene risposte intelligenti, semantiche e always-up-to-date.\r\n- Gli agent possono:\r\n  - Suggerire fix, creare snippet di doc, generare PR, segnalare gap/FAQ mancanti, proporre ricette edge-case, e aggiornare best practice\r\n  - Fare refactoring auto-guidato della knowledge base (merge/split/linking)\r\n  - Colmare mismatch tra uso reale e doc, aggiornando di continuo i punti critici\r\n- Si instaura così un ciclo “repo <-> vector db <-> agent”: il sistema impara dai suoi stessi artefatti e dai pattern d’uso\n\n---","size_chars":654,"tokens_estimate":164}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"Loop operativo auto-migliorativo (WHAT-first)","anchor_slug":"loop-operativo-auto-migliorativo-what-first","chunk_index":7,"content":"## Loop operativo auto-migliorativo (WHAT-first)","size_chars":48,"tokens_estimate":12}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":3,"anchor_text":"Segnali (input)","anchor_slug":"segnali-input","chunk_index":8,"content":"### Segnali (input)\n- Domande ricorrenti (utente/dev/agent), errori, edge-case, gap di documentazione.\n- Esiti gate CI: Checklist/DB Drift/KB Consistency/WhatFirstLint (entrypoint `scripts/ewctl.ps1`).\n- Log ed eventi di esecuzione: `agents/logs/events.jsonl` (con `decision_trace_id`).","size_chars":286,"tokens_estimate":72}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":3,"anchor_text":"Artefatti (output)","anchor_slug":"artefatti-output","chunk_index":9,"content":"### Artefatti (output)\n- Patch a Wiki/KB/Script (PR) + ricette nuove/aggiornate in `agents/kb/recipes.jsonl`.\n- Indice Wiki aggiornato: `Wiki/EasyWayData.wiki/chunks_master.jsonl`.\n- Report di consistenza e decision trace ricostruibile.","size_chars":236,"tokens_estimate":59}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":3,"anchor_text":"Stati e transizioni","anchor_slug":"stati-e-transizioni","chunk_index":10,"content":"### Stati e transizioni\n1. Rileva segnale -> classifica (bug/doc/gap/automation).\n2. Propone azione (WHAT) + impatti + comando idempotente.\n3. Applica patch (HOW) con human-in-the-loop quando necessario.\n4. Esegue rigenerazioni (es. chunks/inventory) e aggiorna artefatti.\n5. Passa i gate e logga evento strutturato.","size_chars":316,"tokens_estimate":79}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":3,"anchor_text":"Criteri di successo","anchor_slug":"criteri-di-successo","chunk_index":11,"content":"### Criteri di successo\n- Nessuna zona grigia tra sorgenti canoniche e documentazione.\n- Ogni pagina ha contesto + comandi + artefatti + gate.\n- Ogni cambiamento lascia traccia ricostruibile (log + PR + output machine-readable).\n\n---","size_chars":233,"tokens_estimate":58}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"6. Lezioni apprese / Cosa evitare e cosa replicare","anchor_slug":"6-lezioni-apprese-cosa-evitare-e-cosa-replicare","chunk_index":12,"content":"## 6. Lezioni apprese / Cosa evitare e cosa replicare\n\n- Non conviene vettorializzare troppo presto: prendi il tempo di strutturare bene il repo/documentazione, naming, template e tagging\r\n- Dai priorità a cross-link, FAQ vive, ricette atomic/testate: ogni item è un “nodo” utile per la ricerca semantica futura\r\n- Automatizza il refresh dell’index vettoriale — la pipeline fa la differenza!\r\n- Separa sempre ambiente operativo (runtime/agent/n8n) da repo di sviluppo: ognuno alimenta/usa il vector db in modo diverso\r\n- Coinvolgi tutta la community nella crescita: non solo agent ma anche contributor ricevono feedback e suggerimenti dal sistema\n\n---","size_chars":651,"tokens_estimate":163}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"7. EasyWay oggi: un ecosistema in miglioramento autonomo\r","anchor_slug":"7-easyway-oggi-un-ecosistema-in-miglioramento-autonomo","chunk_index":13,"content":"## 7. EasyWay oggi: un ecosistema in miglioramento autonomo\n\n- Ogni nuovo agent, ricetta o fix si integra senza sforzo nel ciclo auto-migliorativo\r\n- Il repo resta fonte verità per dev/contributor, vector db il motore per agent, runtime e AI/collaborazione smart\r\n- La knowledge base è viva: onboarding più rapido, troubleshooting semplificato, agent davvero autonomi\n\n---","size_chars":372,"tokens_estimate":93}
{"doc_id":"ew-storyboard-agentic-evolution","path":"onboarding/storyboard-easyway-agentic.md","title":"📖 Storyboard evolutivo: la storia “agentica” di EasyWay","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T10:19:57+01:00","section_level":2,"anchor_text":"Vuoi “copiare” questa esperienza?\r","anchor_slug":"vuoi-copiare-questa-esperienza","chunk_index":14,"content":"## Vuoi “copiare” questa esperienza?\n\n1. Parti dal repo: organizza, tagga, cross-linka, normalizza naming e template\r\n2. Solo con massa critica, imposta la pipeline di vettorializzazione e scegli un vector db/promemoria inclusivo\r\n3. Automatizza il ciclo di update tra repo e vector db, integra n8n/agent/LLM\r\n4. Metti feedback loop e continuous improvement al centro: ogni agent/contributor è “professore” del sistema!\n\n---\n\n**See also / Cross-link:**\r\n- [Knowledge base vettoriale in EasyWay](../ai/knowledge-vettoriale-easyway.md)\r\n- [Proposte cross-link, FAQ, edge-case, automation](proposte-crosslink-faq-edgecase.md)\r\n- [Scripting Best Practice](best-practice-scripting.md)\r\n- [Setup sandbox/Zero Trust](setup-playground-zero-trust.md)","size_chars":741,"tokens_estimate":185}
{"doc_id":"ew-orch-intents-catalog-global","path":"orchestrations/intents-catalog-global.md","title":"Orchestrations - Intents Catalog (Globale)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Quali intent cross-domain sono già definiti e dove si trovano i rispettivi schemi?\n- Qual è il pattern di naming per un nuovo intent e in quale path va creato il JSON?\n- Quali altri artefatti devo aggiornare quando aggiungo un intent (Wiki, KB, orchestrazioni/manifest)?\n- Come distinguo intent attivi da intent “da definire” e quale owner li presidia?\n- Qual è l'orchestrazione che li dispatcha (es. n8n) e con quale contratto?\n\nAttivi (con schema)\n- orchestrator.n8n.dispatch -> `docs/agentic/templates/intents/orchestrator.n8n.dispatch.intent.json`\n- ingest.upload-file -> `docs/agentic/templates/intents/ingest.upload-file.intent.json`\n- dq.validate -> `docs/agentic/templates/intents/dq.validate.intent.json`\n- schema.map-suggest -> `docs/agentic/templates/intents/schema.map-suggest.intent.json`\n- schema.map-apply -> `docs/agentic/templates/intents/schema.map-apply.intent.json`\n- etl.load-staging -> `docs/agentic/templates/intents/etl.load-staging.intent.json`\n- etl.merge-target -> `docs/agentic/templates/intents/etl.merge-target.intent.json`\n- analytics.materialize-defaults -> `docs/agentic/templates/intents/analytics.materialize-defaults.intent.json`\n\nOrchestrazioni (WHAT)\n- wf.excel-csv-upload -> `orchestrations/wf-excel-csv-upload.md`\n- orchestrator (n8n) -> `orchestrations/orchestrator-n8n.md`\n\nDa definire (skeleton cross-domain)\n- db.migrate (Flyway)\n- datalake.ensure-structure / datalake.apply-acl / datalake.set-retention\n- frontend.scaffold-view\n- docs.review / governance.gates\n\nNota\n- Ogni nuovo intent deve avere: schema in `docs/agentic/templates/intents/` + ricetta KB + pagina Wiki.","size_chars":1643,"tokens_estimate":411}
{"doc_id":"ew-orch-intents-catalog","path":"orchestrations/intents-catalog.md","title":"Orchestrations - Intents Catalog (Use Case Excel/CSV)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Quali intent compongono `wf.excel-csv-upload` e qual è la sequenza logica degli step?\n- Dove trovo per ciascun intent lo schema input/output e i criteri di esito (WHAT)?\n- Cosa devo aggiornare se aggiungo/rimuovo uno step dal workflow (manifest/cataloghi/KB)?\n- Quali output alimentano il diario di bordo e quali eventi ARGOS sono attesi?\n- Qual è la pagina canonica che descrive l'orchestrazione e i contratti collegati?\n\nPrincipio WHAT-first\n- Definiamo cosa fa ogni Intent (scopo, input/output, criteri) separatamente dall’implementazione.\n\nIntents (link agli schemi JSON)\n- ingest.upload-file → docs/agentic/templates/intents/ingest.upload-file.intent.json\n- dq.validate → docs/agentic/templates/intents/dq.validate.intent.json\n- schema.map-suggest → docs/agentic/templates/intents/schema.map-suggest.intent.json\n- schema.map-apply → docs/agentic/templates/intents/schema.map-apply.intent.json\n- etl.load-staging → docs/agentic/templates/intents/etl.load-staging.intent.json\n- etl.merge-target → docs/agentic/templates/intents/etl.merge-target.intent.json\n- analytics.materialize-defaults → docs/agentic/templates/intents/analytics.materialize-defaults.intent.json\n\nUso\n- L’orchestratore `wf.excel-csv-upload` compone questi Intent in sequenza secondo il manifest.\n- Ogni Intent produce output strutturati che alimentano il “diario di bordo”.\n\nRiferimenti\n- Orchestrazione – wf.excel-csv-upload: orchestrations/wf-excel-csv-upload.md\n- Use Case – Entrate/Uscite: use-cases/entrate-uscite.md","size_chars":1522,"tokens_estimate":380}
{"doc_id":"ew-mapping-matrix","path":"orchestrations/mapping-matrix.md","title":"Mapping Matrix - Workflow → Intent → Implementazione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:30:34+01:00","section_level":2,"anchor_text":"Control Plane","anchor_slug":"control-plane","chunk_index":1,"content":"## Control Plane\n\n| Item | Tipo | Owner | Entrypoint | Artefatti | KB | Wiki |\n|---|---|---|---|---|---|---|\n| orchestrator.n8n.dispatch | intent | Control-plane | n8n + `scripts/ewctl.ps1` | `agents/logs/events.jsonl` | `orchestrator.n8n.deploy` | `orchestrations/orchestrator-n8n.md` |","size_chars":287,"tokens_estimate":72}
{"doc_id":"ew-mapping-matrix","path":"orchestrations/mapping-matrix.md","title":"Mapping Matrix - Workflow → Intent → Implementazione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:30:34+01:00","section_level":2,"anchor_text":"Orchestrazioni (use case)","anchor_slug":"orchestrazioni-use-case","chunk_index":2,"content":"## Orchestrazioni (use case)\n\n| Item | Tipo | Owner | Entrypoint | Artefatti | KB | Wiki |\n|---|---|---|---|---|---|---|\n| wf.excel-csv-upload | orchestration | Orchestrator | manifest + intents | diary + decision trace | (da agganciare) | `orchestrations/wf-excel-csv-upload.md` |","size_chars":281,"tokens_estimate":70}
{"doc_id":"ew-mapping-matrix","path":"orchestrations/mapping-matrix.md","title":"Mapping Matrix - Workflow → Intent → Implementazione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:30:34+01:00","section_level":2,"anchor_text":"Intents (già implementati via agent + ewctl)","anchor_slug":"intents-gi-implementati-via-agent-ewctl","chunk_index":3,"content":"## Intents (già implementati via agent + ewctl)\n\n| Item | Tipo | Owner | Entrypoint | Artefatti | KB | Wiki |\n|---|---|---|---|---|---|---|\n| db-user:create | intent | Agent_DBA | `pwsh scripts/ewctl.ps1 --engine ps --intent db-user-create` | output JSON (action-result) + `agents/logs/events.jsonl` | `db-user-create` | `db-user-access-management.md` |\n| db-user:rotate | intent | Agent_DBA | `pwsh scripts/ewctl.ps1 --engine ps --intent db-user-rotate` | output JSON (action-result) + `agents/logs/events.jsonl` | `db-user-rotate` | `db-user-access-management.md` |\n| db-user:revoke | intent | Agent_DBA | `pwsh scripts/ewctl.ps1 --engine ps --intent db-user-revoke` | output JSON (action-result) + `agents/logs/events.jsonl` | `db-user-revoke` | `db-user-access-management.md` |\n| dlk-ensure-structure | intent | Agent_Datalake | `pwsh scripts/ewctl.ps1 --engine ps --intent dlk-ensure-structure` | output JSON (action-result) + `agents/logs/events.jsonl` | `dlk-ensure-structure` | `datalake-ensure-structure.md` |\n| dlk-apply-acl | intent | Agent_Datalake | `pwsh scripts/ewctl.ps1 --engine ps --intent dlk-apply-acl` | output JSON (action-result) + `agents/logs/events.jsonl` | `dlk-apply-acl` | `datalake-apply-acl.md` |\n| dlk-set-retention | intent | Agent_Datalake | `pwsh scripts/ewctl.ps1 --engine ps --intent dlk-set-retention` | output JSON (action-result) + `agents/logs/events.jsonl` | `dlk-set-retention` | `datalake-set-retention.md` |\n| dlk-export-log | intent | Agent_Datalake | `pwsh scripts/ewctl.ps1 --engine ps --intent dlk-export-log` | output JSON (action-result) + `agents/logs/events.jsonl` | (da agganciare) | `easyway-webapp/05_codice_easyway_portale/easyway_portal_api/gestione-log-and-policy-dati-sensibili.md` |\n| etl-slo:validate | intent | Agent_Datalake | `pwsh scripts/ewctl.ps1 --engine ps --intent etl-slo-validate` | output JSON (action-result) + `agents/logs/events.jsonl` | `etl-governance-sla` | `etl-governance-sla.md` |\n| sample:echo | intent | Agent_Template | `pwsh scripts/ewctl.ps1 --engine ps --intent sample` | output JSON (action-result) + `agents/logs/events.jsonl` | (opz.) | `agents/agent_template/README.md` |","size_chars":2164,"tokens_estimate":541}
{"doc_id":"ew-mapping-matrix","path":"orchestrations/mapping-matrix.md","title":"Mapping Matrix - Workflow → Intent → Implementazione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:30:34+01:00","section_level":2,"anchor_text":"Gates / Lint (già implementati)","anchor_slug":"gates-lint-gi-implementati","chunk_index":4,"content":"## Gates / Lint (già implementati)\n\n| Item | Tipo | Owner | Entrypoint | Artefatti | KB | Wiki |\n|---|---|---|---|---|---|---|\n| checklist | gate | Agent_Governance | `pwsh scripts/ewctl.ps1 --engine ps --checklist --noninteractive` | `checklist.json` (artifact) + `agents/logs/events.jsonl` | `predeploy-checklist` | `docs/ci/ewctl-gates.md` |\n| dbdrift | gate | Agent_Governance | `pwsh scripts/ewctl.ps1 --engine ps --dbdrift --noninteractive` | `drift.json` (artifact) + `agents/logs/events.jsonl` | (da agganciare) | `docs/ci/ewctl-gates.md` |\n| kbconsistency | gate | Agent_Governance | `pwsh scripts/ewctl.ps1 --engine ps --kbconsistency --noninteractive` | report (artifact) + `agents/logs/events.jsonl` | (da agganciare) | `docs/ci/ewctl-gates.md` |\n| governance-gates (bundle) | gate | Agent_Governance | `pwsh scripts/ewctl.ps1 --engine ps --checklist --dbdrift --kbconsistency --noninteractive --logevent` | `gates-report.json` (artifact) + `agents/logs/events.jsonl` | (da agganciare) | `docs/ci/ewctl-gates.md` |\n| doc-alignment | gate | Agent_Governance | `pwsh scripts/ewctl.ps1 --engine ps --intent doc-alignment` | report JSON | (da agganciare) | `doc-alignment-gate.md` |\n| whatfirst-lint | gate | Agent_Governance | `pwsh scripts/whatfirst-lint.ps1 -FailOnError` | `whatfirst-lint.json` (artifact) | `whatfirst-lint` | `howto-what-first-team.md` |\n| wiki-frontmatter-lint | gate | Agent_Governance | `pwsh scripts/wiki-frontmatter-lint.ps1 -FailOnError` | `wiki-frontmatter-lint.json` (artifact) | `whatfirst-lint` | `howto-what-first-team.md` |","size_chars":1565,"tokens_estimate":391}
{"doc_id":"ew-mapping-matrix","path":"orchestrations/mapping-matrix.md","title":"Mapping Matrix - Workflow → Intent → Implementazione","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T05:30:34+01:00","section_level":2,"anchor_text":"Note operative","anchor_slug":"note-operative","chunk_index":5,"content":"## Note operative\n- La colonna Entrypoint è “canonico”: molti intent hanno anche `IntentPath` sample in `agents/<agent>/templates/*.sample.json`.\n- Per aggiungere un nuovo intent: aggiungi schema WHAT in `docs/agentic/templates/intents/`, aggiorna questa matrice, aggiungi ricetta KB e pagina Wiki.","size_chars":298,"tokens_estimate":74}
{"doc_id":"ew-n8n-db-ddl-inventory","path":"orchestrations/n8n-db-ddl-inventory.md","title":"n8n-db-ddl-inventory","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Contesto","anchor_slug":"contesto","chunk_index":1,"content":"## Contesto\n- Source-of-truth DB (canonico): migrazioni Flyway in `db/flyway/sql/`.\n- Artefatti storici (non canonici): `old/db/` (ex `DataBase/`, export `DDL_PORTAL_*`).","size_chars":170,"tokens_estimate":42}
{"doc_id":"ew-n8n-db-ddl-inventory","path":"orchestrations/n8n-db-ddl-inventory.md","title":"n8n-db-ddl-inventory","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":2,"content":"## Scopo\nWorkflow n8n che, a partire dalle migrazioni in `db/flyway/sql/`, rigenera l'inventario DB e aggiorna la pagina canonica:\n- `easyway-webapp/01_database_architecture/ddl-inventory.md`","size_chars":191,"tokens_estimate":48}
{"doc_id":"ew-n8n-db-ddl-inventory","path":"orchestrations/n8n-db-ddl-inventory.md","title":"n8n-db-ddl-inventory","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":3,"content":"## Domande a cui risponde\n- Come rigenero l'elenco tabelle e stored procedure in modo deterministico?\n- Qual è la fonte unica (DDL) e qual è la doc canonica (Wiki)?\n- Qual è il comando da eseguire e che output machine-readable produce?","size_chars":235,"tokens_estimate":59}
{"doc_id":"ew-n8n-db-ddl-inventory","path":"orchestrations/n8n-db-ddl-inventory.md","title":"n8n-db-ddl-inventory","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Retrieval bundle","anchor_slug":"retrieval-bundle","chunk_index":4,"content":"## Retrieval bundle\n- Bundle: `n8n.db.core` (vedi `docs/agentic/templates/docs/retrieval-bundles.json`)","size_chars":103,"tokens_estimate":26}
{"doc_id":"ew-n8n-db-ddl-inventory","path":"orchestrations/n8n-db-ddl-inventory.md","title":"n8n-db-ddl-inventory","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Workflow (alto livello)","anchor_slug":"workflow-alto-livello","chunk_index":5,"content":"## Workflow (alto livello)\n1. Webhook (trigger)\n2. Validate input (schema intent `db.ddl-inventory`)\n3. (Opzionale) Gate precheck (docs/CI policy)\n4. Dispatch: esegui `agent_dba` action `db-doc:ddl-inventory`\n5. Log: append evento + artifact (JSON inventory)","size_chars":258,"tokens_estimate":64}
{"doc_id":"ew-n8n-db-ddl-inventory","path":"orchestrations/n8n-db-ddl-inventory.md","title":"n8n-db-ddl-inventory","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Comandi (CLI)","anchor_slug":"comandi-cli","chunk_index":6,"content":"## Comandi (CLI)\nEsecuzione diretta (senza n8n):\n- `pwsh scripts/db-ddl-inventory.ps1 -WriteWiki -SummaryOut db-ddl-inventory.json`\n\nEsecuzione via agent:\n- `pwsh scripts/agent-dba.ps1 -Action db-doc:ddl-inventory -IntentPath agents/agent_dba/templates/intent.db-ddl-inventory.sample.json -NonInteractive`","size_chars":305,"tokens_estimate":76}
{"doc_id":"ew-n8n-db-table-create","path":"orchestrations/n8n-db-table-create.md","title":"n8n-db-table-create","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:52:41+01:00","section_level":2,"anchor_text":"Scopo","anchor_slug":"scopo","chunk_index":1,"content":"## Scopo\nCreare una nuova tabella DB in modo deterministico e agentico:\n- input strutturato (intent `db.table.create`)\n- generazione artefatti (migrazione Flyway + pagina Wiki tabella)\n- apply su DB solo con gates/approvazioni (opzionale)","size_chars":238,"tokens_estimate":60}
{"doc_id":"ew-n8n-db-table-create","path":"orchestrations/n8n-db-table-create.md","title":"n8n-db-table-create","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:52:41+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Come chiedo a n8n di creare una nuova tabella in modo governato?\n- Dove finiscono gli artefatti (Flyway/Wiki) e qual e' la source-of-truth?\n- Quali parti sono automatiche e quali restano manuali (ERwin/data model)?","size_chars":242,"tokens_estimate":60}
{"doc_id":"ew-n8n-db-table-create","path":"orchestrations/n8n-db-table-create.md","title":"n8n-db-table-create","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:52:41+01:00","section_level":2,"anchor_text":"Retrieval bundle","anchor_slug":"retrieval-bundle","chunk_index":3,"content":"## Retrieval bundle\n- Bundle: `n8n.db.table.create` (vedi `docs/agentic/templates/docs/retrieval-bundles.json`)","size_chars":111,"tokens_estimate":28}
{"doc_id":"ew-n8n-db-table-create","path":"orchestrations/n8n-db-table-create.md","title":"n8n-db-table-create","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:52:41+01:00","section_level":2,"anchor_text":"Intent (WHAT)","anchor_slug":"intent-what","chunk_index":4,"content":"## Intent (WHAT)\n- Schema: `docs/agentic/templates/intents/db.table.create.intent.json`\n- Esempio intent agent: `agents/agent_dba/templates/intent.db-table-create.sample.json`","size_chars":175,"tokens_estimate":44}
{"doc_id":"ew-n8n-db-table-create","path":"orchestrations/n8n-db-table-create.md","title":"n8n-db-table-create","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:52:41+01:00","section_level":2,"anchor_text":"Esecuzione (CLI, senza n8n)","anchor_slug":"esecuzione-cli-senza-n8n","chunk_index":5,"content":"## Esecuzione (CLI, senza n8n)\n- Genera artefatti (WhatIf):\n  - `pwsh scripts/agent-dba.ps1 -Action db-table:create -IntentPath agents/agent_dba/templates/intent.db-table-create.sample.json -WhatIf -NonInteractive`\n- Genera artefatti (scrive file):\n  - `pwsh scripts/agent-dba.ps1 -Action db-table:create -IntentPath agents/agent_dba/templates/intent.db-table-create.sample.json -NonInteractive`","size_chars":395,"tokens_estimate":99}
{"doc_id":"ew-n8n-db-table-create","path":"orchestrations/n8n-db-table-create.md","title":"n8n-db-table-create","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T19:52:41+01:00","section_level":2,"anchor_text":"Output atteso","anchor_slug":"output-atteso","chunk_index":6,"content":"## Output atteso\n- Migrazione: `db/flyway/VYYYYMMDDHHMMSS__create_<schema>_<table>.sql`\n- Pagina Wiki tabella: `Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/01b_schema_structure/<SCHEMA>/tables/<schema>-<table>.md`\n- Artifact JSON: `db-table-create*.json` (machine-readable)","size_chars":291,"tokens_estimate":73}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual è la source of truth dei bundle (file) e qual è il suo formato?\n- Come n8n risolve `intent`/`bundle_id` e quali `scopes[]` deve caricare?\n- Quali directory/file vengono esclusi di default (attachments/logs/old/backup) per ridurre token?\n- Come mantenere gli scope `*-all` nel tempo quando la Wiki cresce o cambia struttura?\n- Come evitare ambiguità dovute a pagine duplicate (status deprecated, canonical, `llm.include: false`)?\n- Come verifico che un intent sia coperto da un bundle (e cosa fare se manca)?","size_chars":540,"tokens_estimate":135}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Source of truth (machine-readable)","anchor_slug":"source-of-truth-machine-readable","chunk_index":2,"content":"## Source of truth (machine-readable)\n\n- `docs/agentic/templates/docs/retrieval-bundles.json`\n- Scope list: `docs/agentic/templates/docs/tag-taxonomy.scopes.json`","size_chars":162,"tokens_estimate":40}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Bundle per Codex (sviluppo codice)","anchor_slug":"bundle-per-codex-sviluppo-codice","chunk_index":3,"content":"## Bundle per Codex (sviluppo codice)\n\nQuando GPT-5.2 Codex deve implementare sotto `EasyWay-DataPortal/`, usa il bundle:\n- `codex.dev.core` \u001a contesto minimo (governance + portal + security) + entrypoints del codice.","size_chars":217,"tokens_estimate":54}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Bundle DB (n8n)","anchor_slug":"bundle-db-n8n","chunk_index":4,"content":"## Bundle DB (n8n)\n\nQuando n8n deve fare operazioni sul DB (es. rigenerare inventario DDL e aggiornare la Wiki DB), usa:\n- `n8n.db.core` \u001a contesto DB (Wiki) + root tecnico `db/flyway/` (source-of-truth canonico dei DDL).\n\nPer la creazione di nuove tabelle (artefatti Flyway + pagina Wiki tabella), usa:\n- `n8n.db.table.create`\n\nNota: di default i bundle servono a caricare **Wiki**; `old/db/` e `DataBase/README.md` sono solo per audit/compat (non doc canonica).","size_chars":463,"tokens_estimate":116}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Regole operative","anchor_slug":"regole-operative","chunk_index":5,"content":"## Regole operative\n\n1. n8n risolve `intent` → `bundle_id` (o riceve direttamente `bundle_id`).\n2. Legge `retrieval-bundles.json` e ottiene `scopes[]`.\n3. Per ogni scope, recupera la lista file da `tag-taxonomy.scopes.json`.\n4. Applica `default_exclude_globs` (attachments/logs/old/backup).\n5. Carica solo quelle pagine nel contesto del workflow.","size_chars":346,"tokens_estimate":86}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Nota sugli scope (*-20 vs *-all)","anchor_slug":"nota-sugli-scope-20-vs-all","chunk_index":6,"content":"## Nota sugli scope (*-20 vs *-all)\n\n- `*-20`: blocchi da 20 pagine per **adozione a fasi** (CI/gates).\n- `*-all`: scope **stabili per retrieval** (es. n8n) basati su directory/prefix; vanno mantenuti nel tempo.","size_chars":211,"tokens_estimate":53}
{"doc_id":"ew-n8n-retrieval-bundles","path":"orchestrations/n8n-retrieval-bundles.md","title":"n8n Retrieval Bundles","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"Anti-duplicati (zero ambiguità)","anchor_slug":"anti-duplicati-zero-ambiguit","chunk_index":7,"content":"## Anti-duplicati (zero ambiguità)\n\n- Pagine \"shim/redirect compat\" devono avere `status: deprecated` e idealmente `llm.include: false` per non essere caricate dagli agenti.\n- La pagina canonica resta l'unica fonte: le altre rimandano (con `canonical:` o `redirect_to:`).","size_chars":271,"tokens_estimate":68}
{"doc_id":"ew-orch-n8n-dispatch","path":"orchestrations/orchestrator-n8n.md","title":"Orchestratore n8n (WHAT)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual è il contratto di input (campi obbligatori) per dispatchare un intent via n8n?\n- Quali gate vengono eseguiti pre-dispatch e come funziona `whatIf` (default e override)?\n- Come viene invocato `ewctl` e come si propagano `correlationId` e `decision_trace_id`?\n- Qual è il formato di output atteso e come viene validato/parso dal workflow?\n- Dove finiscono log ed eventi (events.jsonl/Activity Log) e quali KPI minimi conviene tracciare?\n- Come gestire azioni potenzialmente distruttive (approval/whatIf/guardrail)?\n\nInput (contratto)\n- `action` (string) es. `wf.excel-csv-upload`, `doc-alignment`.\n- `params` (object) conforme all'intent specifico.\n- `whatIf` (bool, default true), `nonInteractive` (bool), `correlationId` (string), `decision_trace_id` (string, opz.).\n- Schema: `docs/agentic/templates/intents/orchestrator.n8n.dispatch.intent.json`.\n\nOutput (standard)\n- `workflow_id`, `run_id`, `dispatch_ok`, `gate_precheck` (risultati sintetici dei gate opzionali).\n- Struttura conforme a `output-contract` (action-result), arricchita con `diary_log_fields` ove presenti.\n\nGates e controlli\n- Pre-dispatch: Doc Alignment + Checklist opzionale in WhatIf; DB Drift/KB Consistency se rilevanti.\n- WhatIf-by-default: le azioni pericolose richiedono esplicito `whatIf=false`.\n- Audit: log in `agents/logs/events.jsonl` e (opz.) forwarding verso Activity Log.\n\nNodi standard n8n (raccomandati)\n- Receive Intent (Webhook/API Key) → Validate Intent (JSON Schema) → Gate Precheck (`ewctl`/script) → Dispatch (Command node: `pwsh scripts/ewctl.ps1 --engine ps --intent <action> --params <json> --noninteractive`) → Parse Output/Validate → Log → Notify (Teams/Email opz.).\n\nOsservabilità\n- Propagare `decision_trace_id` se presente nel payload (es. DQ Gate) e includerlo nel log eventi.\n- KPI minimi: time_to_dispatch_ms, gate_failures, first_try_success.\n\nRiferimenti\n- Intent: `docs/agentic/templates/intents/orchestrator.n8n.dispatch.intent.json`\n- Manifest esempio: `docs/agentic/templates/orchestrations/wf.excel-csv-upload.manifest.json`\n- Contratti: `Wiki/EasyWayData.wiki/intent-contract.md`, `Wiki/EasyWayData.wiki/output-contract.md`\n- Governance/gates: `Wiki/EasyWayData.wiki/agents-governance.md`, `doc-alignment-gate.md`","size_chars":2257,"tokens_estimate":564}
{"doc_id":"ew-orch-wf-excel-csv-upload","path":"orchestrations/wf-excel-csv-upload.md","title":"Orchestrazione – wf.excel-csv-upload (WHAT)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual è l'obiettivo end-to-end del workflow e quali stati canonici usa nel diario?\n- Quali gate di qualità (ARGOS/DQ) vengono applicati e quali esiti fanno avanzare/bloccare?\n- Quali eventi vengono emessi e come si propaga/usa `decision_trace_id`?\n- Dove sta il manifest JSON e cosa contiene (stati, transizioni, `ux_prompts`, osservabilità)?\n- Quali output e messaggi devono finire nel diario di bordo per essere “one-button” e auditabile?\n- Quali sono i prossimi passi HOW (agenti da implementare) aderendo al contratto WHAT?\n\nManifest JSON\n- Percorso: `docs/agentic/templates/orchestrations/wf.excel-csv-upload.manifest.json`\n- Contiene: scope, ruoli, feature flags, pre/post‑condizioni, stages, transizioni, osservabilità, riferimenti a policy/mapping, messaggi UX standard.\n\nStati canonici (diario)\n- uploaded → parsed → dq_evaluated → mapped → staged → merged → materialized → completed (+ failed/deferred)\n\nGates & decisioni\n- DQ Gate (minimo): formato, obbligatori, tipi, domini chiave; duplicati e outlier come warn. PASS/DEFER avanzano; FAIL mostra correzioni.\n\nEventi & trace\n- `argos.run.completed` (upload/parsing), `argos.gate.decision` (DQ), opz. `argos.ticket.opened` su FAIL critico. `decision_trace_id` propagato.\n\nUX One‑Button\n- Copioni semplici per OK/Warn/Error ad ogni stato (in manifest `ux_prompts`).\n- Percorso Base sempre disponibile; Pro sblocca mapping/tuning.\n\nSLO esperienza\n- file→dashboard ≤ 2 min; first‑try success ≥ 85%.\n\nProssimi passi (HOW in seguito)\n- Implementare gli agent aderendo al manifest: Ingestion, DQ (ARGOS), Mapper, ETL, Analytics, Orchestrator.\n- Aggiungere test su flussi interni e diari di bordo reali.\n\nRiferimenti\n- Use Case – Entrate/Uscite: `use-cases/entrate-uscite.md`\n- ARGOS – Quality Gates: `argos/argos-quality-gates.md`\n- Governance DQ: `governance-dq.md`","size_chars":1848,"tokens_estimate":462}
{"doc_id":"ew-runbooks-instructions-collect-azure-inventory","path":"Runbooks/instructions_collect_azure_inventory.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Obiettivo","anchor_slug":"obiettivo","chunk_index":1,"content":"## Obiettivo\n- Raccogliere automaticamente l’inventory Azure utile per la Fase 0 (inventory → RTO/RPO) e incollare qui il JSON di output.","size_chars":137,"tokens_estimate":34}
{"doc_id":"ew-runbooks-instructions-collect-azure-inventory","path":"Runbooks/instructions_collect_azure_inventory.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":2,"content":"## Domande a cui risponde\n- Quali prerequisiti (modulo Az, permessi) servono per eseguire lo script senza errori?\n- Qual è il comando consigliato per generare `azure_inventory.json` e dove viene scritto il file?\n- Come seleziono la subscription corretta se ne ho più di una?\n- Come verifico che il JSON prodotto sia valido e contenga le sezioni principali attese?\n- Cosa posso condividere/incollare in modo sicuro (senza segreti) e cosa devo rimuovere?\n- Cosa fare se ho errori di login, permessi insufficienti o policy di esecuzione script?","size_chars":541,"tokens_estimate":135}
{"doc_id":"ew-runbooks-instructions-collect-azure-inventory","path":"Runbooks/instructions_collect_azure_inventory.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":3,"content":"## Prerequisiti\n1. PowerShell (Windows PowerShell o PowerShell 7 / pwsh).\n2. Modulo Az installato:\n   - Se non installato: Execute in PowerShell con diritti utente:\n     Install-Module -Name Az -Scope CurrentUser -Force\n3. Accesso alla subscription Azure con permessi di lettura sulle risorse che vuoi inventariare.","size_chars":315,"tokens_estimate":79}
{"doc_id":"ew-runbooks-instructions-collect-azure-inventory","path":"Runbooks/instructions_collect_azure_inventory.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":4,"content":"## Passi\n1. Apri PowerShell (o pwsh) e autentica:\n   - Connect-AzAccount\n   - (opzionale se hai più subscription) Select-AzSubscription -SubscriptionId \"<SUBSCRIPTION_ID>\"\n2. Posizionati nella cartella del repository dove è presente lo script:\n   - cd <path-to-repo>\n    Esempio (se sei nella root del repo): `cd \"<repo-root>/EasyWayDataPortal\"`\n3. Esegui lo script (comando consigliato — non distruttivo):\n   - pwsh -NoProfile -ExecutionPolicy Bypass -File .\\scripts\\collect_azure_inventory.ps1 -OutputFile .\\azure_inventory.json\n   Oppure, se usi Windows PowerShell senza pwsh:\n   - .\\scripts\\collect_azure_inventory.ps1 -OutputFile .\\azure_inventory.json\n4. Attendi il completamento: lo script scrive il file azure_inventory.json nella cartella corrente e mostra un’anteprima nel terminale.\n5. Verifica il file:\n   - Apri il file con un editor (es. code .\\azure_inventory.json o Notepad) e verifica che contenga sezioni come: ResourceGroups, WebApps, SqlServers, SqlDatabases, KeyVaults, StorageAccounts, PrivateEndpoints, FrontDoors, DnsZones, ecc.","size_chars":1052,"tokens_estimate":263}
{"doc_id":"ew-runbooks-instructions-collect-azure-inventory","path":"Runbooks/instructions_collect_azure_inventory.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":5,"content":"## Verify\n- Esiste `azure_inventory.json` nella cartella di esecuzione ed è un JSON valido.\n- Contiene le sezioni principali (SqlServers/SqlDatabases/StorageAccounts/KeyVaults) se presenti nella subscription.","size_chars":208,"tokens_estimate":52}
{"doc_id":"ew-runbooks-instructions-collect-azure-inventory","path":"Runbooks/instructions_collect_azure_inventory.md","title":"Obiettivo","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:55:59+01:00","section_level":2,"anchor_text":"Cosa incollare qui","anchor_slug":"cosa-incollare-qui","chunk_index":6,"content":"## Cosa incollare qui\n- Apri azure_inventory.json, copia il contenuto (tutto) e incollalo nella risposta qui nella chat.\n- Se il JSON è molto grande e la chat lo tronca, puoi:\n  1) comprimere e condividere via link (es. GitHub Gist o upload interno), oppure\n  2) incollare solo le sezioni principali (SqlServers, SqlDatabases, KeyVaults, StorageAccounts, PrivateEndpoints, WebApps, FrontDoors, DnsZones) — indicami quali hai incollato.\n\nSicurezza e note\n- Lo script non raccoglie segreti/chiavi in chiaro; tuttavia rivedi il JSON per non includere accidentalmente valori sensibili prima di incollarlo.\n- Se in azienda ci sono policy che vietano l’esportazione di inventari in chat pubbliche, esegui lo script e consegna il file al canale/designato (es. ADO artifact, Teams/SharePoint) e avvisami dove posso reperirlo.\n- Se il comando Get-AzRoleAssignment restituisce output molto ampio, puoi modificare lo script per non includere RoleAssignmentsSample (rimuovendone la generazione temporaneamente).\n\nIn caso di errori comuni\n- \"Connect-AzAccount non eseguito\": esegui Connect-AzAccount.\n- Permessi insufficienti: esegui con un account che abbia almeno Reader sulle subscriptions/resource groups target.\n- Modulo Az mancante: esegui Install-Module -Name Az -Scope CurrentUser -Force\n- Problemi di esecuzione script per policy: usa -ExecutionPolicy Bypass come mostrato.\n\nConsegna\n- Dopo che incolli il JSON qui, procederò a:\n  1) parsare automaticamente le sezioni principali,\n  2) popolare la matrice componente→RTO/RPO con i nomi risorsa (RG, id, hostnames),\n  3) segnalare eventuali gap informativi e richiedere solo i dettagli mancanti.\n\nSe preferisci, posso anche generare una versione equivalente in bash/Az CLI: dimmi se la vuoi.","size_chars":1736,"tokens_estimate":434}
{"doc_id":"ew-runbooks-what-is-inventory-and-missing-items","path":"Runbooks/what_is_inventory_and_missing_items.md","title":"what_is_inventory_and_missing_items","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:56+01:00","section_level":2,"anchor_text":"what_is_inventory_and_missing_items","anchor_slug":"whatisinventoryandmissingitems","chunk_index":1,"content":"Che cos'è l'\"inventory\" e a cosa serve (breve guida operativa)\n\n1) Cos'è l'inventory\n- L'inventory è un elenco strutturato e verificabile delle risorse tecniche che compongono EasyWayDataPortal: tipi di risorsa (Azure SQL, Storage Account/ADLS, App Service, Container App, Key Vault, Front Door, DNS zone, Private Endpoint, ecc.), nomi, resource group, subscription, endpoint/host, tag, owner operativo (nome/email) e informazioni minime utili (es. presenza di geo‑replica, HNS su storage, private endpoint).\n- Formato tipico: CSV (riga = componente) + file JSON di supporto (esportato dallo script PowerShell).\n\n2) A cosa serve l'inventory (per il progetto DR)\n- Stabilire la \"fotografia\" completa e non ambigua dell'ambiente per:\n  - identificare componenti critici da proteggere (P0/P1/P2),\n  - definire RTO/RPO target per ciascun componente,\n  - individuare dipendenze (es. DB dipende da Key Vault X / Hostname Y),\n  - generare runbook automatizzabili (IaC + pipeline),\n  - stimare effort e ordine di intervento per POC DR (GCP).\n- L'inventory è prerequisito per costruire la matrice componente → RTO/RPO e per trasformare i runbook ADA‑centrici in artefatti \"as‑code\".\n\n3) Output attesi dall'operazione di inventory\n- File azure_inventory.json (output dello script) — raw export.\n- DR_Inventory_Matrix.csv / .md — tabella sintetica con colonne: Component, ComponentType, ResourceName, ResourceGroup, Subscription, Environment, Owner, Criticality, BusinessImpact, RTO_target, RPO_target, RecoveryAction, Notes, Status.\n- Report iniziale dei gap operativi (elenco prioritizzato).\n- PR/issue list con attività tecniche (es. produrre script SID, TF POC GCP, runbook teardown).\n\n4) Come useremo l'inventory per documentare cosa manca\n- Parserò il JSON (o il CSV compilato) e popolerò DR_Inventory_Matrix.md/.csv.\n- Per ogni componente identificherò:\n  - se esistono meccanismi di recovery (geo‑replica, backup, failover group),\n  - dipendenze critiche (Key Vault, private endpoints, DNS),\n  - gap immediati (mancano script SID, mancanti moduli Terraform per GCP, sync storage, ecc.).\n- Produrrò una lista actionabile: per ogni gap indicherò deliverable, priorità, owner raccomandato e stima sforzo.","size_chars":2198,"tokens_estimate":550}
{"doc_id":"ew-runbooks-what-is-inventory-and-missing-items","path":"Runbooks/what_is_inventory_and_missing_items.md","title":"what_is_inventory_and_missing_items","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T09:50:56+01:00","section_level":2,"anchor_text":"what_is_inventory_and_missing_items","anchor_slug":"whatisinventoryandmissingitems","chunk_index":2,"content":"5) Sintesi dei gap principali (riassunto rapido — cosa manca oggi)\n- Runbook DR \"as‑code\" end‑to‑end — orchestrazione automatica per test DR (MVP required).\n- Script sincronizzazione login SQL (SID) e permessi — necessario per DB senza autenticazione federata.\n- Terraform / IaC per provisioning DR su GCP (Cloud SQL, GCS, Secret Manager, LB).\n- Sincronizzazione storage (ADLS → GCS) con versioning.\n- Segreti & certificati cross‑cloud (Key Vault ↔ Secret Manager) — pipeline sicura per test DR.\n- Ingress / Global routing cross‑cloud (Front Door ↔ Cloud LB) + DNS failover playbook.\n- Monitoring & test automation per misurare RTO/RPO (dashboard + runbook).\n- Networking multi‑cloud mapping (Private Endpoint ↔ PSC/VPC) e regole firewall.\n- Playbook rollback / teardown automatico per evitare costi e drift.\n\n6) Prossimi passi concreti che posso fare ora (scegliere 1 o più)\n- A) Generare e popolare DR_Inventory_Matrix.csv automaticamente a partire da azure_inventory.json (io eseguo parsing e creo CSV/MD).\n- B) Creare la prima bozza del template script SQL SID + runbook teardown (artifact immediato).\n- C) Creare il repo/bozza Terraform POC su GCP per Cloud SQL + GCS + Secret Manager (bozza).\n- D) Preparare lista gap dettagliata ordinata per priorità (deliverable + effort stimato).\n\nIndica quale azione vuoi che esegua subito (A, B, C o D) oppure conferma \"procedi con A\" se vuoi che inizi da inventory e matrice.","size_chars":1421,"tokens_estimate":355}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"One-shot: rigenera tutto (root corrente)\r","anchor_slug":"one-shot-rigenera-tutto-root-corrente","chunk_index":1,"content":"## One-shot: rigenera tutto (root corrente)\r\n```powershell\r\n# 1) Naming + indici + anchor check\r\nEasyWayData.wiki/scripts/review-run.ps1 -Root EasyWayData.wiki -Mode kebab -CheckAnchors\n\n# 2) Entities index\r\n. EasyWayData.wiki/scripts/generate-entities-index.ps1 -Root EasyWayData.wiki\n\n# 3) Manifest (CSV/JSONL) + Anchors\r\n. EasyWayData.wiki/scripts/generate-master-index.ps1 -Root EasyWayData.wiki\n\n# 4) Export chunk atomici (H2/H3)\r\n. EasyWayData.wiki/scripts/export-chunks-jsonl.ps1 -Root EasyWayData.wiki\n\n# 5) Lint atomicità\r\n. EasyWayData.wiki/scripts/lint-atomicity.ps1 -Root EasyWayData.wiki\n\n# 6) Log\r\n. EasyWayData.wiki/scripts/add-log.ps1 -Type REVIEW -Scope full-rebuild -Status success -Owner team-docs -Message \"Rigenerazione completa indici/manifest/chunk/lint\" -Split monthly\r\n```","size_chars":797,"tokens_estimate":199}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Multi-root: aggrega più progetti\r","anchor_slug":"multi-root-aggrega-pi-progetti","chunk_index":2,"content":"## Multi-root: aggrega più progetti\r\n```powershell\r\n# Pre-requisito: genera gli artefatti per ogni root\r\n. EasyWayData.wiki/scripts/generate-master-index.ps1 -Root EasyWayData.wiki\r\n. EasyWayData.wiki/scripts/generate-master-index.ps1 -Root OtherWiki\n\n# Aggregazione in file *_all (nella workspace root)\r\n. EasyWayData.wiki/scripts/generate-master-index-aggregate.ps1 -Roots @('EasyWayData.wiki','OtherWiki')\r\n```","size_chars":413,"tokens_estimate":103}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Multi-root: normalizzazione (scan/apply) e report\r","anchor_slug":"multi-root-normalizzazione-scanapply-e-report","chunk_index":3,"content":"## Multi-root: normalizzazione (scan/apply) e report\r\n```powershell\r\n# Scansione senza modifiche (report per-root + sommario)\r\n. EasyWayData.wiki/scripts/normalize-project-multi.ps1 -Roots @('EasyWayData.wiki','OtherWiki') -Mode scan\n\n# Applicazione con front matter minimo dove manca\r\n. EasyWayData.wiki/scripts/normalize-project-multi.ps1 -Roots @('EasyWayData.wiki','OtherWiki') -Mode apply -EnsureFrontMatter\r\n```","size_chars":417,"tokens_estimate":104}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Job: Full‑pass multi‑root (normalize → rebuild → lint)\r","anchor_slug":"job-fullpass-multiroot-normalize-rebuild-lint","chunk_index":4,"content":"## Job: Full‑pass multi‑root (normalize → rebuild → lint)\r\n```powershell\r\n$roots = @('EasyWayData.wiki','OtherWiki')\n\n# 1) Normalizza tutte le radici\r\n. EasyWayData.wiki/scripts/normalize-project-multi.ps1 -Roots $roots -Mode apply -EnsureFrontMatter\n\n# 2) Rebuild artefatti e lint per ogni root\r\nforeach($r in $roots){\r\n  $rootPath = Resolve-Path $r\r\n  EasyWayData.wiki/scripts/review-run.ps1 -Root $rootPath -Mode kebab -CheckAnchors | Out-Host\r\n  . EasyWayData.wiki/scripts/generate-entities-index.ps1 -Root $rootPath | Out-Host\r\n  . EasyWayData.wiki/scripts/generate-master-index.ps1 -Root $rootPath | Out-Host\r\n  . EasyWayData.wiki/scripts/export-chunks-jsonl.ps1 -Root $rootPath | Out-Host\r\n  . EasyWayData.wiki/scripts/lint-atomicity.ps1 -Root $rootPath | Out-Host\r\n}\n\n# 3) Log finale\r\n. EasyWayData.wiki/scripts/add-log.ps1 -Type REVIEW -Scope full-pass-multi -Status success -Owner team-docs -Message \"Full pass multi-root: normalize+rebuild+lint\" -Split monthly\r\n```","size_chars":976,"tokens_estimate":244}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Utility: aggiungi front matter mancante\r","anchor_slug":"utility-aggiungi-front-matter-mancante","chunk_index":5,"content":"## Utility: aggiungi front matter mancante\r\n```powershell\r\n. EasyWayData.wiki/scripts/bulk-frontmatter.ps1 -Root EasyWayData.wiki -DefaultTag 'layer/reference'\r\n```","size_chars":164,"tokens_estimate":41}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Log attività (esempio)\r","anchor_slug":"log-attivit-esempio","chunk_index":6,"content":"## Log attività (esempio)\r\n```powershell\r\n. EasyWayData.wiki/scripts/add-log.ps1 -Type DOC -Scope wiki -Status success -Owner team-docs -Message \"Aggiornata guida scripts\"\r\n```","size_chars":176,"tokens_estimate":44}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Link-check + anchor-check (CI-friendly)\r","anchor_slug":"link-check-anchor-check-ci-friendly","chunk_index":7,"content":"## Link-check + anchor-check (CI-friendly)\n\nCheck mirato per evitare link rotti e anchor mancanti, con output **machine-readable** (JSON) e senza generare indici/artefatti.\n\nNota: nei report JSON il campo `file` è un path **relativo** (stabile e CI-friendly). Per includere anche il path assoluto per debug, usa `-IncludeFullPath`.\n\n```powershell\r\npwsh scripts/wiki-links-anchors-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -FailOnError -SummaryOut \"wiki-links-anchors-lint.json\"\r\n```","size_chars":523,"tokens_estimate":131}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Summary lint (no placeholder) - phased","anchor_slug":"summary-lint-no-placeholder-phased","chunk_index":8,"content":"## Summary lint (no placeholder) - phased\n\nEnforce che `summary:` non sia vuoto e non sia un placeholder, iniziando da uno scope alla volta.\n\n```powershell\npwsh scripts/wiki-summary-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName \"portal-api-frontend-20\" -FailOnError -SummaryOut \"wiki-summary-lint.portal-api-frontend-20.json\"\n```","size_chars":444,"tokens_estimate":111}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Index lint (`index.md`) - phased","anchor_slug":"index-lint-indexmd-phased","chunk_index":9,"content":"## Index lint (`index.md`) - phased\n\nEnforce che le pagine `index.md` non siano ambigue: `title` specifico (kebab-case) e `summary` non placeholder.\n\n```powershell\npwsh scripts/wiki-index-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName \"portal-api-frontend-20\" -FailOnError -SummaryOut \"wiki-index-lint.portal-api-frontend-20.json\"\n```","size_chars":448,"tokens_estimate":112}
{"doc_id":"ew-scripts","path":"scripts/scripts.md","title":"Scripts - One-shot e routine frequenti","owner":"team-docs","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T17:48:22+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":10,"content":"## Domande a cui risponde\n- Quali script usare per normalizzare e ricostruire la wiki?\n- Come eseguire le routine multi-root e generare report?\n- Dove trovare esempi one-shot e job completi?\n- Come tracciare i risultati nei log?","size_chars":228,"tokens_estimate":57}
{"doc_id":"ew-uc-entrate-uscite","path":"use-cases/entrate-uscite.md","title":"Use Case – Entrate/Uscite (One‑Button UX)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"Use Case – Entrate/Uscite (One‑Button UX)","anchor_slug":"use-case-entrateuscite-onebutton-ux","chunk_index":1,"content":"# Use Case – Entrate/Uscite (One‑Button UX)\n\nPrincipio guida (per tutti)\n- Come accendere la luce: premi un bottone e funziona. L’utente non deve capire contratti, transistor o DSL: l’interfaccia lo guida con parole semplici, scelte sicure e risultati immediati.\n\nPercorso “Un Bottone” (Base)\n- Carica file → Verifica automatica → Mappatura smart → Caricamento → Dashboard pronta → Chat per domande.\n- Il sistema sceglie i default migliori, spiega in italiano chiaro cosa succede e come rimediare se serve.\n\nPercorso “Pro” (Opzionale)\n- Per utenti esperti: rivedi mapping, vedi regole DQ applicate, abilita dedup condizionale, salva template.\n\nFlusso (alto livello)\n```mermaid\nflowchart TD\n    U[Utente: Carica file] --> P[Parsing & Anteprima]\n    P --> DQ[Controlli DQ (ARGOS)]\n    DQ -->|PASS/DEFER| M[Schema Mapping (auto)]\n    M --> S[Staging]\n    S --> T[Target]\n    T --> V[Viste & Dashboard]\n    V --> C[Chat: domande e calcoli]\n    DQ -->|FAIL| H[Messaggio chiaro + correzione guidata]\n```\n\nRegole DQ Minime (in parole semplici)\n- Formato accettato: Excel o CSV.\n- Campi indispensabili: Data, Descrizione, Categoria, Importo, Tipo (Entrata/Spesa), Valuta, Conto.\n- Tipi corretti: Data nel formato riconosciuto; Importo è un numero; Tipo è Entrata o Spesa.\n- Campi mancanti: non ammessi sugli indispensabili.\n- Duplicati: se trovati, te lo diciamo e possiamo aiutarti a sistemarli.\n- Importi strani: segnaliamo valori anomali (non blocca).\n\nUX: Semplicità prima di tutto\n- Un bottone: “Carica e analizza” → il resto lo facciamo noi.\n- Linguaggio umano: niente gergo tecnico; esempi e suggerimenti brevi.\n- Zero sorprese: scelte di default sicure, sempre reversibili.\n- Errori spiegati: “Cosa non va” + “Come risolvere” + “Provalo ora”.\n- Privacy: i tuoi dati sono tuoi; niente dati sensibili in chiaro dove non serve.\n\nMessaggi tipo (stilistica)\n- OK: “Fatto! Dashboard pronta. Vuoi fare una domanda?”\n- Warn: “Alcune categorie non sono riconosciute. Usiamo ‘Altro’. Vuoi impostarle ora?”\n- Errore: “Manca la colonna ‘Importo’. Scarica il modello o scegli la colonna corretta.”\n\nCosa ottieni (MVP)\n- Dashboard pronta: trend mensile, spesa per categoria, top voci, saldo.\n- Chat: “Qual è la spesa media per ristorante nel Q3?” (risposta + come l’abbiamo calcolata).\n- Diario di bordo: cronologia del caricamento con esiti e suggerimenti.","size_chars":2343,"tokens_estimate":586}
{"doc_id":"ew-uc-entrate-uscite","path":"use-cases/entrate-uscite.md","title":"Use Case – Entrate/Uscite (One‑Button UX)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"Use Case – Entrate/Uscite (One‑Button UX)","anchor_slug":"use-case-entrateuscite-onebutton-ux","chunk_index":2,"content":"Perché è per tutti\n- Nessuna configurazione iniziale obbligatoria.\n- Template di mapping riutilizzabile (lo proponiamo noi al prossimo upload).\n- Percorso base sempre disponibile; quello avanzato non intralcia.\n\nSLO/KPI (esperienza)\n- Tempo file→dashboard: ≤ 2 minuti (MVP).\n- Caricamenti “al primo colpo”: ≥ 85%.\n- Domande in chat per sessione: ≥ 3; soddisfazione ≥ 4/5.\n\nNote per implementazione (aggancio ad agenti & ARGOS)\n- Intent orchestratore: `wf.excel-csv-upload` (stati, esiti, Decision Trace).\n- Eventi: `argos.run.completed` (upload/parsing), `argos.gate.decision` (DQ), `argos.ticket.opened` se errore critico.\n- Mapping smart: suggeriamo noi l’allineamento colonne→schema target; puoi accettare e salvare.\n\nRoadmap “a livelli” (caccia al tesoro)\n- L1: One‑Button MVP (carica→dashboard) con DQ base e mapping auto.\n- L2: Salvataggio template mapping, dedup controllato, categorie suggerite.\n- L3: Chat Q&A e widget salvabili.\n- L4: Outlier avanzati, multi‑conto, valuta.\n- L5: Template multipli, scheduler, connettori.","size_chars":1031,"tokens_estimate":258}
{"doc_id":"ew-ux-agentic-ux","path":"UX/agentic-ux.md","title":"agentic-ux","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"agentic-ux","anchor_slug":"agentic-ux","chunk_index":1,"content":"Scopo\n- Fornire una specifica pratica e wireframes per le prime funzionalità UX dell’MVP: Wizard (Create table), Plan Viewer e WhatIf/Simulator.\n- Definire le API minimali necessarie al frontend per interrogare l’orchestratore e visualizzare plan completi di checklistSuggestions.\n\nIndice\n1. Panoramica funzionale\n2. Wireframes e flussi (testuali + mermaid)\n3. API spec (endpoints, payload, esempi)\n4. Esempi JSON (plan + checklistSuggestions + priority.json)\n5. Integrazione frontend-backend (stato, error handling)\n6. Acceptance criteria & test cases\n7. Deliverable e next steps operativi\n\n1) Panoramica funzionale\n- Wizard (step-by-step) per creare intent (es. creare tabella + SP). Produce JSON mini‑DSL e invia al backend per generare plan.\n- Plan Viewer: visualizza il plan generato dall’orchestratore, con passi, agenti coinvolti, e checklistSuggestions aggregate per agente (severità: mandatory/advisory).\n- WhatIf / Simulator: preview dei cambiamenti (diff SQL, runlog simulato) prima di esecuzione reale.\n- Checklist panel: area dove l’utente può leggere, commentare, checkare le voci (human-in-the-loop).\n\n2) Wireframes e flussi\n\n2.1 Flusso principale (schema)\n```mermaid\nflowchart TD\n  User[Utente UI] -->|Compila Wizard| Wizard\n  Wizard -->|POST /api/intent| Backend\n  Backend -->|orchestratore| Plan(JSON)\n  Backend -->|GET priority.json| Agents\n  Backend -->|REST /api/plan| Frontend\n  Frontend --> PlanViewer\n  PlanViewer -->|Preview/WhatIf| Simulator\n  PlanViewer -->|Proponi PR| GitOps\n```\n\n2.2 Wizard (Create Table) — step-by-step (schermate)\n- Step 1: Info generali\n  - Nome entità (USERS)\n  - Descrizione business\n  - Schema (PORTAL)\n- Step 2: Colonne\n  - Lista colonne (name, type, constraints, pk)\n  - Pulsante \"Aggiungi colonna\"\n- Step 3: NDG / Sequence\n  - Opzioni NDG: sequence name, prefix, width\n- Step 4: Preview & Generate Intent\n  - Preview SQL generato (collapsed)\n  - Pulsante \"Genera plan\" (invia JSON mini-DSL)\n  - Pulsante \"Salva bozza\"\n\n2.3 Plan Viewer — sezioni principali\n- Header: intent, autore (se presente), timestamp\n- Summary: agents coinvolti, recipeId, suggestion\n- ChecklistSuggestions: per agente, con badge severity (M = mandatory, A = advisory)\n- Steps: lista step eseguiti/proposti (collapsible)\n- Preview / WhatIf: diff SQL e runlog simulato\n- Actions: \"Proponi PR\", \"Simula\", \"Chiedi spiegazione (Assistant)\", \"Conferma esecuzione\"","size_chars":2385,"tokens_estimate":596}
{"doc_id":"ew-ux-agentic-ux","path":"UX/agentic-ux.md","title":"agentic-ux","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"agentic-ux","anchor_slug":"agentic-ux","chunk_index":2,"content":"3) API spec (minimale)\n\n3.1 GET /api/plan?intent={intent}\n- Descrizione: ritorna il plan generato dall’orchestratore per l’intent dato (read-only).\n- Query params:\n  - intent (string) — obbligatorio\n- Response 200:\n  - { plan: { intent, recipeId, suggestion, manifests, goals, checklistSuggestions } }\n- Esempio:\n  curl -s \"http://localhost:3000/api/plan?intent=create_table_users\"\n\n3.2 POST /api/intent\n- Descrizione: invia un JSON mini‑DSL (intent) per generare plan e ottenere preview immediata.\n- Body:\n  - { intent: \"create_table_users\", payload: { ...mini-dsl... }, author?: \"user@company\" }\n- Response 201:\n  - { plan: { ... }, preview: { sql: \"...\", diff: \"...\", runlog: \"simulated\" } }\n- Error 4xx/5xx: messaggi strutturati { error: { code, message, details } }\n\n3.3 GET /api/agents/{agent}/priority\n- Descrizione: restituisce priority.json consolidato per l’agente (rules).\n- Response 200:\n  - { rules: [ { id, description, severity, when, checklist } ] }\n\n3.4 POST /api/simulate\n- Descrizione: esegue simulazione WhatIf server-side (non tocca DB di produzione).\n- Body: { plan: { ... } } oppure { sql: \"...\" }\n- Response 200:\n  - { simulatedDiff: \"...\", runLog: [ { step, outcome, details } ], warnings: [] }\n\n3.5 GET /api/activity-log?planId={id}\n- Descrizione: timeline degli eventi relativi al plan (orchestratore/agents/logs)\n- Response 200: { events: [ { ts, source, level, message, data } ] }\n\n4) Esempi JSON\n\n4.1 Esempio plan (estratto) — include checklistSuggestions\n{\n  \"plan\": {\n    \"intent\": \"create_table_users\",\n    \"recipeId\": \"kb-portal-create-user-001\",\n    \"suggestion\": { \"agent\": \"agent_dba\", \"action\": \"ps\", \"args\": [\"scripts/agent-dba.ps1\"] },\n    \"manifests\": [\n      { \"name\": \"agent_dba\", \"role\": \"dba\" },\n      { \"name\": \"agent_docs_review\", \"role\": \"docs\" }\n    ],\n    \"goals\": { /* agents/goals.json content */ },\n    \"checklistSuggestions\": {\n      \"agent_dba\": {\n        \"mandatory\": [\n          \"[seq-ndg-check] Verificare presenza sequence SEQ_USER_ID\",\n          \"[naming] Controllare prefissi PORTAL.\"\n        ],\n        \"advisory\": [\n          \"[perf] Considerare index su tenant_id\",\n          \"[doc] Aggiungere extended properties per colonne chiave\"\n        ]\n      },\n      \"agent_docs_review\": {\n        \"mandatory\": [],\n        \"advisory\": [\n          \"[doc-1] Aggiornare Wiki: USAGE/USERS.md\"\n        ]\n      }\n    }\n  }\n}","size_chars":2374,"tokens_estimate":594}
{"doc_id":"ew-ux-agentic-ux","path":"UX/agentic-ux.md","title":"agentic-ux","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"agentic-ux","anchor_slug":"agentic-ux","chunk_index":3,"content":"4.2 Esempio priority.json (agents/agent_dba/priority.json)\n{\n  \"rules\": [\n    {\n      \"id\": \"seq-ndg-check\",\n      \"description\": \"Verifica NDG/Sequence per entità nuove\",\n      \"severity\": \"mandatory\",\n      \"when\": { \"intentContains\": [\"create_table\", \"add_entity\"] },\n      \"checklist\": [\n        \"Verificare presenza sequence SEQ_<ENTITY>_ID\",\n        \"Generare NDG con prefisso aziendale\"\n      ]\n    },\n    {\n      \"id\": \"perf-index-suggest\",\n      \"description\": \"Suggerimenti performance\",\n      \"severity\": \"advisory\",\n      \"when\": { \"columnsContain\": [\"tenant_id\", \"email\"] },\n      \"checklist\": [\n        \"Valutare index su tenant_id\",\n        \"Valutare index su email\"\n      ]\n    }\n  ]\n}\n\n5) Integrazione frontend-backend (note implementative)\n- Frontend: componente React (o framework preferito) PlanViewer che chiama GET /api/plan?intent=... e renderizza:\n  - Header con intent e azioni (Simula, Proponi PR)\n  - Sezione checklistSuggestions: per ciascun agente, mostra due liste (mandatory/advisory) con icona severity e possibilità di expand.\n  - Preview: mostra SQL/DIFF (collapsed by default).\n- Stato: considerare spinner per chiamate, gestione errori strutturati, fallback se orchestratore non risponde.\n- Auth: usare token (bearer) e ruoli. Utenti non-admin vedono solo preview; admin può proporre PR/esecuzioni.\n\n6) Acceptance criteria & test cases (minimi)\n- AC-1: GET /api/plan?intent=... ritorna JSON valido e include checklistSuggestions quando esistono priority.json per agenti.\n- AC-2: Wizard genera JSON mini‑DSL che produce plan visibile in Plan Viewer.\n- AC-3: WhatIf restituisce simulatedDiff senza modificare DB reale.\n- AC-4: Plan Viewer evidenzia in modo distinto le checklist mandatory e advisory.\n- Test case rapido:\n  - Creare intent mock \"create_table_users\" → POST /api/intent → verificare plan.checklistSuggestions per agent_dba.\n  - Aggiungere agents/agent_dba/priority.json con rule mandatory → rigenerare plan → verificare che item compaia.\n\n7) Deliverable e file da aggiungere al repository (suggeriti)\n- Wiki/UX/agentic-ux.md (questa pagina)\n- EasyWay-DataPortal/easyway-portal-api/src/routes/plan.ts (scaffold)\n- agents/core/templates/priority.template.json (gia' presente)\n- agents/agent_dba/priority.json (esempio)\n- frontend/src/pages/PlanViewer.jsx (prototype)\n- frontend/static/mock/plan-sample.json (mock per sviluppo)","size_chars":2372,"tokens_estimate":593}
{"doc_id":"ew-ux-agentic-ux","path":"UX/agentic-ux.md","title":"agentic-ux","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-06T14:32:53+01:00","section_level":2,"anchor_text":"agentic-ux","anchor_slug":"agentic-ux","chunk_index":4,"content":"8) Note pratiche e suggerimenti tecnici\n- Orchestratore: migliorare valutazione delle condizioni \"when\" (supportare intentContains, branch, changedPaths, columnsContain, tags, recipeMetadata). L'orchestratore è stato aggiornato per riconoscere \"tags\" e \"recipeMetadata\" nel context; la logica valuta le condizioni e include solo le regole applicabili nel plan.\n- Rendere checklistSuggestions filtrabile in base al contesto (branch, changed files, tags) per evitare rumore. Consigliato: mostrare solo le regole mandatory per default e lasciare espandere le advisory.\n- Salvare plan in storage temporaneo (cache) con planId per recupero via /api/activity-log?planId=...\n- Privacy/Security: non includere dati sensibili nella preview; la simulazione non deve mai esporre credenziali.\n- Esempi di utilizzo dall'orchestratore (shell):\n  - node agents/core/orchestrator.js --intent create_table_users --columns user_id,tenant_id,email\n  - node agents/core/orchestrator.js --intent create_table_users --tags onboarding,demo --recipeMetadata '{\"env\":\"staging\",\"owner\":\"team-a\"}'\n  - node agents/core/orchestrator.js --intent create_table_users --changedPaths \"db/flyway/sql/**,src/somefile\" --branch feature/new-entity\n- Nota: per integrare questa logica nella UI, includere flags (tags, payloadPath/recipeMetadata) nella chiamata POST /api/intent in modo che il backend ricostruisca il context esatto e ritorni checklistSuggestions filtrate.\n\n9) Next steps immediati (azione consigliata)\n- Implementare endpoint GET /api/plan (scaffold) che ritorna mock plan (consente al frontend di partire parallelamente).\n- Creare due priority.json d’esempio per agent_docs_review e agent_governance.\n- Prototipare PlanViewer statico che carica frontend/static/mock/plan-sample.json.\n\nSe vuoi, procedo ora a:\n- creare i file di esempio (agents/agent_dba/priority.json, agents/agent_docs_review/priority.json),\n- aggiungere un mock plan in frontend/static/,\n- creare uno scaffold API in EasyWay-DataPortal/easyway-portal-api/src/routes/plan.ts.\n\nIndica quale di questi vuoi che generi immediatamente.","size_chars":2079,"tokens_estimate":520}
{"doc_id":"ew-ux-branding-assets","path":"UX/branding-assets.md","title":"UX - Asset e Branding","owner":"team-frontend","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T21:03:19+01:00","section_level":2,"anchor_text":"UX - Asset e Branding","anchor_slug":"ux-asset-e-branding","chunk_index":1,"content":"# UX - Asset e Branding\n\nAsset (root repo)\n- `logo.png`\n- `palette_EasyWay.html`\n- `home_easyway.html`\n\nUso\n- Questi file sono riferimenti/mokup; se diventano parte del prodotto devono essere copiati in una posizione canonica del frontend (e documentati).","size_chars":255,"tokens_estimate":64}
{"doc_id":"ew-ux-diary-wf-excel-csv-upload","path":"UX/diary-mock-wf-excel-csv-upload.md","title":"UX Mock – Diario di Bordo (wf.excel-csv-upload)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"UX Mock – Diario di Bordo (wf.excel-csv-upload)","anchor_slug":"ux-mock-diario-di-bordo-wfexcel-csv-upload","chunk_index":1,"content":"# UX Mock – Diario di Bordo (wf.excel-csv-upload)\n\nPrincipi UX\n- One‑Button: un’azione principale sempre disponibile (“Carica e analizza”) e scelte sicure predefinite.\n- Linguaggio semplice: messaggi brevi, chiari, senza gergo tecnico.\n- Diario chiaro: timeline con stati, esiti, motivazioni (“Perché”) e passi successivi.\n- Base vs Pro: interruttore che svela dettagli (mapping, regole DQ, trace) senza intralciare il percorso base.\n\nSchema pagina (generale)\n- Header: titolo processo + chip stato (In corso / Completato / Serve attenzione)\n- Barra avanzamento: 7 step (Uploaded → Parsed → DQ → Mapping → Staging → Merge → Views)\n- Timeline (card): per ogni stato, Mostra: “Cosa ho fatto”, “Perché”, “Esito”, “Prossimo passo”\n- Azioni: pulsante primario (Continua / Riprova / Apri Dashboard) + link secondari (Scarica modello CSV, Vedi trace)\n- Toggle Pro: mostra pannelli avanzati (regole DQ applicate, mapping dettagliato, Decision Trace, conteggi)\n\nAsset & collegamenti (screenshot/wireframe)\n- Cartella asset: `Wiki/EasyWayData.wiki/.attachments/ux/`\n- Convenzioni nome: `wf-excel-step-<N>-<state>-<lang>.png` (es. `wf-excel-step-3-defer-it.png`)\n- Quando disponibili, inserire link a ciascuna card con `! [alt] (../.attachments/ux/wf-excel-step-<N>-<state>-<lang>.png)`\n\nStato 1 – Uploaded (OK)\nMock (testo)\n- Titolo: Carica e analizza\n- Step 1/7 – File ricevuto ✓\n- Cosa ho fatto: Ho salvato il file in modo sicuro.\n- Perché: preparare l’analisi e la qualità.\n- Esito: OK\n- Prossimo passo: Leggo intestazioni e creo un’anteprima.\n- Azioni: [Continua]  [Annulla]\n- Link: [Scarica modello CSV]\n\nStato 2 – Parsed (OK / Errore)\nBase – OK\n- Step 2/7 – Anteprima pronta ✓\n- Cosa ho fatto: Ho riconosciuto il formato e letto le intestazioni.\n- Esito: OK\n- Prossimo passo: Controlli di qualità.\n- Azioni: [Continua]\n\nBase – Errore\n- Step 2/7 – Non riesco a leggere il file ✕\n- Cosa non va: Il file sembra corrotto o il foglio non è presente.\n- Come risolvere: Prova con il nostro modello o esporta in CSV.\n- Azioni: [Riprova]  [Scarica modello CSV]","size_chars":2047,"tokens_estimate":512}
{"doc_id":"ew-ux-diary-wf-excel-csv-upload","path":"UX/diary-mock-wf-excel-csv-upload.md","title":"UX Mock – Diario di Bordo (wf.excel-csv-upload)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"UX Mock – Diario di Bordo (wf.excel-csv-upload)","anchor_slug":"ux-mock-diario-di-bordo-wfexcel-csv-upload","chunk_index":2,"content":"Stato 3 – DQ (PASS / DEFER / FAIL)\nPASS\n- Step 3/7 – Controlli qualità superati ✓\n- Cosa ho fatto: Ho verificato campi indispensabili e formati.\n- Esito: PASS\n- Prossimo passo: Mappo le colonne automaticamente.\n- Azioni: [Continua]\nDEFER\n- Step 3/7 – Qualche avviso (procedo in sicurezza) !\n- Avvisi: Alcune categorie non sono riconosciute (userò “Altro”); trovati possibili duplicati.\n- Esito: DEFER (non blocca)\n- Prossimo passo: Applico la mappatura suggerita.\n- Azioni: [Continua]  [Vedi dettagli]\nFAIL\n- Step 3/7 – Dati mancanti ✕\n- Cosa non va: Manca la colonna “Importo”.\n- Come risolvere: Scegli la colonna corretta o scarica il modello.\n- Azioni: [Scegli colonna]  [Scarica modello CSV]  [Riprova]\n\nStato 4 – Mapping (Auto / Interattivo)\nAuto (Base)\n- Step 4/7 – Mappatura completata ✓\n- Cosa ho fatto: Ho allineato intestazioni al nostro schema standard.\n- Esito: OK (ho compilato i campi mancanti con valori sicuri)\n- Prossimo passo: Carico in staging.\n- Azioni: [Continua]\nInterattivo (Pro)\n- Step 4/7 – Serve conferma su alcuni campi\n- Cosa fare: Abbina “Descrizione” → description, “Tipo” → income/expense, “Valuta” → iso_code\n- Azioni: [Applica mapping]  [Salva come template]\n\nStato 5 – Staging (OK / Errore)\nOK\n- Step 5/7 – Caricamento in staging ✓\n- Esito: OK (righe caricate: 3.241)\n- Prossimo passo: Normalizzo e allineo ai target.\n- Azioni: [Continua]\nErrore\n- Step 5/7 – Caricamento non riuscito ✕\n- Cosa non va: Un valore non è numerico nella colonna Importo.\n- Come risolvere: Sostituisci “—” con “0” o un numero valido.\n- Azioni: [Riprova]\n\nStato 6 – Merge (OK / Warn)\nOK\n- Step 6/7 – Dati allineati ✓\n- Esito: OK (dedup controllato applicato su possibili duplicati)\n- Prossimo passo: Aggiorno le viste.\n- Azioni: [Continua]\nWarn\n- Step 6/7 – Trovati duplicati (risolti) !\n- Dettagli: 14 record consolidati secondo regole di scelta (timestamp più recente)\n- Azioni: [Vedi dettagli]  [Continua]\n\nStato 7 – Views & Dashboard (OK / Errore)\nOK\n- Step 7/7 – Dashboard pronta ✓\n- Cosa ho fatto: Ho aggiornato KPI e grafici.\n- Esito: OK\n- Azioni: [Apri Dashboard]  [Fai una domanda]\nErrore\n- Step 7/7 – Materializzazione non riuscita ✕\n- Cosa non va: Vista KPI non disponibile.\n- Azioni: [Riprova]  [Apri log]","size_chars":2227,"tokens_estimate":557}
{"doc_id":"ew-ux-diary-wf-excel-csv-upload","path":"UX/diary-mock-wf-excel-csv-upload.md","title":"UX Mock – Diario di Bordo (wf.excel-csv-upload)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-04T20:36:20+01:00","section_level":2,"anchor_text":"UX Mock – Diario di Bordo (wf.excel-csv-upload)","anchor_slug":"ux-mock-diario-di-bordo-wfexcel-csv-upload","chunk_index":3,"content":"Timeline (Base → Pro)\n- Ogni card mostra: data/ora, stato, messaggio OK/Warn/Errore, azioni successive.\n- Toggle Pro aggiunge: conteggi, regole DQ applicate, campi mappati, link Decision Trace.\n\nEsempio entry (JSON)\n```\n{\n  \"timestamp\": \"2025-10-27T10:12:00Z\",\n  \"stage\": \"dq_evaluated\",\n  \"outcome\": \"DEFER\",\n  \"reason\": \"Categorie ignote e duplicati potenziali\",\n  \"next\": \"mapped\",\n  \"decision_trace_id\": \"trace-abc-123\",\n  \"artifacts\": [\"dq_summary.json\", \"invalid_sample.csv\"],\n  \"ux\": {\n    \"title\": \"Qualche avviso (procedo in sicurezza)\",\n    \"actions\": [\"Continua\", \"Vedi dettagli\"]\n  }\n}\n```\n\nNote\n- Tutti i messaggi UX sono allineati ai `ux_prompts` del manifest (WHAT) e vanno localizzati.\n- Il diario deve essere leggibile “a colpo d’occhio”, con pulsanti chiari e un aiuto contestuale semplice.\n - Copioni localizzati: vedere `docs/agentic/templates/orchestrations/ux_prompts.it.json` e `ux_prompts.en.json`.","size_chars":922,"tokens_estimate":230}
{"doc_id":"ew-ux-usability-checklist","path":"UX/usability-checklist.md","title":"UX – Usability Checklist (One‑Button)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:51+01:00","section_level":2,"anchor_text":"Domande a cui risponde","anchor_slug":"domande-a-cui-risponde","chunk_index":1,"content":"## Domande a cui risponde\n- Qual e' l'obiettivo di questa procedura e quando va usata?\n- Quali prerequisiti servono (accessi, strumenti, permessi)?\n- Quali sono i passi minimi e quali sono i punti di fallimento piu comuni?\n- Come verifico l'esito e dove guardo log/artifact in caso di problemi?","size_chars":294,"tokens_estimate":74}
{"doc_id":"ew-ux-usability-checklist","path":"UX/usability-checklist.md","title":"UX – Usability Checklist (One‑Button)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:51+01:00","section_level":2,"anchor_text":"Prerequisiti","anchor_slug":"prerequisiti","chunk_index":2,"content":"## Prerequisiti\n- Accesso al repository e al contesto target (subscription/tenant/ambiente) se applicabile.\n- Strumenti necessari installati (es. pwsh, az, sqlcmd, ecc.) in base ai comandi presenti nella pagina.\n- Permessi coerenti con il dominio (almeno read per verifiche; write solo se whatIf=false/approvato).","size_chars":313,"tokens_estimate":78}
{"doc_id":"ew-ux-usability-checklist","path":"UX/usability-checklist.md","title":"UX – Usability Checklist (One‑Button)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:51+01:00","section_level":2,"anchor_text":"Passi","anchor_slug":"passi","chunk_index":3,"content":"## Passi\n1. Raccogli gli input richiesti (parametri, file, variabili) e verifica i prerequisiti.\n2. Esegui i comandi/azioni descritti nella pagina in modalita non distruttiva (whatIf=true) quando disponibile.\n3. Se l'anteprima e' corretta, riesegui in modalita applicativa (solo con approvazione) e salva gli artifact prodotti.","size_chars":327,"tokens_estimate":82}
{"doc_id":"ew-ux-usability-checklist","path":"UX/usability-checklist.md","title":"UX – Usability Checklist (One‑Button)","owner":"team-platform","tags":null,"entities":null,"llm.include":"","llm.pii":"","chunk_hint":"","updated":"2026-01-05T13:58:51+01:00","section_level":2,"anchor_text":"Verify","anchor_slug":"verify","chunk_index":4,"content":"## Verify\n- Controlla che l'output atteso (file generati, risorse create/aggiornate, response API) sia presente e coerente.\n- Verifica log/artifact e, se previsto, che i gate (Checklist/Drift/KB) risultino verdi.\n- Se qualcosa fallisce, raccogli errori e contesto minimo (command line, parametri, correlationId) prima di riprovare.","size_chars":331,"tokens_estimate":83}
