{"id":"kb-setup-env-001","intent":"setup-local-env","question":"Come imposto l'ambiente locale (.env.local)?","tags":["env","local","powershell"],"preconditions":["PowerShell 7+","repo clonato"],"steps":["pwsh scripts/setup-env.ps1 -TenantId <TENANT> -AuthClientId <CLIENT_ID> -DbConnString '<CONN>' -DefaultBusinessTenant tenant01"],"verify":["File .env.local creato","Checklist OK"],"rollback":["Eliminare .env.local o rigenerare"],"outputs":["EasyWay-DataPortal/easyway-portal-api/.env.local"],"references":["EasyWay-DataPortal/easyway-portal-api/README.md","scripts/setup-env.ps1"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-activity-approved-030","intent":"activity-approved","question":"Come leggo direttamente gli eventi approvati via la nuova rotta /api/docs/activity/approved?","tags":["activity","audit","ams"],"steps":["# Bash:","curl -s http://localhost:3000/api/docs/activity/approved","# PowerShell:","Invoke-RestMethod -Uri 'http://localhost:3000/api/docs/activity/approved' | ConvertTo-Json -Depth 5"],"verify":["La risposta contiene solo eventi con govApproved=true (filtro lato server)"],"references":["EasyWay-DataPortal/easyway-portal-api/src/routes/docs.ts","Wiki/EasyWayData.wiki/activity-log.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-checklist-002","intent":"predeploy-checklist","question":"Come eseguo il Checklist Bot?","tags":["checklist","quality"],"steps":["pwsh scripts/checklist.ps1"],"verify":["summary.ok=true"],"outputs":["checklist.json (artifact)"],"references":["EasyWay-DataPortal/easyway-portal-api/src/tools/checklist.ts","azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-start-api-003","intent":"start-api","question":"Come avvio l'API in sviluppo?","tags":["api","dev"],"steps":["cd EasyWay-DataPortal/easyway-portal-api","npm ci","npm run dev"],"verify":["http://localhost:3000/portal risponde"],"references":["EasyWay-DataPortal/easyway-portal-api/README.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-flyway-migrate-004","intent":"db-migrate","question":"Come eseguo le migrazioni Flyway?","tags":["db","flyway"],"preconditions":["FLYWAY_URL","FLYWAY_USER","FLYWAY_PASSWORD"],"steps":["flyway -configFiles=db/flyway/flyway.conf validate","flyway -configFiles=db/flyway/flyway.conf migrate"],"verify":["Tabella flyway_schema_history aggiornata"],"references":["db/flyway/README.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-terraform-plan-005","intent":"infra-plan","question":"Come eseguo Terraform plan/apply?","tags":["infra","terraform"],"preconditions":["RESOURCE_GROUP_NAME","STORAGE_ACCOUNT_NAME","TENANTS"],"steps":["cd infra/terraform","terraform init","terraform plan -var 'project_name=easyway' -var 'resource_group_name=${env:RESOURCE_GROUP_NAME}' -var 'storage_account_name=${env:STORAGE_ACCOUNT_NAME}' -var 'tenants=${env:TENANTS}'"],"verify":["Nessun errore nel plan"],"references":["infra/terraform/README.md","azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-ci-verify-ewctl-flyway-011","intent":"ci-verify-ewctl-flyway","question":"Come verifico i gates via ewctl e Flyway su una branch non-main?","tags":["ci","gates","flyway","ewctl"],"preconditions":["Azure DevOps collegato","Variable Group 'EasyWay-Secrets' con FLYWAY_URL, FLYWAY_USER, FLYWAY_PASSWORD","USE_EWCTL_GATES=true","FLYWAY_ENABLED=true"],"steps":["Crea branch 'ci-verify-ewctl' e push","Avvia manualmente la pipeline su questa branch","Verifica il job 'GovernanceGatesEWCTL' (usa ewctl con --logevent)","Controlla artifact: 'activity-log', 'gates-report' e, se presenti, 'db-drift' e 'checklist'","Verifica lo stage DB: 'FlywayValidateAny' gira su tutte le branch e 'FlywayMigrateDevelop' gira su develop"],"verify":["Artifact 'activity-log' pubblicato con events.jsonl aggiornato","'gates-report.json' pubblicato e coerente","Flyway validate completato; migrate eseguito su develop"],"rollback":["Ripristina USE_EWCTL_GATES/FLYWAY_ENABLED a 'false' se necessario"],"references":["azure-pipelines.yml","docs/ci/ewctl-gates.md","Wiki/EasyWayData.wiki/ci-verifica-ewctl-gates-e-flyway.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-argos-gates-activate-101","intent":"argos-gates-activate-ewctl","question":"Come attivo i Quality Gates ARGOS via ewctl in CI/CD?","tags":["argos","gates","ewctl","ci"],"preconditions":["Variabile pipeline USE_EWCTL_GATES=true","File 'scripts/ewctl.ps1' presente"],"steps":["Apri 'azure-pipelines.yml' e verifica il job 'GovernanceGatesEWCTL' con: pwsh scripts/ewctl.ps1 --engine ps --checklist --dbdrift --kbconsistency --noninteractive --logevent","Imposta USE_EWCTL_GATES=true nelle variabili di pipeline o nel file YAML","Esegui la pipeline e attendi il completamento dello stage 'BuildAndTest'","Verifica gli eventi registrati e l'esito dei gates"],"verify":["Job 'GovernanceGatesEWCTL' eseguito senza errori","Eventi scritti (agents/logs/events.jsonl o artifact 'activity-log')","Report gates pubblicato (se configurato)"],"rollback":["Imposta USE_EWCTL_GATES=false per tornare ai job legacy","Disabilita il job dalla pipeline se necessario"],"outputs":["agents/logs/events.jsonl","artifact 'activity-log'"],"references":["azure-pipelines.yml","AGENTS.md","Wiki/EasyWayData.wiki/argos/argos-quality-gates.md"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-argos-playbook-serialize-102","intent":"argos-playbook-serialize","question":"Come serializzo un Playbook ARGOS in YAML e lo valido?","tags":["argos","playbook","yaml","ci"],"preconditions":["Cartella 'docs/agentic/playbooks/' creata","Schema YAML disponibile (facoltativo)"],"steps":["Crea un file YAML per il playbook in 'docs/agentic/playbooks/pb-<ID>.yaml' con i campi: PB_ID,TITLE,VERSION,OWNER,MODE,SCOPE,TAGS,TRIGGERS,GUARDRAIL,PROCEDURA(steps),BACKOUT,KPI,PRIVACY","Aggiungi link alla Decision Trace e al ticket nel campo telemetria/output","(Facoltativo) Aggiungi un job in pipeline che validi lo schema YAML (es. con action/script dedicato)","Aggiorna la Wiki: 'Wiki/EasyWayData.wiki/argos/argos-playbook-catalog.md' con il nuovo PB"],"verify":["File YAML valido (review e/o schema check)","PB referenziato in Wiki e disponibile in indice"],"rollback":["Rinominare o spostare il file fuori da 'docs/agentic/playbooks'","Ripristinare la versione precedente dal controllo versione"],"outputs":["docs/agentic/playbooks/pb-<ID>.yaml"],"references":["Wiki/EasyWayData.wiki/argos/argos-playbook-catalog.md","Wiki/EasyWayData.wiki/argos/argos-quality-gates.md"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-argos-events-validate-103","intent":"argos-events-schema-validate","question":"Come valido gli Event Schema JSON degli eventi argos.* in CI?","tags":["argos","events","json-schema","ci"],"preconditions":["Node.js in CI","Cartelle 'docs/agentic/templates/events/schemas' e 'docs/agentic/templates/events/samples'"],"steps":["Salva gli schema in 'docs/agentic/templates/events/schemas/*.schema.json' (uno per evento: argos.run.completed, argos.gate.decision, …)","Aggiungi esempi payload in 'docs/agentic/templates/events/samples/*.json'","In pipeline, aggiungi uno step Node che valida: npx ajv validate -s docs/agentic/templates/events/schemas/*.schema.json -d docs/agentic/templates/events/samples/*.json","Pubblica il report di validazione come artifact"],"verify":["Build fallisce se un payload non rispetta lo schema","Artifact 'event-schema-report' pubblicato (se previsto)"],"rollback":["Rimuovere/Commentare lo step di validazione dalla pipeline","Ripristinare gli schema precedenti"],"outputs":["docs/agentic/templates/events/schemas","docs/agentic/templates/events/samples"],"references":["Wiki/EasyWayData.wiki/argos/argos-event-schema.md","azure-pipelines.yml"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-argos-generate-yaml-104","intent":"argos-generate-yaml","question":"Come genero YAML minimali (policy set / playbook) on-the-fly dalle configurazioni DB?","tags":["argos","yaml","generator","ci"],"preconditions":["Un job esporta le configurazioni da DB in JSON (registry/playbook)","Node.js disponibile in locale/CI"],"steps":["Esporta il Policy Set dal DB in JSON nel path: docs/agentic/templates/registry-sample/policy-set.sample.json (o un path equivalente)","Genera YAML policy set: node scripts/argos-generate-yaml.mjs --type policy-set --registry docs/agentic/templates/registry-sample/policy-set.sample.json --domain customer --flow orders --instance ord_v2_daily --out out/argos","(Opzionale) Genera YAML playbook: node scripts/argos-generate-yaml.mjs --type playbook --playbook docs/agentic/playbooks/pb-UNIQ-04.sample.json --out out/argos","Pubblica la cartella out/argos come artifact di pipeline"],"verify":["File YAML generati nella cartella out/argos","YAML minimali e coerenti con le configurazioni DB esportate"],"rollback":["Rimuovere lo step di generazione YAML dalla pipeline","Cambiare l'export JSON senza toccare lo script"],"outputs":["out/argos/policy-set.<domain>.<flow>.<instance>.yaml","out/argos/PB-*.yaml"],"references":["scripts/argos-generate-yaml.mjs","Wiki/EasyWayData.wiki/argos/argos-policy-dsl.md","Wiki/EasyWayData.wiki/argos/argos-playbook-catalog.md"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-wiki-llm-lint-105","intent":"wiki-llm-frontmatter-lint","question":"Come rendo obbligatorio il front‑matter LLM nell'intera Wiki (token‑savvy)?","tags":["wiki","llm","lint","ci"],"preconditions":["PowerShell 7+ in CI","scripts/wiki-frontmatter-lint.ps1 presente"],"steps":["Imposta ENABLE_WIKI_LLM_LINT=true nelle variabili di pipeline (default già true)","(Opzionale) Imposta WIKI_LLM_LINT_PATH='Wiki/EasyWayData.wiki' o un sotto-percorso per limitare l'ambito","Verifica in 'azure-pipelines.yml' lo stage Pre-Checks → job 'Wiki LLM Front-Matter Lint (Whole Wiki)'","Esegui la pipeline; se mancano i campi richiesti il job fallisce","Apri l'artifact 'wiki-frontmatter-lint' per il report JSON"],"verify":["Job lint eseguito correttamente","Report JSON pubblicato","Pagine senza front‑matter vengono segnalate/fail"],"rollback":["Imposta ENABLE_WIKI_LLM_LINT=false per disabilitare il gate temporaneamente","Restringi l'ambito con WIKI_LLM_LINT_PATH per rollout graduale"],"references":["scripts/wiki-frontmatter-lint.ps1","Wiki/EasyWayData.wiki/docs-conventions.md","azure-pipelines.yml"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-wiki-llm-autofix-106","intent":"wiki-llm-frontmatter-autofix","question":"Come normalizzo automaticamente il front‑matter sulle pagine Wiki mancanti e preparo una PR?","tags":["wiki","llm","autofix","ci"],"preconditions":["PowerShell 7+","Permessi di push su branch feature"],"steps":["Crea branch: git checkout -b chore/wiki-frontmatter-autofix","Esegui dry-run: pwsh scripts/wiki-frontmatter-autofix.ps1 -Path Wiki/EasyWayData.wiki -SummaryOut wiki-frontmatter-autofix.json","Apri il report JSON e rivedi i file con action=inserted/replaced_unterminated","Applica fix: pwsh scripts/wiki-frontmatter-autofix.ps1 -Path Wiki/EasyWayData.wiki -Apply","Riesegui lint: pwsh scripts/wiki-frontmatter-lint.ps1 -Path Wiki/EasyWayData.wiki -FailOnError","Commit: git add -A && git commit -m 'chore(wiki): normalize LLM front-matter'","Push: git push --set-upstream origin chore/wiki-frontmatter-autofix","Apri PR e completa la Checklist (vedi PULL_REQUEST_TEMPLATE.md)"],"verify":["Lint senza errori","Diff PR mostra solo aggiunta/sostituzione front‑matter"],"rollback":["git reset --hard HEAD~1 se necessario","Ripristina i file da main se alcuni front‑matter richiedono revisione manuale"],"references":["scripts/wiki-frontmatter-autofix.ps1","scripts/wiki-frontmatter-lint.ps1","PULL_REQUEST_TEMPLATE.md","Wiki/EasyWayData.wiki/docs-conventions.md"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-agent-dq-blueprint-201","intent":"dq-blueprint-from-file","question":"Come genero un blueprint DQ (Policy Proposal + Policy Set) da un file CSV/XLSX?","tags":["argos","dq","blueprint","agent","csv","xlsx"],"preconditions":["File CSV o XLSX di esempio","PowerShell 7+ oppure Node.js + ts-node","(opz.) heuristics v0: agents/agent_dq_blueprint/heuristics/heuristics.v0.json"],"steps":["PowerShell (Windows/Linux/Mac):","pwsh agents/agent_dq_blueprint/run.ps1 -Action blueprint-from-file -Input path/to/file.csv -Domain <domain_id> -Flow <flow_id> -Instance <instance_id> -Impact 0.5","Oppure Node (ts-node):","npx ts-node agents/agent_dq_blueprint/src/cli.ts --action blueprint-from-file --input path/to/file.csv --domain <domain_id> --flow <flow_id> --instance <instance_id> --impact 0.5","Rivedi l'output a console (summary) e i file generati in out/blueprint/","Apri out/blueprint/policy_proposals.json per le regole suggerite e out/blueprint/policy_set.json per il set minimo"],"verify":["Console mostra ok=true e conteggi (columns, rules_proposed)","Esistono i file out/blueprint/policy_proposals.json e out/blueprint/policy_set.json"],"outputs":["out/blueprint/policy_proposals.json","out/blueprint/policy_set.json"],"references":["Wiki/EasyWayData.wiki/agents/agent-dq-blueprint.md","agents/agent_dq_blueprint/manifest.json","agents/agent_dq_blueprint/heuristics/heuristics.v0.json","agents/agent_dq_blueprint/run.ps1","agents/agent_dq_blueprint/src/cli.ts","docs/agentic/templates/policy-proposal.template.yaml","docs/agentic/templates/flow-onboarding.template.yaml"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-orch-intents-stubs-301","intent":"wf-excel-csv-upload-stubs","question":"Come provo gli stub CLI degli agent per il workflow Excel/CSV→Dashboard?","tags":["orchestration","intents","cli","stubs"],"preconditions":["Node.js 18+","Un file CSV semplice con header (es. Data,Descrizione,Categoria,Importo,Tipo,Valuta,Conto)","Permessi di scrittura nella cartella 'out/'"],"steps":["1) Ingest: node scripts/intents/ingest.upload-file.mjs --file path/to/file.csv --user u01 --tenant t01 --domain customer --flow personal_finance --instance pf_tx_monthly > out1.json","2) Leggi run/job: RUN=$(jq -r .run_id out1.json); SAMPLE=$(jq -r .sample_preview_path out1.json); HEADERS=$(jq -r '.headers|join(",")' out1.json)","3) DQ: node scripts/intents/dq.validate.mjs --run_id $RUN --headers \"$HEADERS\" --sample_preview_path $SAMPLE > out2.json","4) Mapping suggest: node scripts/intents/schema.map-suggest.mjs --headers \"$HEADERS\" > out3.json","5) Mapping apply: node scripts/intents/schema.map-apply.mjs --run_id $RUN --mapping_json out3.json --save_template true --template_name pf_default > out4.json","6) Staging: node scripts/intents/etl.load-staging.mjs --run_id $RUN --landing_path $(jq -r .landing_path out1.json) --mapping_template_id $(jq -r .mapping_template_id out4.json) > out5.json","7) Merge: node scripts/intents/etl.merge-target.mjs --run_id $RUN --staging_table $(jq -r .staging_table out5.json) > out6.json","8) Views: node scripts/intents/analytics.materialize-defaults.mjs --instance_id pf_tx_monthly --target_table $(jq -r .target_table out6.json) > out7.json"],"verify":["Ogni step stampa JSON con i campi previsti dagli intent","Cartelle out/ingest, out/dq, out/mapping, out/etl, out/analytics contengono i file generati"],"rollback":["Elimina o ripulisci la cartella 'out/'"],"references":["Wiki/EasyWayData.wiki/orchestrations/intents-catalog.md","docs/agentic/templates/orchestrations/wf.excel-csv-upload.manifest.json","docs/agentic/templates/mapping.entrate-uscite.template.yaml"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-whatfirst-lint-401","intent":"whatfirst-lint","question":"Come verifico che il metodo WHAT‑first + Diario di Bordo sia rispettato in repo (lint)?","tags":["what-first","lint","ci","docs"],"preconditions":["PowerShell 7+","docs/agentic/templates/orchestrations/ e /intents presenti"],"steps":["Esegui localmente: pwsh scripts/whatfirst-lint.ps1 -FailOnError -SummaryOut whatfirst-lint.json","Apri whatfirst-lint.json per vedere i file mancanti o non validi","Su CI verifica il job 'WHAT-first + Diary Lint' nello stage Pre-Checks"],"verify":["Job CI passa; whatfirst-lint.json ok=true"],"rollback":["Aggiungi i file mancanti: manifest, intents, ux_prompts"],"references":["AGENTS.md","scripts/whatfirst-lint.ps1","azure-pipelines.yml","Wiki/EasyWayData.wiki/orchestrations/wf-excel-csv-upload.md"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-howto-what-first-team-402","intent":"howto-what-first-team","question":"Come applico il metodo WHAT‑first + Diario di Bordo in PR (lint e punti di review)?","tags":["what-first","lint","review","ci","docs"],"preconditions":["PowerShell 7+","Node.js 18+","Accesso alla pipeline CI"],"steps":["1) Lint front‑matter Wiki: pwsh scripts/wiki-frontmatter-lint.ps1 -Path Wiki/EasyWayData.wiki -FailOnError -SummaryOut wiki-frontmatter-lint.json","2) Lint WHAT‑first: pwsh scripts/whatfirst-lint.ps1 -FailOnError -SummaryOut whatfirst-lint.json","3) (Facoltativo) Validazione schemi eventi: cd docs/agentic/templates/events && npx -y ajv-cli@5 validate -r schemas/common.schema.json -s schemas/*.schema.json -d samples/*.json --spec=draft2020 --strict=false | tee ../../../../event-schema-validate.log","4) Verifica PR Checklist: apri PULL_REQUEST_TEMPLATE.md e compila la sezione WHAT‑first (manifest, intents, UX prompts, pagina Wiki)","5) Controlla CI: jobs 'Wiki LLM Front‑Matter Lint', 'WHAT-first + Diary Lint' e 'Events JSON Schema Validation' devono passare"],"verify":["File wiki-frontmatter-lint.json e whatfirst-lint.json mostrano ok=true","Se usato, event-schema-validate.log non riporta errori","Sezione WHAT‑first della PR è completa"],"outputs":["wiki-frontmatter-lint.json","whatfirst-lint.json","event-schema-validate.log (opz.)"],"references":["Wiki/EasyWayData.wiki/howto-what-first-team.md","AGENTS.md","PULL_REQUEST_TEMPLATE.md","azure-pipelines.yml"],"updated":"2025-10-27T00:00:00Z"}
{"id":"kb-ado-vg-006","intent":"ado-variable-group","question":"Come creo/aggiorno il Variable Group in ADO?","tags":["ado","variables"],"steps":["pwsh scripts/ado-set-variable-group.ps1 -OrgUrl <ORG> -Project <PROJ> -Pat <PAT> -GroupName EasyWay-Secrets -VariablesJsonPath scripts/variables/easyway-secrets.sample.json -SecretsKeys 'AZURE_STORAGE_CONNECTION_STRING,DB_CONN_STRING'"],"verify":["Variable Group aggiornato"],"references":["scripts/ado-set-variable-group.ps1","scripts/variables/easyway-secrets.sample.json"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-db-docs-007","intent":"db-generate-docs","question":"Come genero ERD e catalogo SP?","tags":["db","docs"],"steps":["cd EasyWay-DataPortal/easyway-portal-api","npm run db:generate-docs"],"verify":["Wiki/EasyWayData.wiki/.../ERD.md aggiornato"],"references":["EasyWay-DataPortal/easyway-portal-api/src/tools/db/generate-docs.ts"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-db-drift-008","intent":"db-drift-check","question":"Come verifico mancanze di oggetti DB?","tags":["db","quality"],"steps":["cd EasyWay-DataPortal/easyway-portal-api","npm run db:drift"],"verify":["report.ok=true"],"references":["EasyWay-DataPortal/easyway-portal-api/src/tools/db/drift-check.ts","scripts/variables/db-required-objects.sample.json"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-branding-009","intent":"branding-upload","question":"Come carico il branding yaml in dev?","tags":["storage","branding"],"steps":["Creare container 'portal-assets'","Caricare 'config/branding.tenant01.yaml' (vedi datalake-sample) in Blob/Azurite"],"verify":["/portal/tenant/tenant01 usa colori/logo"],"references":["EasyWay-DataPortal/easyway-portal-api/datalake-sample/branding.tenant01.yaml","EasyWay-DataPortal/easyway-portal-api/src/config/brandingLoader.ts"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-db-generate-012","intent":"db-generate-artifacts","question":"Come genero DDL+SP da un mini-DSL JSON?","tags":["db","generator","dsl","flyway"],"preconditions":["Node.js installato","Template presenti in docs/agentic/templates"],"steps":["Salva il DSL in es. dsl/user.json (vedi Wiki)","node agents/core/generate-db-artifacts.js --in dsl/user.json --out db/flyway/sql","Controlla il file VYYYYMMDDHHMMSS__PORTAL_users_generated.sql","Esegui 'FlywayValidateAny' in CI o flyway validate in locale"],"verify":["File generato con DDL e SP conformi ai template","flyway validate OK"],"references":["Wiki/EasyWayData.wiki/db-generate-artifacts-dsl.md","agents/core/generate-db-artifacts.js","docs/agentic/AGENTIC_READINESS.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-ci-enforcer-013","intent":"ci-enforcer-check","question":"Perché e come usare EnforcerCheck in CI?","tags":["ci","guardrail","governance"],"steps":["Aggiunge stage 'PreChecks' e job 'EnforcerCheck' in pipeline (già presente)","Il job esegue scripts/enforcer.ps1 per agent_governance, agent_docs_review, agent_pr_manager","Configura il job EnforcerCheck come 'required' nelle Branch Policies per PR verso develop/main"],"verify":["PR con modifiche fuori dagli allowed_paths fallisce su EnforcerCheck"],"references":["azure-pipelines.yml","docs/ci/ewctl-gates.md","Wiki/EasyWayData.wiki/enforcer-guardrail.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-ado-required-job-014","intent":"ado-required-enforcer","question":"Come marcare EnforcerCheck come 'Required' nelle PR?","tags":["ado","branch-policies","governance"],"steps":["Repos > Branches > develop > Branch policies","Build validation > Add policy > seleziona pipeline CI","Imposta Required=ON, Automatic, salva","Ripeti per main"],"verify":["Le PR mostrano EnforcerCheck come check richiesto"],"references":["Wiki/EasyWayData.wiki/checklist-ado-required-job.md","Wiki/EasyWayData.wiki/enforcer-guardrail.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-agent-priority-methodology-015","intent":"agent-priority-methodology","question":"Come adottare la metodologia priority/mandatory per tutti gli agenti?","tags":["agents","governance","methodology"],"steps":["Per ogni agente, aggiungi agents/<agent>/priority.json basato su agents/core/templates/priority.template.json","Integra gli script dell’agente con scripts/agent-priority.ps1 e mostra checklist solo quando richiesto","Aggiungi Wiki/EasyWayData.wiki/agent-priority-and-checklists.md alle knowledge_sources del manifest","Verifica in PR che la checklist compaia nei casi previsti"],"verify":["Checklists proposte solo quando le regole matchano","Branch principali e cambi DB/pipeline triggerano mandatory"],"references":["Wiki/EasyWayData.wiki/agent-priority-and-checklists.md","agents/core/schemas/agent-priority.schema.json","agents/core/templates/priority.template.json"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-portal-demo-010","intent":"portal-login-register","question":"Come provo login & registrazione dalla demo?","tags":["portal","auth"],"steps":["Impostare AUTH_CLIENT_ID e AUTH_TENANT_ID in .env.local","Aprire http://localhost:3000/portal/app","Login con Microsoft e registrare utente"],"verify":["/api/onboarding 201","/api/users elenca l'utente"],"references":["EasyWay-DataPortal/easyway-portal-api/src/routes/portal.ts"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-dual-db-mode-030","intent":"db-dual-mode","question":"Come attivo il DB dual-mode (mock|sql) in locale?","tags":["db","dev","costs"],"steps":["Impostare DB_MODE=mock in .env.local per usare file JSON locale","Avviare l'API: cd EasyWay-DataPortal/easyway-portal-api && npm run dev","Testare: GET /api/users (serve JWT valido) restituisce i dati da data/dev-users.json","Passare a SQL impostando DB_MODE=sql e variabili DB_* (o DB_CONN_STRING)"],"verify":["Con DB_MODE=mock, crea utente e persiste in data/dev-users.json","Con DB_MODE=sql, le stesse API usano Azure SQL"],"references":["EasyWay-DataPortal/easyway-portal-api/src/repositories","EasyWay-DataPortal/easyway-portal-api/src/controllers/usersController.ts"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-first-quickstart-040","intent":"agent-first-quickstart","question":"Qual è il metodo di lavoro agent-first in EasyWay?","tags":["agents","governance","onboarding"],"steps":["Leggere agent-first-method.md e intent-contract.md nella Wiki","Usare scripts/ewctl.ps1 come entrypoint comune","Aggiornare sempre KB (agents/kb/recipes.jsonl) e una pagina Wiki con ogni modifica","Verificare gates (Checklist/DB Drift/KB Consistency) prima del merge"],"verify":["Ricetta KB e pagina Wiki aggiornate","Eventi presenti in agents/logs/events.jsonl"],"references":["AGENTS.md","Wiki/EasyWayData.wiki/agent-first-method.md","Wiki/EasyWayData.wiki/intent-contract.md"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-template-echo-050","intent":"agent-template-echo","question":"Come eseguo il template agente (sample:echo)?","tags":["agents","template"],"steps":["pwsh scripts/ewctl.ps1 --engine ps --intent sample-echo","Oppure: pwsh scripts/agent-template.ps1 -Action sample:echo -IntentPath agents/agent_template/templates/intent.sample.json -NonInteractive -LogEvent"],"verify":["Output JSON stampato a console","Riga evento in agents/logs/events.jsonl se usi -LogEvent"],"references":["agents/agent_template/README.md","scripts/agent-template.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dba-db-user-create-060","intent":"db-user-create","question":"Come creo un utente DB (contained) con l'agente DBA?","tags":["agents","dba","security"],"steps":["Apri e adatta l'intent: agents/agent_dba/templates/intent.db-user-create.sample.json","Esegui: pwsh scripts/ewctl.ps1 --engine ps --intent db-user-create","(Anteprima) Lo script stampa output JSON con dati utente e password masked","(Passo successivo) Integrare sqlcmd e Key Vault per esecuzione reale"],"verify":["Output JSON con username/ruoli","Evento log (se -LogEvent)"],"references":["agents/agent_dba/manifest.json","scripts/agent-dba.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dba-db-user-rotate-061","intent":"db-user-rotate","question":"Come ruoto la password di un utente DB?","tags":["agents","dba","security"],"steps":["Apri e adatta l'intent: agents/agent_dba/templates/intent.db-user-rotate.sample.json","Esegui: pwsh scripts/ewctl.ps1 --engine ps --intent db-user-rotate"],"verify":["Output JSON con executed=true (se whatIf=false)","Nuova versione secret in Key Vault se abilitato"],"references":["agents/agent_dba/manifest.json","scripts/agent-dba.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dba-db-user-revoke-062","intent":"db-user-revoke","question":"Come revoco un utente DB?","tags":["agents","dba","security"],"steps":["Apri e adatta l'intent: agents/agent_dba/templates/intent.db-user-revoke.sample.json","Esegui: pwsh scripts/ewctl.ps1 --engine ps --intent db-user-revoke"],"verify":["Output JSON executed=true (se whatIf=false)","Utente assente in sys.database_principals"],"references":["agents/agent_dba/manifest.json","scripts/agent-dba.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dba-db-user-create-070","intent":"db-user-create","question":"Esempio output (stateBefore/stateAfter) della creazione utente","tags":["agents","dba","examples"],"steps":["Eseguire in WhatIf per validare lo stato prima dell'applicazione"],"example_output":{"action":"db-user:create","whatIf":true,"output":{"username":"svc_tenant01_writer","roles":["portal_reader","portal_writer"],"auth":"aad","executed":false,"stateBefore":{"readerExists":true,"writerExists":true,"userExists":false,"memberReader":false,"memberWriter":false},"stateAfter":null}},"references":["scripts/agent-dba.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dba-db-user-rotate-071","intent":"db-user-rotate","question":"Esempio output (stateBefore/stateAfter) della rotazione password","tags":["agents","dba","examples"],"steps":["Eseguire in WhatIf per vedere lo stato senza modifiche"],"example_output":{"action":"db-user:rotate","whatIf":true,"output":{"username":"svc_tenant01_writer","auth":"aad","executed":false,"stateBefore":{"readerExists":true,"writerExists":true,"userExists":true,"memberReader":true,"memberWriter":true},"stateAfter":null}},"references":["scripts/agent-dba.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dba-db-user-revoke-072","intent":"db-user-revoke","question":"Esempio output (stateBefore/stateAfter) della revoca utente","tags":["agents","dba","examples"],"steps":["Eseguire in WhatIf per stimare l'effetto","Eseguire senza WhatIf per applicare"],"example_output":{"action":"db-user:revoke","whatIf":true,"output":{"username":"svc_tenant01_writer","auth":"aad","executed":false,"stateBefore":{"readerExists":true,"writerExists":true,"userExists":true,"memberReader":true,"memberWriter":true},"stateAfter":null}},"references":["scripts/agent-dba.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dlk-ensure-structure-080","intent":"dlk-ensure-structure","question":"Ensure Structure (WhatIf): che output mi aspetto?","tags":["datalake","whatif","examples"],"steps":["Eseguire in WhatIf: mostra differenze (missing container/path, naming drift)","Applicare solo dopo verifica"],"example_output":{"action":"dlk-ensure-structure","whatIf":true,"output":{"changesPreview":[{"type":"create-container","name":"dlk-tenant01-raw"},{"type":"create-path","path":"raw/tenant01/landing/"}]}},"references":["Wiki/EasyWayData.wiki/datalake-ensure-structure.md"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dlk-ensure-structure-080a","intent":"dlk-ensure-structure","question":"Come fornisco i path correnti (provider locale)?","tags":["datalake","whatif","inputs"],"steps":["Nel template aggiungi params.currentPaths oppure params.currentPathsFile","Se usi il file: JSON con { paths:[\"landing/tenant01/\", \"...\"] } oppure testo con un path per riga"],"verify":["L'output mostra expectedPaths e changesPreview coerenti"],"references":["Wiki/EasyWayData.wiki/datalake-ensure-structure.md","scripts/agent-datalake.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dlk-apply-acl-081","intent":"dlk-apply-acl","question":"Apply ACL (WhatIf): che output mi aspetto?","tags":["datalake","security","whatif","examples"],"steps":["Eseguire in WhatIf: mostra ACL correnti vs proposte e conflitti"],"example_output":{"action":"dlk-apply-acl","whatIf":true,"output":{"diff":[{"path":"raw/tenant01","current":"r-x","proposed":"rwx","principal":"svc_tenant01_writer"}]}},"references":["Wiki/EasyWayData.wiki/datalake-apply-acl.md"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-agent-dlk-set-retention-082","intent":"dlk-set-retention","question":"Retention (WhatIf): che output mi aspetto?","tags":["datalake","retention","whatif","examples"],"steps":["Eseguire in WhatIf: mostra policy proposte (path→days)","Applicare dopo verifica"],"example_output":{"action":"dlk-set-retention","whatIf":true,"output":{"policies":[{"path":"landing/","days":180,"change":"create_or_update"},{"path":"official/","days":null,"change":"noop"}]}},"references":["Wiki/EasyWayData.wiki/datalake-set-retention.md"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-dba-verify-connect-063","intent":"dba-verify-connect","question":"Come verifico con una SELECT lo stato del DB (ruoli/utente)?","tags":["dba","verify","whatif"],"steps":["Eseguire: pwsh scripts/db-verify-connect.ps1 -ConnString $env:DB_ADMIN_CONN_STRING -CheckUser svc_tenant01_writer","Oppure AAD: pwsh scripts/db-verify-connect.ps1 -Server tcp:... -Database ... -AAD -CheckUser ..."],"verify":["ok=true","roles.reader/roles.writer valorizzati","userExists true/false"],"references":["scripts/db-verify-connect.ps1"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-enable-rls-011","intent":"db-enable-rls","question":"Come abilito la Row-Level Security (RLS) su USERS?","tags":["db","rls"],"preconditions":["Connessione SQL con privilegi"],"steps":["sqlcmd -S <server> -d <db> -Q \"ALTER SECURITY POLICY PORTAL.RLS_TENANT_POLICY_USERS WITH (STATE = ON);\""],"verify":["SELECT * FROM sys.security_policies WHERE name='RLS_TENANT_POLICY_USERS' mostra state ON"],"references":["db/flyway/sql/V5__rls_setup.sql"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-deploy-appservice-012","intent":"deploy-appservice","question":"Come deployo l'API su Azure App Service (dev)?","tags":["deploy","azure"],"preconditions":["az login","Resource Group e App Service esistenti o permessi di creazione"],"steps":["az webapp up -n <appName> -g <rg> -l westeurope --runtime \"NODE|20-lts\"","az webapp config appsettings set -g <rg> -n <appName> --settings AUTH_ISSUER=... AUTH_JWKS_URI=... AUTH_CLIENT_ID=... AUTH_TENANT_ID=... DB_CONN_STRING=... AZURE_STORAGE_CONNECTION_STRING=... BRANDING_CONTAINER=portal-assets BRANDING_PREFIX=config","az webapp restart -g <rg> -n <appName>"],"verify":["curl https://<appName>.azurewebsites.net/api/health -> 401 (auth richiesta)","/portal risponde"],"references":["EasyWay-DataPortal/easyway-portal-api/README.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-teams-check-013","intent":"teams-post-checklist","question":"Come invio l'esito Checklist su Teams?","tags":["teams","checklist"],"preconditions":["Teams Incoming Webhook URL"],"steps":["pwsh scripts/checklist.ps1 -JsonOnly","curl -H 'Content-Type: application/json' -d @checklist.json <TEAMS_WEBHOOK_URL>"],"verify":["Messaggio ricevuto nel canale Teams"],"references":["scripts/checklist.ps1","azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-agent-ready-audit-501","intent":"agent-ready-audit","question":"Come verifico automaticamente se la repo è 'agent-ready' (a monte)?","tags":["agent-ready","audit","docs","what-first","retrieval","kb","lint"],"preconditions":["PowerShell 7+","Wiki e templates presenti"],"steps":["pwsh scripts/agent-ready-audit.ps1 -Mode all -FailOnError -SummaryOut agent-ready-audit.json","Apri agent-ready-audit.json e risolvi gli errori prima dei warning"],"verify":["agent-ready-audit.json ok=true"],"outputs":["agent-ready-audit.json"],"references":["docs/agentic/templates/docs/agent-ready-rubric.json","scripts/agent-ready-audit.ps1","Wiki/EasyWayData.wiki/docs-agentic-audit.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-wiki-draft-hygiene-fix-502","intent":"wiki-draft-hygiene-fix","question":"Come riduco il rumore delle pagine draft aggiungendo next/updated (a fasi)?","tags":["docs","wiki","draft","hygiene","lint"],"preconditions":["PowerShell 7+","Scope definito in tag-taxonomy.scopes.json"],"steps":["1) Stima issue (warning): pwsh scripts/wiki-frontmatter-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName <SCOPE> -DraftHygiene warn -SummaryOut fm.<SCOPE>.json","2) Applica fix scoped: pwsh scripts/wiki-frontmatter-patch.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName <SCOPE> -EnsureDraftHygiene -Apply -SummaryOut fm.patch.<SCOPE>.json","3) Verifica: pwsh scripts/wiki-frontmatter-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName <SCOPE> -DraftHygiene warn -FailOnError -SummaryOut fm.<SCOPE>.post.json"],"verify":["fm.<SCOPE>.post.json draftIssues=0"],"outputs":["fm.<SCOPE>.json","fm.patch.<SCOPE>.json","fm.<SCOPE>.post.json"],"references":["scripts/wiki-frontmatter-lint.ps1","scripts/wiki-frontmatter-patch.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-agentic-audit.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-wiki-gap-report-503","intent":"wiki-gap-report","question":"Come genero un gap report per la documentazione (owner/summary/draft hygiene + sezioni minime) per uno scope?","tags":["docs","wiki","audit","gap","agent-ready"],"preconditions":["PowerShell 7+","Scope definito in tag-taxonomy.scopes.json"],"steps":["pwsh scripts/wiki-gap-report.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName <SCOPE> -SummaryOut wiki-gap.<SCOPE>.json","Apri wiki-gap.<SCOPE>.json e usa counts.* per prioritizzare i fix"],"verify":["wiki-gap.<SCOPE>.json files>0 e counts popolati"],"outputs":["wiki-gap.<SCOPE>.json"],"references":["scripts/wiki-gap-report.ps1","Wiki/EasyWayData.wiki/docs-agentic-audit.md","docs/agentic/templates/docs/tag-taxonomy.scopes.json"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-wiki-gap-report-ci-504","intent":"ci-wiki-gap-report","question":"Come funziona il gate CI per wiki-gap-report (phased/all) e come lo riproduco in locale?","tags":["ci","docs","wiki","gates","gap"],"preconditions":["PowerShell 7+","Repo clonato"],"steps":["CI: job `WikiGapReport` in `azure-pipelines.yml` (toggle `ENABLE_WIKI_GAP_REPORT=true|false`)","Modalità phased (default): esegue `wiki-gap-report` su scope curati (es. db-datalake-20, portal-api-frontend-20, ...) e pubblica artifact `wiki-gap-report/`","Modalità all: imposta variabile `WIKI_GAP_MODE=all` e il job genera `wiki-gap-report/wiki-gap.all.json`","Locale (phased su uno scope): pwsh scripts/wiki-gap-report.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName <SCOPE> -FailOnError -SummaryOut wiki-gap.<SCOPE>.json"],"verify":["In CI: artifact `wiki-gap-report` presente e job verde","In locale: exit code 0 con -FailOnError quando non ci sono gap"],"outputs":["wiki-gap.<SCOPE>.json","wiki-gap-report/wiki-gap.*.json (CI artifact)"],"references":["azure-pipelines.yml","scripts/wiki-gap-report.ps1","Wiki/EasyWayData.wiki/docs-agentic-audit.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-portal-basepath-014","intent":"set-portal-base-path","question":"Come cambio il base path del mini‑portale?","tags":["portal","config"],"steps":["Impostare PORTAL_BASE_PATH=/myportal in .env.local o App Settings","Riavviare l'applicazione"],"verify":["GET http://localhost:3000/myportal risponde"],"references":["EasyWay-DataPortal/easyway-portal-api/src/app.ts","EasyWay-DataPortal/easyway-portal-api/src/routes/portal.ts","Wiki/EasyWayData.wiki/PARAMETRIZATION_BEST_PRACTICES.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-rate-limit-015","intent":"set-rate-limit","question":"Come imposto il rate limit a 120 richieste/minuto?","tags":["security","config"],"steps":["Impostare RATE_LIMIT_WINDOW_MS=60000 e RATE_LIMIT_MAX=120 in .env.local o App Settings","Riavviare l'applicazione"],"verify":["Verificare con test di carico che oltre 120 req/min riceva 429"],"references":["EasyWay-DataPortal/easyway-portal-api/src/app.ts","Wiki/EasyWayData.wiki/PARAMETRIZATION_BEST_PRACTICES.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-log-dir-016","intent":"set-log-dir","question":"Come cambio la cartella dei log dell'API?","tags":["logging","config"],"steps":["Impostare LOG_DIR (es. LOG_DIR=logs_dev) in .env.local oppure come App Setting su App Service","Riavviare l'applicazione"],"verify":["Verificare la creazione di <LOG_DIR>/business.log.json ed <LOG_DIR>/error.log.json"],"references":["EasyWay-DataPortal/easyway-portal-api/src/utils/logger.ts","EasyWay-DataPortal/easyway-portal-api/README.md","Wiki/EasyWayData.wiki/PARAMETRIZATION_BEST_PRACTICES.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-toggle-gates-017","intent":"toggle-pipeline-gates","question":"Come abilito/disabilito rapidamente i gates in pipeline (Checklist/Drift/KB)?","tags":["pipeline","ado","governance"],"steps":["In Azure DevOps → Pipelines → Run pipeline: aggiungere le variabili ENABLE_CHECKLIST, ENABLE_DB_DRIFT, ENABLE_KB_CONSISTENCY con valori 'true'/'false'","Oppure modificare temporaneamente azure-pipelines.yml impostando le variabili sotto 'variables:'","(Opzionale) Spostare i toggle in un Variable Group per gestione centralizzata e ricaricarli nella pipeline"],"verify":["Esecuzione mostra/skip dei job corrispondenti secondo le condizioni"],"references":["azure-pipelines.yml","ci/versions.yml","Wiki/EasyWayData.wiki/PARAMETRIZATION_BEST_PRACTICES.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-ado-rest-toggle-018","intent":"ado-toggle-gates-rest","question":"Come aggiorno i toggle dei gates (ENABLE_CHECKLIST/DB_DRIFT/KB_CONSISTENCY) via REST API di Azure DevOps?","tags":["pipeline","ado","rest","governance"],"preconditions":["PAT ADO con permesso Variable Groups","OrgUrl e Project"],"steps":["$pat='<PAT>'; $org='https://dev.azure.com/<org>'; $project='<project>'; $group='EasyWay-Secrets'","# PowerShell (consigliato):","pwsh scripts/ado-set-variable-group.ps1 -OrgUrl $org -Project $project -Pat $pat -GroupName $group -Variables @{ ENABLE_CHECKLIST='true'; ENABLE_DB_DRIFT='false'; ENABLE_KB_CONSISTENCY='true' }","# REST raw (curl):","# 1) Basic auth header: echo -n :$PAT | base64","# 2) GET id del Variable Group: GET $org/$project/_apis/distributedtask/variablegroups?api-version=7.1-preview.2","# 3) PUT il body aggiornato (includendo tutte le variabili esistenti + i toggle):","curl -H 'Authorization: Basic <base64(:PAT)>' -H 'Content-Type: application/json' -X PUT -d @body.json $org/$project/_apis/distributedtask/variablegroups/<VG_ID>?api-version=7.1-preview.2"],"verify":["Nuova esecuzione di pipeline rispetta i toggle (job condizionati)"],"references":["scripts/ado-set-variable-group.ps1","azure-pipelines.yml","Wiki/EasyWayData.wiki/PARAMETRIZATION_BEST_PRACTICES.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-update-versions-019","intent":"ci-update-tool-versions","question":"Come aggiorno le versioni di Node/Flyway/Terraform usate in CI?","tags":["ci","versions","governance"],"steps":["Aprire ci/versions.yml","Aggiornare node_version (es. '22.x'), flyway_version (es. '9.22.3'), terraform_version (es. '1.9.5')","Salvare e aprire PR","Verificare nei log pipeline che NodeTool/Flyway/Installer usino le nuove versioni"],"verify":["Task NodeTool@0 usa $(node_version)","Job Flyway install scarica la versione aggiornata","(Se configurato) terraform usa la versione attesa"],"references":["ci/versions.yml","azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-enable-otel-020","intent":"enable-otel","question":"Come abilito OpenTelemetry + Application Insights in Dev/Test?","tags":["observability","otel","appinsights"],"steps":["Creare/recuperare un Application Insights e copiare la Connection String","Impostare in .env.local: APPLICATIONINSIGHTS_CONNECTION_STRING=<conn>, OTEL_ENABLED=true","(Opzionale) OTEL_RESOURCE_ATTRIBUTES=service.name=easyway-portal-api,service.namespace=easyway,deployment.environment=dev","Riavviare l'app","Verificare in App Insights: requests/dependencies visibili"],"verify":["requests | order by timestamp desc","dependencies | where type in ('SQL','http')"],"references":["EasyWay-DataPortal/easyway-portal-api/src/observability/tracing.ts","EasyWay-DataPortal/easyway-portal-api/.env.example","Wiki/EasyWayData.wiki/EasyWay_WebApp/05_codice_easyway_portale/security-and-observability.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-deploy-stage-021","intent":"enable-deploy-stage","question":"Come abilito lo stage di Deploy su Azure App Service?","tags":["deploy","azure","pipeline"],"steps":["Creare una Service Connection in ADO (Azure RM) e definire WEBAPP_NAME/RESOURCE_GROUP","Aggiungere in Variable Group: AZURE_SERVICE_CONNECTION, WEBAPP_NAME, RESOURCE_GROUP","Impostare ENABLE_DEPLOY=true (variabile pipeline)","Eseguire la pipeline; verificare lo stage Deploy"],"verify":["App Service risponde a /portal e /api/docs"],"references":["azure-pipelines.yml","EasyWay-DataPortal/easyway-portal-api/README.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-deploy-stage-toggle-022","intent":"deploy-stage-toggle","question":"Come abilito/disabilito rapidamente lo stage Deploy?","tags":["deploy","pipeline","toggle"],"steps":["Impostare ENABLE_DEPLOY=true/false nella pipeline (Run pipeline) oppure nel Variable Group","Definire AZURE_SERVICE_CONNECTION, WEBAPP_NAME, RESOURCE_GROUP","(Opzionale) WEBAPP_SLOT per deployment su slot"],"verify":["Lo stage Deploy appare/scompare ed esegue il deploy quando abilitato"],"references":["azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-deploy-slot-swap-023","intent":"deploy-slot-swap","question":"Come deployo su uno slot e poi swappo controllatamente?","tags":["deploy","slot","azure"],"steps":["Impostare ENABLE_DEPLOY=true","Definire AZURE_SERVICE_CONNECTION, WEBAPP_NAME, RESOURCE_GROUP","Impostare WEBAPP_SLOT=staging","(Facoltativo) Abilitare ENABLE_SWAP=true per eseguire lo swap verso production"],"verify":["Verificare su Azure Portal che lo slot staging sia aggiornato e (se abilitato) lo swap completato"],"references":["azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-test-mock-jwt-024","intent":"test-mock-jwt","question":"Come eseguo un test positivo con JWT mockato?","tags":["test","jwt","supertest"],"steps":["Eseguire 'npm test' in EasyWay-DataPortal/easyway-portal-api","Il test __tests__/auth_positive.test.ts genera una coppia di chiavi e imposta AUTH_TEST_JWKS in env per validare localmente","Il token include il claim 'ew_tenant_id' e consente di accedere a /api/health"],"verify":["I test passano (200 su /api/health con token valido)"],"references":["EasyWay-DataPortal/easyway-portal-api/src/middleware/auth.ts","EasyWay-DataPortal/easyway-portal-api/__tests__/auth_positive.test.ts"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-starter-appsettings-026","intent":"apply-appsettings-starter","question":"Come applico lo starter JSON degli App Settings via Azure CLI e REST ARM?","tags":["deploy","appsettings","azure","cli","rest"],"preconditions":["az login","Permessi su Resource Group/WebApp"],"steps":["# Azure CLI (singole chiavi):","az webapp config appsettings set -g <RESOURCE_GROUP> -n <WEBAPP_NAME> --settings AUTH_ISSUER=https://login.microsoftonline.com/<TENANT_ID>/v2.0 AUTH_JWKS_URI=https://login.microsoftonline.com/<TENANT_ID>/discovery/v2.0/keys DEFAULT_TENANT_ID=tenant01 PORTAL_BASE_PATH=/portal","# Azure CLI (da file JSON): crea appsettings.json (array di oggetti {name,value}), quindi:","az webapp config appsettings set -g <RESOURCE_GROUP> -n <WEBAPP_NAME> --settings @appsettings.json","# REST ARM (via az rest, consigliato da file): crea appsettings.body.json con {properties:{...}} e poi:","az rest --method POST --uri https://management.azure.com/subscriptions/<SUB_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Web/sites/<WEBAPP_NAME>/config/appsettings?api-version=2022-03-01 --body @appsettings.body.json"],"verify":["In Azure Portal → Configuration compaiono le nuove chiavi","L'app usa i valori aggiornati (riavvio automatico o forzato)"],"references":["Wiki/EasyWayData.wiki/DEPLOY_APP_SERVICE.md","azure-pipelines.yml"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-generate-appsettings-027","intent":"generate-appsettings-from-env","question":"Come genero appsettings.json a partire da .env.local (per flusso agentico)?","tags":["deploy","appsettings","automation"],"steps":["pwsh scripts/generate-appsettings.ps1 -ApiPath EasyWay-DataPortal/easyway-portal-api -OutDir ./out","Verranno creati: out/appsettings.cli.json (per az CLI) e out/appsettings.task.json (per AzureAppServiceSettings@1)","Applicare con: az webapp config appsettings set --settings @out/appsettings.cli.json oppure usare il file task nella pipeline"],"verify":["File generati e applicati; App Service mostra le chiavi in Configuration"],"references":["scripts/generate-appsettings.ps1","Wiki/EasyWayData.wiki/DEPLOY_APP_SERVICE.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-sync-appsettings-guardrail-028","intent":"sync-appsettings-guardrail","question":"Come supero il guardrail per sincronizzare App Settings su main/prod?","tags":["deploy","governance","appsettings"],"steps":["In Azure DevOps → Run pipeline, impostare ENABLE_SYNC_APPSETTINGS=true","Se il branch è main o ENVIRONMENT=prod, impostare anche GOV_APPROVED=true (approvazione Governance)","Impostare AZURE_SERVICE_CONNECTION, WEBAPP_NAME, RESOURCE_GROUP, (opz.) WEBAPP_SLOT","Eseguire pipeline; il job 'Sync App Settings from .env.local' verrà eseguito in sicurezza"],"verify":["Il job di Sync viene eseguito solo con GOV_APPROVED=true su main/prod","App Service mostra le chiavi aggiornate"],"references":["azure-pipelines.yml","Wiki/EasyWayData.wiki/DEPLOY_APP_SERVICE.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-activity-gov-approved-029","intent":"activity-gov-approved","question":"Come leggo gli eventi con approvazione Governance (govApproved=true) via API?","tags":["activity","audit","ams"],"steps":["# Bash + jq:","curl -s http://localhost:3000/api/docs/activity.json | jq '[ .[] | select(.govApproved==\\\"true\\\") ]'","# PowerShell:","(Invoke-RestMethod -Uri 'http://localhost:3000/api/docs/activity.json') | Where-Object { $_.govApproved -eq 'true' } | ConvertTo-Json -Depth 5"],"verify":["La risposta contiene solo eventi con govApproved=true (badge ? nel log)"],"references":["EasyWay-DataPortal/easyway-portal-api/src/routes/docs.ts","Wiki/EasyWayData.wiki/activity-log.md"],"updated":"2025-10-19T00:00:00Z"}
{"id":"kb-scrummaster-seed-boards-031","intent":"scrummaster-seed-boards","question":"Come eseguo il seed di Epics/Features su Azure Boards dal repo?","tags":["scrum","boards","ado","governance"],"preconditions":["az CLI installato","Estensione azure-devops","Login az (o PAT)","OrgUrl e Project configurati"],"steps":["# Dry‑run (anteprima):","pwsh scripts/ado/boards-seed.ps1 -DryRun","# Esecuzione reale:","pwsh scripts/ado/boards-seed.ps1 -OrgUrl https://dev.azure.com/<org> -Project <project>","# (Opz.) Impostare Area/Iteration:","pwsh scripts/ado/boards-seed.ps1 -OrgUrl https://dev.azure.com/<org> -Project <project> -AreaPath '<project>\\Area' -IterationPath '<project>\\Sprint 1'"],"verify":["Output: Created/Exists per Epics F0–F5 e Features","In Azure Boards le Features sono collegate (Parent) ai rispettivi Epics"],"references":["scripts/ado/boards-seed.ps1","scripts/ado/README.md","Wiki/EasyWayData.wiki/agents-scrummaster.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-scrummaster-update-links-032","intent":"scrummaster-update-boards-links","question":"Come verifico e sistemo i link Feature→Epic in Azure Boards?","tags":["scrum","boards","ado","governance"],"preconditions":["az CLI + estensione azure-devops","OrgUrl/Project impostati"],"steps":["# Set defaults (una tantum):","az devops configure --defaults organization=https://dev.azure.com/<org> project=<project>","# Trovare Feature senza Parent (WIQL):","az boards query --wiql \"SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType]='Feature' AND [System.TeamProject]=@project AND [System.Parent] IS NULL\"","# Collegare una Feature a un Epic (esempi):","az boards work-item relation add --id <FeatureId> --relation-type System.LinkTypes.Hierarchy-Reverse --target-id <EpicId>","# PowerShell (batch):","$features = (az boards query --wiql \"SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType]='Feature' AND [System.TeamProject]=@project AND [System.Parent] IS NULL\" --output json | ConvertFrom-Json).workItems","foreach($f in $features){ az boards work-item relation add --id $f.id --relation-type System.LinkTypes.Hierarchy-Reverse --target-id <EpicId> }"],"verify":["Le Feature mostrano il Parent corretto","La query WIQL precedente ritorna 0 elementi"],"references":["scripts/ado/README.md","Wiki/EasyWayData.wiki/agents-scrummaster.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-scrummaster-close-sprint-033","intent":"scrummaster-close-sprint","question":"Come chiudo uno sprint e sposto il lavoro residuo al prossimo?","tags":["scrum","boards","ado"],"preconditions":["Iterazioni create (es. Sprint 1, Sprint 2)","Permission su Boards"],"steps":["# Defaults:","az devops configure --defaults organization=https://dev.azure.com/<org> project=<project>","# Elencare item non-Done nell'iterazione corrente:","az boards query --wiql \"SELECT [System.Id],[System.Title] FROM WorkItems WHERE [System.IterationPath] UNDER '<project>\\<team>\\Sprint 1' AND [System.State] <> 'Done'\"","# Spostare i work item alla prossima iterazione (esempio singolo):","az boards work-item update --id <WI_ID> --fields \"System.IterationPath=<project>\\<team>\\Sprint 2\"","# PowerShell (batch move):","$wi = (az boards query --wiql \"SELECT [System.Id] FROM WorkItems WHERE [System.IterationPath] UNDER '<project>\\<team>\\Sprint 1' AND [System.State] <> 'Done'\" --output json | ConvertFrom-Json).workItems","foreach($w in $wi){ az boards work-item update --id $w.id --fields \"System.IterationPath=<project>\\<team>\\Sprint 2\" }"],"verify":["Backlog Sprint 1 contiene solo 'Done'","Backlog Sprint 2 contiene i work item spostati"],"references":["scripts/ado/README.md","Wiki/EasyWayData.wiki/agents-scrummaster.md"],"updated":"2025-10-20T00:00:00Z"}
{"id":"kb-docs-001","intent":"wiki-normalize-review","question":"Come eseguo la normalizzazione e review della Wiki?","tags":["docs","wiki","lint"],"preconditions":null,"steps":["pwsh scripts/agent-docs-review.ps1 -Wiki","pwsh Wiki/EasyWayData.wiki/scripts/normalize-project.ps1 -Root Wiki/EasyWayData.wiki -EnsureFrontMatter","pwsh Wiki/EasyWayData.wiki/scripts/review-run.ps1 -Root Wiki/EasyWayData.wiki -Mode kebab -CheckAnchors","pwsh Wiki/EasyWayData.wiki/scripts/generate-master-index.ps1 -Root Wiki/EasyWayData.wiki","pwsh Wiki/EasyWayData.wiki/scripts/export-chunks-jsonl.ps1 -Root Wiki/EasyWayData.wiki","pwsh Wiki/EasyWayData.wiki/scripts/lint-atomicity.ps1 -Root Wiki/EasyWayData.wiki"],"verify":["Nessun errore nel naming/anchor check","Artefatti e report generati in Wiki/EasyWayData.wiki/logs/reports"],"rollback":null,"outputs":null,"references":["Wiki/EasyWayData.wiki/scripts/scripts.md"],"updated":"2025-10-20T10:05:23.3293144Z"}
{"id":"kb-agent-dlk-ensure-structure-080b","intent":"dlk-ensure-structure","question":"C'è un file di esempio per currentPaths?","tags":["datalake","whatif","inputs"],"steps":["Usa: agents/agent_datalake/templates/currentPaths.sample.json","Imposta params.currentPathsFile a quel percorso nel tuo intent"],"verify":["Vedi changesPreview generata in base ai path di esempio"],"references":["agents/agent_datalake/templates/currentPaths.sample.json"],"updated":"2025-10-21T00:00:00Z"}
{"id":"kb-etl-bootstrap-100","intent":"etl-pipeline-bootstrap","question":"Come avvio la documentazione di una nuova pipeline ETL/ELT?","tags":["etl","playbook","template"],"steps":["Apri il Template: Wiki/EasyWayData.wiki/etl-elt-template.md e duplica la pagina","Compila sezioni Sorgente, Naming/Partizionamento, Mapping, DQ, Schedule, Monitoraggio, Audit","Collega la pagina alla sezione Indice e al Playbook"],"verify":["Pagina creata con front matter completo","Sezioni minime compilate","Link dal Playbook e dall'Indice"],"references":["Wiki/EasyWayData.wiki/etl-elt-playbook.md","Wiki/EasyWayData.wiki/etl-elt-template.md","Wiki/EasyWayData.wiki/docs-conventions.md"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-etl-tech-choices-101","intent":"etl-technology-choices","question":"Quali tecnologie uso per orchestrazione/esecuzione?","tags":["etl","tech","choices"],"steps":["Per dev: Airflow (Small, managed) + Databricks (job cluster piccolo, auto-terminate)","Per copy semplici: ADF Copy/Mapping Data Flow","Per orchestrazioni complesse: Airflow","Per ELT compute-intensive: Databricks"],"verify":["Decisione esplicitata nella pagina Scelte Tecnologiche","Guardrail di costo e governance elencati"],"references":["Wiki/EasyWayData.wiki/etl-elt-technology-choices.md"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-etl-logging-102","intent":"etl-logging-audit","question":"Come traccio l'esecuzione delle pipeline (audit log)?","tags":["etl","audit","logging"],"steps":["Scrivere log esecuzione in portal-audit/etl-execution-logs/ con chiavi minime","Registrare status, tempi, KPI volumetrici, correlation id","Linkare ai log tecnici di dettaglio (Log Analytics / Storage)"],"verify":["File/log presenti per ogni run","Dashboard/reader possono ricostruire stato e trend"],"references":["Wiki/EasyWayData.wiki/etl-elt-playbook.md","Wiki/EasyWayData.wiki/easyway-webapp/03-datalake-dev.md"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-etl-dq-bootstrap-103","intent":"etl-dq-bootstrap","question":"Come definisco e documento le regole DQ della pipeline?","tags":["etl","dq","playbook"],"steps":["Parti da ETL – DQ Framework","Compila in pagina per-pipeline le regole per classe (completezza, formato, dominio, range, unicità, referenziale)","Definisci severità e gestione scarti (invalidrows)"],"verify":["Regole elencate e mappate alla pipeline","Esito DQ documentato (OK/BLOCKED)"],"references":["Wiki/EasyWayData.wiki/etl-dq-framework.md","Wiki/EasyWayData.wiki/etl-elt-template.md"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-etl-table-log-104","intent":"etl-table-log","question":"Come strutturo i log delle esecuzioni ETL?","tags":["etl","logging","audit"],"steps":["Definisci le tabelle/file di log (workflow, run, task_run, metric, alert)","Assicura che gli agenti scrivano Output Contract con summary/stato/tempi/KPI","Collega i log tecnici di dettaglio con correlation id"],"verify":["Query operative: ultimo stato, fallimenti 24h, stuck, SLA breaches, throughput"],"references":["Wiki/EasyWayData.wiki/etl-table-log-model.md","Wiki/EasyWayData.wiki/etl-elt-playbook.md"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-etl-governance-sla-106","intent":"etl-governance-sla","question":"Come definisco SLA/SLO ed escalation per una pipeline?","tags":["etl","sla","governance"],"steps":["Definire SLI (puntualità, success, throughput, DQ, latency)","Assegnare SLO per tier (1/2/3) e RTO/RPO","Stabilire error budget e gating (Doc Alignment, Output Validation, WhatIf)","Mappare alerting ed escalation per severity e canali","Pubblicare runbook di fallback e collegare dashboard"],"verify":["SLO versionati in repo","Alerting attivo","Runbook accessibili"],"references":["Wiki/EasyWayData.wiki/etl-governance-sla.md","Wiki/EasyWayData.wiki/output-contract.md","Wiki/EasyWayData.wiki/doc-alignment-gate.md"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-etl-slo-validate-107","intent":"etl-slo-validate","question":"Come valido la SLO spec di una pipeline?","tags":["etl","sla","slo"],"steps":["Parti dal sample JSON: agents/agent_datalake/templates/slo/slo.sample.json","Imposta il path nel template intent: agents/agent_datalake/templates/intent.etl-slo-validate.sample.json","Esegui: pwsh scripts/ewctl.ps1 --engine ps --intent etl-slo-validate"],"verify":["Output JSON ok=true se campi minimi presenti","In caso contrario, 'missing' elenca i campi da completare"],"references":["Wiki/EasyWayData.wiki/etl-governance-sla.md","scripts/agent-datalake.ps1"],"updated":"2025-10-26T00:00:00Z"}
{"id":"kb-n8n-deploy-001","intent":"orchestrator.n8n.deploy","question":"Come deployo/aggiorno il workflow orchestratore n8n per gestire gli intent agentici?","tags":["n8n","orchestration","agents"],"preconditions":["n8n installato e raggiungibile (docker/service)","PowerShell 7+","Accesso admin n8n"],"steps":["Consulta Wiki/EasyWayData.wiki/orchestrations/orchestrator-n8n.md per nodi standard","Crea/aggiorna in n8n il workflow 'orchestrator-dispatch' con nodi: Webhook -> Validate Intent (JSON Schema orchestrator.n8n.dispatch) -> Gate precheck (ewctl) -> Dispatch (ewctl intent target) -> Parse/Log","Attiva il workflow (toggle verde) e salva"],"verify":["Webhook risponde 200 e restituisce dispatch_ok=true con run_id valorizzato"],"outputs":["n8n workflow 'orchestrator-dispatch' attivo"],"references":["docs/agentic/templates/intents/orchestrator.n8n.dispatch.intent.json","Wiki/EasyWayData.wiki/orchestrations/orchestrator-n8n.md"],"updated":"2025-10-30T00:00:00Z"}
{"verify":["La mappa contiene almeno 1 workflow completo (wf.excel-csv-upload) e i punti di ingresso (ewctl/n8n)"],"id":"kb-docs-skeleton-601","question":"Dove trovo lo scheletro cross-domain (control-plane + domini + catalogo intent)?","updated":"2026-01-04T07:19:17Z","intent":"docs:skeleton","steps":["Apri `Wiki/EasyWayData.wiki/control-plane/index.md`","Apri `Wiki/EasyWayData.wiki/domains/index.md`","Apri `Wiki/EasyWayData.wiki/orchestrations/intents-catalog-global.md`","Apri `Wiki/EasyWayData.wiki/orchestrations/mapping-matrix.md`"],"references":["Wiki/EasyWayData.wiki/start-here.md"],"tags":["docs","skeleton","governance"]}
{"references":["Wiki/EasyWayData.wiki/howto-what-first-team.md"],"tags":["lint","docs","gates"],"verify":["Exit code 0","Nessun report missing"],"question":"Come eseguo i lint WHAT-first e frontmatter Wiki?","updated":"2026-01-04T07:19:17Z","intent":"whatfirst-lint","preconditions":["PowerShell 7+"],"id":"kb-lint-whatfirst-602","steps":["pwsh scripts/wiki-frontmatter-lint.ps1 -FailOnError","pwsh scripts/whatfirst-lint.ps1 -FailOnError"]}
{"references":["Wiki/EasyWayData.wiki/doc-alignment-gate.md","scripts/doc-alignment-check.ps1"],"preconditions":["PowerShell 7+"],"tags":["docs","gates","alignment"],"question":"Come eseguo il Doc Alignment Gate (intent template + KB + Wiki)?","intent":"doc-alignment","verify":["Output JSON: ok=true"],"updated":"2026-01-04T07:29:13Z","steps":["pwsh scripts/ewctl.ps1 --engine ps --intent doc-alignment --noninteractive","(opz.) pwsh scripts/doc-alignment-check.ps1"],"id":"kb-doc-alignment-603"}
{"references":["docs/ci/ewctl-gates.md","scripts/ewctl.ps1"],"preconditions":["PowerShell 7+"],"tags":["governance","gates","ci"],"question":"Come eseguo tutti i gate di governance (Checklist + DB Drift + KB Consistency)?","intent":"governance-gates","verify":["Gates verdi (exit code 0)","Evento aggiunto a agents/logs/events.jsonl"],"updated":"2026-01-04T07:29:13Z","steps":["pwsh scripts/ewctl.ps1 --engine ps --checklist --dbdrift --kbconsistency --noninteractive --logevent"],"id":"kb-gov-gates-604"}
{"references":["docs/ci/ewctl-gates.md","scripts/ewctl.ps1"],"preconditions":["PowerShell 7+","Variabili DB/Flyway/connessione configurate in ambiente CI o locale"],"tags":["db","drift","gates"],"question":"Come eseguo il DB Drift gate via ewctl?","intent":"dbdrift","verify":["Artifact drift.json pubblicato in CI (se configurato) oppure output ok"],"updated":"2026-01-04T07:29:13Z","steps":["pwsh scripts/ewctl.ps1 --engine ps --dbdrift --noninteractive"],"id":"kb-dbdrift-605"}
{"references":["docs/ci/ewctl-gates.md","scripts/ewctl.ps1"],"preconditions":["PowerShell 7+"],"tags":["kb","docs","gates"],"question":"Come eseguo il KB Consistency gate via ewctl?","intent":"kbconsistency","verify":["Exit code 0 o report che elenca le inconsistenze"],"updated":"2026-01-04T07:29:13Z","steps":["pwsh scripts/ewctl.ps1 --engine ps --kbconsistency --noninteractive"],"id":"kb-kbconsistency-606"}
{"updated":"2026-01-04T08:08:31.4632728Z","tags":["db","dba","access"],"intent":"db-user:create","question":"Come creo un DB user (agent_dba)?","references":["scripts/agent-dba.ps1","agents/agent_dba/manifest.json","agents/agent_dba/templates/intent.db-user-create.sample.json","Wiki/EasyWayData.wiki/db-user-access-management.md"],"verify":["Output JSON ok=true (o outcome=success)"],"id":"kb-db-user-create-607","steps":["pwsh scripts/agent-dba.ps1 -Action 'db-user:create' -IntentPath 'agents/agent_dba/templates/intent.db-user-create.sample.json' -NonInteractive -WhatIf"],"preconditions":["PowerShell 7+","Connessione DB configurata"]}
{"updated":"2026-01-04T08:08:31.4632728Z","tags":["db","dba","rotate"],"intent":"db-user:rotate","question":"Come ruoto credenziali/secret di un DB user (agent_dba)?","references":["scripts/agent-dba.ps1","agents/agent_dba/manifest.json","agents/agent_dba/templates/intent.db-user-rotate.sample.json","Wiki/EasyWayData.wiki/db-user-access-management.md"],"verify":["Output JSON ok=true (o outcome=success)"],"id":"kb-db-user-rotate-608","steps":["pwsh scripts/agent-dba.ps1 -Action 'db-user:rotate' -IntentPath 'agents/agent_dba/templates/intent.db-user-rotate.sample.json' -NonInteractive -WhatIf"],"preconditions":["PowerShell 7+","Connessione DB configurata"]}
{"updated":"2026-01-04T08:08:31.4632728Z","tags":["db","dba","revoke"],"intent":"db-user:revoke","question":"Come revoco un DB user (agent_dba)?","references":["scripts/agent-dba.ps1","agents/agent_dba/manifest.json","agents/agent_dba/templates/intent.db-user-revoke.sample.json","Wiki/EasyWayData.wiki/db-user-access-management.md"],"verify":["Output JSON ok=true (o outcome=success)"],"id":"kb-db-user-revoke-609","steps":["pwsh scripts/agent-dba.ps1 -Action 'db-user:revoke' -IntentPath 'agents/agent_dba/templates/intent.db-user-revoke.sample.json' -NonInteractive -WhatIf"],"preconditions":["PowerShell 7+","Connessione DB configurata"]}
{"updated":"2026-01-04T08:08:31.4632728Z","tags":["datalake","log","export"],"intent":"dlk-export-log","question":"Come esporto i log di ACL/struttura dal Datalake (agent_datalake)?","references":["scripts/agent-datalake.ps1","agents/agent_datalake/manifest.json","agents/agent_datalake/templates/intent.dlk-export-log.sample.json","Wiki/EasyWayData.wiki/datalake-apply-acl.md"],"verify":["Output JSON ok=true (o outcome=success)"],"id":"kb-dlk-export-log-610","steps":["pwsh scripts/agent-datalake.ps1 -ExportLog -IntentPath 'agents/agent_datalake/templates/intent.dlk-export-log.sample.json' -NonInteractive -WhatIf"],"preconditions":["PowerShell 7+","Credenziali Azure disponibili"]}
{"updated":"2026-01-04T08:08:31.4632728Z","tags":["etl","slo","validate","datalake"],"intent":"etl-slo:validate","question":"Come valido lo SLO ETL (agent_datalake)?","references":["scripts/agent-datalake.ps1","agents/agent_datalake/manifest.json","agents/agent_datalake/templates/intent.etl-slo-validate.sample.json"],"verify":["Output JSON ok=true (o outcome=success)"],"id":"kb-etl-slo-validate-611","steps":["pwsh scripts/agent-datalake.ps1 -Action 'etl-slo:validate' -IntentPath 'agents/agent_datalake/templates/intent.etl-slo-validate.sample.json' -NonInteractive -WhatIf"],"preconditions":["PowerShell 7+"]}
{"updated":"2026-01-04T08:08:31.4632728Z","tags":["agent","template","smoke"],"intent":"sample:echo","question":"Come provo l'agente template (sample:echo)?","references":["scripts/agent-template.ps1","agents/agent_template/manifest.json","agents/agent_template/templates/intent.sample-echo.sample.json"],"verify":["Output JSON ok=true e output.message valorizzato"],"id":"kb-sample-echo-612","steps":["pwsh scripts/agent-template.ps1 -Action 'sample:echo' -IntentPath 'agents/agent_template/templates/intent.sample-echo.sample.json' -NonInteractive"],"preconditions":["PowerShell 7+"]}
{"id":"kb-docs-agentic-audit-613","verify":["Tutti gli script ritornano ok=true (o exit code 0)","Le pagine canoniche hanno front matter completo e tag base coerenti"],"question":"Come eseguo l’audit della documentazione agentica (metadati/tag/WHAT-first) e riduco i token?","preconditions":["PowerShell 7+"],"intent":"docs-agentic-audit","steps":["pwsh scripts/wiki-frontmatter-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -FailOnError","pwsh scripts/whatfirst-lint.ps1 -FailOnError","pwsh scripts/doc-alignment-check.ps1 -FailOnError"],"references":["Wiki/EasyWayData.wiki/docs-agentic-audit.md","Wiki/EasyWayData.wiki/docs-conventions.md","Wiki/EasyWayData.wiki/llm-readiness-checklist.md","scripts/wiki-frontmatter-lint.ps1","scripts/whatfirst-lint.ps1","scripts/doc-alignment-check.ps1"],"tags":["docs","governance","audit","agentic"],"updated":"2026-01-04T08:17:07.6039169Z"}
{"id":"kb-docs-frontmatter-fix-614","references":["scripts/wiki-frontmatter-patch.ps1","scripts/wiki-frontmatter-lint.ps1","Wiki/EasyWayData.wiki/docs-agentic-audit.md"],"tags":["docs","wiki","frontmatter","agentic"],"updated":"2026-01-04T08:34:21.7567400Z","steps":["pwsh scripts/wiki-frontmatter-patch.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -Apply","pwsh scripts/wiki-frontmatter-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -FailOnError"],"verify":["wiki-frontmatter-lint ok=true (failures=0)","Le pagine canoniche hanno id/status/owner/tags/llm/entities presenti"],"preconditions":["PowerShell 7+"],"intent":"docs-frontmatter-fix","question":"Come auto-correggo (in massa) il front matter della Wiki per renderla agent-ready?"}
{"question":"Come valido i tag della Wiki con tassonomia controllata (domain/layer/audience/privacy/language)?","intent":"docs-tags-lint","verify":["In dry-run: nessun invalid_value/unknown_facet/invalid_free_tag","In strict: ogni pagina canonica ha tutti i facet obbligatori"],"preconditions":["PowerShell 7+"],"tags":["docs","wiki","tags","taxonomy","lint"],"updated":"2026-01-04T08:41:06.2205044Z","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports","pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -FailOnError"],"id":"kb-docs-tags-lint-615","references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md","Wiki/EasyWayData.wiki/docs-agentic-audit.md"]}
{"id":"kb-docs-tags-lint-phased-616","verify":["Core scope: ok=true e failures=0","All scope: ok=true e failures=0"],"tags":["docs","wiki","tags","taxonomy","gates"],"updated":"2026-01-04T09:13:32.8203127Z","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -FailOnError","(quando core è verde) pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope all -FailOnError"],"preconditions":["PowerShell 7+"],"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","docs/agentic/templates/docs/tag-taxonomy.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"question":"Come abilito enforcement tag a fasi (core → all) con taxonomy controllata?","intent":"docs-tags-lint-phased"}
{"tags":["docs","wiki","tags","taxonomy","gates"],"id":"kb-docs-tags-scope-casistiche-617","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName db-datalake-20 -FailOnError","pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName portal-api-frontend-20 -FailOnError","pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName controlplane-governance-20 -FailOnError"],"question":"Come eseguo enforcement tag a fasi su casistiche (20 pagine) e le rendo verdi?","preconditions":["PowerShell 7+"],"intent":"docs-tags-scope-casistiche","updated":"2026-01-04T09:25:50.0279544Z","verify":["Ogni casistica ritorna ok=true e failures=0"],"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"]}
{"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"intent":"docs-tags-argos","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName argos-dq-20 -FailOnError"],"id":"kb-docs-tags-argos-618","tags":["docs","wiki","tags","taxonomy","argos"],"updated":"2026-01-04T09:33:15.9723613Z","question":"Come applico/enforzo la tag taxonomy sulle pagine ARGOS (casistica argos-dq-20)?","preconditions":["PowerShell 7+"],"verify":["ok=true e failures=0 per scope argos-dq-20"]}
{"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"tags":["docs","wiki","tags","taxonomy","ops","runbook"],"question":"Come enforzo la tag taxonomy su Runbooks/Operazioni (casistica ops-runbooks-20)?","preconditions":["PowerShell 7+"],"intent":"docs-tags-ops-runbooks","id":"kb-docs-tags-ops-619","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName ops-runbooks-20 -FailOnError"],"verify":["ok=true e failures=0 per scope ops-runbooks-20"],"updated":"2026-01-04T09:41:21.0094843Z"}
{"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"tags":["docs","wiki","tags","taxonomy","frontend","ux"],"question":"Come enforzo la tag taxonomy sulle pagine Frontend UI/UX (casistica frontend-ui-20)?","preconditions":["PowerShell 7+"],"intent":"docs-tags-frontend-ui","id":"kb-docs-tags-frontend-ui-620","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName frontend-ui-20 -FailOnError"],"verify":["ok=true e failures=0 per scope frontend-ui-20"],"updated":"2026-01-04T19:43:15.0738435Z"}
{"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"tags":["docs","wiki","tags","taxonomy","db","programmability"],"question":"Come enforzo la tag taxonomy sulle pagine DB Programmability (casistica db-programmability-rest-20)?","preconditions":["PowerShell 7+"],"intent":"docs-tags-db-programmability-rest","id":"kb-docs-tags-db-programmability-rest-621","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName db-programmability-rest-20 -FailOnError"],"verify":["ok=true e failures=0 per scope db-programmability-rest-20"],"updated":"2026-01-04T20:46:53.0986646Z"}
{"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"tags":["docs","wiki","tags","taxonomy","onboarding","runbook"],"question":"Come enforzo la tag taxonomy sul percorso guidato onboarding + runbook (casistica onboarding-runbook-20)?","preconditions":["PowerShell 7+"],"intent":"docs-tags-onboarding-runbook","id":"kb-docs-tags-onboarding-runbook-622","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName onboarding-runbook-20 -FailOnError"],"verify":["ok=true e failures=0 per scope onboarding-runbook-20"],"updated":"2026-01-04T20:52:46.5336417Z"}
{"references":["scripts/wiki-tags-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/docs-tag-taxonomy.md"],"tags":["docs","wiki","tags","taxonomy","iam","security"],"question":"Come enforzo la tag taxonomy sulle pagine IAM/Security/Compliance (casistica iam-security-20)?","preconditions":["PowerShell 7+"],"intent":"docs-tags-iam-security","id":"kb-docs-tags-iam-security-623","steps":["pwsh scripts/wiki-tags-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports -RequireFacets -RequireFacetsScope core -ScopeName iam-security-20 -FailOnError"],"verify":["ok=true e failures=0 per scope iam-security-20"],"updated":"2026-01-04T21:01:53.9124625Z"}
{"id":"kb-docs-obsidian-624","intent":"docs-obsidian-vault","question":"Come apro la Wiki in Obsidian senza rompere link/frontmatter/attachments?","tags":["docs","wiki","obsidian"],"steps":["Apri come vault la cartella: Wiki/EasyWayData.wiki","Copia (locale) Wiki/EasyWayData.wiki/.obsidian.example in Wiki/EasyWayData.wiki/.obsidian","Verifica in Obsidian: attachment folder=.attachments, markdown links=on, update links=on"],"verify":["Link relativi funzionano (es. da index.md)","Allegati salvati in Wiki/EasyWayData.wiki/.attachments/","I gate wiki-frontmatter-lint e wiki-tags-lint restano verdi"],"references":["Wiki/EasyWayData.wiki/OBSIDIAN.md","Wiki/EasyWayData.wiki/.obsidian.example/app.json","Wiki/EasyWayData.wiki/.obsidian.example/core-plugins.json"],"updated":"2026-01-04T21:21:11.3335865Z"}
{"id":"kb-docs-links-anchors-lint-626","intent":"docs:links-anchors-lint","question":"Come eseguo link-check + anchor-check sulla Wiki (file mancanti e anchor mancanti)?","tags":["docs","wiki","links","anchors","lint"],"preconditions":["PowerShell 7+"],"steps":["pwsh scripts/wiki-links-anchors-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -FailOnError -SummaryOut \"wiki-links-anchors-lint.json\""],"verify":["ok=true e issues=0 nel JSON"],"references":["scripts/wiki-links-anchors-lint.ps1","Wiki/EasyWayData.wiki/scripts/scripts.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-docs-summary-lint-627","intent":"docs:summary-lint","question":"Come enforzo che summary non sia un placeholder (phased per scope)?","tags":["docs","wiki","summary","lint","phased"],"preconditions":["PowerShell 7+"],"steps":["pwsh scripts/wiki-summary-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName \"portal-api-frontend-20\" -FailOnError -SummaryOut \"wiki-summary-lint.portal-api-frontend-20.json\""],"verify":["ok=true e failures=0 nel JSON"],"references":["scripts/wiki-summary-lint.ps1","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/scripts/scripts.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-docs-retrieval-bundles-625","intent":"docs:retrieval-bundles","question":"Come uso i retrieval bundles (bundle→scope) per far caricare a n8n solo la doc necessaria?","tags":["docs","wiki","n8n","retrieval","tokens"],"preconditions":["File scopes presente: docs/agentic/templates/docs/tag-taxonomy.scopes.json"],"steps":["Scegli il bundle (es. n8n.orchestrator-dispatch) in docs/agentic/templates/docs/retrieval-bundles.json","Risolvi scopes[] e recupera l'elenco pagine da tag-taxonomy.scopes.json","Escludi globs (attachments/logs/old/backup) usando default_exclude_globs","Carica solo i file risultanti nel contesto del workflow n8n"],"verify":["Il contesto caricato contiene solo pagine dello scope atteso","Token ridotti rispetto a caricare tutta la Wiki"],"references":["docs/agentic/templates/docs/retrieval-bundles.json","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/orchestrations/n8n-retrieval-bundles.md"],"updated":"2026-01-04T00:00:00Z"}
{"id":"kb-codex-dev-core-bundle-628","intent":"codex:dev-core-bundle","question":"Quale contesto devo dare a GPT-5.2 Codex quando sviluppa sotto EasyWay-DataPortal/?","tags":["codex","dev","retrieval","tokens","docs"],"preconditions":["Bundle definito in docs/agentic/templates/docs/retrieval-bundles.json"],"steps":["Usa il bundle `codex.dev.core` per caricare solo gli scope wiki: governance-all, portal-all, security-all (evita di rileggere tutta la Wiki).","Apri i code entrypoints: EasyWay-DataPortal/README.md, EasyWay-DataPortal/easyway-portal-api/README.md, EasyWay-DataPortal/easyway-portal-api/src/app.ts, EasyWay-DataPortal/easyway-portal-frontend/static/plan-viewer.html.","Poi fai lavorare Codex sul codice in EasyWay-DataPortal/ mantenendo i contratti: intent-contract + output-contract e le policy di docs-agentic-audit."],"verify":["Codex non propone cambiamenti in file fuori da EasyWay-DataPortal/ senza motivo","Le modifiche rispettano i contratti (input/output) e aggiornano KB/Wiki quando cambiano API/DB/Gates"],"references":["docs/agentic/templates/docs/retrieval-bundles.json","docs/agentic/templates/docs/tag-taxonomy.scopes.json","Wiki/EasyWayData.wiki/start-here.md","Wiki/EasyWayData.wiki/docs-agentic-audit.md","Wiki/EasyWayData.wiki/orchestrations/n8n-retrieval-bundles.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-db-ddl-inventory-629","intent":"db:ddl-inventory","question":"Come allineo la Wiki 01_database_architecture all'elenco tabelle/SP corrente (Flyway)?","tags":["db","ddl","docs","inventory","wiki","flyway"],"preconditions":["PowerShell 7+","Migrazioni presenti in `db/flyway/sql/`"],"steps":["Rigenera inventario canonico (Flyway only): `pwsh scripts/db-ddl-inventory.ps1 -WriteWiki -SummaryOut db-ddl-inventory.json`.","(Opzionale, audit) includi snapshot/provisioning legacy: `pwsh scripts/db-ddl-inventory.ps1 -IncludeSnapshot -IncludeProvisioning -WriteWiki -SummaryOut db-ddl-inventory.json` (non canonico).","(Opzionale, audit) includi export `DDL_PORTAL_*`: `pwsh scripts/db-ddl-inventory.ps1 -IncludeLegacy -WriteWiki` (solo delta).","Apri `Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/ddl-inventory.md` e verifica che rifletta Flyway (nessun duplicato tipo `TENANT` vs `TENANTS`)."],"verify":["`db-ddl-inventory.json` parseable e counts coerenti","Wiki ddl-inventory dichiara Flyway come fonte corrente"],"references":["db/flyway/sql/","Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/ddl-inventory.md","scripts/db-ddl-inventory.ps1","old/db/README.md"],"updated":"2026-01-06T00:00:00Z"}
{"id":"kb-n8n-db-ddl-inventory-633","intent":"n8n:db-ddl-inventory","question":"Come uso n8n per rigenerare l'inventario DB (DDL -> Wiki) usando agent_dba?","tags":["n8n","db","ddl","inventory","agent_dba","docs"],"preconditions":["Bundle `n8n.db.core` presente in docs/agentic/templates/docs/retrieval-bundles.json","PowerShell 7+ (runner n8n o macchina di esecuzione)"],"steps":["Carica il contesto con bundle `n8n.db.core` (DB scope Wiki + root tecnico `db/flyway/`; opzionale `old/db/` per audit).","Valida input contro schema intent `db.ddl-inventory` (docs/agentic/templates/intents/db.ddl-inventory.intent.json).","Esegui l'azione: `pwsh scripts/agent-dba.ps1 -Action db-doc:ddl-inventory -IntentPath agents/agent_dba/templates/intent.db-ddl-inventory.sample.json -NonInteractive`.","Verifica artifact `db-ddl-inventory.json` e la pagina `Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/ddl-inventory.md`.","Logga l'esito (eventi/diario) e pubblica artifact in CI se applicabile."],"verify":["La pagina ddl-inventory.md contiene l'elenco aggiornato di tabelle/SP","L'output JSON è parseable e contiene counts coerenti"],"references":["docs/agentic/templates/docs/retrieval-bundles.json","docs/agentic/templates/intents/db.ddl-inventory.intent.json","Wiki/EasyWayData.wiki/orchestrations/n8n-db-ddl-inventory.md","scripts/agent-dba.ps1","scripts/db-ddl-inventory.ps1"],"updated":"2026-01-06T00:00:00Z"}
{"id":"kb-db-table-create-634","intent":"db:table-create","question":"Come creo una nuova tabella in modo agentico (spec -> migrazione Flyway -> pagina Wiki) usando agent_dba e n8n?","tags":["db","table","flyway","wiki","agent_dba","n8n"],"preconditions":["Intent WHAT disponibile: docs/agentic/templates/intents/db.table.create.intent.json","Bundle n8n disponibile: n8n.db.table.create","PowerShell 7+","Policy naming/PII note"],"steps":["Compila un intent `db.table.create` (schema, table, columns, indexes, privacy/PII, tenanting).","Esegui in WhatIf: `pwsh scripts/agent-dba.ps1 -Action db-table:create -IntentPath agents/agent_dba/templates/intent.db-table-create.sample.json -WhatIf -NonInteractive`.","Genera gli artefatti (scrive file): `pwsh scripts/agent-dba.ps1 -Action db-table:create -IntentPath <your_intent.json> -NonInteractive`.","Verifica che sia stato creato un file `db/flyway/VYYYYMMDDHHMMSS__create_<schema>_<table>.sql` e una pagina tabella sotto `Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/01b_schema_structure/<SCHEMA>/tables/`.","(Opzionale) Applica su DB solo con gates e approvazione (step separato)."],"verify":["DDL/migrazione presente e idempotente","Pagina Wiki tabella presente con link al DDL","Nessuna ambiguita tra doc e source-of-truth"],"references":["docs/agentic/templates/intents/db.table.create.intent.json","docs/agentic/templates/orchestrations/db-table-create.manifest.json","docs/agentic/templates/docs/retrieval-bundles.json","Wiki/EasyWayData.wiki/orchestrations/n8n-db-table-create.md","Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/howto-create-table.md","scripts/db-generate-table-artifacts.ps1","scripts/agent-dba.ps1","agents/agent_dba/templates/intent.db-table-create.sample.json"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-docs-index-pages-630","intent":"docs:index-pages","question":"Come gestisco le pagine `index.md` senza ambiguità (per agenti e persone)?","tags":["docs","wiki","index","naming","agent-ready"],"preconditions":null,"steps":["Lascia `index.md` come entrypoint standard della cartella quando serve un indice locale.","Nel frontmatter usa un `title` specifico (non `index`/`Indice`) e una `summary` descrittiva (non placeholder tipo “Documento su …”).","Nel contenuto aggiungi `Breadcrumb:` e una lista link canonici; evita l’auto-link a `./index.md`.","Se l’indice è operativo (runbook/howto/orchestration/intent), compila anche `## Domande a cui risponde` con 3–7 domande mirate."],"verify":["Il titolo identifica univocamente lo scope della cartella","Nessun placeholder in summary/next","Breadcrumb e link canonici presenti"],"references":["Wiki/EasyWayData.wiki/docs-conventions.md","Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/index.md"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-docs-index-lint-631","intent":"docs:index-lint","question":"Come enforzo in CI che le pagine `index.md` abbiano title/summary non ambigui (Obsidian+agent-friendly)?","tags":["docs","wiki","index","lint","obsidian","agent-ready"],"preconditions":["PowerShell 7+"],"steps":["Esegui il lint su uno scope (phased): pwsh scripts/wiki-index-lint.ps1 -Path \"Wiki/EasyWayData.wiki\" -ExcludePaths logs/reports,old,.attachments -ScopesPath \"docs/agentic/templates/docs/tag-taxonomy.scopes.json\" -ScopeName \"portal-api-frontend-20\" -FailOnError -SummaryOut \"wiki-index-lint.portal-api-frontend-20.json\"","In CI abilita `ENABLE_WIKI_INDEX_LINT=true` (azure-pipelines.yml) per bloccare regressioni sugli scope curati.","Per ogni failure: rendi `title` specifico (kebab-case) e `summary` descrittiva (non “Documento su …”)."],"verify":["ok=true e failures=0 nel JSON","Artifact `wiki-index-lint/` pubblicato dalla pipeline"],"references":["scripts/wiki-index-lint.ps1","Wiki/EasyWayData.wiki/docs-conventions.md","azure-pipelines.yml"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-obsidian-noise-reduction-632","intent":"docs:obsidian-noise-reduction","question":"Come riduco il rumore in Obsidian (nascondere report) senza perdere audit trail?","tags":["docs","wiki","obsidian","noise","reports"],"preconditions":["Obsidian installato","Vault aperto su `Wiki/EasyWayData.wiki` (oppure su `Wiki/`)"],"steps":["Non spostare/cancellare i report automaticamente: sono utili per audit/debug e restano esclusi dal retrieval degli agenti.","In Obsidian imposta Files & Links / Excluded files: `logs/`, `old/` (e facoltativo `anchors-*`, `atomicity-*`, `*.bak`, `*.tmp`).","In alternativa copia il template `.obsidian.example` nella cartella `.obsidian` del tuo vault: include già filtri consigliati."],"verify":["I file `anchors-*` e `atomicity-*` non appaiono nel file explorer Obsidian","I lints CI continuano a escludere `logs/reports`, `old`, `.attachments`"],"references":["Wiki/EasyWayData.wiki/OBSIDIAN.md","Wiki/EasyWayData.wiki/.obsidian.example/app.json","Wiki/.obsidian/app.json"],"updated":"2026-01-05T00:00:00Z"}
{"id":"kb-docs-contesto-standard-635","intent":"docs:contesto-standard","question":"Come rendo una pagina Wiki/Doc auto-consistente (contesto, fonti canoniche, comandi, artefatti, gate)?","tags":["docs","wiki","governance","agentic","context","kb"],"preconditions":["PowerShell 7+ (per rigenerazioni)"],"steps":["Aggiungi (o aggiorna) la sezione `## Contesto (repo)` seguendo `Wiki/EasyWayData.wiki/onboarding/documentazione-contesto-standard.md`.","Nel contesto cita sempre: `agents/goals.json`, `scripts/ewctl.ps1`, `agents/kb/recipes.jsonl`, `agents/logs/events.jsonl`, e gli artefatti canonici della pagina.","Aggiungi `## Come rigenerare (idempotente)` con almeno un comando happy-path e uno diagnostico (se applicabile).","Dopo modifiche Wiki, rigenera l\u0027indice: `pwsh Wiki/EasyWayData.wiki/scripts/export-chunks-jsonl.ps1 -Root Wiki/EasyWayData.wiki`.","Prima del merge, passa i gate (se abilitati): `pwsh scripts/ewctl.ps1 --engine ps --checklist --dbdrift --kbconsistency --noninteractive --logevent`."],"verify":["La pagina spiega dove sta la source-of-truth e come rigenerare gli output","I link sono cliccabili e puntano a file/pagine esistenti","`Wiki/EasyWayData.wiki/chunks_master.jsonl` aggiornato dopo modifiche Wiki"],"references":["Wiki/EasyWayData.wiki/onboarding/documentazione-contesto-standard.md","agents/goals.json","scripts/ewctl.ps1","agents/kb/recipes.jsonl","agents/logs/events.jsonl","Wiki/EasyWayData.wiki/scripts/export-chunks-jsonl.ps1","Wiki/EasyWayData.wiki/chunks_master.jsonl"],"updated":"2026-01-06T00:00:00Z"}
{"id":"kb-db-provision-flyway-dev-636","intent":"db:provision-dev-flyway","question":"Come faccio provisioning DB in dev/local in modo agentico usando Flyway (source-of-truth)?","tags":["db","flyway","provisioning","devx","agentic"],"preconditions":["Flyway CLI installato (comando `flyway` in PATH)","Env o parametri per connessione (no segreti nel repo)"],"steps":["Imposta le env: `FLYWAY_URL`, `FLYWAY_USER`, `FLYWAY_PASSWORD` (oppure passa `-Url/-User/-Password`).","Esegui validate: `pwsh db/provisioning/apply-flyway.ps1 -Action validate`.","Esegui migrate (richiede conferma): `pwsh db/provisioning/apply-flyway.ps1 -Action migrate`.","Su DB già esistenti, usa baseline prima del migrate: `pwsh db/provisioning/apply-flyway.ps1 -Action baseline -BaselineVersion 1`."],"verify":["`flyway validate` OK","Tabella `flyway_schema_history` presente e migrazioni applicate"],"references":["db/provisioning/apply-flyway.ps1","db/flyway/flyway.conf","db/flyway/sql/","Wiki/EasyWayData.wiki/easyway-webapp/01_database_architecture/flyway.md"],"updated":"2026-01-06T00:00:00Z"}
