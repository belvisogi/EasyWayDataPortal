{"id":"kb-create-table-users-ex1","intent":"create_table_users","payload":{"entity":"USERS","schema":"PORTAL","columns":[{"name":"user_id","type":"NVARCHAR(50)","constraints":["NOT NULL","PRIMARY KEY"]},{"name":"tenant_id","type":"NVARCHAR(50)","constraints":["NOT NULL"]},{"name":"email","type":"NVARCHAR(255)","constraints":["NOT NULL","UNIQUE"]},{"name":"created_at","type":"DATETIME2","constraints":["NOT NULL"]}],"ndg":{"sequence":"SEQ_USER_ID","prefix":"USR","width":9},"tags":["create_table","db","onboarding"],"metadata":{"env":"staging","owner":"team-dba"}},"examples":["Minimal intent per creazione tabella USERS"],"expected_plan":{"plan":{"id":"plan-example-create-table-users-001","intent":"create_table_users","recipeId":"kb-create-table-users-ex1","suggestion":{"agent":"agent_dba","action":"ps","args":["scripts/agent-dba.ps1","--generate-ddl"]},"manifests":[{"name":"agent_dba","role":"dba"},{"name":"agent_docs_review","role":"docs"}],"checklistSuggestions":{"agent_dba":{"mandatory":["[seq-ndg-check] Verificare presenza sequence SEQ_USER_ID","[naming-check] Assicurarsi che lo schema sia PORTAL.*"],"advisory":["[perf-index-suggest] Valutare index su tenant_id","[perf-index-suggest] Valutare index su email"]},"agent_docs_review":{"mandatory":[],"advisory":["[doc-update-required] Aggiornare Wiki: USAGE/USERS.md"]}},"preview":{"sql":"CREATE TABLE PORTAL.USERS ( user_id NVARCHAR(50) PRIMARY KEY NOT NULL, tenant_id NVARCHAR(50) NOT NULL, email NVARCHAR(255) NOT NULL, created_at DATETIME2 NOT NULL );","diff":"---\n+++ Add PORTAL.USERS\n@@\n+ CREATE TABLE PORTAL.USERS (...)\n","runlog":[{"step":"generate-ddl","outcome":"simulated","details":"DDL generato da template agent_dba"}]},"timestamp":"2025-10-20T20:00:00Z","author":"wizard@easyway"}}}
{"id":"kb-update-docs-users-ex1","intent":"update_docs_users","payload":{"doc_path":"Wiki/EasyWayData.wiki/USAGE/USERS.md","change_summary":"Aggiunta sezione NDG e naming conventions","examples":["snippet: NDG naming examples","snippet: extended properties example"],"tags":["docs","kb","onboarding"],"metadata":{"owner":"team-docs","priority":"low"}},"examples":["Intent per aggiornare la documentazione USERS"],"expected_plan":{"plan":{"id":"plan-example-update-docs-users-001","intent":"update_docs_users","recipeId":"kb-update-docs-users-ex1","suggestion":{"agent":"agent_docs_review","action":"ps","args":["scripts/agent-docs-review.ps1","--update-wiki","--path","Wiki/EasyWayData.wiki/USAGE/USERS.md"]},"manifests":[{"name":"agent_docs_review","role":"docs"}],"checklistSuggestions":{"agent_docs_review":{"mandatory":["[doc-update-required] Aggiornare la pagina Wiki pertinente (link nella PR)","[doc-links-check] Controllare che tutti i link interni siano validi"],"advisory":["[kb-consistency-suggest] Usare template KB standard per nuove ricette"]}},"preview":{"diff":"---\n+++ Update USAGE/USERS.md\n@@\n+ + Sezione NDG e naming: ...\n","runlog":[{"step":"generate-doc-diff","outcome":"simulated","details":"Diff di documentazione generato"}]},"timestamp":"2025-10-20T20:00:00Z","author":"wizard@easyway"}}}
{"id":"kb-infra-plan-ex1","intent":"infra-plan-sample","payload":{"module":"infra/terraform/main.tf","variables":{"project_name":"easyway","resource_group_name":"rg-easyway-dev","storage_account_name":"stgeasyway"},"tags":["infra","terraform","plan"],"metadata":{"env":"dev","owner":"team-infra"}},"examples":["Intent per generare piano terraform di esempio"],"expected_plan":{"plan":{"id":"plan-example-infra-plan-001","intent":"infra-plan","recipeId":"kb-infra-plan-ex1","suggestion":{"agent":"agent_governance","action":"ps","args":["scripts/agent-governance.ps1","--terraform-plan"]},"manifests":[{"name":"agent_governance","role":"governance"},{"name":"agent_dba","role":"dba"}],"checklistSuggestions":{"agent_governance":{"mandatory":["[governance-terraform-check] Verificare che le policy di naming e RBAC siano rispettate"],"advisory":["[infra-cost-suggest] Valutare impatto costi per storage_account_name"]}},"preview":{"planOutput":"Simulated terraform plan: 3 resources to add, no changes to existing.","runlog":[{"step":"terraform-plan","outcome":"simulated","details":"terraform plan (simulated) - no apply performed"}]},"timestamp":"2025-10-20T20:00:00Z","author":"wizard@easyway"}}}
