{
  "version": "1.0.0",
  "last_updated": "2026-02-07",
  "compatibility_rules": {
    "n8n": {
      "1.123.20": {
        "requires": {
          "postgres": {
            "min": "13.0.0",
            "max": "16.99.99",
            "recommended": "15.10.0",
            "reason": "N8N uses PostgreSQL-specific features introduced in v13"
          },
          "node": {
            "min": "18.0.0",
            "max": "20.99.99",
            "recommended": "20.11.0",
            "reason": "N8N codebase uses Node 18+ features"
          }
        },
        "compatible_with": {
          "qdrant": {
            "min": "1.8.0",
            "tested": ["1.12.4", "1.11.0"],
            "notes": "Qdrant v1.8+ requires API key, ensure N8N workflows updated"
          },
          "traefik": {
            "min": "2.0.0",
            "max": "2.99.99",
            "known_issues": {
              "3.0-3.2": "Docker client incompatibility - use v2.10 or Caddy instead"
            }
          }
        },
        "breaking_changes": {
          "from_1.100.0": [
            "Database schema migration required",
            "Workflow syntax changes for custom nodes",
            "Environment variable N8N_BLOCK_ENV_ACCESS_IN_NODE default changed"
          ]
        }
      }
    },

    "qdrant": {
      "1.12.4": {
        "requires": {
          "docker_api": {
            "min": "1.40",
            "reason": "Uses modern Docker healthcheck features"
          }
        },
        "api_version": "v1",
        "breaking_changes": {
          "from_1.7.x": [
            "API key authentication now enforced by default",
            "Collection schema validation stricter",
            "Embeddings dimension validation required"
          ],
          "from_1.0.x": [
            "REST API endpoints restructured",
            "gRPC protocol version updated",
            "Snapshot format incompatible"
          ]
        },
        "compatible_clients": {
          "python": ">=1.7.0",
          "javascript": ">=1.8.0",
          "n8n_node": ">=0.3.0"
        }
      }
    },

    "postgres": {
      "15.10": {
        "requires": {
          "docker_api": {
            "min": "1.40"
          }
        },
        "compatible_with": {
          "n8n": {
            "min": "0.180.0",
            "notes": "N8N requires PostgreSQL 13+ for JSONB operations"
          },
          "pgvector": {
            "versions": ["0.5.0", "0.6.0"],
            "notes": "For vector embeddings if needed"
          }
        },
        "breaking_changes": {
          "from_14.x": [
            "Minor SQL syntax changes",
            "Performance improvements in JSONB indexing"
          ],
          "from_13.x": [
            "New security hardening defaults",
            "SSL/TLS configuration changes"
          ]
        },
        "eol_date": "2027-11-11",
        "security_support_until": "2027-11-11"
      }
    },

    "traefik": {
      "2.10": {
        "requires": {
          "docker_api": {
            "min": "1.24",
            "actual_requirement": "1.44",
            "issue": "Traefik binary ships with Docker client v1.24 which is incompatible with modern Docker Engine",
            "workaround": "Remove :ro from Docker socket mount (reduces security)"
          }
        },
        "compatible_with": {
          "docker_engine": {
            "min": "19.03",
            "max": "28.99.99",
            "known_issues": {
              "29.0+": "Docker API 1.44+ requirement conflicts with Traefik embedded client 1.24"
            }
          }
        },
        "eol_date": "2024-06-30",
        "status": "⚠️ EOL - upgrade recommended",
        "migration_path": {
          "option_1": {
            "target": "caddy:2.8-alpine",
            "effort": "medium",
            "benefits": ["Auto HTTPS", "Simpler config", "No Docker API issues"]
          },
          "option_2": {
            "target": "nginx:1.25-alpine",
            "effort": "medium",
            "benefits": ["Battle-tested", "High performance", "Manual config"]
          },
          "option_3": {
            "target": "traefik:v2.10 with file provider",
            "effort": "low",
            "benefits": ["Keep Traefik", "No Docker discovery"],
            "drawbacks": ["Manual route configuration"]
          }
        }
      },
      "3.0": {
        "status": "❌ INCOMPATIBLE",
        "reason": "Docker client 1.24 embedded, requires Docker API 1.44+",
        "tested": ["3.0", "3.1", "3.2"],
        "result": "All versions fail with: 'client version 1.24 is too old'",
        "recommendation": "Do not use until Traefik releases images with updated Docker client"
      }
    },

    "gitlab": {
      "17.8.1": {
        "requires": {
          "gitlab_runner": {
            "min": "17.8.0",
            "max": "17.8.99",
            "reason": "Runner and CE versions must match major.minor"
          },
          "docker_api": {
            "min": "1.40"
          },
          "postgresql": {
            "min": "13.0.0",
            "recommended": "14.0.0"
          }
        },
        "eol_date": "2026-03-22",
        "next_version": "17.9.0",
        "breaking_changes": {
          "from_17.7.x": [
            "Container registry metadata database required",
            "CI/CD pipeline syntax updates"
          ]
        }
      }
    },

    "docker_engine": {
      "29.1.5": {
        "api_version": "1.52",
        "minimum_client_version": "1.44",
        "compatible_with": {
          "traefik": {
            "status": "⚠️ INCOMPATIBLE",
            "versions": ["2.x", "3.x"],
            "reason": "All Traefik images ship with Docker client 1.24",
            "resolution": "Use alternative reverse proxy (Caddy, Nginx)"
          },
          "docker_compose": {
            "min": "2.0.0",
            "recommended": "2.24.0"
          }
        }
      }
    },

    "caddy": {
      "2.8": {
        "requires": {
          "docker_api": {
            "min": "1.40"
          }
        },
        "compatible_with": {
          "docker_engine": "all modern versions",
          "n8n": "all versions",
          "automatic_https": true
        },
        "migration_from_traefik": {
          "difficulty": "easy",
          "config_mapping": {
            "traefik_labels": "caddyfile_blocks",
            "basic_auth": "basicauth directive",
            "path_prefix": "reverse_proxy matcher"
          },
          "estimated_time": "2-4 hours"
        }
      }
    }
  },

  "vulnerability_exceptions": {
    "postgres:15.10-alpine": {
      "CVE-2024-XXXXX": {
        "reason": "False positive - Alpine base image specific",
        "accepted_risk": "low",
        "mitigation": "Network isolation via Docker networks",
        "review_date": "2026-03-01"
      }
    }
  },

  "update_recommendations": {
    "immediate": [
      {
        "component": "traefik",
        "current": "2.10",
        "action": "migrate_to_caddy",
        "reason": "Docker API incompatibility blocking all routing",
        "priority": "CRITICAL",
        "estimated_effort": "4 hours"
      }
    ],
    "this_week": [
      {
        "component": "gitlab",
        "current": "17.8.1",
        "target": "17.9.0",
        "reason": "Security patches + performance improvements",
        "priority": "HIGH"
      }
    ],
    "this_month": [
      {
        "component": "n8n",
        "current": "1.123.20",
        "target": "1.124.x",
        "reason": "Monthly feature release",
        "priority": "MEDIUM"
      }
    ]
  }
}
